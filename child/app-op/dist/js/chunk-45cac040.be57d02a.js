(window["webpackJsonp_AppOp"]=window["webpackJsonp_AppOp"]||[]).push([["chunk-45cac040"],{"0794":function(e,s,i){"use strict";i.r(s);var t=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",[i("back-header",{attrs:{title:"创建云服务器",back_url:"/instance"}}),i("div",{staticClass:"create-box"},[i("div",{staticClass:"left-box"},[i("el-card",[i("label-block",{attrs:{label:"客户ID",is_required:!0}},[i("div",{staticClass:"input-msg-box"},[i("div",{staticClass:"input-box"},[i("el-input",{model:{value:e.customer_id_input,callback:function(s){e.customer_id_input=s},expression:"customer_id_input"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.error_msg.customer_id.show,expression:"error_msg.customer_id.show"}],staticClass:"error_message"},[e._v(e._s(e.error_msg.customer_id.msg))])])]),i("label-block",{attrs:{label:"客户名称"}},[e._v(" "+e._s(e.customer_name)+" ")]),i("label-block",{attrs:{label:"是否计费"}},[i("el-switch",{model:{value:e.is_billing,callback:function(s){e.is_billing=s},expression:"is_billing"}})],1)],1),i("el-card",[i("label-block",{attrs:{label:"可用区",is_required:!0}},[i("div",{staticClass:"region-box"},[i("Area",{staticClass:"m-right20",attrs:{list:e.region_list,area:e.default_region.region_id},on:{get_area_id:e.FnGetRegionId}}),i("el-select",{attrs:{"value-key":"az_id"},model:{value:e.default_az,callback:function(s){e.default_az=s},expression:"default_az"}},e._l(e.default_region.az_list,(function(e){return i("el-option",{key:e.az_id,attrs:{value:e,label:e.az_name}})})),1)],1)])],1),i("el-card",[i("label-block",{attrs:{label:"网络",is_required:!0}},[i("el-select",{attrs:{"value-key":"vpc_id"},model:{value:e.default_vpc,callback:function(s){e.default_vpc=s},expression:"default_vpc"}},e._l(e.vpc_list,(function(e){return i("el-option",{key:e.vpc_id,attrs:{value:e,label:e.vpc_name}})})),1),e.error_msg.vpc_id.show?i("span",{staticClass:"error_message m-left10"},[e._v(e._s(e.error_msg.vpc_id.msg))]):e._e(),i("el-select",{staticClass:"m-left20 m-right10",attrs:{"value-key":"subnet_id"},model:{value:e.default_subnet,callback:function(s){e.default_subnet=s},expression:"default_subnet"}},e._l(e.default_vpc.subnet_list,(function(e){return i("el-option",{key:e.subnet_id,attrs:{value:e,label:e.subnet_name}})})),1),e.error_msg.subnet_id.show?i("span",{staticClass:"error_message m-right10"},[e._v(e._s(e.error_msg.subnet_id.msg))]):e._e(),i("span",{staticClass:"prompt_message"},[e._v(" 可用IP数量 "),i("span",{staticClass:"num_message"},[e._v(e._s(e.default_subnet.ip_not_used))]),e._v(" 个")])],1)],1),i("el-card",[i("label-block",{attrs:{label:"计算规格"}},[i("update-spec",{attrs:{az_id:e.default_az.az_id,customer_id:e.customer_id,billing_method:e.billing_method},on:{"fn-spec":e.FnGetSpec}})],1)],1),i("el-card",[i("update-os",{attrs:{az_id:e.default_az.az_id,is_gpu:e.ecs_spec_info.is_gpu,customer_id:e.customer_id,support_gpu_driver:e.ecs_spec_info.support_gpu_driver},on:{"fn-os":e.FnGetOs}})],1),i("el-card",{staticClass:"disk-box"},[i("update-disk",{attrs:{az_id:e.default_az.az_id,customer_id:e.customer_id,system_disk:!0,data_disk:!0,is_gpu:e.ecs_spec_info.is_gpu,os_disk_size:e.os_info.disk_size,spec_family_id:e.ecs_spec_info.spec_family_id,billing_method:e.billing_method},on:{"fn-system-disk":e.FnGetSystemDisk,"fn-data-disk":e.FnGetDataDisk,"fn-billing-info":e.FnGetDiskBillingInfo}})],1),i("el-card",[i("label-block",{attrs:{label:"购买数量"}},[i("el-input-number",{attrs:{min:e.num_info.min,max:e.num_info.max},on:{blur:e.FnCheckNum,change:e.FnGetPrice},model:{value:e.num_info.num,callback:function(s){e.$set(e.num_info,"num",s)},expression:"num_info.num"}}),i("span",{staticClass:"prompt_message m-left10",class:{error_message:e.num_info.num>e.num_info.max}},[e._v(" 一次最多可创建"),i("span",{staticClass:"num_message"},[e._v(" "+e._s(e.num_info.max)+" ")]),e._v("台实例 ")]),i("el-button",{attrs:{type:"text"},on:{click:e.FnGetLimitNum}},[i("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1),i("el-card",[i("label-block",{attrs:{label:"名称"}},[i("div",{staticClass:"input-msg-box"},[i("div",{staticClass:"input-box"},[i("el-input",{on:{blur:e.FnCheckEcsName},model:{value:e.ecs_name_info.ecs_name,callback:function(s){e.$set(e.ecs_name_info,"ecs_name",s)},expression:"ecs_name_info.ecs_name"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.error_msg.ecs_name.show,expression:"error_msg.ecs_name.show"}],staticClass:"error_message"},[e._v(e._s(e.error_msg.ecs_name.msg))])]),i("div",{staticClass:"prompt_message"},[e._v(" 2-60个字符，可包含大小写字母、中文、数字、点号、下划线、半角冒号、连字符、英文括号等常用字符")])]),i("update-pwd",{ref:"update_pwd",attrs:{username:e.os_info.username}})],1)],1),i("div",{staticClass:"right-box"},[i("el-card",{staticClass:"fixed-top"},[i("div",{attrs:{slot:"header"},slot:"header"},[e._v(" 当前配置信息 ")]),i("div",{staticClass:"right-row"},[i("div",[e._v("可用区")]),i("div",{staticClass:"right-text"},[e._v(e._s(e.default_region.region_name)+" | "+e._s(e.default_az.az_name))])]),i("div",{staticClass:"right-row"},[i("div",[e._v("网络")]),i("div",{staticClass:"right-text"},[e._v(e._s(e.default_vpc.vpc_name)+" | "+e._s(e.default_subnet.subnet_name))])]),i("div",{staticClass:"right-row"},[i("div",[e._v("计算规格")]),i("div",{staticClass:"right-text"},[e._v(e._s(e.ecs_spec_info.ecs_goods_name)+" | "+e._s(e.ecs_spec_info.cpu)+"vCPU | "+e._s(e.ecs_spec_info.ram)+"GiB "),e.ecs_spec_info.is_gpu?i("span",[e._v("| "+e._s(e.ecs_spec_info.gpu)+"*"+e._s(e.ecs_spec_info.card_name))]):e._e()])]),i("div",{staticClass:"right-row"},[i("div",[e._v("镜像")]),i("div",{staticClass:"right-text"},[e._v(e._s(e.os_info.os_label))])]),i("div",{staticClass:"right-row"},[i("div",[e._v("系统盘("+e._s(e.system_info.disk_name)+")")]),i("div",{staticClass:"right-text"},[e._v(e._s(e.system_info.disk_size)+e._s(e.system_info.disk_unit))])]),i("div",{staticClass:"right-row"},[i("div"),i("div",{staticClass:"num_message"},[e._v(e._s(e.system_disk_price))])]),e._l(e.total_data_disk,(function(s,t){return i("div",{key:t,staticClass:"right-row"},[i("div",[e._v("数据盘("+e._s(s.label)+")")]),i("div",{staticClass:"right-text"},[e._v(e._s(s.size)+e._s(s.unit))])])})),Object.keys(e.total_data_disk).length>0?i("div",{staticClass:"right-row"},[i("div"),i("div",{staticClass:"num_message"},[e._v(e._s(e.data_disk_price))])]):e._e(),i("div",{staticClass:"right-row"},[i("div",[e._v("购买数量")]),i("div",{staticClass:"right-text"},[e._v(e._s(e.num_info.num))])])],2),i("el-card",{staticClass:"confirm-card"},[e.is_billing?i("div",{staticClass:"row"},[i("div",[e._v("总价")]),i("div",{staticClass:"num_message"},[e._v(e._s(e.total_price))])]):e._e(),i("el-button",{staticClass:"create-btn",attrs:{type:"primary"},on:{click:e.FnConfirmCreate}},[e._v("创 建")])],1)],1)]),i("confirm-box",{attrs:{visible:e.confirm_create_visible},on:{"update:visible":function(s){e.confirm_create_visible=s},"fn-create":e.FnCreate}})],1)},n=[],a=i("b85c"),_=i("1da1"),o=i("d4ec"),c=i("bee2"),r=i("262e"),d=i("2caf"),l=(i("a9e3"),i("d3b7"),i("159b"),i("b680"),i("498a"),i("96cf"),i("9ab4")),u=i("1b40"),f=i("98c9"),m=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",[i("div",{staticClass:"box"},[i("div",[e._v(e._s(e.title))]),i("div",[e._t("default"),i("el-button",{attrs:{type:"primary",plain:""},on:{click:e.FnBack}},[e._v("返回")])],2)]),i("div",{staticClass:"perch"})])},p=[],h=function(e){Object(r["a"])(i,e);var s=Object(d["a"])(i);function i(){return Object(o["a"])(this,i),s.apply(this,arguments)}return Object(c["a"])(i,[{key:"FnBack",value:function(){this.back_url?this.$router.push(this.back_url):this.$router.go(-1)}}]),i}(u["e"]);Object(l["a"])([Object(u["c"])({default:""})],h.prototype,"title",void 0),Object(l["a"])([Object(u["c"])({default:""})],h.prototype,"back_url",void 0),h=Object(l["a"])([u["a"]],h);var g=h,v=g,b=(i("97ad"),i("2877")),k=Object(b["a"])(v,m,p,!1,null,"d6380fae",null),y=k.exports,w=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",[i("el-select",{attrs:{"popper-class":"area-op"},model:{value:e.value,callback:function(s){e.value=s},expression:"value"}},e._l(e.area_list,(function(s){return i("el-option",{key:s.region_group_id,staticClass:"item",attrs:{label:e.value,value:e.value}},[i("div",{staticClass:"area-btn"},[i("span",{staticClass:"label"},[e._v(e._s(s.region_group_name))]),i("radio-group",{attrs:{list:s.region_list,value:e.value},on:{"update:value":function(s){e.value=s}}})],1)])})),1)],1)},O=[],C=(i("e9c4"),function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"radio-btn"},[i("el-radio-group",{attrs:{size:"mini"},model:{value:e.syncValue,callback:function(s){e.syncValue=s},expression:"syncValue"}},e._l(e.list,(function(e){return i("el-radio-button",{key:e.region_id,attrs:{label:e.region_name}})})),1)],1)}),j=[],x=function(e){Object(r["a"])(i,e);var s=Object(d["a"])(i);function i(){return Object(o["a"])(this,i),s.apply(this,arguments)}return Object(c["a"])(i)}(u["e"]);Object(l["a"])([Object(u["c"])({default:function(){return[]}})],x.prototype,"list",void 0),Object(l["a"])([Object(u["d"])("value",{type:String})],x.prototype,"syncValue",void 0),x=Object(l["a"])([Object(u["a"])({})],x);var z=x,F=z,G=(i("42e2"),Object(b["a"])(F,C,j,!1,null,null,null)),S=G.exports,N=function(e){Object(r["a"])(i,e);var s=Object(d["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=s.apply(this,arguments),e.value=e.area,e.area_id="",e.area_list=e.list.length>0?JSON.parse(JSON.stringify(e.list)):[],e}return Object(c["a"])(i,[{key:"created",value:function(){}},{key:"watch_list",value:function(e){this.area_list=e.length>0?JSON.parse(JSON.stringify(e)):[],this.value=e.length>0?this.list[0].region_list[0].region_name:"",e.length>0&&this.watch_val(this.value)}},{key:"watch_val",value:function(e){var s=this;this.area_list.forEach((function(i){i.region_list&&i.region_list.forEach((function(i){i.region_name===e&&(s.area_id=i.region_id)}))})),this.get_area_id(this.area_id)}},{key:"get_area_id",value:function(e){}}]),i}(u["e"]);Object(l["a"])([Object(u["c"])({default:function(){return[]}})],N.prototype,"list",void 0),Object(l["a"])([Object(u["c"])({default:""})],N.prototype,"area",void 0),Object(l["a"])([Object(u["f"])("list",{immediate:!0,deep:!0})],N.prototype,"watch_list",null),Object(l["a"])([Object(u["f"])("value")],N.prototype,"watch_val",null),Object(l["a"])([Object(u["b"])("get_area_id")],N.prototype,"get_area_id",null),N=Object(l["a"])([Object(u["a"])({components:{RadioGroup:S}})],N);var R=N,I=R,P=(i("ffbe"),i("ec2b"),Object(b["a"])(I,w,O,!1,null,"fe977b32",null)),E=P.exports,$=i("3874"),A=i("29ab"),D=i("d4fd"),L=i("ed60"),B=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"confirm-box"},[i("el-dialog",{attrs:{title:"提示",visible:e.visible_sync,"show-close":!1,width:"400px"},on:{"update:visible":function(s){e.visible_sync=s}}},[i("i",{staticClass:"el-icon-success"}),i("span",{staticClass:"m-left10"},[e._v("请确认订单并开始执行创建任务")]),i("div",{staticClass:"text-right m-top10"},[i("el-button",{on:{click:function(s){e.visible_sync=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)])],1)},V=[],J=function(e){Object(r["a"])(i,e);var s=Object(d["a"])(i);function i(){return Object(o["a"])(this,i),s.apply(this,arguments)}return Object(c["a"])(i,[{key:"confirm",value:function(){this.visible_sync=!1,this.create()}},{key:"create",value:function(){}}]),i}(u["e"]);Object(l["a"])([Object(u["d"])("visible")],J.prototype,"visible_sync",void 0),Object(l["a"])([Object(u["b"])("fn-create")],J.prototype,"create",null),J=Object(l["a"])([u["a"]],J);var q=J,H=q,T=(i("fe33"),Object(b["a"])(H,B,V,!1,null,null,null)),U=T.exports,K=i("3673"),M=i("9074");function Q(e){var s=!0,i="";return e&&(e.length<2||e.length>60)&&(i="长度应为2-60位之间",s=!1),{flag:s,msg:i}}var W=function(e){Object(r["a"])(i,e);var s=Object(d["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=s.apply(this,arguments),e.customer_id="",e.customer_id_input="",e.customer_name="",e.is_billing=!0,e.billing_method="0",e.region_list=[],e.default_region={region_id:"",region_name:"",az_list:[]},e.default_az={az_id:"",az_name:""},e.vpc_list=[],e.default_vpc={vpc_id:"",vpc_segment_id:"",vpc_segment_address:"",subnet_list:[]},e.default_subnet={subnet_id:"",vlan_id:"",ip_address:"",mask:"",ip_type:"",ip_not_used:0},e.ecs_spec_info={},e.os_info={},e.system_info={},e.data_disk_list=[],e.total_data_disk={},e.disk_billing_info={},e.num_info={num:1,min:1,max:1},e.system_disk_price="0.00",e.data_disk_price="0.00",e.total_price="0.00",e.error_msg={customer_id:{show:!1,msg:"请输入正确的customer_id"},vpc_id:{show:!1,msg:"无可用VPC"},subnet_id:{show:!1,msg:"无可用子网"},ecs_name:{show:!1,msg:"请输入正确的实例名称"}},e.ecs_name_info={ecs_name:"",password:"",confirm_password:""},e.confirm_create_visible=!1,e}return Object(c["a"])(i,[{key:"FnGetCustomerName",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M["a"].get_customer_name({customer_id:this.customer_id_input});case 2:s=e.sent,"Success"===s.code&&(this.customer_id=s.data.customer_id,this.customer_name=s.data.customer_name,this.error_msg.customer_id.show=!1,this.FnGetRegionAzList());case 4:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}()},{key:"FnGetRegionAzList",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M["a"].get_region_az_list({customer_id:this.customer_id});case 2:s=e.sent,"Success"===s.code&&(this.region_list=s.data);case 4:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}()},{key:"FnGetRegionId",value:function(e){var s,i=Object(a["a"])(this.region_list);try{for(i.s();!(s=i.n()).done;){var t,n=s.value,_=Object(a["a"])(n.region_list);try{for(_.s();!(t=_.n()).done;){var o=t.value;if(o.region_id===e){this.default_region=o;break}}}catch(c){_.e(c)}finally{_.f()}}}catch(c){i.e(c)}finally{i.f()}this.default_az=this.default_region.az_list[0]||{az_id:"",az_name:""}}},{key:"FnGetNetList",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M["a"].get_net_list({az_id:this.default_az.az_id,region_id:this.default_region.region_id,customer_id:this.customer_id});case 2:s=e.sent,"Success"===s.code&&(this.vpc_list=s.data.vpc_list,this.vpc_list.length>0?(this.default_vpc=this.vpc_list[0],this.error_msg.vpc_id.show=!1):(this.default_vpc={vpc_id:"",vpc_segment_id:"",vpc_segment_address:"",subnet_list:[]},this.default_vpc.subnet_list=[],this.error_msg.vpc_id.show=!0));case 4:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}()},{key:"FnCheckEcsName",value:function(){var e=Q(this.ecs_name_info.ecs_name);return this.error_msg.ecs_name.show=!e.flag,this.error_msg.ecs_name.msg=e.msg,this.error_msg.ecs_name.show}},{key:"FnGetSpec",value:function(e){this.ecs_spec_info.is_gpu===e.is_gpu?(this.ecs_spec_info=e,this.FnGetLimitNum(),this.FnGetPrice("spec")):this.ecs_spec_info=e}},{key:"FnGetOs",value:function(e){this.os_info={os_id:e.os_id,os_type:e.os_type,username:e.username,disk_size:Number(e.disk_size),os_label:e.os_label}}},{key:"FnGetSystemDisk",value:function(e){this.system_info=e,this.FnGetLimitNum(),this.FnGetPrice("system")}},{key:"FnGetDataDisk",value:function(e){var s=this;this.data_disk_list=[],this.total_data_disk={},e.forEach((function(e){var i={ebs_goods_id:e.default_disk_info.ecs_goods_id,goods_name:e.default_disk_info.disk_name,disk_feature:e.default_disk_info.disk_feature,disk_type:e.default_disk_info.disk_type,disk_size:e.disk_size,ebs_number:1,is_follow_delete:Number(e.del)};"local"!==i.disk_feature?(i["storage_space"]=e.disk_size,i["iops"]=e.iops,i["handling_capacity"]=e.handling_capacity,i["gic_goods_id"]=s.disk_billing_info[e.default_disk_info.ecs_goods_id].gic_goods_id):(i.ebs_goods_id=s.ecs_spec_info.ecs_goods_id,i.is_follow_delete=1,i["local_disk-space"]=e.disk_size,i["local_disk-IOPS"]=e.iops,i["local_disk-throughput"]=e.handling_capacity,i["gic_goods_id"]=s.ecs_spec_info.billing_info[i.ebs_goods_id].gic_goods_id);for(var t=0;t<e.num;t++)s.data_disk_list.push(i);var n=e.disk_size*e.num;s.total_data_disk[i.disk_feature]?s.total_data_disk[i.disk_feature].size+=n:s.total_data_disk[i.disk_feature]={label:i.goods_name,size:n,unit:e.default_disk_info.disk_unit}})),this.FnGetLimitNum(),this.FnGetPrice("disk")}},{key:"FnGetDiskBillingInfo",value:function(e){this.disk_billing_info=e}},{key:"FnGetLimitNum",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M["a"].get_ecs_limit({customer_id:this.customer_id,az_id:this.default_az.az_id,spec_family_id:this.ecs_spec_info.spec_family_id,spec_id:this.ecs_spec_info.spec_id,disk_info:{system_disk:{disk_feature:this.system_info.disk_feature,disk_type:this.system_info.disk_type,disk_size:this.system_info.disk_size},data_disks:this.data_disk_list}});case 2:s=e.sent,"Success"===s.code&&(this.num_info.max=s.data.max_num);case 4:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}()},{key:"FnCheckNum",value:function(){this.num_info.num||(this.num_info.num=this.num_info.min)}},{key:"FnGetPrice",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(s){var i,t,n,a,_,o,c,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.ecs_spec_info.ecs_goods_id){e.next=2;break}return e.abrupt("return");case 2:if(this.system_info.disk_feature){e.next=4;break}return e.abrupt("return");case 4:return t={customer_id:this.customer_id,region_id:this.default_region.region_id,az_id:this.default_az.az_id,is_gpu:this.ecs_spec_info.is_gpu,batch:0,billing_method:this.billing_method,ecs_info:{billing_info:this.ecs_spec_info.billing_info,ecs_goods_info:[{ecs_goods_id:this.ecs_spec_info.ecs_goods_id,cpu:this.ecs_spec_info.cpu,ram:this.ecs_spec_info.ram,gpu:this.ecs_spec_info.gpu,gic_goods_id:this.ecs_spec_info.billing_info[this.ecs_spec_info.ecs_goods_id].gic_goods_id}]},disk_info:{system_disk:{ebs_goods_id:this.system_info.ecs_goods_id,gic_goods_id:null===(i=this.disk_billing_info[this.system_info.ecs_goods_id])||void 0===i?void 0:i.gic_goods_id,goods_name:this.system_info.disk_name,disk_feature:this.system_info.disk_feature,disk_type:this.system_info.disk_type,disk_size:this.system_info.disk_size,is_follow_delete:this.system_info.is_follow_delete,storage_space:this.system_info.storage_space,iops:this.system_info.iops,handling_capacity:this.system_info.handling_capacity,ebs_number:1},data_disk:this.data_disk_list,billing_info:this.disk_billing_info},number:this.num_info.num?this.num_info.num:1},"local"===this.system_info.disk_feature&&(t.disk_info.system_disk.ebs_goods_id=this.ecs_spec_info.ecs_goods_id,t.disk_info.billing_info[this.ecs_spec_info.ecs_goods_id]=this.ecs_spec_info.billing_info[this.ecs_spec_info.ecs_goods_id],t.disk_info.system_disk.gic_goods_id=t.disk_info.billing_info[this.ecs_spec_info.ecs_goods_id].gic_goods_id,t.disk_info.system_disk["local_disk-IOPS"]=this.system_info.iops,t.disk_info.system_disk["local_disk-space"]=this.system_info.storage_space,t.disk_info.system_disk["local_disk-throughput"]=this.system_info.handling_capacity),e.next=8,M["a"].get_price(t);case 8:n=e.sent,"Success"===n.code&&(_=n.data,o=_.price_symbol,c=_.price_unit,r=0,(null===(a=n.data.disk.data_disk)||void 0===a?void 0:a.length)>0&&(r=n.data.disk.data_disk.reduce((function(e,s){return e+s.price}),0)),this.data_disk_price=o+r.toFixed(2)+"/"+c,this.system_disk_price=o+n.data.disk.system_disk.price.toFixed(2)+"/"+c,this.total_price=o+n.data.total_price.toFixed(2)+"/"+c);case 10:case"end":return e.stop()}}),e,this)})));function s(s){return e.apply(this,arguments)}return s}()},{key:"FnConfirmCreate",value:function(){if(this.customer_id){if(!this.FnCheckEcsName())if(this.default_subnet.subnet_id){if(this.default_subnet.ip_not_used<this.num_info.num)this.$message.warning("所选网络可用IP数量不足！");else if(!(this.num_info.num>this.num_info.max)){var e=this.$refs.update_pwd.FnSubmit();e.flag&&(this.ecs_name_info.password=e.password,this.confirm_create_visible=!0)}}else this.error_msg.subnet_id.show=!0}else this.error_msg.customer_id.show=!0}},{key:"FnCreate",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var s,i,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={customer_id:this.customer_id,region_id:this.default_region.region_id,az_id:this.default_az.az_id,is_gpu:this.ecs_spec_info.is_gpu,cpu_model:this.ecs_spec_info.cpu_model,net_info:{vpc_id:this.default_vpc.vpc_id,vpc_segment_id:this.default_vpc.vpc_segment_id,vpc_segment_address:this.default_vpc.vpc_segment_address,subnet_info:[{subnet_id:this.default_subnet.subnet_id,vlan_id:this.default_subnet.vlan_id,mask:this.default_subnet.mask,ip_type:this.default_subnet.ip_type}]},ecs_spec_info:{ecs_goods_id:this.ecs_spec_info.ecs_goods_id,ecs_type:this.ecs_spec_info.ecs_type,ecs_family_name:this.ecs_spec_info.ecs_family_name,cpu:this.ecs_spec_info.cpu,ram:this.ecs_spec_info.ram,gpu:this.ecs_spec_info.gpu,billing_info:this.is_billing?this.ecs_spec_info.billing_info[this.ecs_spec_info.ecs_goods_id]:{},gic_goods_id:this.ecs_spec_info.billing_info[this.ecs_spec_info.ecs_goods_id].gic_goods_id},os_id:this.os_info.os_id,os_type:this.os_info.os_type,disk_info:{system_disk:{ebs_goods_id:this.system_info.ecs_goods_id,gic_goods_id:null===(s=this.disk_billing_info[this.system_info.ecs_goods_id])||void 0===s?void 0:s.gic_goods_id,goods_name:this.system_info.disk_name,disk_feature:this.system_info.disk_feature,disk_type:this.system_info.disk_type,disk_size:this.system_info.disk_size,is_follow_delete:this.system_info.is_follow_delete,storage_space:this.system_info.storage_space,iops:this.system_info.iops,handling_capacity:this.system_info.handling_capacity},data_disks:this.data_disk_list,billing_info:this.is_billing?this.disk_billing_info:{}},num:this.num_info.num?this.num_info.num:1,ecs_name:this.ecs_name_info.ecs_name.trim(),username:this.os_info.username||"root",password:this.ecs_name_info.password},"local"===this.system_info.disk_feature&&(i.disk_info.system_disk.ebs_goods_id=this.ecs_spec_info.ecs_goods_id,i.disk_info.system_disk.gic_goods_id=this.ecs_spec_info.billing_info[this.ecs_spec_info.ecs_goods_id].gic_goods_id,i["gpu_id"]=this.ecs_spec_info.gpu_id,i.disk_info.billing_info[this.ecs_spec_info.ecs_goods_id]=this.ecs_spec_info.billing_info[this.ecs_spec_info.ecs_goods_id],i.disk_info.system_disk["local_disk-IOPS"]=this.system_info.iops,i.disk_info.system_disk["local_disk-space"]=this.system_info.storage_space,i.disk_info.system_disk["local_disk-throughput"]=this.system_info.handling_capacity),e.next=4,M["a"].create_instance(i);case 4:t=e.sent,"Success"===t.code&&(this.$message.success(t.msg||"成功下发 创 建 任务！"),this.$router.push("/instance"));case 6:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}()},{key:"FnChangeCustomerId",value:function(e){e.length>6?this.FnGetCustomerName():this.error_msg.customer_id.show=!0}},{key:"FnChangeAz",value:function(e){e&&(this.default_vpc.vpc_id="",this.default_vpc.subnet_list=[],this.FnGetNetList())}},{key:"FnChangeVpc",value:function(e){this.default_vpc.subnet_list.length>0?(this.default_subnet=this.default_vpc.subnet_list[0],this.error_msg.subnet_id.show=!1):(this.default_subnet={subnet_id:"",vlan_id:"",ip_address:"",mask:"",ip_type:"",ip_not_used:0},this.error_msg.subnet_id.show=!0)}}]),i}(u["e"]);Object(l["a"])([Object(u["f"])("customer_id_input")],W.prototype,"FnChangeCustomerId",null),Object(l["a"])([Object(u["f"])("default_az.az_id")],W.prototype,"FnChangeAz",null),Object(l["a"])([Object(u["f"])("default_vpc.vpc_id")],W.prototype,"FnChangeVpc",null),W=Object(l["a"])([Object(u["a"])({components:{LabelBlock:f["a"],BackHeader:y,Area:E,updateSpec:$["a"],updateOs:A["a"],updateDisk:D["a"],updatePwd:L["a"],confirmBox:U,SvgIcon:K["a"]}})],W);var X=W,Y=X,Z=(i("b59d"),Object(b["a"])(Y,t,n,!1,null,"7e1e49c0",null));s["default"]=Z.exports},"1ea2":function(e,s,i){},3967:function(e,s,i){},"42e2":function(e,s,i){"use strict";i("1ea2")},"498a":function(e,s,i){"use strict";var t=i("23e7"),n=i("58a8").trim,a=i("c8d2");t({target:"String",proto:!0,forced:a("trim")},{trim:function(){return n(this)}})},6747:function(e,s,i){},"97ad":function(e,s,i){"use strict";i("3967")},a278:function(e,s,i){},b2e0:function(e,s,i){},b59d:function(e,s,i){"use strict";i("6747")},b641:function(e,s,i){},b85c:function(e,s,i){"use strict";i.d(s,"a",(function(){return n}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("d9e2");var t=i("06c5");function n(e,s){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Object(t["a"])(e))||s&&e&&"number"===typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _,o=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){c=!0,_=e},f:function(){try{o||null==i["return"]||i["return"]()}finally{if(c)throw _}}}}},c8d2:function(e,s,i){var t=i("5e77").PROPER,n=i("d039"),a=i("5899"),_="​᠎";e.exports=function(e){return n((function(){return!!a[e]()||_[e]()!==_||t&&a[e].name!==e}))}},d81d:function(e,s,i){"use strict";var t=i("23e7"),n=i("b727").map,a=i("1dde"),_=a("map");t({target:"Array",proto:!0,forced:!_},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},ec2b:function(e,s,i){"use strict";i("b641")},fe33:function(e,s,i){"use strict";i("a278")},ffbe:function(e,s,i){"use strict";i("b2e0")}}]);
//# sourceMappingURL=chunk-45cac040.be57d02a.js.map