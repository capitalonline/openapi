(window["webpackJsonp_AppOp"]=window["webpackJsonp_AppOp"]||[]).push([["chunk-12fcd9c3"],{1116:function(t,e,s){"use strict";s("cb4f")},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},1477:function(t,e,s){"use strict";var a=s("81a9"),i=s("bff7");e["a"]={get_host_list:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/get_host_list/",t))},get_room_list:function(t){return Object(a["a"])(Object(i["b"])("GET","/host/machine_room_list/",t))},get_status_list:function(t){return Object(a["a"])(Object(i["b"])("GET","/host/host_status_list/",t))},external_management:function(t){return Object(a["a"])(Object(i["b"])("GET","/host/external_management/",t))},migrate:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/migration_operation/",t))},disperse:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/disperse_operation/",t))},record:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/host_operation_record/",t))},recommended_host:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/recommended_host/",t))},host_maintenance:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/host_maintenance/",t))},finish_maintenance:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/host_finish_maintenance/",t))},shelves:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/host_off_shelves/",t))},get_detail_overview:function(t){return Object(a["a"])(Object(i["b"])("GET","/host/host_main_details/",t))},get_detail_storage:function(t){return Object(a["a"])(Object(i["b"])("GET","/host/host_disk/",t))},down:function(t){return Object(a["a"])(Object(i["b"])("GET","/host/host_list_download/",t))},host_operate:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/operate/",t))},host_import:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/import/",t))},get_host_attribution:function(t){return Object(a["a"])(Object(i["b"])("GET","/host/get_host_attribution/",t))},set_host_attribution:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/set_host_attribution/",t))},get_host_type:function(t){return Object(a["a"])(Object(i["b"])("GET","/host/get_host_config/",t))},update_attribute:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/set_host_config/",t))},getCustomerList:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/get_customer_list/",t))},getFamilyList:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/get_family_list/",t))},finish_validate:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/verification_finish/",t))},get_host_recycle_department:function(t){return Object(a["a"])(Object(i["b"])("GET","/host/get_host_recycle_department/",t))},get_host_list_field:function(t){return Object(a["a"])(Object(i["b"])("GET","/host/get_host_list_field/",t))},switch_business_type:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/switch_business_type/",t))},set_host_bid_attribute:function(t){return Object(a["a"])(Object(i["b"])("POST","/host/set_host_spot/",t))}}},"23af":function(t,e,s){"use strict";s("6a7a")},"268f":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"操作记录",visible:t.visible,width:"60%","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e},close:t.back}},[s("div",[s("el-dialog",{attrs:{title:"响应信息",visible:t.res_visible,width:"60%","destroy-on-close":!0,"append-to-body":"","custom-class":"response-data"},on:{"update:visible":function(e){t.res_visible=e},close:t.clost_res}},[s("div",[t._v(t._s(t.response))])])],1),s("div",[s("action-block",{attrs:{search_option:"physical"===t.type?Object.assign({},t.search,t.physical_option):t.search},on:{"fn-search":t.fn_search}}),"physical"===t.type?s("div",{staticClass:"icon m-bottom10"},[s("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text"},on:{click:t.getOperateRecordList}},[s("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1):t._e(),s("el-table",{staticClass:"record-table",attrs:{data:t.record_list,border:""}},[s("el-table-column",{attrs:{prop:"oper_time",label:"操作时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.oper_time?t.moment(e.row.oper_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),s("el-table-column",{attrs:{prop:"oper_type_display",label:"操作内容"}}),s("el-table-column",{attrs:{prop:"status_display",label:"状态"}}),s("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.result?s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.view(e.row.result)}}},[t._v("查看")]):s("span",[t._v("-")])]}}])}),s("el-table-column",{attrs:{prop:"finish_time",label:"完成时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.finish_time?t.moment(e.row.finish_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),s("el-table-column",{attrs:{prop:"oper_user",label:"用户名"}}),"physical"!==t.type?s("el-table-column",{attrs:{prop:"flag_display",label:"操作标识"}}):t._e()],1),s("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[20,50,100],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.back}},[t._v("返回")])],1)],1)])],1)},i=[],n=s("5530"),o=s("1da1"),r=s("d4ec"),c=s("bee2"),l=s("262e"),u=s("2caf"),_=(s("96cf"),s("ac1f"),s("841c"),s("9ab4")),p=s("1b40"),h=s("c811"),d=s("d772"),m=s("1477"),b=s("c1df"),f=s.n(b),v=s("8ce4"),y=s("3673"),g=function(t){Object(l["a"])(s,t);var e=Object(u["a"])(s);function s(){var t;return Object(r["a"])(this,s),t=e.apply(this,arguments),t.state_list=[{type:"",label:"全部"},{type:"doing",label:"执行中"},{type:"success",label:"成功"},{type:"failed",label:"失败"}],t.search={state:{list:t.state_list,placeholder:"请选择状态"},content:{placeholder:"请输入操作内容"}},t.physical_option={time:{type:"datetimerange",placeholder:["开始时间","结束时间"],clearable:!1,width:360,dis_day:31,defaultTime:[f()(new Date).format("YYYY-MM-DD 00:00:00"),f()(new Date).format("YYYY-MM-DD HH:mm:ss")]}},t.record_list=[],t.current=1,t.size=20,t.total=0,t.search_data={},t.moment=f.a,t.response="",t.res_visible=!1,t}return Object(c["a"])(s,[{key:"created",value:function(){this.fn_search()}},{key:"fn_search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.search_data=t,this.getOperateRecordList()}},{key:"getOperateRecordList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i,o,r,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=this.search_data,a="physical"!==this.type?{task_type:s.content,cloud_id:this.record_id}:{content:s.content,cloud_id:this.record_id,cloud_type:"host"},i=Object(n["a"])({status:s.state||"",page_size:this.size,page_index:this.current},a),"physical"===this.type){t.next=9;break}return t.next=6,d["a"].get_operate_record_list(Object(n["a"])({cloud_type:this.type?this.type:"ecs"},i));case 6:e=t.sent,t.next=12;break;case 9:return t.next=11,m["a"].record(Object(n["a"])({start:s.time?f()(s.time[0]).format("YYYY-MM-DD HH:mm:ss"):f()(new Date).format("YYYY-MM-DD 00:00:00"),end:s.time?f()(s.time[1]).format("YYYY-MM-DD HH:mm:ss"):f()(new Date).format("YYYY-MM-DD HH:mm:ss")},i));case 11:e=t.sent;case 12:"Success"===e.code&&("physical"!==this.type?this.record_list=(null===(c=e.data)||void 0===c?void 0:c.history_record)||[]:(l=["create_time","content","status_name","response","update_time","op_user"],u=["oper_time","oper_type_display","status_display","response","finish_time","oper_user"],this.record_list=Object(v["b"])(e.data.operation_list,u,l)),this.total=(null===(o=e.data)||void 0===o||null===(r=o.page_info)||void 0===r?void 0:r.count)||0);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSizeChange",value:function(t){this.size=t,this.getOperateRecordList()}},{key:"handleCurrentChange",value:function(t){this.current=t,this.getOperateRecordList()}},{key:"view",value:function(t){this.response=t,this.res_visible=!0}},{key:"clost_res",value:function(){this.res_visible=!1,this.response=""}},{key:"back",value:function(){}}]),s}(p["e"]);Object(_["a"])([Object(p["c"])(Boolean)],g.prototype,"visible",void 0),Object(_["a"])([Object(p["c"])(String)],g.prototype,"record_id",void 0),Object(_["a"])([Object(p["c"])(String)],g.prototype,"type",void 0),Object(_["a"])([Object(p["b"])("close")],g.prototype,"back",null),g=Object(_["a"])([Object(p["a"])({components:{ActionBlock:h["a"],SvgIcon:y["a"]}})],g);var k=g,O=k,w=(s("1116"),s("2877")),j=Object(w["a"])(O,a,i,!1,null,null,null);e["a"]=j.exports},"2c77":function(t,e,s){"use strict";s("d990")},"33d1":function(t,e,s){"use strict";var a=s("23e7"),i=s("7b0b"),n=s("07fa"),o=s("5926"),r=s("44d2");a({target:"Array",proto:!0},{at:function(t){var e=i(this),s=n(e),a=o(t),r=a>=0?a:s+a;return r<0||r>=s?void 0:e[r]}}),r("at")},"3f8d":function(t,e,s){"use strict";s.d(e,"b",(function(){return n}));var a={delete_ecs:{auth:["running","shutdown","error"],msg:"已选实例状态需为已关机或运行中或错误！",label:"逻辑删除"},recover_ecs:{auth:["deleted"],msg:"已选实例状态需为已删除！",label:"恢 复"},destroy_ecs:{auth:["deleted","failed"],msg:"已选实例状态需为已删除或创建失败！",label:"销 毁"},open_bill:{auth:["running","shutdown"],msg:"已选实例状态需为运行中或已关机！",label:"开启计费"}},i={start_up_host:{power:["shutdown"],host:["offline","online","exception"],msg:"已选主机需为在线或离线或异常状态",label:"开机"},shutdown_host:{power:["running"],host:["offline","online"],vm:1,msg:"已选主机需为在线或离线状态",msg2:"操作关机前，请确保物理机上无云主机运行",label:"关机"},restart_host:{power:["running"],host:["offline","online"],vm:1,msg:"已选主机需为在线或离线状态",msg2:"操作重启前，请确保物理机上无云主机运行",label:"重启"},online_maintenance:{power:[],host:["online","exception"],msg:"已选主机需为在线状态",label:"在线维护"},offline_maintenance:{power:[],host:["offline","online","exception"],vm:1,msg:"已选主机需为在线或离线状态且已选主机上不能有虚拟机运行",label:"离线维护"},finish:{power:[],host:["maintenance","online_maintenance","offline_maintenance"],msg:"已选主机需为维护中状态",label:"完成维护"},shelves:{power:[],host:["maintenance"],vm:1,msg:"已选主机需为维护状态且已选主机上不能有虚拟机运行",label:"下架"},disperse:{power:["running"],host:["online"],msg:"已选主机需为在线状态",label:"驱散"},out_of_band:{power:[],host:["offline","online"],msg:"已选主机需为在线或离线状态",label:"进入带外管理"},migrate:{power:["running"],host:["online"],msg:"已选主机需为在线状态",label:"迁移"},kvm_to_eci:{power:[],host:["maintenance"],business:["KVM"],msg:"已选主机需为维护中状态且业务类型为KVM",label:"KVM切换ECI"},eci_to_kvm:{power:[],host:["maintenance"],business:["ECI"],msg:"已选主机需为维护中状态且业务类型为ECI",label:"ECI切换KVM"},bidding:{power:[],host:[],msg:"已选主机业务类型需为KVM",business:["KVM"],label:"竞价实例"}};e["a"]={getInsOperateAuth:function(t){return a[t]}};var n=function(t){return i[t]}},4164:function(t,e,s){},"4b41":function(t,e,s){"use strict";s("f325")},"5a59":function(t,e,s){"use strict";s("7123")},"662d":function(t,e,s){},"681d":function(t,e,s){"use strict";s("7bd4")},"6a7a":function(t,e,s){},7123:function(t,e,s){},"7bd4":function(t,e,s){},8045:function(t,e,s){},"841c":function(t,e,s){"use strict";var a=s("c65b"),i=s("d784"),n=s("825a"),o=s("1d80"),r=s("129f"),c=s("577e"),l=s("dc4a"),u=s("14c3");i("search",(function(t,e,s){return[function(e){var s=o(this),i=void 0==e?void 0:l(e,t);return i?a(i,e,s):new RegExp(e)[t](c(s))},function(t){var a=n(this),i=c(t),o=s(e,a,i);if(o.done)return o.value;var l=a.lastIndex;r(l,0)||(a.lastIndex=0);var _=u(a,i);return r(a.lastIndex,l)||(a.lastIndex=l),null===_?-1:_.index}]}))},"8da7":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("action-block",{attrs:{search_option:t.search_option,type:"physical"},on:{"fn-search":t.fn_search,"fn-operate":t.FnOperate},scopedSlots:t._u([{key:"default",fn:function(){return[t._l(t.operate_btns,(function(e){return s("el-button",{key:e.value,attrs:{type:"primary",disabled:!t.auth_list.includes(e.value)},on:{click:function(s){return t.handle(e.label,e.value)}}},[t._v(t._s(e.label))])})),s("el-dropdown",{staticClass:"m-left10",on:{command:t.handleMore}},[s("el-button",{staticClass:"dropdownbtn",attrs:{type:"primary"}},[t._v(" 业务类型切换"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:{label:"KVM切换ECI",value:"kvm_to_eci"}}},[t._v("KVM切换ECI")]),s("el-dropdown-item",{attrs:{command:{label:"ECI切换KVM",value:"eci_to_kvm"}}},[t._v("ECI切换KVM")])],1)],1)]},proxy:!0}])}),s("div",{staticClass:"icon m-bottom10"},[s("el-tooltip",{attrs:{content:"自定义列表项",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text"},on:{click:t.FnCustom}},[s("i",{staticClass:"el-icon-s-tools"})])],1),s("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text"},on:{click:t.refresh}},[s("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1),s("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text",disabled:!t.auth_list.includes("export")},on:{click:t.down}},[s("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1)],1),s("el-table",{ref:"table",attrs:{data:t.list,border:"","max-height":t.tableHeight},on:{"selection-change":t.handleSelectionChange,"sort-change":t.FnSortChange,"filter-change":t.filterAttribute}},[s("el-table-column",{attrs:{type:"selection",width:t.custom_host.length>0?"48px":"1100px"}}),t._l(t.custom_host,(function(e){return s("el-table-column",{key:e.prop,attrs:{"filter-multiple":e.column_key?!!e.multiple:null,prop:e.prop,"column-key":e.column_key?e.column_key:null,filters:e.column_key?e.list:null,sortable:e.sortable?e.sortable:null,width:e.width?e.width:null},scopedSlots:t._u([{key:"header",fn:function(a){return["ecs_num"===e.prop?[s("span",[t._v("虚拟机数量")]),s("el-tooltip",{attrs:{"popper-class":"tooltip-width",content:"云桌面/文件存储转发的虚机未纳入统计，所以主机属性为云桌面/文件存储转发的物理机虚机数量为0不代表无虚机。",effect:"light"}},[s("el-button",{staticClass:"m-left5 m-right5",attrs:{type:"text"}},[s("svg-icon",{staticClass:"more",attrs:{icon:"info",viewBox:"0 0 20 20"}})],1)],1)]:s("span",[t._v(t._s(e.label))])]}},"machine_status_name"===e.prop?{key:"default",fn:function(e){return[s("div",[t._v(t._s(e.row.machine_status_name))]),"off_shelves"===e.row.machine_status?s("div",{staticClass:"destroy"},[t._v(t._s(e.row.recycle_department))]):t._e()]}}:"cpu"===e.prop?{key:"default",fn:function(e){return[s("span",[t._v(t._s(parseFloat(e.row.cpu).toFixed(2)+"%"))])]}}:"net_nic"===e.prop?{key:"default",fn:function(e){return[e.row.net_nic.length>0?s("el-tooltip",{attrs:{effect:"light"}},[s("div",{attrs:{slot:"content"},slot:"content"},t._l(e.row.net_nic,(function(e,a){return s("div",{key:a},[t._v(t._s(e))])})),0),s("div",{staticClass:"tooltip-cell"},[t._v(t._s(e.row.net_nic[0]))])]):s("div")]}}:"exclusive_black_customers"===e.prop?{key:"default",fn:function(e){return[e.row.exclusive_black_customers.length>1?s("el-tooltip",{attrs:{effect:"light"},scopedSlots:t._u([{key:"content",fn:function(){return t._l(e.row.exclusive_black_customers,(function(e){return s("div",[t._v(t._s(e.id+" ("+e.name+")"))])}))},proxy:!0}],null,!0)},[s("span",[t._v(t._s(e.row.exclusive_black_customers.map((function(t){return t.id})).join(",")))])]):1===e.row.exclusive_black_customers.length?s("span",[t._v(t._s(e.row.exclusive_black_customers[0].id+" ("+e.row.exclusive_black_customers[0].name+")"))]):s("span")]}}:"exclusive_customers"===e.prop?{key:"default",fn:function(e){return[e.row.exclusive_customers.length>1?s("el-tooltip",{scopedSlots:t._u([{key:"content",fn:function(){return t._l(e.row.exclusive_customers,(function(e){return s("div",[t._v(t._s(e.id+" ("+e.name+")"))])}))},proxy:!0}],null,!0)},[s("span",[t._v(t._s(e.row.exclusive_customers.map((function(t){return t.id})).join(",")))])]):1===e.row.exclusive_customers.length?s("span",[t._v(t._s(e.row.exclusive_customers[0].id+" ("+e.row.exclusive_customers[0].name+")"))]):s("span",[t._v("全部客户")])]}}:"exclusive_spec_family"===e.prop?{key:"default",fn:function(e){return[e.row.exclusive_spec_family.length>0?s("el-tooltip",{attrs:{effect:"light"},scopedSlots:t._u([{key:"content",fn:function(){return t._l(e.row.exclusive_spec_family,(function(e){return s("div",{key:e},[t._v(t._s(e))])}))},proxy:!0}],null,!0)},[s("span",{staticClass:"id-cell"},[t._v(t._s(e.row.exclusive_spec_family[0]))])]):s("span")]}}:"ram"===e.prop?{key:"default",fn:function(e){return[s("span",[t._v(t._s(parseFloat(e.row.ram).toFixed(2)+"%"))])]}}:"ecs_num"===e.prop?{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return t.goEcs(e.row.host_name)}}},[t._v(t._s(e.row.ecs_num))])]}}:"cpu_with_model"===e.prop?{key:"default",fn:function(e){return[e.row.cpu_model?s("span",[t._v(t._s(e.row.cpu_model)+" * "+t._s(e.row.cpu_model_count))]):t._e()]}}:"backend_type"===e.prop?{key:"default",fn:function(e){return[s("span",[t._v(t._s(t.backendObj[e.row.backend_type]))])]}}:"net_card_with_model"===e.prop?{key:"default",fn:function(e){return[s("div",{staticClass:"net-model"},[e.row.net_model?s("el-tooltip",{attrs:{content:e.row.net_model,"popper-class":"tooltip-width",placement:"right",effect:"light"}},[s("span",{staticClass:"id-cell"},[t._v(t._s(e.row.net_model))])]):t._e(),e.row.net_model?s("span",[t._v(" * "+t._s(e.row.net_model_count))]):t._e()],1)]}}:"is_prepare_host"===e.prop?{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.is_prepare_host?"是":"否"))])]}}:"is_spot"===e.prop?{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.is_spot?"是":"否"))])]}}:null],null,!0)})}))],2),s("el-pagination",{attrs:{"current-page":t.page_info.current,"page-sizes":[20,50,100],"page-size":t.page_info.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page_info.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t.visible&&!["upload","migrate","record","resource","update_attribute"].includes(t.oper_type)?[s("Operate",{attrs:{title:t.oper_label,rows:t.multi_rows,oper_type:t.oper_type,visible:t.visible},on:{"update:visible":function(e){t.visible=e},close:t.close}})]:t._e(),t.visible&&"upload"===t.oper_type?[s("upload-file",{attrs:{visible:t.visible},on:{"update:visible":function(e){t.visible=e},close:t.close}})]:t._e(),t.visible&&"migrate"===t.oper_type?[s("Migrate",{attrs:{visible:t.visible,rows:t.multi_rows},on:{"update:visible":function(e){t.visible=e},close:t.close}})]:t._e(),t.visible&&"record"===t.oper_type?[s("Record",{attrs:{visible:t.visible,type:"physical",record_id:t.multi_rows[0].host_id},on:{"update:visible":function(e){t.visible=e},close:t.close}})]:t._e(),t.visible&&"resource"===t.oper_type?[s("Resource",{attrs:{visible:t.visible,rows:t.multi_rows},on:{"update:visible":function(e){t.visible=e},close:t.close}})]:t._e(),t.visible&&"update_attribute"===t.oper_type?[s("update-attribute",{attrs:{visible:t.visible,rows:t.multi_rows},on:{"update:visible":function(e){t.visible=e},close:t.close}})]:t._e(),s("custom-list-item",{attrs:{visible:t.custom_visible,all_item:t.all_item,all_column_item:t.all_column_item},on:{"update:visible":function(e){t.custom_visible=e},"fn-custom":t.get_custom_columns}})],2)},i=[],n=s("5530"),o=s("2909"),r=s("1da1"),c=s("d4ec"),l=s("bee2"),u=s("262e"),_=s("2caf"),p=(s("96cf"),s("b0c0"),s("d81d"),s("99af"),s("4de4"),s("d3b7"),s("caad"),s("2532"),s("a15b"),s("e9c4"),s("fb6a"),s("159b"),s("9ab4")),h=s("1b40"),d=s("c811"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:t.title,visible:t.visible_sync,width:"780px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible_sync=e},close:t.back}},[s("div",[s("el-alert",{attrs:{title:t.alert_title,type:"warning",center:"",closable:!1}}),s("el-table",{attrs:{data:t.rows,border:"","max-height":"253"}},[s("el-table-column",{attrs:{prop:"host_name",label:"主机名",width:"150"}}),["finish_validate","kvm_to_eci","eci_to_kvm","bidding"].includes(t.oper_type)?s("el-table-column",{attrs:{prop:"az_name",label:"区域"}}):t._e(),t.status_list.includes(t.title)?t._e():s("el-table-column",{attrs:{prop:"machine_status_name",label:"主机状态"}}),["kvm_to_eci","eci_to_kvm","bidding"].includes(t.oper_type)?t._e():s("el-table-column",{attrs:{prop:"power_status_name",label:"电源状态"}}),["finish_validate","bidding"].includes(t.oper_type)?s("el-table-column",{attrs:{prop:"host_purpose",label:"主机用途"}}):t._e(),["finish_validate","shelves"].includes(t.oper_type)?s("el-table-column",{attrs:{prop:"host_source",label:"主机来源"}}):t._e(),["kvm_to_eci","eci_to_kvm","bidding"].includes(t.oper_type)?s("el-table-column",{attrs:{prop:"host_attribution_name",label:"主机归属"}}):t._e(),["kvm_to_eci","eci_to_kvm"].includes(t.oper_type)?s("el-table-column",{attrs:{prop:"host_business_type",label:"业务状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.host_business_type+"宿主机")+" ")]}}],null,!1,1892817174)}):t._e(),["bidding"].includes(t.oper_type)?s("el-table-column",{attrs:{prop:"is_spot",label:"竞价实例资源"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.is_spot?"是":"否")+" ")]}}],null,!1,3353202028)}):t._e()],1),["shelves","finish_validate"].includes(t.oper_type)?s("el-form",{ref:"form",staticClass:"m-top20",attrs:{model:t.form_data,"label-width":"100px","label-position":"left"}},["finish_validate"===t.oper_type?s("el-form-item",{attrs:{prop:"valid",label:"验证结果:",rules:[{required:!0,message:"请选择验证结果",trigger:"blur"}]}},[s("el-radio-group",{model:{value:t.form_data.valid,callback:function(e){t.$set(t.form_data,"valid",e)},expression:"form_data.valid"}},[s("el-radio",{attrs:{label:"1"}},[t._v("成功")]),s("el-radio",{attrs:{label:"0"}},[t._v("失败")])],1)],1):t._e(),"finish_validate"===t.oper_type&&"0"===t.form_data.valid?s("el-form-item",{attrs:{prop:"reason",label:"说明:"}},[s("el-input",{attrs:{type:"textarea",maxlength:256},model:{value:t.form_data.reason,callback:function(e){t.$set(t.form_data,"reason",e)},expression:"form_data.reason"}})],1):t._e(),s("el-form-item",{attrs:{prop:"recycleId",label:"finish_validate"===t.oper_type?"通知对象：":"回收部门：",rules:[{required:!0,message:"请选择"+("finish_validate"===t.oper_type?"通知对象":"回收部门"),trigger:"blur"}]}},[s("el-select",{model:{value:t.form_data.recycleId,callback:function(e){t.$set(t.form_data,"recycleId",e)},expression:"form_data.recycleId"}},t._l(t.recycle_list,(function(t){return s("el-option",{key:t.department_en,attrs:{label:t.department_name,value:t.department_name}})})),1)],1)],1):t._e(),["bidding"].includes(t.oper_type)?s("div",{staticClass:"m-top20"},[s("el-radio-group",{model:{value:t.form_data.bidding,callback:function(e){t.$set(t.form_data,"bidding",e)},expression:"form_data.bidding"}},[s("div",{staticClass:"m-bottom10"},[s("el-radio",{attrs:{label:1,disabled:0===t.form_data.bidding}},[t._v("设置竞价实例资源池")]),s("span",{staticClass:"prompt_message"},[t._v("资源池状态且为同一商品的资源，支持设置为竞价实例资源")]),s("br")],1),s("div",[s("el-radio",{attrs:{label:0,disabled:1===t.form_data.bidding}},[t._v("取消竞价实例资源池")]),s("span",{staticClass:"prompt_message"},[t._v("资源池与已售资源不支持一起取消；且单次最多取消的数量为30")])],1)])],1):t._e()],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认")]),s("el-button",{on:{click:function(e){return t.back("0")}}},[t._v("取消")])],1)])],1)},b=[],f=s("1477"),v=function(t){Object(u["a"])(s,t);var e=Object(_["a"])(s);function s(){var t;return Object(c["a"])(this,s),t=e.apply(this,arguments),t.alert_title="是否确定对以下".concat(t.rows.length,"台物理机执行").concat(t.title,"操作？"),t.status_list=["开机","关机","重启"],t.valid=1,t.recycle_list=[],t.form_data={valid:"",recycleId:"",reason:"",bidding:0},t.operate_info={start_up_host:"host_operate",shutdown_host:"host_operate",restart_host:"host_operate",online_maintenance:"host_maintenance",offline_maintenance:"host_maintenance",finish:"finish_maintenance",shelves:"shelves",disperse:"disperse",finish_validate:"finish_validate",kvm_to_eci:"switch_business_type",eci_to_kvm:"switch_business_type",bidding:"set_host_bid_attribute"},t}return Object(l["a"])(s,[{key:"created",value:function(){["shelves","finish_validate"].includes(this.oper_type)&&this.get_host_recycle_department(),"bidding"===this.oper_type&&0===this.rows[0].is_spot&&(this.form_data.bidding=1)}},{key:"get_host_recycle_department",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get_host_recycle_department({});case 2:e=t.sent,"Success"===e.code&&(this.recycle_list=e.data);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"confirm",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!["shelves","finish_validate"].includes(this.oper_type)){t.next=6;break}if(e=!0,s=this.$refs.form,s.validate((function(t){t||(e=!1)})),e){t.next=6;break}return t.abrupt("return",!1);case 6:return a=this.status_list.includes(this.title)?{op_type:this.oper_type,host_ids:this.rows.map((function(t){return t.host_id}))}:["online_maintenance","offline_maintenance"].includes(this.oper_type)?{maintenance_type:this.oper_type,host_ids:this.rows.map((function(t){return t.host_id}))}:"finish_validate"===this.oper_type?{host_ids:this.rows.map((function(t){return t.host_id})),status:"1"===this.form_data.valid?"READY":"INIT_ERROR",noticer:this.form_data.recycleId,reason:"0"===this.form_data.valid?this.form_data.reason:void 0}:"shelves"===this.oper_type?{host_ids:this.rows.map((function(t){return t.host_id})),department_name:this.form_data.recycleId}:["kvm_to_eci","eci_to_kvm"].includes(this.oper_type)?{host_ids:this.rows.map((function(t){return t.host_id})),dest_business_type:"kvm_to_eci"===this.oper_type?"ECI":"KVM"}:"bidding"===this.oper_type?{host_ids:this.rows.map((function(t){return t.host_id})),is_spot:this.form_data.bidding}:{host_ids:this.rows.map((function(t){return t.host_id}))},t.next=9,f["a"][this.operate_info[this.oper_type]](Object(n["a"])({},a));case 9:if(i=t.sent,"Success"!==i.code){t.next=26;break}if("finish_validate"!==this.oper_type){t.next=16;break}this.$message.success(i.message),this.back("1"),t.next=24;break;case 16:if(!(i.data.fail_host_list.length>0)){t.next=22;break}return this.$message.warning(i.message),this.back("0"),t.abrupt("return");case 22:this.$message.success(i.message),this.back("1");case 24:t.next=27;break;case 26:this.back("0");case 27:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"back",value:function(t){this.visible_sync=!1}}]),s}(h["e"]);Object(p["a"])([Object(h["d"])("visible")],v.prototype,"visible_sync",void 0),Object(p["a"])([Object(h["c"])({default:function(){return[]}})],v.prototype,"rows",void 0),Object(p["a"])([Object(h["c"])(String)],v.prototype,"title",void 0),Object(p["a"])([Object(h["c"])(String)],v.prototype,"oper_type",void 0),Object(p["a"])([Object(h["b"])("close")],v.prototype,"back",null),v=Object(p["a"])([Object(h["a"])({components:{ActionBlock:d["a"]}})],v);var y=v,g=y,k=s("2877"),O=Object(k["a"])(g,m,b,!1,null,null,null),w=O.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"数据批量导入",visible:t.visible_sync,width:"600px","destroy-on-close":!0,"custom-class":"upload","close-on-click-modal":!1},on:{"update:visible":function(e){t.visible_sync=e},close:t.back}},[s("div",{staticClass:"upload"},[s("div",{staticClass:"m-bottom10"},[t._v("请选择需要导入的可用区")]),s("el-select",{attrs:{filterable:"","filter-method":t.getPodList,placeholder:"请选择"},on:{"visible-change":t.change_pod},model:{value:t.az,callback:function(e){t.az=e},expression:"az"}},t._l(t.az_list,(function(e){return s("el-option",{key:e.pod_id,attrs:{label:e.az_name+" ( "+e.pod_name+" ) ",value:e.pod_id}},[t._v(t._s(e.az_name)+" ("+t._s(e.pod_name)+")")])})),1),0===t.az.length?s("span",{staticClass:"error_message m-left10"},[t._v("请选择可用区")]):t._e(),s("div",{staticClass:"flex-between m-top10 m-bottom20 down"},[s("span",[t._v("请选择需要上传的文件")]),s("a",{staticClass:"clickble",on:{click:t.down}},[t._v("下载导入模板")])]),s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/ecs_business/v1/host/import_host/?pod_id="+t.az,"before-upload":t.before_upload,"file-list":t.fileList,accept:".xls,.xlsx",name:"host_template","auto-upload":!1,"on-success":t.FnSuccess,headers:{"Access-Token":t.$store.state.token}}},[s("el-button",{attrs:{size:"small",type:"primary"}},[t._v("选择文件")])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认")]),s("el-button",{on:{click:function(e){return t.back("0")}}},[t._v("取消")])],1)])],1)},x=[],C=s("c839"),S=function(t){Object(u["a"])(s,t);var e=Object(_["a"])(s);function s(){var t;return Object(c["a"])(this,s),t=e.apply(this,arguments),t.fileList=[],t.az_list=[],t.az="",t}return Object(l["a"])(s,[{key:"created",value:function(){this.getPodList()}},{key:"change_pod",value:function(t){t||this.getPodList()}},{key:"getPodList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:"",t.next=3,C["a"].get_pod_list({page_index:1,page_size:20,search_info:e});case 3:s=t.sent,"Success"===s.code&&(this.az_list=s.data.pod_list.filter((function(t){return t.status})));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"before_upload",value:function(t){}},{key:"FnSuccess",value:function(t,e,s){if("Success"===t.code){if(t.data.fail_host_list.length>0)return this.$message.warning("物理机导入任务下发失败！"),void this.back("1");this.$message.success("物理机导入任务下发成功！"),this.back("1")}else this.$message.error(JSON.stringify(t.message)),this.back("0")}},{key:"down",value:function(){window.location.href="/ecs_business/v1/host/download_template/"}},{key:"confirm",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.az){t.next=2;break}return t.abrupt("return");case 2:e=this.$refs.upload,e.submit();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"back",value:function(t){this.visible_sync=!1}}]),s}(h["e"]);Object(p["a"])([Object(h["d"])("visible")],S.prototype,"visible_sync",void 0),Object(p["a"])([Object(h["b"])("close")],S.prototype,"back",null),S=Object(p["a"])([Object(h["a"])({})],S);var T=S,F=T,R=(s("cc18"),Object(k["a"])(F,j,x,!1,null,null,null)),$=R.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"迁移",visible:t.visible_sync,width:"1140px","destroy-on-close":!0,"custom-class":"upload","close-on-click-modal":!1},on:{"update:visible":function(e){t.visible_sync=e},close:t.back}},[s("div",{staticClass:"migrate"},[s("div",{staticClass:"left"},[s("div",{staticClass:"m-bottom10"},[s("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}),t._v(" "+t._s(t.rows[0].host_name)+"("),s("span",{staticClass:"num_message"},[t._v(t._s(t.selected.length))]),t._v("/"+t._s(t.list.length)+") ")],1),s("el-table",{ref:"table",attrs:{data:t.list,border:"","show-header":!1,"max-height":"500"},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection"}}),s("el-table-column",{attrs:{prop:"ecs_id",label:""}}),s("el-table-column",{attrs:{prop:"status",label:""}}),s("el-table-column",{attrs:{prop:"genre",label:""}})],1),0===t.selected.length?s("div",{staticClass:"error_message m-top10"},[t._v("请选择虚拟机")]):t._e()],1),s("div",{staticClass:"center"},[s("div",[t._v("迁移至")]),s("div",[t._v("------------\x3e")])]),s("div",{staticClass:"right"},[s("h4",[t._v("目的主机:")]),s("div",{staticClass:"m-bottom20"},[s("span",{staticClass:"m-right10"},[t._v("可用区:")]),s("span",[t._v(t._s(t.rows[0].az_name))])]),s("div",{staticClass:"m-bottom10 flex-host"},[s("span",{staticClass:"m-right10"},[t._v("物理机:")]),s("div",[s("el-select",{attrs:{filterable:"","filter-method":t.get_physical_list,placeholder:"请选择",multiple:""},on:{"visible-change":t.change_physical},model:{value:t.physical,callback:function(e){t.physical=e},expression:"physical"}},t._l(t.physical_list,(function(e){return s("el-option",{key:e.host_id,attrs:{label:e.host_name,value:e.host_id}},[s("span",[t._v(t._s(e.host_name))])])})),1)],1)]),s("div",{staticClass:"m-right10 flex-between"},[s("span",{staticClass:"m-right10 m-top20"},[t._v("迁移推荐:")]),s("div",t._l(t.recommend,(function(e){return s("div",{key:e.host_id},[t._v(" "+t._s(e.host_id)+" "),s("el-tooltip",{attrs:{content:parseFloat(e.cpu_usage).toFixed(2)+"%",placement:"top",effect:"light"}},[s("span",[s("CustomIcon",{attrs:{hei:e.cpu_usage}}),t._v("CPU")],1)]),s("el-tooltip",{attrs:{content:parseFloat(e.memory_usage).toFixed(2)+"%",placement:"top",effect:"light"}},[s("span",[s("CustomIcon",{attrs:{hei:e.memory_usage}}),t._v("内存")],1)])],1)})),0)])])]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认")]),s("el-button",{on:{click:function(e){return t.back("0")}}},[t._v("取消")])],1)])],1)},z=[],P=(s("6062"),s("3ca3"),s("ddb0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"total"},[s("div",{staticClass:"used",style:{height:0===t.hei?0:t.hei+"%",background:t.hei>=0&&t.hei<50?"#67c23a":t.hei<80?"yellow":"red"}})])}),L=[],I=(s("a9e3"),function(t){Object(u["a"])(s,t);var e=Object(_["a"])(s);function s(){return Object(c["a"])(this,s),e.apply(this,arguments)}return Object(l["a"])(s)}(h["e"]));Object(p["a"])([Object(h["c"])(Number)],I.prototype,"hei",void 0),I=Object(p["a"])([Object(h["a"])({})],I);var D=I,M=D,G=(s("2c77"),Object(k["a"])(M,P,L,!1,null,"1f8e5af6",null)),Y=G.exports,H=function(t){Object(u["a"])(s,t);var e=Object(_["a"])(s);function s(){var t;return Object(c["a"])(this,s),t=e.apply(this,arguments),t.list=t.rows[0].ecs_list,t.selected=[],t.checked=!1,t.isIndeterminate=!1,t.physical=[],t.physical_list=[],t.recommend=[],t}return Object(l["a"])(s,[{key:"created",value:function(){this.get_physical_list(),this.get_recommended_host(),"GPU"===this.rows[0].host_purpose?this.list=this.rows[0].ecs_list.filter((function(t){return t.is_gpu&&"已关机"===t.status||!t.is_gpu})):this.list=this.rows[0].ecs_list}},{key:"change_physical",value:function(t){t||this.get_physical_list()}},{key:"watch_physical",value:function(t){this.judge()}},{key:"judge",value:function(){var t=this.physical_list.filter((function(t){return"CPU"===t.host_purpose})),e=t.map((function(t){return t.host_id})),s=Object(o["a"])(new Set([].concat(Object(o["a"])(e),Object(o["a"])(this.physical)))).length;this.selected.some((function(t){return t.is_gpu}))&&s<[].concat(Object(o["a"])(e),Object(o["a"])(this.physical)).length&&(this.$message.warning("GPU云主机不能被迁移到非GPU物理机上"),this.physical=[])}},{key:"get_physical_list",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a=this,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:"",t.next=3,f["a"].get_host_list({host_name:e,az_id:this.rows[0].pod__az_id,page_index:1,page_size:20});case 3:s=t.sent,"Success"===s.code&&(this.physical_list=s.data.host_list.filter((function(t){return t.host_id!==a.rows[0].host_id&&"online"===t.machine_status&&a.rows[0].gpu_model===t.gpu_model})));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"get_recommended_host",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].recommended_host({host_id:this.rows[0].host_id,is_gpu:"GPU"===this.rows[0].host_purpose?"1":"0",gpu_card_name:this.rows[0].gpu_real_name});case 2:e=t.sent,"Success"===e.code&&(this.recommend=e.data.data);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleCheckAllChange",value:function(t){var e=this.$refs.table;t?e.toggleAllSelection():e.clearSelection(),this.isIndeterminate=!1}},{key:"handleSelectionChange",value:function(t){this.selected=t,this.checked=t.length===this.list.length,this.isIndeterminate=t.length>0&&t.length<this.list.length,this.judge()}},{key:"confirm",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.selected.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f["a"].migrate({ecs_ids:this.selected.map((function(t){return t.ecs_id})),start_host_id:this.rows[0].host_id,end_host_ids:this.physical,is_gpu:"GPU"===this.rows[0].host_purpose?"1":"0"});case 4:e=t.sent,"Success"===e.code?(this.$message.success("物理机迁移任务下发成功！"),this.back("1")):this.back("0");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"back",value:function(t){this.visible_sync=!1}}]),s}(h["e"]);Object(p["a"])([Object(h["d"])("visible")],H.prototype,"visible_sync",void 0),Object(p["a"])([Object(h["c"])({default:function(){return[]}})],H.prototype,"rows",void 0),Object(p["a"])([Object(h["f"])("physical")],H.prototype,"watch_physical",null),Object(p["a"])([Object(h["b"])("close")],H.prototype,"back",null),H=Object(p["a"])([Object(h["a"])({components:{CustomIcon:Y}})],H);var A=H,U=A,B=(s("23af"),s("9f1f"),Object(k["a"])(U,E,z,!1,null,null,null)),K=B.exports,V=s("9074"),q=s("e527"),J=s("8ce4"),N=s("3f8d"),Q=s("268f"),W=s("3673"),X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-dialog",{attrs:{title:"分配资源",visible:t.visible_sync,width:"770px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible_sync=e},close:t.back}},[s("div",[s("el-alert",{attrs:{title:t.alert_title,type:"warning",center:"",closable:!1}}),s("el-table",{attrs:{data:t.rows,border:"","max-height":"253"}},[s("el-table-column",{attrs:{prop:"host_name",label:"主机名",width:"150px"}}),s("el-table-column",{attrs:{prop:"az_name",label:"区域"}}),s("el-table-column",{attrs:{prop:"machine_status_name",label:"机器状态"}}),s("el-table-column",{attrs:{prop:"host_purpose",label:"主机用途"}}),s("el-table-column",{attrs:{prop:"host_attribution_name",label:"主机归属"}})],1),s("div",{staticClass:"ecs-belong m-top20"},[s("span",{staticClass:"m-right20"},[t._v("设置主机归属：")]),s("el-select",{attrs:{placeholder:"请选择",multiple:""},model:{value:t.ecs_id,callback:function(e){t.ecs_id=e},expression:"ecs_id"}},t._l(t.ecs_list,(function(t){return s("el-option",{key:t.host_attribution_id,attrs:{label:t.name,value:t.host_attribution_id}})})),1)],1),0===t.ecs_id.length?s("div",{staticClass:"error_message error"},[t._v("请选择主机归属")]):t._e()],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认")]),s("el-button",{on:{click:function(e){return t.back("0")}}},[t._v("取消")])],1)])],1)},Z=[],tt=function(t){Object(u["a"])(s,t);var e=Object(_["a"])(s);function s(){var t;return Object(c["a"])(this,s),t=e.apply(this,arguments),t.alert_title="是否确定对以下".concat(t.rows.length,"台物理机执行分配资源操作吗？"),t.ecs_list=[],t.ecs_id=[],t}return Object(l["a"])(s,[{key:"created",value:function(){this.get_host_attribution()}},{key:"get_host_attribution",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get_host_attribution({});case 2:e=t.sent,"Success"===e.code&&(this.ecs_list=e.data.host_attribution_list);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"confirm",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.ecs_id&&0!==this.ecs_id.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f["a"].set_host_attribution({host_ids:this.rows.map((function(t){return t.host_id})),host_attribution_id:this.ecs_id.join(",")});case 4:if(e=t.sent,"Success"!==e.code){t.next=16;break}if(!(e.data.fail_host_list.length>0)){t.next=12;break}return this.$message.warning(e.message),this.back("1"),t.abrupt("return");case 12:this.$message.success(e.message),this.back("1");case 14:t.next=17;break;case 16:this.back("0");case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"back",value:function(t){this.visible_sync=!1}}]),s}(h["e"]);Object(p["a"])([Object(h["d"])("visible")],tt.prototype,"visible_sync",void 0),Object(p["a"])([Object(h["c"])({default:function(){return[]}})],tt.prototype,"rows",void 0),Object(p["a"])([Object(h["b"])("close")],tt.prototype,"back",null),tt=Object(p["a"])([Object(h["a"])({components:{ActionBlock:d["a"]}})],tt);var et=tt,st=et,at=(s("bda3"),Object(k["a"])(st,X,Z,!1,null,null,null)),it=at.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{title:"设置属性",visible:t.visible_sync,width:"600px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible_sync=e}}},[s("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:t.form_data,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"主机用途"}},[s("el-cascader",{staticClass:"w-410",attrs:{options:t.host_types,props:{label:"type_name",value:"type",children:"list",expandTrigger:"hover"},clearable:"",placeholder:"保持不变"},model:{value:t.form_data.host_purpose,callback:function(e){t.$set(t.form_data,"host_purpose",e)},expression:"form_data.host_purpose"}})],1),t.form_data.host_purpose.includes("vGPU")?s("el-form-item",{attrs:{label:"切分粒度"}},[s("el-input",{staticClass:"w-380",attrs:{placeholder:"若输入多个值，用英文逗号隔开"},model:{value:t.particle,callback:function(e){t.particle=e},expression:"particle"}}),t._v(" GB "),s("el-tooltip",{attrs:{"popper-class":"tooltip-width",content:"每块GPU仅能按照一种显存大小和切分类型进行切分；同物理机不同显卡切分粒度/切分类型可以不同；故一台物理机切分粒度/切分类型的数量不能多于物理机GPU数量。最多支持设置4种值。",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text"}},[s("svg-icon",{staticClass:"info",attrs:{icon:"info"}})],1)],1)],1):t._e(),t.particle.split(",").length>4?s("div",{staticClass:"error_message tip"},[t._v("最多支持设置4种值")]):t.particle.includes("，")?s("div",{staticClass:"error_message tip"},[t._v("请用英文逗号隔开")]):t._e(),t.form_data.host_purpose.includes("vGPU")?s("el-form-item",{attrs:{label:"切分类型"}},[s("el-select",{staticClass:"w-410",model:{value:t.vgpu_segment_type,callback:function(e){t.vgpu_segment_type=e},expression:"vgpu_segment_type"}},t._l(t.particleList,(function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1):t._e(),s("el-form-item",{attrs:{label:"专属客户"}},[s("el-select",{attrs:{placeholder:"保持不变",clearable:""},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}},[s("el-option",{attrs:{label:"全部客户",value:"all"}}),s("el-option",{attrs:{label:"专属客户",value:"select"}})],1),s("el-select",{staticStyle:{"margin-left":"10px"},attrs:{multiple:"",filterable:"",remote:"","remote-method":t.getCustomerList,disabled:"select"!==t.customer},on:{"visible-change":t.changeCustomer},model:{value:t.form_data.customer_ids,callback:function(e){t.$set(t.form_data,"customer_ids",e)},expression:"form_data.customer_ids"}},t._l(t.customerList,(function(e){return s("el-option",{key:e.id,attrs:{value:e.id,label:e.id+"("+e.name+")"}},[t._v(t._s(e.id+"("+e.name+")"))])})),1)],1),s("el-form-item",{attrs:{label:"产品规格族"}},[s("el-cascader",{staticClass:"w-410",attrs:{options:t.familyOption,props:{label:"name",value:"spec_family_id",expandTrigger:"hover",multiple:!0},clearable:"","filter-method":t.getFamilyList,placeholder:"保持不变"},on:{"visible-change":t.changeFamily,change:t.change},model:{value:t.form_data.spec_family_ids,callback:function(e){t.$set(t.form_data,"spec_family_ids",e)},expression:"form_data.spec_family_ids"}})],1),s("el-form-item",{attrs:{label:"支持存储类型",prop:"backend"}},[s("el-select",{staticClass:"w-410",attrs:{clearable:"",placeholder:"保持不变"},model:{value:t.form_data.backend_type,callback:function(e){t.$set(t.form_data,"backend_type",e)},expression:"form_data.backend_type"}},t._l(t.backendList,(function(t){return s("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),s("el-form-item",{attrs:{label:"客户黑名单"}},[s("el-select",{attrs:{placeholder:"保持不变",clearable:""},model:{value:t.black_customer,callback:function(e){t.black_customer=e},expression:"black_customer"}},[s("el-option",{attrs:{label:"不设置客户黑名单",value:"all"}}),s("el-option",{attrs:{label:"设置客户黑名单",value:"select"}})],1),s("el-select",{staticStyle:{"margin-left":"10px"},attrs:{multiple:"",filterable:"",remote:"","remote-method":t.getBlackCustomerList,disabled:"select"!==t.black_customer},on:{"visible-change":t.changeBlackCustomer},model:{value:t.form_data.black_customer_ids,callback:function(e){t.$set(t.form_data,"black_customer_ids",e)},expression:"form_data.black_customer_ids"}},t._l(t.blackCustomerList,(function(e){return s("el-option",{key:e.id,attrs:{value:e.id,label:e.id+"("+e.name+")"}},[t._v(t._s(e.id+"("+e.name+")"))])})),1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")]),s("el-button",{on:{click:function(e){return t.back("0")}}},[t._v("取 消")])],1)],1)},ot=[],rt=(s("33d1"),s("ea98"),function(t){Object(u["a"])(s,t);var e=Object(_["a"])(s);function s(){var t,a,i;return Object(c["a"])(this,s),i=e.apply(this,arguments),i.form_data={host_type:"",host_purpose:"",backend_type:"",customer_ids:[],black_customer_ids:[],spec_family_ids:[]},i.type="",i.backend="",i.particle="",i.host_types=[],i.host_uses=[],i.customer_id=[],i.black_customer_id=[],i.customerList=null===(t=i.rows[0])||void 0===t?void 0:t.exclusive_customers,i.blackCustomerList=null===(a=i.rows[0])||void 0===a?void 0:a.exclusive_black_customers,i.family=[],i.familyList=[],i.flag=!0,i.flagFamily=!0,i.particleList=["Q","B","C","A"],i.vgpu_segment_type=i.particleList[0],i.familyOption=[],i.customerOption=[],i.blackCustomerOption=[],i.customer="",i.black_customer="",i.backendList=[{id:"block",name:"云盘"},{id:"local",name:"本地盘"},{id:"local,block",name:"云盘/本地盘"}],i}return Object(l["a"])(s,[{key:"created",value:function(){this.getHostTypes(),this.getCustomerList("",!0),this.getFamilyList()}},{key:"watch",value:function(t){"select"!==t&&(this.form_data.customer_ids=[])}},{key:"watch_black",value:function(t){"select"!==t&&(this.form_data.black_customer_ids=[])}},{key:"getHostTypes",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get_host_type({});case 2:e=t.sent,"Success"===e.code&&(this.host_types=e.data,this.host_types.forEach((function(t,e){var a=[];t.list.forEach((function(t,e){a[e]={type:t.use_type,type_name:t.use_name}})),s.host_types[e]={type:t.type,type_name:t.type_name,list:a}})));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"changeFamily",value:function(t){t||this.getFamilyList()}},{key:"changeCustomer",value:function(t){t&&(this.customerList=[])}},{key:"changeBlackCustomer",value:function(t){t&&(this.blackCustomerList=[])}},{key:"change",value:function(t){var e=t.at(-1),s=t.filter((function(t){return t[0]===e[0]}));this.form_data.spec_family_ids=s}},{key:"getFamilyList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:"",t.next=3,f["a"].getFamilyList({host_ids:this.rows.map((function(t){return t.host_id})),spec_family_name:e});case 3:s=t.sent,"Success"==s.code&&(this.familyList=s.data.spec_family_list,this.familyOption=[{spec_family_id:"none",name:"不设置规格族"},{spec_family_id:"set",name:"设置规格族",children:this.familyList}]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getCustomerList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:"",s=i.length>1&&void 0!==i[1]&&i[1],e||s){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,f["a"].getCustomerList({host_ids:this.rows.map((function(t){return t.host_id})),customer_id:e});case 6:a=t.sent,"Success"==a.code&&(this.customerList=a.data.customer_list);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getBlackCustomerList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:"",s=i.length>1&&void 0!==i[1]&&i[1],e||s){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,f["a"].getCustomerList({host_ids:this.rows.map((function(t){return t.host_id})),customer_id:e});case 6:a=t.sent,"Success"==a.code&&(this.blackCustomerList=a.data.customer_list);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"confirm",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.form_data.spec_family_ids.map((function(t){return t[1]})),s={host_ids:this.rows.map((function(t){return t.host_id})),host_type:this.form_data.host_purpose.length>0?this.form_data.host_purpose[0]:void 0,host_purpose:this.form_data.host_purpose.length>1?this.form_data.host_purpose[1]:void 0,backend_type:""!==this.form_data.backend_type?this.form_data.backend_type:void 0,customer_ids:this.form_data.customer_ids.length>0?this.form_data.customer_ids:"all"===this.customer?[]:void 0,black_customer_ids:this.form_data.black_customer_ids.length>0?this.form_data.black_customer_ids:"all"===this.black_customer?[]:void 0,spec_family_ids:this.form_data.spec_family_ids.length>0?"none"===this.form_data.spec_family_ids[0][0]?[]:e:void 0},t.next=4,f["a"].update_attribute(s);case 4:if(a=t.sent,"Success"!==a.code){t.next=14;break}if(!(a.data.fail_host_list.length>0)){t.next=10;break}return this.$message.warning(a.message),this.back("0"),t.abrupt("return");case 10:this.$message.success(a.message),this.back("1"),t.next=15;break;case 14:this.back("0");case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"back",value:function(t){this.visible_sync=!1}}]),s}(h["e"]));Object(p["a"])([Object(h["d"])("visible")],rt.prototype,"visible_sync",void 0),Object(p["a"])([Object(h["c"])({default:function(){return[]}})],rt.prototype,"rows",void 0),Object(p["a"])([Object(h["f"])("customer")],rt.prototype,"watch",null),Object(p["a"])([Object(h["f"])("black_customer")],rt.prototype,"watch_black",null),Object(p["a"])([Object(h["b"])("close")],rt.prototype,"back",null),rt=Object(p["a"])([Object(h["a"])({components:{svgIcon:W["a"]}})],rt);var ct=rt,lt=ct,ut=(s("a520"),s("5a59"),Object(k["a"])(lt,nt,ot,!1,null,"26eff8a9",null)),_t=ut.exports,pt=s("ec7a"),ht=function(t){Object(u["a"])(s,t);var e=Object(_["a"])(s);function s(){var t;return Object(c["a"])(this,s),t=e.apply(this,arguments),t.search_option={az_id:{placeholder:"请选择可用区",list:[]},out_band_address:{placeholder:"请输入带外IP"},host_ip:{placeholder:"请输入管理网IP"},host_name:{placeholder:"请输入主机名称/ID"},gpu_model:{placeholder:"请输入显卡型号"},cpu:{placeholder:"请输入CPU型号"},nic:{placeholder:"请输入网卡型号"},room:{placeholder:"请选择机房",list:[]},host_rack:{placeholder:"请输入机柜编号"},bare_metal_id:{placeholder:"请输入物理机产品ID"},bare_metal_name:{placeholder:"请输入物理机产品名称"},customer_keyword:{placeholder:"请输入专属客户ID/名称"}},t.operate_btns=[{label:"分配资源",value:"resource"},{label:"更改属性",value:"update_attribute"},{label:"下架",value:"shelves"},{label:"竞价实例",value:"bidding"}],t.rows_operate_btns=[],t.error_msg={start_up_host:"已选主机需为在线或离线状态",shutdown_host:"已选主机需为在线或离线状态",restart_host:"已选主机需为在线或离线状态",online_maintenance:"已选主机需为在线状态",offline_maintenance:"已选主机需为在线或离线状态且已选主机上不能有虚拟机运行",finish:"已选主机需为在线维护中或离线维护中",shelves:"已选主机需为维护中状态且已选主机上不能有虚拟机运行",disperse:"已选主机需为在线状态",migrate:"已选主机需为在线状态"},t.host_belongs=[],t.search_data={},t.page_info={current:1,size:20,total:0},t.list=[],t.visible=!1,t.oper_type="",t.oper_label="",t.multi_rows=[],t.auth_list=[],t.filter_data={},t.host_types=[],t.host_uses=[],t.host_source=[],t.spec_family_list=[],t.all_column_item=[],t.all_item=[],t.custom_visible=!1,t.tableHeight=70,t.custom_host=[],t.power_list=[],t.machine_list=[],t.backendList=[{value:"block",text:"云盘"},{value:"local",text:"本地盘"},{value:"local,block",text:"云盘/本地盘"}],t.backendObj={block:"云盘",local:"本地盘","local,block":"云盘/本地盘"},t.is_pare_host=[{text:"是",value:"1"},{text:"否",value:"0"}],t}return Object(l["a"])(s,[{key:"created",value:function(){for(var t in this.getFamilyList(),this.get_room_list(),this.get_az_list(),this.get_status_list(),this.get_host_attribution(),this.getHostTypes(),this.get_host_recycle_department(),this.get_host_list_field(),this.auth_list=this.$store.state.auth_info[this.$route.name],delete this.$store.state.host_search[""],this.search_option)this.search_option[t].default_value=this.$store.state.host_search[t];this.$route.query.host_id&&(this.search_option.host_id.default_value=this.$route.query.host_id),this.fn_search()}},{key:"mounted",value:function(){this.setHeight()}},{key:"FnOperate",value:function(){this.setHeight()}},{key:"setHeight",value:function(){var t=this;this.$nextTick((function(){var e=t.$refs.table;t.tableHeight=window.innerHeight-e.$el.offsetTop-70;var s=t;window.onresize=function(){s.tableHeight=window.innerHeight-e.$el.offsetTop-70}}))}},{key:"get_status_list",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get_status_list({});case 2:if(e=t.sent,"Success"===e.code){for(s in e.data.power_status)this.power_list.push({text:e.data.power_status[s],value:s});for(a in e.data.machine_status)this.machine_list.push({text:e.data.machine_status[a],value:a})}case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"get_host_list_field",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get_host_list_field({is_op:"0"});case 2:e=t.sent,"Success"===e.code&&(s=["field_name","show_name"],a=["prop","label"],i=[],e.data.map((function(t){return i=[].concat(Object(o["a"])(i),Object(o["a"])(t.filed)),t})),this.all_item=e.data,this.all_column_item=Object(J["b"])(i,a,s),this.get_custom_columns(this.$store.state.custom_host));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"get_custom_columns",value:function(t){var e=this;0!==t.length&&(this.custom_host=this.all_column_item.filter((function(e){return t.includes(e.label)})),this.custom_host.map((function(t){return["host_name","out_band_address","host_ip","cpu","ram","ecs_num","gpu_model","ram_volume","create_time","gpu_allot","gpu_count","ecs_gpu_count"].includes(t.prop)&&(t=Object.assign(t,{},{sortable:"custom"}),"ecs_num"===t.prop&&(t=Object.assign(t,{},{width:"140px"}))),["cpu_with_model","net_card_with_model"].includes(t.prop)&&(t=Object.assign(t,{},{width:"180px"})),"host_type_ch"===t.prop&&(t=Object.assign(t,{},{column_key:"host_type",list:e.host_types})),"host_purpose_ch"===t.prop&&(t=Object.assign(t,{},{column_key:"host_purpose",list:e.host_uses})),"host_attribution_name"===t.prop&&(t=Object.assign(t,{},{column_key:"host_belong",list:e.host_belongs})),"host_source"===t.prop&&(t=Object.assign(t,{},{column_key:"host_source",list:e.host_source})),"power_status_name"===t.prop&&(t=Object.assign(t,{},{column_key:"power_status",list:e.power_list})),"machine_status_name"===t.prop&&(t=Object.assign(t,{},{column_key:"machine_status",list:e.machine_list})),"exclusive_spec_family"===t.prop&&(t=Object.assign(t,{},{column_key:"ecs_family_id",multiple:!0,list:e.spec_family_list})),"net_nic"===t.prop&&(t=Object.assign(t,{},{width:"180px"})),"vgpu_segment_type"===t.prop&&(t=Object.assign(t,{},{column_key:"vgpu_segment_type",list:[{text:"Q",value:"Q"},{text:"B",value:"B"},{text:"C",value:"C"},{text:"A",value:"A"}]})),"backend_type"===t.prop&&(t=Object.assign(t,{},{column_key:"backend_type",list:e.backendList})),"is_prepare_host"===t.prop&&(t=Object.assign(t,{},{column_key:"is_prepare_host",list:e.is_pare_host})),"host_business_type"===t.prop&&(t=Object.assign(t,{},{column_key:"host_business_type",list:[{text:"KVM",value:"KVM"},{text:"ECI",value:"ECI"}]})),"is_spot"===t.prop&&(t=Object.assign(t,{},{column_key:"is_spot",list:[{text:"是",value:"1"},{text:"否",value:"0"}]})),t})))}},{key:"fn_search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.search_data=Object(n["a"])(Object(n["a"])({},t),this.filter_data),this.page_info.current=1,this.get_physical_list()}},{key:"beforeDestroy",value:function(){this.$store.commit("SET_HOST_SEARCH",this.search_data)}},{key:"FnCustom",value:function(){this.custom_visible=!0}},{key:"refresh",value:function(){this.page_info.current=1,this.get_physical_list()}},{key:"get_physical_list",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i,n,o,r,c,l,u,_,p,h,d,m,b,v,y,g,k,O,w,j,x,C,S,T,F;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.search_data,s=e.az_id,a=e.room,i=e.host_name,n=e.host_belong,o=e.host_purpose,r=e.host_type,c=e.out_band_address,l=e.host_ip,u=e.gpu_model,_=e.host_rack,p=e.host_source,h=e.ecs_family_id,d=e.cpu,m=e.nic,b=e.backend_type,v=e.product_id,y=e.product_name,g=e.power_status,k=e.machine_status,O=e.bare_metal_id,w=e.bare_metal_name,j=e.customer_keyword,x=e.vgpu_segment_type,C=e.is_prepare_host,S=e.host_business_type,T=e.is_spot,t.next=3,f["a"].get_host_list({az_id:s,machine_room_name:a,host_name:i,out_band_address:c,host_ip:l,gpu_model:u,host_rack:_,cpu:d,nic:m,product_id:v,product_name:y,bare_metal_id:O,bare_metal_name:w,customer_keyword:j,vgpu_segment_type:x?x[0]:void 0,page_index:this.page_info.current,page_size:this.page_info.size,sort_cpu:this.search_data.sort_cpu,sort_ram:this.search_data.sort_ram,sort_ecs_num:this.search_data.sort_ecs_num,sort_gpu_allot:this.search_data.sort_gpu_allot,host_attribution_id:n?n[0]:void 0,power_status:g?g[0]:void 0,machine_status:k?k[0]:void 0,sort_host_name:this.search_data.sort_host_name,sort_gpu_count:this.search_data.sort_gpu_count,sort_out_band_address:this.search_data.sort_out_band_address,sort_ecs_gpu_count:this.search_data.sort_ecs_gpu_count,sort_host_ip:this.search_data.sort_host_ip,host_purpose:o?o[0]:void 0,host_type:r?r[0]:void 0,host_source:p?p[0]:void 0,backend_type:b?b[0]:void 0,ecs_family_id:h&&h.length>0?h.join(","):void 0,is_prepare_host:C?C[0]:void 0,host_business_type:S?S[0]:void 0,is_spot:T?T[0]:void 0});case 3:F=t.sent,"Success"===F.code&&(this.list=F.data.host_list,this.page_info.total=F.data.page_info.count||0);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getHostTypes",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get_host_type({});case 2:e=t.sent,"Success"===e.code&&(s=["type","type_name","list"],a=["value","text","list"],this.host_types=Object(J["b"])(e.data,a,s),this.setList(this.host_types,"host_type_ch"));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getFamilyList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,q["a"].get_family_data();case 2:e=t.sent,"Success"===e.code&&(s=["spec_family_id","name"],a=["value","text"],this.spec_family_list=Object(J["b"])(e.data.spec_family_list,a,s),this.custom_host.length>0&&this.custom_host.map((function(t){"ecs_family_id"===t.column_key&&0===t.list.length&&i.$set(t,"list",i.spec_family_list)})));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"get_host_attribution",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get_host_attribution({});case 2:e=t.sent,"Success"===e.code&&(s=["host_attribution_id","name"],a=["value","text"],this.host_belongs=Object(J["b"])(e.data.host_attribution_list,a,s),this.setList(this.host_belongs,"host_attribution_name"));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"goEcs",value:function(t){this.$router.push({path:"/instance",query:{host_name:t}})}},{key:"down",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i,n,o,r,c,l,u,_,p,h,d,m,b,f,v,y,g,k,O,w,j,x,C,S;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(C in e=this.search_data,s=e.az_id,a=e.room,i=e.host_name,n=e.out_band_address,o=e.host_ip,r=e.gpu_model,c=e.host_rack,l=e.host_source,u=e.host_type,_=e.host_purpose,p=e.host_belong,h=e.cpu,d=e.nic,m=e.ecs_family_id,b=e.backend_type,f=e.product_id,v=e.product_name,y=e.power_status,g=e.machine_status,k=e.bare_metal_id,O=e.bare_metal_name,w=e.customer_keyword,j={az_id:s,machine_room_name:a,host_name:i,out_band_address:n,host_ip:o,cpu:h,nic:d,gpu_model:r,host_rack:c,product_id:f,product_name:v,bare_metal_id:k,bare_metal_name:O,customer_keyword:w,host_attribution_id:p?p[0]:void 0,host_purpose:_?_[0]:void 0,host_source:l?l[0]:void 0,host_type:u?u[0]:void 0,power_status:y?y[0]:void 0,machine_status:g?g[0]:void 0,backend_type:b?b[0]:void 0,ecs_family_id:m&&m.length>0?m.join(","):void 0,field_names:JSON.stringify(this.custom_host.map((function(t){return t.prop})))},x="",j)j[C]&&(x+="".concat(C,"=").concat(j[C],"&"));S=""===x?"":"?".concat(x.slice(0,x.length-1)),window.location.href="/ecs_business/v1/host/host_list_download/".concat(S);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"get_az_list",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V["a"].get_region_az_list({});case 2:e=t.sent,"Success"===e.code&&e.data.forEach((function(t){t.region_list.forEach((function(t){s.search_option.az_id.list=[].concat(Object(o["a"])(s.search_option.az_id.list),Object(o["a"])(Object(J["c"])(t.az_list,"az_name","az_id","label","type")))}))}));case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"get_room_list",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get_room_list({});case 2:e=t.sent,"Success"===e.code&&e.data.machine_room.forEach((function(t){s.search_option.room.list.push({label:t,type:t})}));case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"get_host_recycle_department",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get_host_recycle_department({});case 2:e=t.sent,"Success"===e.code&&(s=["department_name","department_name"],a=["value","text"],this.host_source=Object(J["b"])(e.data,a,s),this.setList(this.host_source,"host_source"));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSelectionChange",value:function(t){this.multi_rows=t}},{key:"FnSortChange",value:function(t){this.search_data.sort_cpu=void 0,this.search_data.sort_ram=void 0,this.search_data.sort_host_name=void 0,this.search_data.sort_out_band_address=void 0,this.search_data.sort_host_ip=void 0,this.search_data.sort_ecs_num=void 0,this.search_data.sort_gpu_allot=void 0,this.search_data.sort_gpu_count=void 0,this.search_data.sort_ecs_gpu_count=void 0,this.search_data["sort_".concat(t.prop)]="descending"===t.order?"1":"ascending"===t.order?"0":void 0,this.get_physical_list()}},{key:"handleSizeChange",value:function(t){this.page_info.size=t,this.get_physical_list()}},{key:"handleCurrentChange",value:function(t){this.page_info.current=t,this.get_physical_list()}},{key:"filterAttribute",value:function(t){var e=this;if(this.filter_data=Object(n["a"])(Object(n["a"])({},this.filter_data),t),this.filter_data.host_type&&this.filter_data.host_type.length>0){var s=["use_type","use_name"],a=["value","text"],i=this.host_types.filter((function(t){return t.value===e.filter_data.host_type[0]}));this.host_uses=i.length>0?Object(J["b"])(i[0].list,a,s):[]}else this.host_uses=[];this.setList(this.host_uses,"host_purpose_ch"),this.fn_search(this.search_data)}},{key:"handleMore",value:function(t){var e=t.label,s=t.value;this.handle(e,s)}},{key:"handle",value:function(t,e){if(console.log("22222222222"),0!==this.multi_rows.length||"upload"===e){if("finish_validate"===e)return this.multi_rows.every((function(t){return["init_error","init","offline"].includes(t.machine_status)}))?(this.oper_type=e,this.oper_label=t,void(this.visible=!0)):void this.$message.warning("物理机需为初始化状态或验证失败状态!");if(["upload","resource","update_attribute"].includes(e)){if("update_attribute"===e){var s=this.multi_rows[0],a=this.multi_rows.every((function(t){return t.is_prepare_host===s.is_prepare_host}));if(!a)return void this.$message.warning("备机不支持与资源池机器同时做批量操作!")}return this.oper_type=e,this.oper_label=t,void(this.visible=!0)}if("bidding"===e){var i=this.multi_rows.every((function(t){return 1===t.is_spot})),n=this.multi_rows.every((function(t){return 0===t.is_spot}));if(!i&&!n)return void this.$message.warning("已选主机竞价实例属性需一致")}if(this.judge(e)){if("disperse"===e){var o=this.multi_rows.filter((function(t){return"GPU"===t.host_purpose})),r=o.every((function(t){return t.ecs_list.every((function(t){return t.is_gpu&&"已关机"===t.status||!t.is_gpu}))}));if(!r)return void this.$message.warning("GPU物理机中的GPU云主机需为关机状态!")}this.oper_type=e,this.oper_label=t,this.visible=!0}else this.$message.warning(this.error_msg[e])}else this.$message.warning("请先勾选物理机!")}},{key:"judge",value:function(t){var e=this,s=Object(N["b"])(t),a=this.multi_rows.every((function(a){var i,n,o,r,c=0===(null===s||void 0===s?void 0:s.power.length)||(null===s||void 0===s?void 0:s.power.includes(a.power_status)),l=0===(null===s||void 0===s?void 0:s.host.length)||(null===s||void 0===s?void 0:s.host.includes(a.machine_status)),u=null===s||void 0===s||!s.vm||(null===s||void 0===s?void 0:s.vm)===a.ecs_list.length+1,_=!s.business||(null===(i=(n=s.business).includes)||void 0===i?void 0:i.call(n,a.host_business_type));!u&&["shutdown_host","restart_host"].includes(t)?e.error_msg[t]=null===(o=Object(N["b"])(t))||void 0===o?void 0:o.msg2:e.error_msg[t]=null===(r=Object(N["b"])(t))||void 0===r?void 0:r.msg;return c&&l&&u&&_}));return a}},{key:"out_of_band",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].external_management({host_id:this.multi_rows[0].host_id});case 2:e=t.sent,"Success"===e.code&&window.open(e.data.url.out_bond_addr);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setList",value:function(t,e){this.custom_host.map((function(s){return s.prop===e&&(s.list=t),s}))}},{key:"close",value:function(t){"upload"===this.oper_type&&this.get_room_list(),"1"===t&&this.get_physical_list(),this.visible=!1,this.oper_type="",this.oper_label="",this.multi_rows=[];var e=this.$refs.table;e.clearSelection()}}]),s}(h["e"]);ht=Object(p["a"])([Object(h["a"])({components:{ActionBlock:d["a"],Operate:w,UploadFile:$,Migrate:K,Record:Q["a"],SvgIcon:W["a"],Resource:it,UpdateAttribute:_t,CustomListItem:pt["a"]}})],ht);var dt=ht,mt=dt,bt=(s("4b41"),Object(k["a"])(mt,a,i,!1,null,"553f0764",null));e["default"]=bt.exports},"900b":function(t,e,s){},"979f":function(t,e,s){},"9f1f":function(t,e,s){"use strict";s("900b")},a15b:function(t,e,s){"use strict";var a=s("23e7"),i=s("e330"),n=s("44ad"),o=s("fc6a"),r=s("a640"),c=i([].join),l=n!=Object,u=r("join",",");a({target:"Array",proto:!0,forced:l||!u},{join:function(t){return c(o(this),void 0===t?",":t)}})},a520:function(t,e,s){"use strict";s("662d")},bda3:function(t,e,s){"use strict";s("4164")},c811:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"action-box"},[s("div",{ref:"search",staticClass:"search-box",class:{fold:!t.isOpen}},[t._l(t.search_option,(function(e,a){return s("div",{key:a,staticClass:"search-input",style:e.width?{width:e.width+"px"}:{}},[e.list&&!e.type?s("el-select",{attrs:{placeholder:e.placeholder,multiple:e.multiple,filterable:e.filter,remote:e.filter,"remote-method":e.filter?t.FnRemoteFilter:void 0,clearable:""},model:{value:t.search_value[a],callback:function(e){t.$set(t.search_value,a,e)},expression:"search_value[key]"}},t._l(e.list,(function(t,a){return s("el-option",{key:Array.isArray(e.list)?t.type:a,attrs:{label:Array.isArray(e.list)?t.label:t,value:Array.isArray(e.list)?t.type:a}})})),1):t._e(),!e.list&&!e.type||"composite"===e.type?s("el-input",{staticClass:"composite",style:e.width?{width:e.width+"px"}:{},attrs:{placeholder:e.placeholder,clearable:""},model:{value:t.search_value[a],callback:function(e){t.$set(t.search_value,a,e)},expression:"search_value[key]"}},["composite"===e.type?s("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.search_value[a+"sub"],callback:function(e){t.$set(t.search_value,a+"sub",e)},expression:"search_value[key + 'sub']"}},t._l(e.list,(function(t){return s("el-option",{key:t.type,attrs:{label:t.label,value:t.type}})})),1):t._e()],1):t._e(),"datetimerange"===e.type||"daterange"===e.type?[s("date-picker",{ref:"datepicker",refInFor:!0,attrs:{time_option:t.search_option[a]},on:{"fn-emit":function(e){return t.FnGetTime(e,a)}}})]:t._e()],2)})),t.type?t._e():s("div",{staticClass:"m-bottom20"},[s("el-button",{attrs:{type:"primary"},on:{click:t.FnSearch}},[t._v("查 询")]),s("el-button",{attrs:{type:"default"},on:{click:t.FnClear}},[t._v("清 空")])],1)],2),t.type?s("div",{staticClass:"m-bottom20"},[s("el-button",{attrs:{type:"primary"},on:{click:t.FnSearch}},[t._v("查 询")]),s("el-button",{attrs:{type:"default"},on:{click:t.FnClear}},[t._v("清 空")]),s("el-button",{staticClass:"m-bottom10",attrs:{type:"text"},on:{click:t.operate}},[t._v(t._s(t.isOpen?"折叠":"展开"))])],1):t._e(),t._t("default",(function(){return[t.create_btn?s("el-button",{attrs:{type:"primary",disabled:t.disabled},on:{click:t.FnShowCreate}},[t._v(t._s(t.create_btn))]):t._e()]}))],2)},i=[],n=s("d4ec"),o=s("bee2"),r=s("262e"),c=s("2caf"),l=(s("ac1f"),s("841c"),s("5319"),s("caad"),s("9ab4")),u=s("1b40"),_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-date-picker",{attrs:{type:t.time_option.type,editable:!1,"range-separator":"至","picker-options":{disabledDate:t.dis_date,onPick:t.onPicker},clearable:t.time_option.clearable,"start-placeholder":t.time_option.placeholder[0],"end-placeholder":t.time_option.placeholder[1]},on:{change:t.FnEmit},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})},p=[],h=function(t){Object(r["a"])(s,t);var e=Object(c["a"])(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.time=[],t.min_date="",t.day=0,t}return Object(o["a"])(s,[{key:"dis_date",value:function(t){var e=this.day;if(0!==e){var s=864e5,a=(new Date).getTime(),i=(new Date).getTime(),n=(new Date).getTime();return this.time_option.min_date?(i=new Date(this.time_option.min_date).getTime(),t.getTime()>n||t.getTime()<i-s):t.getTime()>n||t.getTime()>(this.min_date||a)+s*e||t.getTime()<this.min_date-s*e}}},{key:"onPicker",value:function(t){t.maxDate;var e=t.minDate;this.min_date=e.getTime()}},{key:"created",value:function(){this.day=this.time_option.dis_day-1||0,this.FnChangeDefaultTime(this.time_option.defaultTime)}},{key:"FnClear",value:function(){this.FnChangeDefaultTime(this.time_option.defaultTime)}},{key:"FnChangeDefaultTime",value:function(t){t&&(this.time=t)}},{key:"FnEmit",value:function(){return this.time}}]),s}(u["e"]);Object(l["a"])([Object(u["c"])({default:function(){return{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!1,dis_day:31,min_date:"",defaultTime:[new Date,new Date]}}})],h.prototype,"time_option",void 0),Object(l["a"])([Object(u["c"])({default:!1})],h.prototype,"clear",void 0),Object(l["a"])([Object(u["f"])("time_option.defaultTime")],h.prototype,"FnChangeDefaultTime",null),Object(l["a"])([Object(u["b"])("fn-emit")],h.prototype,"FnEmit",null),h=Object(l["a"])([u["a"]],h);var d=h,m=d,b=s("2877"),f=Object(b["a"])(m,_,p,!1,null,null,null),v=f.exports,y=function(t){Object(r["a"])(s,t);var e=Object(c["a"])(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.search_value={},t.time=null,t.date_key="",t.isOpen=!0,t}return Object(o["a"])(s,[{key:"FnGetTime",value:function(t,e){this.time=t,this.date_key=e}},{key:"FnSearch",value:function(){return this.search_value[this.date_key]=this.time,this.search_value}},{key:"watch_search_option",value:function(){var t=this;this.type&&this.$nextTick((function(){var e=t.$refs.search,s=window.getComputedStyle(e).height.replace("px","");parseInt(s)>52&&t.isOpen&&(t.isOpen=!1),t.FnOperate()}))}},{key:"operate",value:function(){this.isOpen=!this.isOpen,this.FnOperate()}},{key:"FnRemoteFilter",value:function(t){}},{key:"FnOperate",value:function(){}},{key:"FnShowCreate",value:function(){}},{key:"watch_search_value",value:function(t,e){}},{key:"FnClear",value:function(){for(var t in this.search_option)["datetimerange","daterange"].includes(this.search_option[t].type)?this.$refs.datepicker[0].FnClear():this.search_value={};this.FnSearch()}},{key:"mounted",value:function(){var t=this,e=0;for(var s in this.search_option)this.search_option[s].default_value&&(this.$set(this.search_value,s,this.search_option[s].default_value),e++);(e>0||"physical"===this.type)&&setTimeout((function(){t.FnSearch()}),500)}}]),s}(u["e"]);Object(l["a"])([Object(u["c"])({default:{}})],y.prototype,"search_option",void 0),Object(l["a"])([Object(u["c"])({default:""})],y.prototype,"create_btn",void 0),Object(l["a"])([Object(u["c"])({default:!0})],y.prototype,"disabled",void 0),Object(l["a"])([Object(u["c"])({default:!1})],y.prototype,"type",void 0),Object(l["a"])([Object(u["b"])("fn-search")],y.prototype,"FnSearch",null),Object(l["a"])([Object(u["f"])("search_option",{immediate:!0,deep:!0})],y.prototype,"watch_search_option",null),Object(l["a"])([Object(u["b"])("fn-filter")],y.prototype,"FnRemoteFilter",null),Object(l["a"])([Object(u["b"])("fn-operate")],y.prototype,"FnOperate",null),Object(l["a"])([Object(u["b"])("fn-create")],y.prototype,"FnShowCreate",null),Object(l["a"])([Object(u["f"])("search_value",{immediate:!0,deep:!0})],y.prototype,"watch_search_value",null),y=Object(l["a"])([Object(u["a"])({components:{DatePicker:v}})],y);var g=y,k=g,O=(s("681d"),s("e198c"),Object(b["a"])(k,a,i,!1,null,"37d74386",null));e["a"]=O.exports},c839:function(t,e,s){"use strict";var a=s("81a9"),i=s("bff7");e["a"]={get_pod_list:function(t){return Object(a["a"])(Object(i["a"])("GET","/pod/get_pod_list/",t))},get_az_info:function(t){return Object(a["a"])(Object(i["a"])("GET","/pod/get_pod_info/",t))},create_pod:function(t){return Object(a["a"])(Object(i["a"])("POST","/pod/create_pod/",t))},update_pod:function(t){return Object(a["a"])(Object(i["a"])("POST","/pod/update_pod/",t))},get_pod_history:function(t){return Object(a["a"])(Object(i["a"])("GET","/pod/get_pod_history/",t))}}},ca89:function(t,e,s){},cb4f:function(t,e,s){},cc18:function(t,e,s){"use strict";s("ca89")},d772:function(t,e,s){"use strict";var a=s("81a9"),i=s("bff7");e["a"]={get_operate_record_list:function(t){return Object(a["a"])(Object(i["a"])("GET","/ecs/history_record/",t))},get_detail:function(t){return Object(a["a"])(Object(i["a"])("GET","/ecs/get_ecs_detail/",t))}}},d990:function(t,e,s){},e198c:function(t,e,s){"use strict";s("979f")},e527:function(t,e,s){"use strict";var a=s("81a9"),i=s("bff7"),n=s("4328"),o=s.n(n);e["a"]={get_instance_list:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/ecs_list/",t))},operate_instance:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/operate/",t))},delete_instance:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/delete/",t))},recover_instance:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/recover/",t))},destroy_instance:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/destroy/",t))},get_status_list:function(){return Object(a["a"])(Object(i["a"])("GET","/ecs/ecs_status_list/"))},get_family_data:function(){return Object(a["a"])(Object(i["a"])("GET","/ecs/get_family_data/"))},reset_password:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/ecs_reset_password/",t))},update_spec:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/ecs_change_configure/",t))},update_system:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/ecs_change_system/",t))},get_usage_ip:function(t){return Object(a["a"])(Object(i["a"])("GET","/ecs/get_deleted_ecs_ip/",t))},get_vnc_url:function(t){return Object(a["a"])(Object(i["a"])("GET","/ecs/vnc_info/",t))},start_charge:function(t){return Object(a["a"])(Object(i["a"])("POST","/resource/start_charge/",t))},change_config_price:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/change_config_price/",t))},change_system_price:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/change_system_price/",t))},each_resource_price:function(t){return Object(a["a"])(Object(i["a"])("POST","/ecs/each_resource_price/",t))},export_list:function(t){return Object(a["a"])({method:"GET",url:"/ecs_business/v1/ecs/ecs_list_download/",params:t,paramsSerializer:function(t){return o.a.stringify(t)},responseType:"blob"})},get_list_field:function(){return Object(a["a"])(Object(i["a"])("POST","/ecs/get_ecs_list_field/"))}}},ea98:function(t,e,s){"use strict";var a=s("23e7"),i=s("e330"),n=s("1d80"),o=s("5926"),r=s("577e"),c=s("d039"),l=i("".charAt),u=c((function(){return"\ud842"!=="𠮷".at(-2)}));a({target:"String",proto:!0,forced:u},{at:function(t){var e=r(n(this)),s=e.length,a=o(t),i=a>=0?a:s+a;return i<0||i>=s?void 0:l(e,i)}})},ec7a:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-dialog",{attrs:{visible:t.visible,title:"自定义列表项","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e}}},[s("div",{staticClass:"m-bottom10"},[t._v("清除缓存或者更换浏览器，自定义列表失效"),s("span",{staticClass:"warning_message m-left10"},[t._v("(最少选择5项，最多选择25项)")])]),s("div",{staticClass:"item"},[t._l(t.all_item,(function(e){return[s("div",{staticClass:"label"},[t._v(t._s(e.name))]),s("div",{staticClass:"checkbox-box"},[s("el-checkbox-group",{model:{value:t.select_item,callback:function(e){t.select_item=e},expression:"select_item"}},t._l(e.filed,(function(t){return s("el-checkbox",{key:t.show_name,attrs:{label:t.show_name,disabled:"主机名"===t.show_name||"云服务器ID"===t.show_name}})})),1)],1)]}))],2),s("span",[t._v("已选择："),s("span",{staticClass:"num_message"},[t._v(t._s(t.select_item.length))])]),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.FnConfirm}},[t._v("确 定")]),s("el-button",{on:{click:t.FnClose}},[t._v("取 消")])],1)])},i=[],n=s("2909"),o=s("d4ec"),r=s("bee2"),c=s("262e"),l=s("2caf"),u=s("9ab4"),_=s("1b40"),p=function(t){Object(c["a"])(s,t);var e=Object(l["a"])(s);function s(){var t;return Object(o["a"])(this,s),t=e.apply(this,arguments),t.select_item=[],t}return Object(r["a"])(s,[{key:"created",value:function(){"ecs"===this.type?this.FnHandleSelectItem(this.$store.state.ecs_custom_item):"physical"===this.type&&this.FnHandleSelectItem(this.$store.state.custom_host)}},{key:"FnHandleSelectItem",value:function(t){if(t.length>0)this.select_item=Object(n["a"])(t);else for(var e=0;e<this.all_column_item.length;e++){if(!(this.select_item.length<25))break;this.all_column_item[e].hidden||this.select_item.push(this.all_column_item[e].label)}this.FnEmit()}},{key:"FnConfirm",value:function(){this.select_item.length<5||this.select_item.length>25?this.$message.warning("自定义列表项最少为5项，最多为25项"):("ecs"===this.type?this.$store.commit("SET_ECS_CUSTOM_ITEM",this.select_item):"physical"===this.type&&this.$store.commit("SET_CUSTOM_HOST",this.select_item),this.FnEmit(),this.FnClose())}},{key:"FnClose",value:function(){this.$emit("update:visible",!1)}},{key:"FnEmit",value:function(){return this.select_item}}]),s}(_["e"]);Object(u["a"])([Object(_["c"])({default:!1})],p.prototype,"visible",void 0),Object(u["a"])([Object(_["c"])({default:"physical"})],p.prototype,"type",void 0),Object(u["a"])([Object(_["c"])({default:function(){return[]}})],p.prototype,"all_column_item",void 0),Object(u["a"])([Object(_["c"])({default:function(){return[]}})],p.prototype,"all_item",void 0),Object(u["a"])([Object(_["b"])("fn-custom")],p.prototype,"FnEmit",null),p=Object(u["a"])([_["a"]],p);var h=p,d=h,m=(s("f73f"),s("2877")),b=Object(m["a"])(d,a,i,!1,null,"173f2810",null);e["a"]=b.exports},f325:function(t,e,s){},f73f:function(t,e,s){"use strict";s("8045")}}]);
//# sourceMappingURL=chunk-12fcd9c3.f8d570e4.js.map