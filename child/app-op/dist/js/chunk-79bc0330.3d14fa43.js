(window["webpackJsonp_AppOp"]=window["webpackJsonp_AppOp"]||[]).push([["chunk-79bc0330"],{1116:function(e,t,s){"use strict";s("cb4f")},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},1477:function(e,t,s){"use strict";var a=s("81a9"),i=s("bff7");t["a"]={get_host_list:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/get_host_list/",e))},get_room_list:function(e){return Object(a["a"])(Object(i["b"])("GET","/host/machine_room_list/",e))},get_status_list:function(e){return Object(a["a"])(Object(i["b"])("GET","/host/host_status_list/",e))},external_management:function(e){return Object(a["a"])(Object(i["b"])("GET","/host/external_management/",e))},migrate:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/migration_operation/",e))},disperse:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/disperse_operation/",e))},record:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/host_operation_record/",e))},recommended_host:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/recommended_host/",e))},host_maintenance:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/host_maintenance/",e))},finish_maintenance:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/host_finish_maintenance/",e))},shelves:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/host_off_shelves/",e))},get_detail_overview:function(e){return Object(a["a"])(Object(i["b"])("GET","/host/host_main_details/",e))},get_detail_storage:function(e){return Object(a["a"])(Object(i["b"])("GET","/host/host_disk/",e))},down:function(e){return Object(a["a"])(Object(i["b"])("GET","/host/host_list_download/",e))},host_operate:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/operate/",e))},host_import:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/import/",e))},get_host_attribution:function(e){return Object(a["a"])(Object(i["b"])("GET","/host/get_host_attribution/",e))},set_host_attribution:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/set_host_attribution/",e))},get_host_type:function(e){return Object(a["a"])(Object(i["b"])("GET","/host/get_host_config/",e))},update_attribute:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/set_host_config/",e))},getCustomerList:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/get_customer_list/",e))},getFamilyList:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/get_family_list/",e))},finish_validate:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/verification_finish/",e))},get_host_recycle_department:function(e){return Object(a["a"])(Object(i["b"])("GET","/host/get_host_recycle_department/",e))},get_host_list_field:function(e){return Object(a["a"])(Object(i["b"])("GET","/host/get_host_list_field/",e))},switch_business_type:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/switch_business_type/",e))},set_host_bid_attribute:function(e){return Object(a["a"])(Object(i["b"])("POST","/host/set_host_spot/",e))}}},"23af":function(e,t,s){"use strict";s("6a7a")},"268f":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"操作记录",visible:e.visible,width:"60%","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t},close:e.back}},[s("div",[s("el-dialog",{attrs:{title:"响应信息",visible:e.res_visible,width:"60%","destroy-on-close":!0,"append-to-body":"","custom-class":"response-data"},on:{"update:visible":function(t){e.res_visible=t},close:e.clost_res}},[s("div",[e._v(e._s(e.response))])])],1),s("div",[s("action-block",{attrs:{search_option:"physical"===e.type?Object.assign({},e.search,e.physical_option):e.search},on:{"fn-search":e.fn_search}}),"physical"===e.type?s("div",{staticClass:"icon m-bottom10"},[s("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text"},on:{click:e.getOperateRecordList}},[s("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1):e._e(),s("el-table",{staticClass:"record-table",attrs:{data:e.record_list,border:""}},[s("el-table-column",{attrs:{prop:"oper_time",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.oper_time?e.moment(t.row.oper_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),s("el-table-column",{attrs:{prop:"oper_type_display",label:"操作内容"}}),s("el-table-column",{attrs:{prop:"status_display",label:"状态"}}),s("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.result?s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.view(t.row.result)}}},[e._v("查看")]):s("span",[e._v("-")])]}}])}),s("el-table-column",{attrs:{prop:"finish_time",label:"完成时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.finish_time?e.moment(t.row.finish_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),s("el-table-column",{attrs:{prop:"oper_user",label:"用户名"}}),"physical"!==e.type?s("el-table-column",{attrs:{prop:"flag_display",label:"操作标识"}}):e._e()],1),s("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.back}},[e._v("返回")])],1)],1)])],1)},i=[],n=s("5530"),o=s("1da1"),r=s("d4ec"),c=s("bee2"),l=s("262e"),u=s("2caf"),_=(s("96cf"),s("ac1f"),s("841c"),s("9ab4")),p=s("1b40"),h=s("c811"),d=s("d772"),m=s("1477"),b=s("c1df"),f=s.n(b),v=s("8ce4"),y=s("3673"),g=function(e){Object(l["a"])(s,e);var t=Object(u["a"])(s);function s(){var e;return Object(r["a"])(this,s),e=t.apply(this,arguments),e.state_list=[{type:"",label:"全部"},{type:"doing",label:"执行中"},{type:"success",label:"成功"},{type:"failed",label:"失败"}],e.search={state:{list:e.state_list,placeholder:"请选择状态"},content:{placeholder:"请输入操作内容"}},e.physical_option={time:{type:"datetimerange",placeholder:["开始时间","结束时间"],clearable:!1,width:360,dis_day:31,defaultTime:[f()(new Date).format("YYYY-MM-DD 00:00:00"),f()(new Date).format("YYYY-MM-DD HH:mm:ss")]}},e.record_list=[],e.current=1,e.size=20,e.total=0,e.search_data={},e.moment=f.a,e.response="",e.res_visible=!1,e}return Object(c["a"])(s,[{key:"created",value:function(){this.fn_search()}},{key:"fn_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.search_data=e,this.getOperateRecordList()}},{key:"getOperateRecordList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,a,i,o,r,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.search_data,a="physical"!==this.type?{task_type:s.content,cloud_id:this.record_id}:{content:s.content,cloud_id:this.record_id,cloud_type:"host"},i=Object(n["a"])({status:s.state||"",page_size:this.size,page_index:this.current},a),"physical"===this.type){e.next=9;break}return e.next=6,d["a"].get_operate_record_list(Object(n["a"])({cloud_type:this.type?this.type:"ecs"},i));case 6:t=e.sent,e.next=12;break;case 9:return e.next=11,m["a"].record(Object(n["a"])({start:s.time?f()(s.time[0]).format("YYYY-MM-DD HH:mm:ss"):f()(new Date).format("YYYY-MM-DD 00:00:00"),end:s.time?f()(s.time[1]).format("YYYY-MM-DD HH:mm:ss"):f()(new Date).format("YYYY-MM-DD HH:mm:ss")},i));case 11:t=e.sent;case 12:"Success"===t.code&&("physical"!==this.type?this.record_list=(null===(c=t.data)||void 0===c?void 0:c.history_record)||[]:(l=["create_time","content","status_name","response","update_time","op_user"],u=["oper_time","oper_type_display","status_display","response","finish_time","oper_user"],this.record_list=Object(v["b"])(t.data.operation_list,u,l)),this.total=(null===(o=t.data)||void 0===o||null===(r=o.page_info)||void 0===r?void 0:r.count)||0);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSizeChange",value:function(e){this.size=e,this.getOperateRecordList()}},{key:"handleCurrentChange",value:function(e){this.current=e,this.getOperateRecordList()}},{key:"view",value:function(e){this.response=e,this.res_visible=!0}},{key:"clost_res",value:function(){this.res_visible=!1,this.response=""}},{key:"back",value:function(){}}]),s}(p["e"]);Object(_["a"])([Object(p["c"])(Boolean)],g.prototype,"visible",void 0),Object(_["a"])([Object(p["c"])(String)],g.prototype,"record_id",void 0),Object(_["a"])([Object(p["c"])(String)],g.prototype,"type",void 0),Object(_["a"])([Object(p["b"])("close")],g.prototype,"back",null),g=Object(_["a"])([Object(p["a"])({components:{ActionBlock:h["a"],SvgIcon:y["a"]}})],g);var k=g,O=k,w=(s("1116"),s("2877")),j=Object(w["a"])(O,a,i,!1,null,null,null);t["a"]=j.exports},"2c77":function(e,t,s){"use strict";s("d990")},"33d1":function(e,t,s){"use strict";var a=s("23e7"),i=s("7b0b"),n=s("07fa"),o=s("5926"),r=s("44d2");a({target:"Array",proto:!0},{at:function(e){var t=i(this),s=n(t),a=o(e),r=a>=0?a:s+a;return r<0||r>=s?void 0:t[r]}}),r("at")},"3f8d":function(e,t,s){"use strict";s.d(t,"b",(function(){return n}));var a={delete_ecs:{auth:["running","shutdown","error"],msg:"已选实例状态需为已关机或运行中或错误！",label:"逻辑删除"},recover_ecs:{auth:["deleted"],msg:"已选实例状态需为已删除！",label:"恢 复"},destroy_ecs:{auth:["deleted","failed"],msg:"已选实例状态需为已删除或创建失败！",label:"销 毁"},open_bill:{auth:["running","shutdown"],msg:"已选实例状态需为运行中或已关机！",label:"开启计费"}},i={start_up_host:{power:["shutdown"],host:["offline","online","exception"],msg:"已选主机需为在线或离线或异常状态",label:"开机"},shutdown_host:{power:["running"],host:["offline","online"],vm:1,msg:"已选主机需为在线或离线状态",msg2:"操作关机前，请确保物理机上无云主机运行",label:"关机"},restart_host:{power:["running"],host:["offline","online"],vm:1,msg:"已选主机需为在线或离线状态",msg2:"操作重启前，请确保物理机上无云主机运行",label:"重启"},online_maintenance:{power:[],host:["online","exception"],msg:"已选主机需为在线状态",label:"在线维护"},offline_maintenance:{power:[],host:["offline","online","exception"],vm:1,msg:"已选主机需为在线或离线状态且已选主机上不能有虚拟机运行",label:"离线维护"},finish:{power:[],host:["maintenance","online_maintenance","offline_maintenance"],msg:"已选主机需为维护中状态",label:"完成维护"},shelves:{power:[],host:["maintenance"],vm:1,msg:"已选主机需为维护状态且已选主机上不能有虚拟机运行",label:"下架"},disperse:{power:["running"],host:["online"],msg:"已选主机需为在线状态",label:"驱散"},out_of_band:{power:[],host:["offline","online"],msg:"已选主机需为在线或离线状态",label:"进入带外管理"},migrate:{power:["running"],host:["online"],msg:"已选主机需为在线状态",label:"迁移"},kvm_to_eci:{power:[],host:["maintenance"],business:["KVM"],msg:"已选主机需为维护中状态且业务类型为KVM",label:"KVM切换ECI"},eci_to_kvm:{power:[],host:["maintenance"],business:["ECI"],msg:"已选主机需为维护中状态且业务类型为ECI",label:"ECI切换KVM"},bidding:{power:[],host:[],msg:"已选主机业务类型需为KVM",business:["KVM"],label:"竞价实例"}};t["a"]={getInsOperateAuth:function(e){return a[e]}};var n=function(e){return i[e]}},4164:function(e,t,s){},"4abb":function(e,t,s){"use strict";s("b572")},"5a59":function(e,t,s){"use strict";s("7123")},"5d4a":function(e,t,s){},"5d62":function(e,t,s){"use strict";s("fae2")},"5e1a":function(e,t,s){"use strict";s("5d4a")},"6a7a":function(e,t,s){},7123:function(e,t,s){},8045:function(e,t,s){},"841c":function(e,t,s){"use strict";var a=s("c65b"),i=s("d784"),n=s("825a"),o=s("1d80"),r=s("129f"),c=s("577e"),l=s("dc4a"),u=s("14c3");i("search",(function(e,t,s){return[function(t){var s=o(this),i=void 0==t?void 0:l(t,e);return i?a(i,t,s):new RegExp(t)[e](c(s))},function(e){var a=n(this),i=c(e),o=s(t,a,i);if(o.done)return o.value;var l=a.lastIndex;r(l,0)||(a.lastIndex=0);var _=u(a,i);return r(a.lastIndex,l)||(a.lastIndex=l),null===_?-1:_.index}]}))},"8da7":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("action-block",{attrs:{search_option:e.search_option,type:"physical"},on:{"fn-search":e.fn_search,"fn-operate":e.FnOperate},scopedSlots:e._u([{key:"default",fn:function(){return[e._l(e.operate_btns,(function(t){return e.auth_list.includes(t.value)?s("el-button",{key:t.value,attrs:{type:"primary"},on:{click:function(s){return e.handle(t.label,t.value)}}},[e._v(e._s(t.label))]):e._e()})),s("el-dropdown",{staticClass:"m-left10",on:{command:e.handleMore}},[s("el-button",{staticClass:"dropdownbtn",attrs:{type:"primary"}},[e._v(" 业务类型切换"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:{label:"KVM切换ECI",value:"kvm_to_eci"}}},[e._v("KVM切换ECI")]),s("el-dropdown-item",{attrs:{command:{label:"ECI切换KVM",value:"eci_to_kvm"}}},[e._v("ECI切换KVM")])],1)],1)]},proxy:!0}])}),s("div",{staticClass:"icon m-bottom10"},[s("el-tooltip",{attrs:{content:"自定义列表项",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text"},on:{click:e.FnCustom}},[s("i",{staticClass:"el-icon-s-tools"})])],1),s("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text"},on:{click:e.refresh}},[s("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1),s("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text",disabled:!e.auth_list.includes("export")},on:{click:e.down}},[s("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1)],1),s("el-table",{ref:"table",attrs:{data:e.list,border:"","max-height":e.tableHeight},on:{"selection-change":e.handleSelectionChange,"sort-change":e.FnSortChange,"filter-change":e.filterAttribute}},[s("el-table-column",{attrs:{type:"selection",width:e.custom_host.length>0?"48px":"1100px"}}),e._l(e.custom_host,(function(t){return s("el-table-column",{key:t.prop,attrs:{"filter-multiple":t.column_key?!!t.multiple:null,prop:t.prop,"column-key":t.column_key?t.column_key:null,filters:t.column_key?t.list:null,sortable:t.sortable?t.sortable:null,width:t.width?t.width:null},scopedSlots:e._u([{key:"header",fn:function(a){return["ecs_num"===t.prop?[s("span",[e._v("虚拟机数量")]),s("el-tooltip",{attrs:{"popper-class":"tooltip-width",content:"云桌面/文件存储转发的虚机未纳入统计，所以主机属性为云桌面/文件存储转发的物理机虚机数量为0不代表无虚机。",effect:"light"}},[s("el-button",{staticClass:"m-left5 m-right5",attrs:{type:"text"}},[s("svg-icon",{staticClass:"more",attrs:{icon:"info",viewBox:"0 0 20 20"}})],1)],1)]:s("span",[e._v(e._s(t.label))])]}},"machine_status_name"===t.prop?{key:"default",fn:function(t){return[s("div",[e._v(e._s(t.row.machine_status_name))]),"off_shelves"===t.row.machine_status?s("div",{staticClass:"destroy"},[e._v(e._s(t.row.recycle_department))]):e._e()]}}:"cpu"===t.prop?{key:"default",fn:function(t){return[s("span",[e._v(e._s(parseFloat(t.row.cpu).toFixed(2)+"%"))])]}}:"net_nic"===t.prop?{key:"default",fn:function(t){return[t.row.net_nic.length>0?s("el-tooltip",{attrs:{effect:"light"}},[s("div",{attrs:{slot:"content"},slot:"content"},e._l(t.row.net_nic,(function(t,a){return s("div",{key:a},[e._v(e._s(t))])})),0),s("div",{staticClass:"tooltip-cell"},[e._v(e._s(t.row.net_nic[0]))])]):s("div")]}}:"exclusive_black_customers"===t.prop?{key:"default",fn:function(t){return[t.row.exclusive_black_customers.length>1?s("el-tooltip",{attrs:{effect:"light"},scopedSlots:e._u([{key:"content",fn:function(){return e._l(t.row.exclusive_black_customers,(function(t){return s("div",[e._v(e._s(t.id+" ("+t.name+")"))])}))},proxy:!0}],null,!0)},[s("span",[e._v(e._s(t.row.exclusive_black_customers.map((function(e){return e.id})).join(",")))])]):1===t.row.exclusive_black_customers.length?s("span",[e._v(e._s(t.row.exclusive_black_customers[0].id+" ("+t.row.exclusive_black_customers[0].name+")"))]):s("span")]}}:"exclusive_customers"===t.prop?{key:"default",fn:function(t){return[t.row.exclusive_customers.length>1?s("el-tooltip",{scopedSlots:e._u([{key:"content",fn:function(){return e._l(t.row.exclusive_customers,(function(t){return s("div",[e._v(e._s(t.id+" ("+t.name+")"))])}))},proxy:!0}],null,!0)},[s("span",[e._v(e._s(t.row.exclusive_customers.map((function(e){return e.id})).join(",")))])]):1===t.row.exclusive_customers.length?s("span",[e._v(e._s(t.row.exclusive_customers[0].id+" ("+t.row.exclusive_customers[0].name+")"))]):s("span",[e._v("全部客户")])]}}:"exclusive_spec_family"===t.prop?{key:"default",fn:function(t){return[t.row.exclusive_spec_family.length>0?s("el-tooltip",{attrs:{effect:"light"},scopedSlots:e._u([{key:"content",fn:function(){return e._l(t.row.exclusive_spec_family,(function(t){return s("div",{key:t},[e._v(e._s(t))])}))},proxy:!0}],null,!0)},[s("span",{staticClass:"id-cell"},[e._v(e._s(t.row.exclusive_spec_family[0]))])]):s("span")]}}:"ram"===t.prop?{key:"default",fn:function(t){return[s("span",[e._v(e._s(parseFloat(t.row.ram).toFixed(2)+"%"))])]}}:"ecs_num"===t.prop?{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.goEcs(t.row.host_name)}}},[e._v(e._s(t.row.ecs_num))])]}}:"cpu_with_model"===t.prop?{key:"default",fn:function(t){return[t.row.cpu_model?s("span",[e._v(e._s(t.row.cpu_model)+" * "+e._s(t.row.cpu_model_count))]):e._e()]}}:"backend_type"===t.prop?{key:"default",fn:function(t){return[s("span",[e._v(e._s(e.backendObj[t.row.backend_type]))])]}}:"net_card_with_model"===t.prop?{key:"default",fn:function(t){return[s("div",{staticClass:"net-model"},[t.row.net_model?s("el-tooltip",{attrs:{content:t.row.net_model,"popper-class":"tooltip-width",placement:"right",effect:"light"}},[s("span",{staticClass:"id-cell"},[e._v(e._s(t.row.net_model))])]):e._e(),t.row.net_model?s("span",[e._v(" * "+e._s(t.row.net_model_count))]):e._e()],1)]}}:"is_prepare_host"===t.prop?{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.is_prepare_host?"是":"否"))])]}}:"is_spot"===t.prop?{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.is_spot?"是":"否"))])]}}:null],null,!0)})}))],2),s("el-pagination",{attrs:{"current-page":e.page_info.current,"page-sizes":[20,50,100],"page-size":e.page_info.size,layout:"total, sizes, prev, pager, next, jumper",total:e.page_info.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e.visible&&!["upload","migrate","record","resource","update_attribute"].includes(e.oper_type)?[s("Operate",{attrs:{title:e.oper_label,rows:e.multi_rows,oper_type:e.oper_type,visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:e.close}})]:e._e(),e.visible&&"upload"===e.oper_type?[s("upload-file",{attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:e.close}})]:e._e(),e.visible&&"migrate"===e.oper_type?[s("Migrate",{attrs:{visible:e.visible,rows:e.multi_rows},on:{"update:visible":function(t){e.visible=t},close:e.close}})]:e._e(),e.visible&&"record"===e.oper_type?[s("Record",{attrs:{visible:e.visible,type:"physical",record_id:e.multi_rows[0].host_id},on:{"update:visible":function(t){e.visible=t},close:e.close}})]:e._e(),e.visible&&"resource"===e.oper_type?[s("Resource",{attrs:{visible:e.visible,rows:e.multi_rows},on:{"update:visible":function(t){e.visible=t},close:e.close}})]:e._e(),e.visible&&"update_attribute"===e.oper_type?[s("update-attribute",{attrs:{visible:e.visible,rows:e.multi_rows},on:{"update:visible":function(t){e.visible=t},close:e.close}})]:e._e(),s("custom-list-item",{attrs:{visible:e.custom_visible,all_item:e.all_item,all_column_item:e.all_column_item},on:{"update:visible":function(t){e.custom_visible=t},"fn-custom":e.get_custom_columns}})],2)},i=[],n=s("5530"),o=s("2909"),r=s("1da1"),c=s("d4ec"),l=s("bee2"),u=s("262e"),_=s("2caf"),p=(s("96cf"),s("b0c0"),s("d81d"),s("99af"),s("4de4"),s("d3b7"),s("caad"),s("2532"),s("a15b"),s("e9c4"),s("fb6a"),s("159b"),s("9ab4")),h=s("1b40"),d=s("c811"),m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:e.title,visible:e.visible_sync,width:"780px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t},close:e.back}},[s("div",[s("el-alert",{attrs:{title:e.alert_title,type:"warning",center:"",closable:!1}}),s("el-table",{attrs:{data:e.rows,border:"","max-height":"253"}},[s("el-table-column",{attrs:{prop:"host_name",label:"主机名",width:"150"}}),["finish_validate","kvm_to_eci","eci_to_kvm","bidding"].includes(e.oper_type)?s("el-table-column",{attrs:{prop:"az_name",label:"区域"}}):e._e(),e.status_list.includes(e.title)?e._e():s("el-table-column",{attrs:{prop:"machine_status_name",label:"主机状态"}}),["kvm_to_eci","eci_to_kvm","bidding"].includes(e.oper_type)?e._e():s("el-table-column",{attrs:{prop:"power_status_name",label:"电源状态"}}),["finish_validate","bidding"].includes(e.oper_type)?s("el-table-column",{attrs:{prop:"host_purpose",label:"主机用途"}}):e._e(),["finish_validate","shelves"].includes(e.oper_type)?s("el-table-column",{attrs:{prop:"host_source",label:"主机来源"}}):e._e(),["kvm_to_eci","eci_to_kvm","bidding"].includes(e.oper_type)?s("el-table-column",{attrs:{prop:"host_attribution_name",label:"主机归属"}}):e._e(),["kvm_to_eci","eci_to_kvm"].includes(e.oper_type)?s("el-table-column",{attrs:{prop:"host_business_type",label:"业务状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.host_business_type+"宿主机")+" ")]}}],null,!1,1892817174)}):e._e(),["bidding"].includes(e.oper_type)?s("el-table-column",{attrs:{prop:"is_spot",label:"竞价实例资源"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.is_spot?"是":"否")+" ")]}}],null,!1,3353202028)}):e._e()],1),["shelves","finish_validate"].includes(e.oper_type)?s("el-form",{ref:"form",staticClass:"m-top20",attrs:{model:e.form_data,"label-width":"100px","label-position":"left"}},["finish_validate"===e.oper_type?s("el-form-item",{attrs:{prop:"valid",label:"验证结果:",rules:[{required:!0,message:"请选择验证结果",trigger:"blur"}]}},[s("el-radio-group",{model:{value:e.form_data.valid,callback:function(t){e.$set(e.form_data,"valid",t)},expression:"form_data.valid"}},[s("el-radio",{attrs:{label:"1"}},[e._v("成功")]),s("el-radio",{attrs:{label:"0"}},[e._v("失败")])],1)],1):e._e(),"finish_validate"===e.oper_type&&"0"===e.form_data.valid?s("el-form-item",{attrs:{prop:"reason",label:"说明:"}},[s("el-input",{attrs:{type:"textarea",maxlength:256},model:{value:e.form_data.reason,callback:function(t){e.$set(e.form_data,"reason",t)},expression:"form_data.reason"}})],1):e._e(),s("el-form-item",{attrs:{prop:"recycleId",label:"finish_validate"===e.oper_type?"通知对象：":"回收部门：",rules:[{required:!0,message:"请选择"+("finish_validate"===e.oper_type?"通知对象":"回收部门"),trigger:"blur"}]}},[s("el-select",{model:{value:e.form_data.recycleId,callback:function(t){e.$set(e.form_data,"recycleId",t)},expression:"form_data.recycleId"}},e._l(e.recycle_list,(function(e){return s("el-option",{key:e.department_en,attrs:{label:e.department_name,value:e.department_name}})})),1)],1)],1):e._e(),["bidding"].includes(e.oper_type)?s("div",{staticClass:"m-top20"},[s("el-radio-group",{model:{value:e.form_data.bidding,callback:function(t){e.$set(e.form_data,"bidding",t)},expression:"form_data.bidding"}},[s("div",{staticClass:"m-bottom10"},[s("el-radio",{attrs:{label:1,disabled:0===e.form_data.bidding}},[e._v("设置竞价实例资源池")]),s("span",{staticClass:"prompt_message"},[e._v("资源池状态且为同一商品的资源，支持设置为竞价实例资源")]),s("br")],1),s("div",[s("el-radio",{attrs:{label:0,disabled:1===e.form_data.bidding}},[e._v("取消竞价实例资源池")]),s("span",{staticClass:"prompt_message"},[e._v("资源池与已售资源不支持一起取消；且单次最多取消的数量为30")])],1)])],1):e._e()],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),s("el-button",{on:{click:function(t){return e.back("0")}}},[e._v("取消")])],1)])],1)},b=[],f=s("1477"),v=function(e){Object(u["a"])(s,e);var t=Object(_["a"])(s);function s(){var e;return Object(c["a"])(this,s),e=t.apply(this,arguments),e.alert_title="是否确定对以下".concat(e.rows.length,"台物理机执行").concat(e.title,"操作？"),e.status_list=["开机","关机","重启"],e.valid=1,e.recycle_list=[],e.form_data={valid:"",recycleId:"",reason:"",bidding:0},e.operate_info={start_up_host:"host_operate",shutdown_host:"host_operate",restart_host:"host_operate",online_maintenance:"host_maintenance",offline_maintenance:"host_maintenance",finish:"finish_maintenance",shelves:"shelves",disperse:"disperse",finish_validate:"finish_validate",kvm_to_eci:"switch_business_type",eci_to_kvm:"switch_business_type",bidding:"set_host_bid_attribute"},e}return Object(l["a"])(s,[{key:"created",value:function(){["shelves","finish_validate"].includes(this.oper_type)&&this.get_host_recycle_department(),"bidding"===this.oper_type&&0===this.rows[0].is_spot&&(this.form_data.bidding=1)}},{key:"get_host_recycle_department",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_host_recycle_department({});case 2:t=e.sent,"Success"===t.code&&(this.recycle_list=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"confirm",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!["shelves","finish_validate"].includes(this.oper_type)){e.next=6;break}if(t=!0,s=this.$refs.form,s.validate((function(e){e||(t=!1)})),t){e.next=6;break}return e.abrupt("return",!1);case 6:return a=this.status_list.includes(this.title)?{op_type:this.oper_type,host_ids:this.rows.map((function(e){return e.host_id}))}:["online_maintenance","offline_maintenance"].includes(this.oper_type)?{maintenance_type:this.oper_type,host_ids:this.rows.map((function(e){return e.host_id}))}:"finish_validate"===this.oper_type?{host_ids:this.rows.map((function(e){return e.host_id})),status:"1"===this.form_data.valid?"READY":"INIT_ERROR",noticer:this.form_data.recycleId,reason:"0"===this.form_data.valid?this.form_data.reason:void 0}:"shelves"===this.oper_type?{host_ids:this.rows.map((function(e){return e.host_id})),department_name:this.form_data.recycleId}:["kvm_to_eci","eci_to_kvm"].includes(this.oper_type)?{host_ids:this.rows.map((function(e){return e.host_id})),dest_business_type:"kvm_to_eci"===this.oper_type?"ECI":"KVM"}:"bidding"===this.oper_type?{host_ids:this.rows.map((function(e){return e.host_id})),is_spot:this.form_data.bidding}:{host_ids:this.rows.map((function(e){return e.host_id}))},e.next=9,f["a"][this.operate_info[this.oper_type]](Object(n["a"])({},a));case 9:if(i=e.sent,"Success"!==i.code){e.next=26;break}if("finish_validate"!==this.oper_type){e.next=16;break}this.$message.success(i.message),this.back("1"),e.next=24;break;case 16:if(!(i.data.fail_host_list.length>0)){e.next=22;break}return this.$message.warning(i.message),this.back("0"),e.abrupt("return");case 22:this.$message.success(i.message),this.back("1");case 24:e.next=27;break;case 26:this.back("0");case 27:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"back",value:function(e){this.visible_sync=!1}}]),s}(h["e"]);Object(p["a"])([Object(h["d"])("visible")],v.prototype,"visible_sync",void 0),Object(p["a"])([Object(h["c"])({default:function(){return[]}})],v.prototype,"rows",void 0),Object(p["a"])([Object(h["c"])(String)],v.prototype,"title",void 0),Object(p["a"])([Object(h["c"])(String)],v.prototype,"oper_type",void 0),Object(p["a"])([Object(h["b"])("close")],v.prototype,"back",null),v=Object(p["a"])([Object(h["a"])({components:{ActionBlock:d["a"]}})],v);var y=v,g=y,k=s("2877"),O=Object(k["a"])(g,m,b,!1,null,null,null),w=O.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"数据批量导入",visible:e.visible_sync,width:"600px","destroy-on-close":!0,"custom-class":"upload","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t},close:e.back}},[s("div",{staticClass:"upload"},[s("div",{staticClass:"m-bottom10"},[e._v("请选择需要导入的可用区")]),s("el-select",{attrs:{filterable:"","filter-method":e.getPodList,placeholder:"请选择"},on:{"visible-change":e.change_pod},model:{value:e.az,callback:function(t){e.az=t},expression:"az"}},e._l(e.az_list,(function(t){return s("el-option",{key:t.pod_id,attrs:{label:t.az_name+" ( "+t.pod_name+" ) ",value:t.pod_id}},[e._v(e._s(t.az_name)+" ("+e._s(t.pod_name)+")")])})),1),0===e.az.length?s("span",{staticClass:"error_message m-left10"},[e._v("请选择可用区")]):e._e(),s("div",{staticClass:"flex-between m-top10 m-bottom20 down"},[s("span",[e._v("请选择需要上传的文件")]),s("a",{staticClass:"clickble",on:{click:e.down}},[e._v("下载导入模板")])]),s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/ecs_business/v1/host/import_host/?pod_id="+e.az,"before-upload":e.before_upload,"file-list":e.fileList,accept:".xls,.xlsx",name:"host_template","auto-upload":!1,"on-success":e.FnSuccess,headers:{"Access-Token":e.$store.state.token}}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择文件")])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),s("el-button",{on:{click:function(t){return e.back("0")}}},[e._v("取消")])],1)])],1)},x=[],C=s("c839"),S=function(e){Object(u["a"])(s,e);var t=Object(_["a"])(s);function s(){var e;return Object(c["a"])(this,s),e=t.apply(this,arguments),e.fileList=[],e.az_list=[],e.az="",e}return Object(l["a"])(s,[{key:"created",value:function(){this.getPodList()}},{key:"change_pod",value:function(e){e||this.getPodList()}},{key:"getPodList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.next=3,C["a"].get_pod_list({page_index:1,page_size:20,search_info:t});case 3:s=e.sent,"Success"===s.code&&(this.az_list=s.data.pod_list.filter((function(e){return e.status})));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"before_upload",value:function(e){}},{key:"FnSuccess",value:function(e,t,s){if("Success"===e.code){if(e.data.fail_host_list.length>0)return this.$message.warning("物理机导入任务下发失败！"),void this.back("1");this.$message.success("物理机导入任务下发成功！"),this.back("1")}else this.$message.error(JSON.stringify(e.message)),this.back("0")}},{key:"down",value:function(){window.location.href="/ecs_business/v1/host/download_template/"}},{key:"confirm",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.az){e.next=2;break}return e.abrupt("return");case 2:t=this.$refs.upload,t.submit();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"back",value:function(e){this.visible_sync=!1}}]),s}(h["e"]);Object(p["a"])([Object(h["d"])("visible")],S.prototype,"visible_sync",void 0),Object(p["a"])([Object(h["b"])("close")],S.prototype,"back",null),S=Object(p["a"])([Object(h["a"])({})],S);var T=S,$=T,F=(s("cc18"),Object(k["a"])($,j,x,!1,null,null,null)),R=F.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"迁移",visible:e.visible_sync,width:"1140px","destroy-on-close":!0,"custom-class":"upload","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t},close:e.back}},[s("div",{staticClass:"migrate"},[s("div",{staticClass:"left"},[s("div",{staticClass:"m-bottom10"},[s("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),e._v(" "+e._s(e.rows[0].host_name)+"("),s("span",{staticClass:"num_message"},[e._v(e._s(e.selected.length))]),e._v("/"+e._s(e.list.length)+") ")],1),s("el-table",{ref:"table",attrs:{data:e.list,border:"","show-header":!1,"max-height":"500"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection"}}),s("el-table-column",{attrs:{prop:"ecs_id",label:""}}),s("el-table-column",{attrs:{prop:"status",label:""}}),s("el-table-column",{attrs:{prop:"genre",label:""}})],1),0===e.selected.length?s("div",{staticClass:"error_message m-top10"},[e._v("请选择虚拟机")]):e._e()],1),s("div",{staticClass:"center"},[s("div",[e._v("迁移至")]),s("div",[e._v("------------\x3e")])]),s("div",{staticClass:"right"},[s("h4",[e._v("目的主机:")]),s("div",{staticClass:"m-bottom20"},[s("span",{staticClass:"m-right10"},[e._v("可用区:")]),s("span",[e._v(e._s(e.rows[0].az_name))])]),s("div",{staticClass:"m-bottom10 flex-host"},[s("span",{staticClass:"m-right10"},[e._v("物理机:")]),s("div",[s("el-select",{attrs:{filterable:"","filter-method":e.get_physical_list,placeholder:"请选择",multiple:""},on:{"visible-change":e.change_physical},model:{value:e.physical,callback:function(t){e.physical=t},expression:"physical"}},e._l(e.physical_list,(function(t){return s("el-option",{key:t.host_id,attrs:{label:t.host_name,value:t.host_id}},[s("span",[e._v(e._s(t.host_name))])])})),1)],1)]),s("div",{staticClass:"m-right10 flex-between"},[s("span",{staticClass:"m-right10 m-top20"},[e._v("迁移推荐:")]),s("div",e._l(e.recommend,(function(t){return s("div",{key:t.host_id},[e._v(" "+e._s(t.host_id)+" "),s("el-tooltip",{attrs:{content:parseFloat(t.cpu_usage).toFixed(2)+"%",placement:"top",effect:"light"}},[s("span",[s("CustomIcon",{attrs:{hei:t.cpu_usage}}),e._v("CPU")],1)]),s("el-tooltip",{attrs:{content:parseFloat(t.memory_usage).toFixed(2)+"%",placement:"top",effect:"light"}},[s("span",[s("CustomIcon",{attrs:{hei:t.memory_usage}}),e._v("内存")],1)])],1)})),0)])])]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),s("el-button",{on:{click:function(t){return e.back("0")}}},[e._v("取消")])],1)])],1)},z=[],P=(s("6062"),s("3ca3"),s("ddb0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"total"},[s("div",{staticClass:"used",style:{height:0===e.hei?0:e.hei+"%",background:e.hei>=0&&e.hei<50?"#67c23a":e.hei<80?"yellow":"red"}})])}),L=[],I=(s("a9e3"),function(e){Object(u["a"])(s,e);var t=Object(_["a"])(s);function s(){return Object(c["a"])(this,s),t.apply(this,arguments)}return Object(l["a"])(s)}(h["e"]));Object(p["a"])([Object(h["c"])(Number)],I.prototype,"hei",void 0),I=Object(p["a"])([Object(h["a"])({})],I);var D=I,M=D,G=(s("2c77"),Object(k["a"])(M,P,L,!1,null,"1f8e5af6",null)),Y=G.exports,H=function(e){Object(u["a"])(s,e);var t=Object(_["a"])(s);function s(){var e;return Object(c["a"])(this,s),e=t.apply(this,arguments),e.list=e.rows[0].ecs_list,e.selected=[],e.checked=!1,e.isIndeterminate=!1,e.physical=[],e.physical_list=[],e.recommend=[],e}return Object(l["a"])(s,[{key:"created",value:function(){this.get_physical_list(),this.get_recommended_host(),"GPU"===this.rows[0].host_purpose?this.list=this.rows[0].ecs_list.filter((function(e){return e.is_gpu&&"已关机"===e.status||!e.is_gpu})):this.list=this.rows[0].ecs_list}},{key:"change_physical",value:function(e){e||this.get_physical_list()}},{key:"watch_physical",value:function(e){this.judge()}},{key:"judge",value:function(){var e=this.physical_list.filter((function(e){return"CPU"===e.host_purpose})),t=e.map((function(e){return e.host_id})),s=Object(o["a"])(new Set([].concat(Object(o["a"])(t),Object(o["a"])(this.physical)))).length;this.selected.some((function(e){return e.is_gpu}))&&s<[].concat(Object(o["a"])(t),Object(o["a"])(this.physical)).length&&(this.$message.warning("GPU云主机不能被迁移到非GPU物理机上"),this.physical=[])}},{key:"get_physical_list",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",e.next=3,f["a"].get_host_list({host_name:t,az_id:this.rows[0].pod__az_id,page_index:1,page_size:20});case 3:s=e.sent,"Success"===s.code&&(this.physical_list=s.data.host_list.filter((function(e){return e.host_id!==a.rows[0].host_id&&"online"===e.machine_status&&a.rows[0].gpu_model===e.gpu_model})));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_recommended_host",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].recommended_host({host_id:this.rows[0].host_id,is_gpu:"GPU"===this.rows[0].host_purpose?"1":"0",gpu_card_name:this.rows[0].gpu_real_name});case 2:t=e.sent,"Success"===t.code&&(this.recommend=t.data.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCheckAllChange",value:function(e){var t=this.$refs.table;e?t.toggleAllSelection():t.clearSelection(),this.isIndeterminate=!1}},{key:"handleSelectionChange",value:function(e){this.selected=e,this.checked=e.length===this.list.length,this.isIndeterminate=e.length>0&&e.length<this.list.length,this.judge()}},{key:"confirm",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.selected.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f["a"].migrate({ecs_ids:this.selected.map((function(e){return e.ecs_id})),start_host_id:this.rows[0].host_id,end_host_ids:this.physical,is_gpu:"GPU"===this.rows[0].host_purpose?"1":"0"});case 4:t=e.sent,"Success"===t.code?(this.$message.success("物理机迁移任务下发成功！"),this.back("1")):this.back("0");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"back",value:function(e){this.visible_sync=!1}}]),s}(h["e"]);Object(p["a"])([Object(h["d"])("visible")],H.prototype,"visible_sync",void 0),Object(p["a"])([Object(h["c"])({default:function(){return[]}})],H.prototype,"rows",void 0),Object(p["a"])([Object(h["f"])("physical")],H.prototype,"watch_physical",null),Object(p["a"])([Object(h["b"])("close")],H.prototype,"back",null),H=Object(p["a"])([Object(h["a"])({components:{CustomIcon:Y}})],H);var A=H,U=A,B=(s("23af"),s("9f1f"),Object(k["a"])(U,E,z,!1,null,null,null)),K=B.exports,V=s("9074"),q=s("e527"),J=s("8ce4"),N=s("3f8d"),Q=s("268f"),W=s("3673"),X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{title:"分配资源",visible:e.visible_sync,width:"770px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t},close:e.back}},[s("div",[s("el-alert",{attrs:{title:e.alert_title,type:"warning",center:"",closable:!1}}),s("el-table",{attrs:{data:e.rows,border:"","max-height":"253"}},[s("el-table-column",{attrs:{prop:"host_name",label:"主机名",width:"150px"}}),s("el-table-column",{attrs:{prop:"az_name",label:"区域"}}),s("el-table-column",{attrs:{prop:"machine_status_name",label:"机器状态"}}),s("el-table-column",{attrs:{prop:"host_purpose",label:"主机用途"}}),s("el-table-column",{attrs:{prop:"host_attribution_name",label:"主机归属"}})],1),s("div",{staticClass:"ecs-belong m-top20"},[s("span",{staticClass:"m-right20"},[e._v("设置主机归属：")]),s("el-select",{attrs:{placeholder:"请选择",multiple:""},model:{value:e.ecs_id,callback:function(t){e.ecs_id=t},expression:"ecs_id"}},e._l(e.ecs_list,(function(e){return s("el-option",{key:e.host_attribution_id,attrs:{label:e.name,value:e.host_attribution_id}})})),1)],1),0===e.ecs_id.length?s("div",{staticClass:"error_message error"},[e._v("请选择主机归属")]):e._e()],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),s("el-button",{on:{click:function(t){return e.back("0")}}},[e._v("取消")])],1)])],1)},Z=[],ee=function(e){Object(u["a"])(s,e);var t=Object(_["a"])(s);function s(){var e;return Object(c["a"])(this,s),e=t.apply(this,arguments),e.alert_title="是否确定对以下".concat(e.rows.length,"台物理机执行分配资源操作吗？"),e.ecs_list=[],e.ecs_id=[],e}return Object(l["a"])(s,[{key:"created",value:function(){this.get_host_attribution()}},{key:"get_host_attribution",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_host_attribution({});case 2:t=e.sent,"Success"===t.code&&(this.ecs_list=t.data.host_attribution_list);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"confirm",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.ecs_id&&0!==this.ecs_id.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f["a"].set_host_attribution({host_ids:this.rows.map((function(e){return e.host_id})),host_attribution_id:this.ecs_id.join(",")});case 4:if(t=e.sent,"Success"!==t.code){e.next=16;break}if(!(t.data.fail_host_list.length>0)){e.next=12;break}return this.$message.warning(t.message),this.back("1"),e.abrupt("return");case 12:this.$message.success(t.message),this.back("1");case 14:e.next=17;break;case 16:this.back("0");case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"back",value:function(e){this.visible_sync=!1}}]),s}(h["e"]);Object(p["a"])([Object(h["d"])("visible")],ee.prototype,"visible_sync",void 0),Object(p["a"])([Object(h["c"])({default:function(){return[]}})],ee.prototype,"rows",void 0),Object(p["a"])([Object(h["b"])("close")],ee.prototype,"back",null),ee=Object(p["a"])([Object(h["a"])({components:{ActionBlock:d["a"]}})],ee);var te=ee,se=te,ae=(s("bda3"),Object(k["a"])(se,X,Z,!1,null,null,null)),ie=ae.exports,ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"设置属性",visible:e.visible_sync,width:"600px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t}}},[s("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form_data,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"主机用途"}},[s("el-cascader",{staticClass:"w-410",attrs:{options:e.host_types,props:{label:"type_name",value:"type",children:"list",expandTrigger:"hover"},clearable:"",placeholder:"保持不变"},model:{value:e.form_data.host_purpose,callback:function(t){e.$set(e.form_data,"host_purpose",t)},expression:"form_data.host_purpose"}})],1),e.form_data.host_purpose.includes("vGPU")?s("el-form-item",{attrs:{label:"切分粒度"}},[s("el-input",{staticClass:"w-380",attrs:{placeholder:"若输入多个值，用英文逗号隔开"},model:{value:e.particle,callback:function(t){e.particle=t},expression:"particle"}}),e._v(" GB "),s("el-tooltip",{attrs:{"popper-class":"tooltip-width",content:"每块GPU仅能按照一种显存大小和切分类型进行切分；同物理机不同显卡切分粒度/切分类型可以不同；故一台物理机切分粒度/切分类型的数量不能多于物理机GPU数量。最多支持设置4种值。",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text"}},[s("svg-icon",{staticClass:"info",attrs:{icon:"info"}})],1)],1)],1):e._e(),e.particle.split(",").length>4?s("div",{staticClass:"error_message tip"},[e._v("最多支持设置4种值")]):e.particle.includes("，")?s("div",{staticClass:"error_message tip"},[e._v("请用英文逗号隔开")]):e._e(),e.form_data.host_purpose.includes("vGPU")?s("el-form-item",{attrs:{label:"切分类型"}},[s("el-select",{staticClass:"w-410",model:{value:e.vgpu_segment_type,callback:function(t){e.vgpu_segment_type=t},expression:"vgpu_segment_type"}},e._l(e.particleList,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),s("el-form-item",{attrs:{label:"专属客户"}},[s("el-select",{attrs:{placeholder:"保持不变",clearable:""},model:{value:e.customer,callback:function(t){e.customer=t},expression:"customer"}},[s("el-option",{attrs:{label:"全部客户",value:"all"}}),s("el-option",{attrs:{label:"专属客户",value:"select"}})],1),s("el-select",{staticStyle:{"margin-left":"10px"},attrs:{multiple:"",filterable:"",remote:"","remote-method":e.getCustomerList,disabled:"select"!==e.customer},on:{"visible-change":e.changeCustomer},model:{value:e.form_data.customer_ids,callback:function(t){e.$set(e.form_data,"customer_ids",t)},expression:"form_data.customer_ids"}},e._l(e.customerList,(function(t){return s("el-option",{key:t.id,attrs:{value:t.id,label:t.id+"("+t.name+")"}},[e._v(e._s(t.id+"("+t.name+")"))])})),1)],1),s("el-form-item",{attrs:{label:"产品规格族"}},[s("el-cascader",{staticClass:"w-410",attrs:{options:e.familyOption,props:{label:"name",value:"spec_family_id",expandTrigger:"hover",multiple:!0},clearable:"","filter-method":e.getFamilyList,placeholder:"保持不变"},on:{"visible-change":e.changeFamily,change:e.change},model:{value:e.form_data.spec_family_ids,callback:function(t){e.$set(e.form_data,"spec_family_ids",t)},expression:"form_data.spec_family_ids"}})],1),s("el-form-item",{attrs:{label:"支持存储类型",prop:"backend"}},[s("el-select",{staticClass:"w-410",attrs:{clearable:"",placeholder:"保持不变"},model:{value:e.form_data.backend_type,callback:function(t){e.$set(e.form_data,"backend_type",t)},expression:"form_data.backend_type"}},e._l(e.backendList,(function(e){return s("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1),s("el-form-item",{attrs:{label:"客户黑名单"}},[s("el-select",{attrs:{placeholder:"保持不变",clearable:""},model:{value:e.black_customer,callback:function(t){e.black_customer=t},expression:"black_customer"}},[s("el-option",{attrs:{label:"不设置客户黑名单",value:"all"}}),s("el-option",{attrs:{label:"设置客户黑名单",value:"select"}})],1),s("el-select",{staticStyle:{"margin-left":"10px"},attrs:{multiple:"",filterable:"",remote:"","remote-method":e.getBlackCustomerList,disabled:"select"!==e.black_customer},on:{"visible-change":e.changeBlackCustomer},model:{value:e.form_data.black_customer_ids,callback:function(t){e.$set(e.form_data,"black_customer_ids",t)},expression:"form_data.black_customer_ids"}},e._l(e.blackCustomerList,(function(t){return s("el-option",{key:t.id,attrs:{value:t.id,label:t.id+"("+t.name+")"}},[e._v(e._s(t.id+"("+t.name+")"))])})),1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")]),s("el-button",{on:{click:function(t){return e.back("0")}}},[e._v("取 消")])],1)],1)},oe=[],re=(s("33d1"),s("ea98"),function(e){Object(u["a"])(s,e);var t=Object(_["a"])(s);function s(){var e,a,i;return Object(c["a"])(this,s),i=t.apply(this,arguments),i.form_data={host_type:"",host_purpose:"",backend_type:"",customer_ids:[],black_customer_ids:[],spec_family_ids:[]},i.type="",i.backend="",i.particle="",i.host_types=[],i.host_uses=[],i.customer_id=[],i.black_customer_id=[],i.customerList=null===(e=i.rows[0])||void 0===e?void 0:e.exclusive_customers,i.blackCustomerList=null===(a=i.rows[0])||void 0===a?void 0:a.exclusive_black_customers,i.family=[],i.familyList=[],i.flag=!0,i.flagFamily=!0,i.particleList=["Q","B","C","A"],i.vgpu_segment_type=i.particleList[0],i.familyOption=[],i.customerOption=[],i.blackCustomerOption=[],i.customer="",i.black_customer="",i.backendList=[{id:"block",name:"云盘"},{id:"local",name:"本地盘"},{id:"local,block",name:"云盘/本地盘"}],i}return Object(l["a"])(s,[{key:"created",value:function(){this.getHostTypes(),this.getCustomerList("",!0),this.getFamilyList()}},{key:"watch",value:function(e){"select"!==e&&(this.form_data.customer_ids=[])}},{key:"watch_black",value:function(e){"select"!==e&&(this.form_data.black_customer_ids=[])}},{key:"getHostTypes",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_host_type({});case 2:t=e.sent,"Success"===t.code&&(this.host_types=t.data,this.host_types.forEach((function(e,t){var a=[];e.list.forEach((function(e,t){a[t]={type:e.use_type,type_name:e.use_name}})),s.host_types[t]={type:e.type,type_name:e.type_name,list:a}})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"changeFamily",value:function(e){e||this.getFamilyList()}},{key:"changeCustomer",value:function(e){e&&(this.customerList=[])}},{key:"changeBlackCustomer",value:function(e){e&&(this.blackCustomerList=[])}},{key:"change",value:function(e){var t=e.at(-1),s=e.filter((function(e){return e[0]===t[0]}));this.form_data.spec_family_ids=s}},{key:"getFamilyList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.next=3,f["a"].getFamilyList({host_ids:this.rows.map((function(e){return e.host_id})),spec_family_name:t});case 3:s=e.sent,"Success"==s.code&&(this.familyList=s.data.spec_family_list,this.familyOption=[{spec_family_id:"none",name:"不设置规格族"},{spec_family_id:"set",name:"设置规格族",children:this.familyList}]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCustomerList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"",s=i.length>1&&void 0!==i[1]&&i[1],t||s){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,f["a"].getCustomerList({host_ids:this.rows.map((function(e){return e.host_id})),customer_id:t});case 6:a=e.sent,"Success"==a.code&&(this.customerList=a.data.customer_list);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBlackCustomerList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"",s=i.length>1&&void 0!==i[1]&&i[1],t||s){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,f["a"].getCustomerList({host_ids:this.rows.map((function(e){return e.host_id})),customer_id:t,employee_no:this.$store.state.employee_no,user_name:this.$store.state.login_name});case 6:a=e.sent,"Success"==a.code&&(this.blackCustomerList=a.data.customer_list);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"confirm",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.form_data.spec_family_ids.map((function(e){return e[1]})),s={host_ids:this.rows.map((function(e){return e.host_id})),host_type:this.form_data.host_purpose.length>0?this.form_data.host_purpose[0]:void 0,host_purpose:this.form_data.host_purpose.length>1?this.form_data.host_purpose[1]:void 0,backend_type:""!==this.form_data.backend_type?this.form_data.backend_type:void 0,customer_ids:this.form_data.customer_ids.length>0?this.form_data.customer_ids:"all"===this.customer?[]:void 0,black_customer_ids:this.form_data.black_customer_ids.length>0?this.form_data.black_customer_ids:"all"===this.black_customer?[]:void 0,spec_family_ids:this.form_data.spec_family_ids.length>0?"none"===this.form_data.spec_family_ids[0][0]?[]:t:void 0},e.next=4,f["a"].update_attribute(s);case 4:if(a=e.sent,"Success"!==a.code){e.next=14;break}if(!(a.data.fail_host_list.length>0)){e.next=10;break}return this.$message.warning(a.message),this.back("0"),e.abrupt("return");case 10:this.$message.success(a.message),this.back("1"),e.next=15;break;case 14:this.back("0");case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"back",value:function(e){this.visible_sync=!1}}]),s}(h["e"]));Object(p["a"])([Object(h["d"])("visible")],re.prototype,"visible_sync",void 0),Object(p["a"])([Object(h["c"])({default:function(){return[]}})],re.prototype,"rows",void 0),Object(p["a"])([Object(h["f"])("customer")],re.prototype,"watch",null),Object(p["a"])([Object(h["f"])("black_customer")],re.prototype,"watch_black",null),Object(p["a"])([Object(h["b"])("close")],re.prototype,"back",null),re=Object(p["a"])([Object(h["a"])({components:{svgIcon:W["a"]}})],re);var ce=re,le=ce,ue=(s("5e1a"),s("5a59"),Object(k["a"])(le,ne,oe,!1,null,"3610beff",null)),_e=ue.exports,pe=s("ec7a"),he=function(e){Object(u["a"])(s,e);var t=Object(_["a"])(s);function s(){var e;return Object(c["a"])(this,s),e=t.apply(this,arguments),e.search_option={az_id:{placeholder:"请选择可用区",list:[],default_value:"",close_clearable:!1},out_band_address:{placeholder:"请输入带外IP"},host_ip:{placeholder:"请输入管理网IP"},host_name:{placeholder:"请输入主机名称/ID"},gpu_model:{placeholder:"请输入显卡型号"},cpu:{placeholder:"请输入CPU型号"},nic:{placeholder:"请输入网卡型号"},room:{placeholder:"请选择机房",list:[]},host_rack:{placeholder:"请输入机柜编号"},bare_metal_id:{placeholder:"请输入物理机产品ID"},bare_metal_name:{placeholder:"请输入物理机产品名称"},customer_keyword:{placeholder:"请输入专属客户ID/名称"}},e.operate_btns=[{label:"分配资源",value:"resource"},{label:"更改属性",value:"update_attribute"},{label:"下架",value:"shelves"},{label:"竞价实例",value:"bidding"}],e.rows_operate_btns=[],e.error_msg={start_up_host:"已选主机需为在线或离线状态",shutdown_host:"已选主机需为在线或离线状态",restart_host:"已选主机需为在线或离线状态",online_maintenance:"已选主机需为在线状态",offline_maintenance:"已选主机需为在线或离线状态且已选主机上不能有虚拟机运行",finish:"已选主机需为在线维护中或离线维护中",shelves:"已选主机需为维护中状态且已选主机上不能有虚拟机运行",disperse:"已选主机需为在线状态",migrate:"已选主机需为在线状态"},e.host_belongs=[],e.search_data={},e.page_info={current:1,size:20,total:0},e.list=[],e.visible=!1,e.oper_type="",e.oper_label="",e.multi_rows=[],e.auth_list=[],e.filter_data={},e.host_types=[],e.host_uses=[],e.host_source=[],e.spec_family_list=[],e.all_column_item=[],e.all_item=[],e.custom_visible=!1,e.tableHeight=70,e.custom_host=[],e.power_list=[],e.machine_list=[],e.backendList=[{value:"block",text:"云盘"},{value:"local",text:"本地盘"},{value:"local,block",text:"云盘/本地盘"}],e.backendObj={block:"云盘",local:"本地盘","local,block":"云盘/本地盘"},e.is_pare_host=[{text:"是",value:"1"},{text:"否",value:"0"}],e}return Object(l["a"])(s,[{key:"created",value:function(){for(var e in this.getFamilyList(),this.get_room_list(),this.get_az_list(),this.get_status_list(),this.get_host_attribution(),this.getHostTypes(),this.get_host_recycle_department(),this.get_host_list_field(),this.auth_list=this.$store.state.auth_info[this.$route.name],delete this.$store.state.host_search[""],this.search_option)this.search_option[e].default_value=this.$store.state.host_search[e];this.$route.query.host_id&&(this.search_option.host_id.default_value=this.$route.query.host_id),this.fn_search()}},{key:"mounted",value:function(){this.setHeight()}},{key:"FnOperate",value:function(){this.setHeight()}},{key:"setHeight",value:function(){var e=this;this.$nextTick((function(){var t=e.$refs.table;e.tableHeight=window.innerHeight-t.$el.offsetTop-70;var s=e;window.onresize=function(){s.tableHeight=window.innerHeight-t.$el.offsetTop-70}}))}},{key:"get_status_list",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_status_list({});case 2:if(t=e.sent,"Success"===t.code){for(s in t.data.power_status)this.power_list.push({text:t.data.power_status[s],value:s});for(a in t.data.machine_status)this.machine_list.push({text:t.data.machine_status[a],value:a})}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_host_list_field",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_host_list_field({is_op:"0"});case 2:t=e.sent,"Success"===t.code&&(s=["field_name","show_name"],a=["prop","label"],i=[],t.data.map((function(e){return i=[].concat(Object(o["a"])(i),Object(o["a"])(e.filed)),e})),this.all_item=t.data,this.all_column_item=Object(J["b"])(i,a,s),this.get_custom_columns(this.$store.state.custom_host));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_custom_columns",value:function(e){var t=this;0!==e.length&&(this.custom_host=this.all_column_item.filter((function(t){return e.includes(t.label)})),this.custom_host.map((function(e){return["host_name","out_band_address","host_ip","cpu","ram","ecs_num","gpu_model","ram_volume","create_time","gpu_allot","gpu_count","ecs_gpu_count"].includes(e.prop)&&(e=Object.assign(e,{},{sortable:"custom"}),"ecs_num"===e.prop&&(e=Object.assign(e,{},{width:"140px"}))),["cpu_with_model","net_card_with_model"].includes(e.prop)&&(e=Object.assign(e,{},{width:"180px"})),"host_type_ch"===e.prop&&(e=Object.assign(e,{},{column_key:"host_type",list:t.host_types})),"host_purpose_ch"===e.prop&&(e=Object.assign(e,{},{column_key:"host_purpose",list:t.host_uses})),"host_attribution_name"===e.prop&&(e=Object.assign(e,{},{column_key:"host_belong",list:t.host_belongs})),"host_source"===e.prop&&(e=Object.assign(e,{},{column_key:"host_source",list:t.host_source})),"power_status_name"===e.prop&&(e=Object.assign(e,{},{column_key:"power_status",list:t.power_list})),"machine_status_name"===e.prop&&(e=Object.assign(e,{},{column_key:"machine_status",list:t.machine_list})),"exclusive_spec_family"===e.prop&&(e=Object.assign(e,{},{column_key:"ecs_family_id",multiple:!0,list:t.spec_family_list})),"net_nic"===e.prop&&(e=Object.assign(e,{},{width:"180px"})),"vgpu_segment_type"===e.prop&&(e=Object.assign(e,{},{column_key:"vgpu_segment_type",list:[{text:"Q",value:"Q"},{text:"B",value:"B"},{text:"C",value:"C"},{text:"A",value:"A"}]})),"backend_type"===e.prop&&(e=Object.assign(e,{},{column_key:"backend_type",list:t.backendList})),"is_prepare_host"===e.prop&&(e=Object.assign(e,{},{column_key:"is_prepare_host",list:t.is_pare_host})),"host_business_type"===e.prop&&(e=Object.assign(e,{},{column_key:"host_business_type",list:[{text:"KVM",value:"KVM"},{text:"ECI",value:"ECI"}]})),"is_spot"===e.prop&&(e=Object.assign(e,{},{column_key:"is_spot",list:[{text:"是",value:"1"},{text:"否",value:"0"}]})),e})))}},{key:"fn_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.search_data=Object(n["a"])(Object(n["a"])({},e),this.filter_data),this.page_info.current=1,this.get_physical_list()}},{key:"beforeDestroy",value:function(){this.$store.commit("SET_HOST_SEARCH",this.search_data)}},{key:"FnCustom",value:function(){this.custom_visible=!0}},{key:"refresh",value:function(){this.page_info.current=1,this.get_physical_list()}},{key:"get_physical_list",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a,i,n,o,r,c,l,u,_,p,h,d,m,b,v,y,g,k,O,w,j,x,C,S,T,$;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.search_data,s=t.az_id,a=t.room,i=t.host_name,n=t.host_belong,o=t.host_purpose,r=t.host_type,c=t.out_band_address,l=t.host_ip,u=t.gpu_model,_=t.host_rack,p=t.host_source,h=t.ecs_family_id,d=t.cpu,m=t.nic,b=t.backend_type,v=t.product_id,y=t.product_name,g=t.power_status,k=t.machine_status,O=t.bare_metal_id,w=t.bare_metal_name,j=t.customer_keyword,x=t.vgpu_segment_type,C=t.is_prepare_host,S=t.host_business_type,T=t.is_spot,e.next=3,f["a"].get_host_list({az_id:s,machine_room_name:a,host_name:i,out_band_address:c,host_ip:l,gpu_model:u,host_rack:_,cpu:d,nic:m,product_id:v,product_name:y,bare_metal_id:O,bare_metal_name:w,customer_keyword:j,vgpu_segment_type:x?x[0]:void 0,page_index:this.page_info.current,page_size:this.page_info.size,sort_cpu:this.search_data.sort_cpu,sort_ram:this.search_data.sort_ram,sort_ecs_num:this.search_data.sort_ecs_num,sort_gpu_allot:this.search_data.sort_gpu_allot,host_attribution_id:n?n[0]:void 0,power_status:g?g[0]:void 0,machine_status:k?k[0]:void 0,sort_host_name:this.search_data.sort_host_name,sort_gpu_count:this.search_data.sort_gpu_count,sort_out_band_address:this.search_data.sort_out_band_address,sort_ecs_gpu_count:this.search_data.sort_ecs_gpu_count,sort_host_ip:this.search_data.sort_host_ip,host_purpose:o?o[0]:void 0,host_type:r?r[0]:void 0,host_source:p?p[0]:void 0,backend_type:b?b[0]:void 0,ecs_family_id:h&&h.length>0?h.join(","):void 0,is_prepare_host:C?C[0]:void 0,host_business_type:S?S[0]:void 0,is_spot:T?T[0]:void 0});case 3:$=e.sent,"Success"===$.code&&(this.list=$.data.host_list,this.page_info.total=$.data.page_info.count||0);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getHostTypes",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_host_type({});case 2:t=e.sent,"Success"===t.code&&(s=["type","type_name","list"],a=["value","text","list"],this.host_types=Object(J["b"])(t.data,a,s),this.setList(this.host_types,"host_type_ch"));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getFamilyList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,q["a"].get_family_data();case 2:t=e.sent,"Success"===t.code&&(s=["spec_family_id","name"],a=["value","text"],this.spec_family_list=Object(J["b"])(t.data.spec_family_list,a,s),this.custom_host.length>0&&this.custom_host.map((function(e){"ecs_family_id"===e.column_key&&0===e.list.length&&i.$set(e,"list",i.spec_family_list)})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_host_attribution",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_host_attribution({});case 2:t=e.sent,"Success"===t.code&&(s=["host_attribution_id","name"],a=["value","text"],this.host_belongs=Object(J["b"])(t.data.host_attribution_list,a,s),this.setList(this.host_belongs,"host_attribution_name"));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"goEcs",value:function(e){this.$router.push({path:"/instance",query:{host_name:e}})}},{key:"down",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a,i,n,o,r,c,l,u,_,p,h,d,m,b,f,v,y,g,k,O,w,j,x,C,S;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(C in t=this.search_data,s=t.az_id,a=t.room,i=t.host_name,n=t.out_band_address,o=t.host_ip,r=t.gpu_model,c=t.host_rack,l=t.host_source,u=t.host_type,_=t.host_purpose,p=t.host_belong,h=t.cpu,d=t.nic,m=t.ecs_family_id,b=t.backend_type,f=t.product_id,v=t.product_name,y=t.power_status,g=t.machine_status,k=t.bare_metal_id,O=t.bare_metal_name,w=t.customer_keyword,j={az_id:s,machine_room_name:a,host_name:i,out_band_address:n,host_ip:o,cpu:h,nic:d,gpu_model:r,host_rack:c,product_id:f,product_name:v,bare_metal_id:k,bare_metal_name:O,customer_keyword:w,host_attribution_id:p?p[0]:void 0,host_purpose:_?_[0]:void 0,host_source:l?l[0]:void 0,host_type:u?u[0]:void 0,power_status:y?y[0]:void 0,machine_status:g?g[0]:void 0,backend_type:b?b[0]:void 0,ecs_family_id:m&&m.length>0?m.join(","):void 0,field_names:JSON.stringify(this.custom_host.map((function(e){return e.prop})))},x="",j)j[C]&&(x+="".concat(C,"=").concat(j[C],"&"));S=""===x?"":"?".concat(x.slice(0,x.length-1)),window.location.href="/ecs_business/v1/host/host_list_download/".concat(S);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_az_list",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V["a"].get_region_az_list({employee_no:this.$store.state.employee_no,user_name:this.$store.state.login_name});case 2:t=e.sent,"Success"===t.code&&(t.data.forEach((function(e){e.region_list.forEach((function(e){s.search_option.az_id.list=[].concat(Object(o["a"])(s.search_option.az_id.list),Object(o["a"])(Object(J["c"])(e.az_list,"az_name","az_id","label","type")))}))})),this.$store.state.is_special_user&&(this.search_option.az_id.close_clearable=!0,this.search_option.az_id.default_value=this.search_option.az_id.list[0].type,this.search_data.az_id=this.search_option.az_id.list[0].type,this.fn_search(this.search_data)));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_room_list",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_room_list({});case 2:t=e.sent,"Success"===t.code&&t.data.machine_room.forEach((function(e){s.search_option.room.list.push({label:e,type:e})}));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_host_recycle_department",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_host_recycle_department({});case 2:t=e.sent,"Success"===t.code&&(s=["department_name","department_name"],a=["value","text"],this.host_source=Object(J["b"])(t.data,a,s),this.setList(this.host_source,"host_source"));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSelectionChange",value:function(e){this.multi_rows=e}},{key:"FnSortChange",value:function(e){this.search_data.sort_cpu=void 0,this.search_data.sort_ram=void 0,this.search_data.sort_host_name=void 0,this.search_data.sort_out_band_address=void 0,this.search_data.sort_host_ip=void 0,this.search_data.sort_ecs_num=void 0,this.search_data.sort_gpu_allot=void 0,this.search_data.sort_gpu_count=void 0,this.search_data.sort_ecs_gpu_count=void 0,this.search_data["sort_".concat(e.prop)]="descending"===e.order?"1":"ascending"===e.order?"0":void 0,this.get_physical_list()}},{key:"handleSizeChange",value:function(e){this.page_info.size=e,this.get_physical_list()}},{key:"handleCurrentChange",value:function(e){this.page_info.current=e,this.get_physical_list()}},{key:"filterAttribute",value:function(e){var t=this;if(this.filter_data=Object(n["a"])(Object(n["a"])({},this.filter_data),e),this.filter_data.host_type&&this.filter_data.host_type.length>0){var s=["use_type","use_name"],a=["value","text"],i=this.host_types.filter((function(e){return e.value===t.filter_data.host_type[0]}));this.host_uses=i.length>0?Object(J["b"])(i[0].list,a,s):[]}else this.host_uses=[];this.setList(this.host_uses,"host_purpose_ch"),this.fn_search(this.search_data)}},{key:"handleMore",value:function(e){var t=e.label,s=e.value;this.handle(t,s)}},{key:"handle",value:function(e,t){if(0!==this.multi_rows.length||"upload"===t){if("finish_validate"===t)return this.multi_rows.every((function(e){return["init_error","init","offline"].includes(e.machine_status)}))?(this.oper_type=t,this.oper_label=e,void(this.visible=!0)):void this.$message.warning("物理机需为初始化状态或验证失败状态!");if(["upload","resource","update_attribute"].includes(t)){if("update_attribute"===t){var s=this.multi_rows[0],a=this.multi_rows.every((function(e){return e.is_prepare_host===s.is_prepare_host}));if(!a)return void this.$message.warning("备机不支持与资源池机器同时做批量操作!")}return this.oper_type=t,this.oper_label=e,void(this.visible=!0)}if("bidding"===t){var i=this.multi_rows.every((function(e){return 1===e.is_spot})),n=this.multi_rows.every((function(e){return 0===e.is_spot}));if(!i&&!n)return void this.$message.warning("已选主机竞价实例属性需一致")}if(this.judge(t)){if("disperse"===t){var o=this.multi_rows.filter((function(e){return"GPU"===e.host_purpose})),r=o.every((function(e){return e.ecs_list.every((function(e){return e.is_gpu&&"已关机"===e.status||!e.is_gpu}))}));if(!r)return void this.$message.warning("GPU物理机中的GPU云主机需为关机状态!")}this.oper_type=t,this.oper_label=e,this.visible=!0}else this.$message.warning(this.error_msg[t])}else this.$message.warning("请先勾选物理机!")}},{key:"judge",value:function(e){var t=this,s=Object(N["b"])(e),a=this.multi_rows.every((function(a){var i,n,o,r,c=0===(null===s||void 0===s?void 0:s.power.length)||(null===s||void 0===s?void 0:s.power.includes(a.power_status)),l=0===(null===s||void 0===s?void 0:s.host.length)||(null===s||void 0===s?void 0:s.host.includes(a.machine_status)),u=null===s||void 0===s||!s.vm||(null===s||void 0===s?void 0:s.vm)===a.ecs_list.length+1,_=!s.business||(null===(i=(n=s.business).includes)||void 0===i?void 0:i.call(n,a.host_business_type));!u&&["shutdown_host","restart_host"].includes(e)?t.error_msg[e]=null===(o=Object(N["b"])(e))||void 0===o?void 0:o.msg2:t.error_msg[e]=null===(r=Object(N["b"])(e))||void 0===r?void 0:r.msg;return c&&l&&u&&_}));return a}},{key:"out_of_band",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].external_management({host_id:this.multi_rows[0].host_id});case 2:t=e.sent,"Success"===t.code&&window.open(t.data.url.out_bond_addr);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setList",value:function(e,t){this.custom_host.map((function(s){return s.prop===t&&(s.list=e),s}))}},{key:"close",value:function(e){"upload"===this.oper_type&&this.get_room_list(),"1"===e&&this.get_physical_list(),this.visible=!1,this.oper_type="",this.oper_label="",this.multi_rows=[];var t=this.$refs.table;t.clearSelection()}}]),s}(h["e"]);he=Object(p["a"])([Object(h["a"])({components:{ActionBlock:d["a"],Operate:w,UploadFile:R,Migrate:K,Record:Q["a"],SvgIcon:W["a"],Resource:ie,UpdateAttribute:_e,CustomListItem:pe["a"]}})],he);var de=he,me=de,be=(s("5d62"),Object(k["a"])(me,a,i,!1,null,"4981b4b6",null));t["default"]=be.exports},"900b":function(e,t,s){},"979f":function(e,t,s){},"9f1f":function(e,t,s){"use strict";s("900b")},a15b:function(e,t,s){"use strict";var a=s("23e7"),i=s("e330"),n=s("44ad"),o=s("fc6a"),r=s("a640"),c=i([].join),l=n!=Object,u=r("join",",");a({target:"Array",proto:!0,forced:l||!u},{join:function(e){return c(o(this),void 0===e?",":e)}})},b572:function(e,t,s){},bda3:function(e,t,s){"use strict";s("4164")},c811:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"action-box"},[s("div",{ref:"search",staticClass:"search-box",class:{fold:!e.isOpen}},[e._l(e.search_option,(function(t,a){return s("div",{key:a,staticClass:"search-input",style:t.width?{width:t.width+"px"}:{}},[t.list&&!t.type?s("el-select",{attrs:{placeholder:t.placeholder,multiple:t.multiple,filterable:t.filter,remote:t.filter,"remote-method":t.filter?e.FnRemoteFilter:void 0,clearable:!t.close_clearable},model:{value:e.search_value[a],callback:function(t){e.$set(e.search_value,a,t)},expression:"search_value[key]"}},e._l(t.list,(function(e,a){return s("el-option",{key:Array.isArray(t.list)?e.type:a,attrs:{label:Array.isArray(t.list)?e.label:e,value:Array.isArray(t.list)?e.type:a}})})),1):e._e(),!t.list&&!t.type||"composite"===t.type?s("el-input",{staticClass:"composite",style:t.width?{width:t.width+"px"}:{},attrs:{placeholder:t.placeholder,clearable:""},model:{value:e.search_value[a],callback:function(t){e.$set(e.search_value,a,t)},expression:"search_value[key]"}},["composite"===t.type?s("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.search_value[a+"sub"],callback:function(t){e.$set(e.search_value,a+"sub",t)},expression:"search_value[key + 'sub']"}},e._l(t.list,(function(e){return s("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})})),1):e._e()],1):e._e(),"datetimerange"===t.type||"daterange"===t.type?[s("date-picker",{ref:"datepicker",refInFor:!0,attrs:{time_option:e.search_option[a]},on:{"fn-emit":function(t){return e.FnGetTime(t,a)}}})]:e._e()],2)})),e.type?e._e():s("div",{staticClass:"m-bottom20"},[s("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("查 询")]),s("el-button",{attrs:{type:"default"},on:{click:e.FnClear}},[e._v("清 空")])],1)],2),e.type?s("div",{staticClass:"m-bottom20"},[s("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("查 询")]),s("el-button",{attrs:{type:"default"},on:{click:e.FnClear}},[e._v("清 空")]),s("el-button",{staticClass:"m-bottom10",attrs:{type:"text"},on:{click:e.operate}},[e._v(e._s(e.isOpen?"折叠":"展开"))])],1):e._e(),e._t("default",(function(){return[e.create_btn?s("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.FnShowCreate}},[e._v(e._s(e.create_btn))]):e._e()]}))],2)},i=[],n=s("d4ec"),o=s("bee2"),r=s("262e"),c=s("2caf"),l=(s("ac1f"),s("841c"),s("5319"),s("caad"),s("9ab4")),u=s("1b40"),_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-date-picker",{attrs:{type:e.time_option.type,editable:!1,"range-separator":"至","picker-options":{disabledDate:e.dis_date,onPick:e.onPicker},clearable:e.time_option.clearable,"start-placeholder":e.time_option.placeholder[0],"end-placeholder":e.time_option.placeholder[1]},on:{change:e.FnEmit},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})},p=[],h=function(e){Object(r["a"])(s,e);var t=Object(c["a"])(s);function s(){var e;return Object(n["a"])(this,s),e=t.apply(this,arguments),e.time=[],e.min_date="",e.day=0,e}return Object(o["a"])(s,[{key:"dis_date",value:function(e){var t=this.day;if(0!==t){var s=864e5,a=(new Date).getTime(),i=(new Date).getTime(),n=(new Date).getTime();return this.time_option.min_date?(i=new Date(this.time_option.min_date).getTime(),e.getTime()>n||e.getTime()<i-s):e.getTime()>n||e.getTime()>(this.min_date||a)+s*t||e.getTime()<this.min_date-s*t}}},{key:"onPicker",value:function(e){e.maxDate;var t=e.minDate;this.min_date=t.getTime()}},{key:"created",value:function(){this.day=this.time_option.dis_day-1||0,this.FnChangeDefaultTime(this.time_option.defaultTime)}},{key:"FnClear",value:function(){this.FnChangeDefaultTime(this.time_option.defaultTime)}},{key:"FnChangeDefaultTime",value:function(e){e&&(this.time=e)}},{key:"FnEmit",value:function(){return this.time}}]),s}(u["e"]);Object(l["a"])([Object(u["c"])({default:function(){return{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!1,dis_day:31,min_date:"",defaultTime:[new Date,new Date]}}})],h.prototype,"time_option",void 0),Object(l["a"])([Object(u["c"])({default:!1})],h.prototype,"clear",void 0),Object(l["a"])([Object(u["f"])("time_option.defaultTime")],h.prototype,"FnChangeDefaultTime",null),Object(l["a"])([Object(u["b"])("fn-emit")],h.prototype,"FnEmit",null),h=Object(l["a"])([u["a"]],h);var d=h,m=d,b=s("2877"),f=Object(b["a"])(m,_,p,!1,null,null,null),v=f.exports,y=function(e){Object(r["a"])(s,e);var t=Object(c["a"])(s);function s(){var e;return Object(n["a"])(this,s),e=t.apply(this,arguments),e.search_value={},e.time=null,e.date_key="",e.isOpen=!0,e}return Object(o["a"])(s,[{key:"FnGetTime",value:function(e,t){this.time=e,this.date_key=t}},{key:"FnSearch",value:function(){return this.search_value[this.date_key]=this.time,this.search_value}},{key:"watch_search_option",value:function(e){var t=this;if(e){for(var s in e)void 0!==e[s].default_value&&this.$set(this.search_value,s,e[s].default_value);this.type&&this.$nextTick((function(){var e=t.$refs.search,s=window.getComputedStyle(e).height.replace("px","");parseInt(s)>52&&t.isOpen&&(t.isOpen=!1),t.FnOperate()}))}}},{key:"operate",value:function(){this.isOpen=!this.isOpen,this.FnOperate()}},{key:"FnRemoteFilter",value:function(e){}},{key:"FnOperate",value:function(){}},{key:"FnShowCreate",value:function(){}},{key:"watch_search_value",value:function(e,t){}},{key:"FnClear",value:function(){for(var e in this.search_option)["datetimerange","daterange"].includes(this.search_option[e].type)?this.$refs.datepicker[0].FnClear():this.search_value={};this.FnSearch()}},{key:"mounted",value:function(){var e=this,t=0;for(var s in this.search_option)this.search_option[s].default_value&&(this.$set(this.search_value,s,this.search_option[s].default_value),t++);(t>0||"physical"===this.type)&&setTimeout((function(){e.FnSearch()}),500)}}]),s}(u["e"]);Object(l["a"])([Object(u["c"])({default:{}})],y.prototype,"search_option",void 0),Object(l["a"])([Object(u["c"])({default:""})],y.prototype,"create_btn",void 0),Object(l["a"])([Object(u["c"])({default:!0})],y.prototype,"disabled",void 0),Object(l["a"])([Object(u["c"])({default:!1})],y.prototype,"type",void 0),Object(l["a"])([Object(u["b"])("fn-search")],y.prototype,"FnSearch",null),Object(l["a"])([Object(u["f"])("search_option",{immediate:!0,deep:!0})],y.prototype,"watch_search_option",null),Object(l["a"])([Object(u["b"])("fn-filter")],y.prototype,"FnRemoteFilter",null),Object(l["a"])([Object(u["b"])("fn-operate")],y.prototype,"FnOperate",null),Object(l["a"])([Object(u["b"])("fn-create")],y.prototype,"FnShowCreate",null),Object(l["a"])([Object(u["f"])("search_value",{immediate:!0,deep:!0})],y.prototype,"watch_search_value",null),y=Object(l["a"])([Object(u["a"])({components:{DatePicker:v}})],y);var g=y,k=g,O=(s("4abb"),s("e198c"),Object(b["a"])(k,a,i,!1,null,"32ed5a7b",null));t["a"]=O.exports},c839:function(e,t,s){"use strict";var a=s("81a9"),i=s("bff7");t["a"]={get_pod_list:function(e){return Object(a["a"])(Object(i["a"])("GET","/pod/get_pod_list/",e))},get_az_info:function(e){return Object(a["a"])(Object(i["a"])("GET","/pod/get_pod_info/",e))},create_pod:function(e){return Object(a["a"])(Object(i["a"])("POST","/pod/create_pod/",e))},update_pod:function(e){return Object(a["a"])(Object(i["a"])("POST","/pod/update_pod/",e))},get_pod_history:function(e){return Object(a["a"])(Object(i["a"])("GET","/pod/get_pod_history/",e))}}},ca89:function(e,t,s){},cb4f:function(e,t,s){},cc18:function(e,t,s){"use strict";s("ca89")},d772:function(e,t,s){"use strict";var a=s("81a9"),i=s("bff7");t["a"]={get_operate_record_list:function(e){return Object(a["a"])(Object(i["a"])("GET","/ecs/history_record/",e))},get_detail:function(e){return Object(a["a"])(Object(i["a"])("GET","/ecs/get_ecs_detail/",e))}}},d990:function(e,t,s){},e198c:function(e,t,s){"use strict";s("979f")},e527:function(e,t,s){"use strict";var a=s("81a9"),i=s("bff7"),n=s("4328"),o=s.n(n);t["a"]={get_instance_list:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/ecs_list/",e))},operate_instance:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/operate/",e))},delete_instance:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/delete/",e))},recover_instance:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/recover/",e))},destroy_instance:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/destroy/",e))},get_status_list:function(){return Object(a["a"])(Object(i["a"])("GET","/ecs/ecs_status_list/"))},get_family_data:function(){return Object(a["a"])(Object(i["a"])("GET","/ecs/get_family_data/"))},reset_password:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/ecs_reset_password/",e))},update_spec:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/ecs_change_configure/",e))},update_system:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/ecs_change_system/",e))},get_usage_ip:function(e){return Object(a["a"])(Object(i["a"])("GET","/ecs/get_deleted_ecs_ip/",e))},get_vnc_url:function(e){return Object(a["a"])(Object(i["a"])("GET","/ecs/vnc_info/",e))},start_charge:function(e){return Object(a["a"])(Object(i["a"])("POST","/resource/start_charge/",e))},change_config_price:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/change_config_price/",e))},change_system_price:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/change_system_price/",e))},each_resource_price:function(e){return Object(a["a"])(Object(i["a"])("POST","/ecs/each_resource_price/",e))},export_list:function(e){return Object(a["a"])({method:"GET",url:"/ecs_business/v1/ecs/ecs_list_download/",params:e,paramsSerializer:function(e){return o.a.stringify(e)},responseType:"blob"})},get_list_field:function(){return Object(a["a"])(Object(i["a"])("POST","/ecs/get_ecs_list_field/"))}}},ea98:function(e,t,s){"use strict";var a=s("23e7"),i=s("e330"),n=s("1d80"),o=s("5926"),r=s("577e"),c=s("d039"),l=i("".charAt),u=c((function(){return"\ud842"!=="𠮷".at(-2)}));a({target:"String",proto:!0,forced:u},{at:function(e){var t=r(n(this)),s=t.length,a=o(e),i=a>=0?a:s+a;return i<0||i>=s?void 0:l(t,i)}})},ec7a:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{visible:e.visible,title:"自定义列表项","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[s("div",{staticClass:"m-bottom10"},[e._v("清除缓存或者更换浏览器，自定义列表失效"),s("span",{staticClass:"warning_message m-left10"},[e._v("(最少选择5项，最多选择25项)")])]),s("div",{staticClass:"item"},[e._l(e.all_item,(function(t){return[s("div",{staticClass:"label"},[e._v(e._s(t.name))]),s("div",{staticClass:"checkbox-box"},[s("el-checkbox-group",{model:{value:e.select_item,callback:function(t){e.select_item=t},expression:"select_item"}},e._l(t.filed,(function(e){return s("el-checkbox",{key:e.show_name,attrs:{label:e.show_name,disabled:"主机名"===e.show_name||"云服务器ID"===e.show_name}})})),1)],1)]}))],2),s("span",[e._v("已选择："),s("span",{staticClass:"num_message"},[e._v(e._s(e.select_item.length))])]),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.FnConfirm}},[e._v("确 定")]),s("el-button",{on:{click:e.FnClose}},[e._v("取 消")])],1)])},i=[],n=s("2909"),o=s("d4ec"),r=s("bee2"),c=s("262e"),l=s("2caf"),u=s("9ab4"),_=s("1b40"),p=function(e){Object(c["a"])(s,e);var t=Object(l["a"])(s);function s(){var e;return Object(o["a"])(this,s),e=t.apply(this,arguments),e.select_item=[],e}return Object(r["a"])(s,[{key:"created",value:function(){"ecs"===this.type?this.FnHandleSelectItem(this.$store.state.ecs_custom_item):"physical"===this.type&&this.FnHandleSelectItem(this.$store.state.custom_host)}},{key:"FnHandleSelectItem",value:function(e){if(e.length>0)this.select_item=Object(n["a"])(e);else for(var t=0;t<this.all_column_item.length;t++){if(!(this.select_item.length<25))break;this.all_column_item[t].hidden||this.select_item.push(this.all_column_item[t].label)}this.FnEmit()}},{key:"FnConfirm",value:function(){this.select_item.length<5||this.select_item.length>25?this.$message.warning("自定义列表项最少为5项，最多为25项"):("ecs"===this.type?this.$store.commit("SET_ECS_CUSTOM_ITEM",this.select_item):"physical"===this.type&&this.$store.commit("SET_CUSTOM_HOST",this.select_item),this.FnEmit(),this.FnClose())}},{key:"FnClose",value:function(){this.$emit("update:visible",!1)}},{key:"FnEmit",value:function(){return this.select_item}}]),s}(_["e"]);Object(u["a"])([Object(_["c"])({default:!1})],p.prototype,"visible",void 0),Object(u["a"])([Object(_["c"])({default:"physical"})],p.prototype,"type",void 0),Object(u["a"])([Object(_["c"])({default:function(){return[]}})],p.prototype,"all_column_item",void 0),Object(u["a"])([Object(_["c"])({default:function(){return[]}})],p.prototype,"all_item",void 0),Object(u["a"])([Object(_["b"])("fn-custom")],p.prototype,"FnEmit",null),p=Object(u["a"])([_["a"]],p);var h=p,d=h,m=(s("f73f"),s("2877")),b=Object(m["a"])(d,a,i,!1,null,"173f2810",null);t["a"]=b.exports},f73f:function(e,t,s){"use strict";s("8045")},fae2:function(e,t,s){}}]);