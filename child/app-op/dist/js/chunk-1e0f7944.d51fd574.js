(window["webpackJsonp_AppOp"]=window["webpackJsonp_AppOp"]||[]).push([["chunk-1e0f7944"],{"0692":function(e,t,i){},"07ac":function(e,t,i){var s=i("23e7"),a=i("6f53").values;s({target:"Object",stat:!0},{values:function(e){return a(e)}})},"0fec":function(e,t,i){},1116:function(e,t,i){"use strict";i("cb4f")},1170:function(e,t,i){"use strict";i("0fec")},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},1477:function(e,t,i){"use strict";var s=i("81a9"),a=i("bff7");t["a"]={get_host_list:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/get_host_list/",e))},get_room_list:function(e){return Object(s["a"])(Object(a["b"])("GET","/host/machine_room_list/",e))},get_status_list:function(e){return Object(s["a"])(Object(a["b"])("GET","/host/host_status_list/",e))},external_management:function(e){return Object(s["a"])(Object(a["b"])("GET","/host/external_management/",e))},migrate:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/migration_operation/",e))},disperse:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/disperse_operation/",e))},record:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/host_operation_record/",e))},recommended_host:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/recommended_host/",e))},host_maintenance:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/host_maintenance/",e))},finish_maintenance:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/host_finish_maintenance/",e))},shelves:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/host_off_shelves/",e))},get_detail_overview:function(e){return Object(s["a"])(Object(a["b"])("GET","/host/host_main_details/",e))},get_detail_storage:function(e){return Object(s["a"])(Object(a["b"])("GET","/host/host_disk/",e))},down:function(e){return Object(s["a"])(Object(a["b"])("GET","/host/host_list_download/",e))},host_operate:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/operate/",e))},host_import:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/import/",e))},get_host_attribution:function(e){return Object(s["a"])(Object(a["b"])("GET","/host/get_host_attribution/",e))},set_host_attribution:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/set_host_attribution/",e))},get_host_type:function(e){return Object(s["a"])(Object(a["b"])("GET","/host/get_host_config/",e))},update_attribute:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/set_host_config/",e))},getCustomerList:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/get_customer_list/",e))},getFamilyList:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/get_family_list/",e))},finish_validate:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/verification_finish/",e))},get_host_recycle_department:function(e){return Object(s["a"])(Object(a["b"])("GET","/host/get_host_recycle_department/",e))},get_host_list_field:function(e){return Object(s["a"])(Object(a["b"])("GET","/host/get_host_list_field/",e))},switch_business_type:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/switch_business_type/",e))},set_host_bid_attribute:function(e){return Object(s["a"])(Object(a["b"])("POST","/host/set_host_spot/",e))}}},"1a4b":function(e,t,i){},"268f":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"操作记录",visible:e.visible,width:"60%","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t},close:e.back}},[i("div",[i("el-dialog",{attrs:{title:"响应信息",visible:e.res_visible,width:"60%","destroy-on-close":!0,"append-to-body":"","custom-class":"response-data"},on:{"update:visible":function(t){e.res_visible=t},close:e.clost_res}},[i("div",[e._v(e._s(e.response))])])],1),i("div",[i("action-block",{attrs:{search_option:"physical"===e.type?Object.assign({},e.search,e.physical_option):e.search},on:{"fn-search":e.fn_search}}),"physical"===e.type?i("div",{staticClass:"icon m-bottom10"},[i("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[i("el-button",{attrs:{type:"text"},on:{click:e.getOperateRecordList}},[i("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1):e._e(),i("el-table",{staticClass:"record-table",attrs:{data:e.record_list,border:""}},[i("el-table-column",{attrs:{prop:"oper_time",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.oper_time?e.moment(t.row.oper_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),i("el-table-column",{attrs:{prop:"oper_type_display",label:"操作内容"}}),i("el-table-column",{attrs:{prop:"status_display",label:"状态"}}),i("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.result?i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.view(t.row.result)}}},[e._v("查看")]):i("span",[e._v("-")])]}}])}),i("el-table-column",{attrs:{prop:"finish_time",label:"完成时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.finish_time?e.moment(t.row.finish_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),i("el-table-column",{attrs:{prop:"oper_user",label:"用户名"}}),"physical"!==e.type?i("el-table-column",{attrs:{prop:"flag_display",label:"操作标识"}}):e._e()],1),i("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.back}},[e._v("返回")])],1)],1)])],1)},a=[],n=i("5530"),o=i("1da1"),r=i("d4ec"),c=i("bee2"),l=i("262e"),_=i("2caf"),u=(i("96cf"),i("ac1f"),i("841c"),i("9ab4")),p=i("1b40"),d=i("c811"),h=i("d772"),f=i("1477"),m=i("c1df"),b=i.n(m),v=i("8ce4"),g=i("3673"),y=function(e){Object(l["a"])(i,e);var t=Object(_["a"])(i);function i(){var e;return Object(r["a"])(this,i),e=t.apply(this,arguments),e.state_list=[{type:"",label:"全部"},{type:"doing",label:"执行中"},{type:"success",label:"成功"},{type:"failed",label:"失败"}],e.search={state:{list:e.state_list,placeholder:"请选择状态"},content:{placeholder:"请输入操作内容"}},e.physical_option={time:{type:"datetimerange",placeholder:["开始时间","结束时间"],clearable:!1,width:360,dis_day:31,defaultTime:[b()(new Date).format("YYYY-MM-DD 00:00:00"),b()(new Date).format("YYYY-MM-DD HH:mm:ss")]}},e.record_list=[],e.current=1,e.size=20,e.total=0,e.search_data={},e.moment=b.a,e.response="",e.res_visible=!1,e}return Object(c["a"])(i,[{key:"created",value:function(){this.fn_search()}},{key:"fn_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.search_data=e,this.getOperateRecordList()}},{key:"getOperateRecordList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,i,s,a,o,r,c,l,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.search_data,s="physical"!==this.type?{task_type:i.content,cloud_id:this.record_id}:{content:i.content,cloud_id:this.record_id,cloud_type:"host"},a=Object(n["a"])({status:i.state||"",page_size:this.size,page_index:this.current},s),"physical"===this.type){e.next=9;break}return e.next=6,h["a"].get_operate_record_list(Object(n["a"])({cloud_type:this.type?this.type:"ecs"},a));case 6:t=e.sent,e.next=12;break;case 9:return e.next=11,f["a"].record(Object(n["a"])({start:i.time?b()(i.time[0]).format("YYYY-MM-DD HH:mm:ss"):b()(new Date).format("YYYY-MM-DD 00:00:00"),end:i.time?b()(i.time[1]).format("YYYY-MM-DD HH:mm:ss"):b()(new Date).format("YYYY-MM-DD HH:mm:ss")},a));case 11:t=e.sent;case 12:"Success"===t.code&&("physical"!==this.type?this.record_list=(null===(c=t.data)||void 0===c?void 0:c.history_record)||[]:(l=["create_time","content","status_name","response","update_time","op_user"],_=["oper_time","oper_type_display","status_display","response","finish_time","oper_user"],this.record_list=Object(v["b"])(t.data.operation_list,_,l)),this.total=(null===(o=t.data)||void 0===o||null===(r=o.page_info)||void 0===r?void 0:r.count)||0);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSizeChange",value:function(e){this.size=e,this.getOperateRecordList()}},{key:"handleCurrentChange",value:function(e){this.current=e,this.getOperateRecordList()}},{key:"view",value:function(e){this.response=e,this.res_visible=!0}},{key:"clost_res",value:function(){this.res_visible=!1,this.response=""}},{key:"back",value:function(){}}]),i}(p["e"]);Object(u["a"])([Object(p["c"])(Boolean)],y.prototype,"visible",void 0),Object(u["a"])([Object(p["c"])(String)],y.prototype,"record_id",void 0),Object(u["a"])([Object(p["c"])(String)],y.prototype,"type",void 0),Object(u["a"])([Object(p["b"])("close")],y.prototype,"back",null),y=Object(u["a"])([Object(p["a"])({components:{ActionBlock:d["a"],SvgIcon:g["a"]}})],y);var k=y,O=k,w=(i("1116"),i("2877")),j=Object(w["a"])(O,s,a,!1,null,null,null);t["a"]=j.exports},"3f8d":function(e,t,i){"use strict";i.d(t,"b",(function(){return n}));var s={delete_ecs:{auth:["running","shutdown","error"],msg:"已选实例状态需为已关机或运行中或错误！",label:"逻辑删除"},recover_ecs:{auth:["deleted"],msg:"已选实例状态需为已删除！",label:"恢 复"},destroy_ecs:{auth:["deleted","failed"],msg:"已选实例状态需为已删除或创建失败！",label:"销 毁"},open_bill:{auth:["running","shutdown"],msg:"已选实例状态需为运行中或已关机！",label:"开启计费"}},a={start_up_host:{power:["shutdown"],host:["offline","online","exception"],msg:"已选主机需为在线或离线或异常状态",label:"开机"},shutdown_host:{power:["running"],host:["offline","online"],vm:1,msg:"已选主机需为在线或离线状态",msg2:"操作关机前，请确保物理机上无云主机运行",label:"关机"},restart_host:{power:["running"],host:["offline","online"],vm:1,msg:"已选主机需为在线或离线状态",msg2:"操作重启前，请确保物理机上无云主机运行",label:"重启"},online_maintenance:{power:[],host:["online","exception"],msg:"已选主机需为在线状态",label:"在线维护"},offline_maintenance:{power:[],host:["offline","online","exception"],vm:1,msg:"已选主机需为在线或离线状态且已选主机上不能有虚拟机运行",label:"离线维护"},finish:{power:[],host:["maintenance","online_maintenance","offline_maintenance"],msg:"已选主机需为维护中状态",label:"完成维护"},shelves:{power:[],host:["maintenance"],vm:1,msg:"已选主机需为维护状态且已选主机上不能有虚拟机运行",label:"下架"},disperse:{power:["running"],host:["online"],msg:"已选主机需为在线状态",label:"驱散"},out_of_band:{power:[],host:["offline","online"],msg:"已选主机需为在线或离线状态",label:"进入带外管理"},migrate:{power:["running"],host:["online"],msg:"已选主机需为在线状态",label:"迁移"},kvm_to_eci:{power:[],host:["maintenance"],business:["KVM"],msg:"已选主机需为维护中状态且业务类型为KVM",label:"KVM切换ECI"},eci_to_kvm:{power:[],host:["maintenance"],business:["ECI"],msg:"已选主机需为维护中状态且业务类型为ECI",label:"ECI切换KVM"},bidding:{power:[],host:[],msg:"已选主机业务类型需为KVM",business:["KVM"],label:"竞价实例"}};t["a"]={getInsOperateAuth:function(e){return s[e]}};var n=function(e){return a[e]}},"494e":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"instance-list"},[i("action-block",{attrs:{search_option:e.search_con,type:"instance"},on:{"fn-search":e.FnSearch,"fn-operate":e.FnIsOpen},scopedSlots:e._u([{key:"default",fn:function(){return[i("el-button",{attrs:{type:"primary",disabled:!e.operate_auth.includes("delete")},on:{click:function(t){return e.FnOperate("delete_ecs")}}},[e._v("逻辑删除")]),i("el-button",{attrs:{type:"primary",disabled:!e.operate_auth.includes("destroy")},on:{click:function(t){return e.FnOperate("destroy_ecs")}}},[e._v("销 毁")]),i("el-button",{attrs:{type:"primary",disabled:!e.operate_auth.includes("open_bill")},on:{click:function(t){return e.FnOperate("open_bill")}}},[e._v("开启计费")])]},proxy:!0}])}),i("div",{staticClass:"icon m-bottom10"},[i("el-tooltip",{attrs:{content:"自定义列表项",placement:"bottom",effect:"light"}},[i("el-button",{attrs:{type:"text"},on:{click:e.FnCustom}},[i("i",{staticClass:"el-icon-s-tools"})])],1),i("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[i("el-button",{attrs:{type:"text"},on:{click:e.FnGetList}},[i("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1),i("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"text"},on:{click:e.FnExport}},[i("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1)],1),i("el-table",{ref:"multipleTable",attrs:{data:e.instance_list,border:"","max-height":e.tableHeight},on:{"selection-change":e.handleSelectionChange,"filter-change":e.handleFilterChange,"sort-change":e.handleSortChange}},[i("el-table-column",{attrs:{type:"selection",width:e.select_table_item.length>0?"48px":"1100px"}}),e._l(e.select_table_item,(function(t){return i("el-table-column",{key:t.prop,attrs:{label:t.label,prop:t.prop,"column-key":t.column_key?t.column_key:null,sortable:t.sortable?t.sortable:null,filters:t.column_key?t.list:null,"filter-multiple":!!t.multiple},scopedSlots:e._u([{key:"default",fn:function(s){return["ecs_name"===t.prop?[i("pre",[e._v(e._s(s.row.ecs_name))])]:"status_display"===t.prop?[i("div",{class:s.row.status},[e._v(e._s(s.row.status_display))]),s.row.no_charge_shutdown_ecs&&"shutdown"===s.row.status?i("div",{staticClass:"warning_message"},[e._v("关机不计费")]):e._e()]:"host_name"===t.prop?[i("span",{staticClass:"num_message"},[e._v(e._s(s.row.host_name))])]:"system_disk_size"===t.prop?[i("span",[e._v(e._s(s.row.system_disk_size)+" GB")])]:"data_disk_size"===t.prop?[i("span",[e._v(e._s(s.row.data_disk_size)+" GB")])]:"calculation_specification"===t.prop?[e._v(" "+e._s(s.row.ecs_goods_name)+" "),i("br"),e._v(" "+e._s(s.row.cpu_size)+"vCPU | "+e._s(s.row.ram_size)+"GiB "),i("br"),s.row.gpu_size?i("span",[e._v("| "+e._s(s.row.gpu_size)+"*"+e._s(s.row.card_name))]):e._e()]:"private_net"===t.prop?[s.row.private_net?i("div",[e._v(" "+e._s(s.row.private_net)+" （vlan "+e._s(s.row.eip_info[s.row.private_net].vlan_id)+"） ")]):e._e()]:"virtual_net"===t.prop?[s.row.pub_net?i("div",[s.row.eip_info[s.row.pub_net]&&s.row.eip_info[s.row.pub_net].conf_name?i("span",{staticClass:"circel-border"},[e._v(" "+e._s(s.row.eip_info[s.row.pub_net].conf_name)+" ")]):e._e(),e._v(" "+e._s(s.row.pub_net)+" （vlan "+e._s(s.row.eip_info[s.row.pub_net].vlan_id)+"） ")]):e._e(),e._l(s.row.virtual_net,(function(t){return i("div",{key:t},[s.row.eip_info[t]&&s.row.eip_info[t].conf_name?i("span",{staticClass:"circel-border"},[e._v(" "+e._s(s.row.eip_info[t].conf_name)+" ")]):e._e(),e._v(" "+e._s(t)+" （vlan "+e._s(s.row.eip_info[t].vlan_id)+"） ")])}))]:"pub_net"===t.prop?[s.row.eip_info[s.row.pub_net]&&s.row.eip_info[s.row.pub_net].conf_name?i("div",[i("span",{staticClass:"circel-border"},[e._v(" "+e._s(s.row.eip_info[s.row.pub_net].conf_name)+" ")]),e._v(" "+e._s(s.row.eip_info[s.row.pub_net].eip_ip)+" ")]):e._e(),e._l(s.row.virtual_net,(function(t){return i("div",{key:t},[s.row.eip_info[t]&&s.row.eip_info[t].conf_name?[i("span",{staticClass:"circel-border"},[e._v(" "+e._s(s.row.eip_info[t].conf_name)+" ")]),e._v(" "+e._s(s.row.eip_info[t].eip_ip)+" ")]:e._e()],2)}))]:"create_time"===t.prop?[i("div",{staticClass:"time-box"},[e._v(e._s(s.row.create_time))])]:"billing_method"===t.prop?[i("div",[e._v(" "+e._s(s.row.is_charge?e.billing_method_relation[s.row.billing_method]:"不计费")+" ")])]:[e._v(" "+e._s(s.row[t.prop])+" ")]]}}],null,!0)})})),i("el-table-column",{attrs:{label:"操作",prop:"operate"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.FnToRecord(t.row.ecs_id)}}},[e._v("操作记录")])]}}])})],2),i("el-pagination",{attrs:{"current-page":e.page_info.page_index,"page-sizes":e.page_info.page_sizes,"page-size":e.page_info.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.page_info.total},on:{"size-change":function(t){return e.FnGetList()},"current-change":function(t){return e.FnGetList()},"update:currentPage":function(t){return e.$set(e.page_info,"page_index",t)},"update:current-page":function(t){return e.$set(e.page_info,"page_index",t)},"update:pageSize":function(t){return e.$set(e.page_info,"page_size",t)},"update:page-size":function(t){return e.$set(e.page_info,"page_size",t)}}}),i("el-dialog",{attrs:{title:e.operate_title,visible:e.show_operate_dialog,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(t){e.show_operate_dialog=t},close:e.FnClose}},["recover_ecs"===e.default_operate_type?[i("Recover",{ref:"recover",attrs:{multiple_selection:e.multiple_selection,customer_id:e.customer_id,is_gpu:e.is_gpu},on:{"fn-close":e.FnClose}})]:i("div",[i("el-alert",{attrs:{title:"是否确定要对以下实例执行 "+e.operate_title+" 操作",type:"warning",closable:!1,center:""}}),i("el-table",{staticClass:"operate-table",attrs:{data:e.multiple_selection,border:""}},[i("el-table-column",{attrs:{label:"客户名称/客户ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(t.row.customer_name))]),i("div",[e._v(e._s(t.row.customer_id))])]}}])}),i("el-table-column",{attrs:{label:"云服务器名称/云服务器ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("pre",[e._v(e._s(t.row.ecs_name))])]),i("div",[e._v(e._s(t.row.ecs_id))])]}}])}),i("el-table-column",{attrs:{label:"云服务器规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.ecs_goods_name)+" "),i("br"),e._v(" "+e._s(t.row.cpu_size)+"vCPU | "+e._s(t.row.ram_size)+"GiB "),i("br"),e.is_gpu?i("span",[e._v("| "+e._s(t.row.gpu_size)+"*"+e._s(t.row.card_name))]):e._e()]}}])}),"update_system"===e.default_operate_type?i("el-table-column",{attrs:{label:"系统盘"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(" "+e._s(t.row.system_disk_type)+" "+e._s(t.row.system_disk_size)+"GB ")])]}}],null,!1,3861243780)}):e._e(),"update_system"===e.default_operate_type?i("el-table-column",{attrs:{label:"操作系统"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v(e._s(t.row.name))])]}}],null,!1,1281056470)}):e._e(),i("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{class:t.row.status},[e._v(e._s(t.row.status_display))])]}}])}),"open_bill"===e.default_operate_type?i("el-table-column",{attrs:{prop:"",label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.ecs_list_price[t.row.ecs_id]))])]}}],null,!1,260281309)}):e._e()],1),i("div",{staticClass:"component-box"},["update_spec"===e.default_operate_type?[i("update-spec",{ref:"update_spec",attrs:{customer_id:e.customer_id,az_id:e.az_id,type:"batch_update",default_is_gpu:e.is_gpu},on:{"fn-spec":e.FnChangeSpec}})]:e._e(),"update_system"===e.default_operate_type?[i("update-os",{ref:"update_os",attrs:{customer_id:e.customer_id,az_id:e.az_id,is_gpu:e.is_gpu,support_gpu_driver:e.support_gpu_driver},on:{"fn-os":e.FnGetOsInfo}}),i("update-disk",{ref:"update_disk",attrs:{system_disk:!0,customer_id:e.customer_id,az_id:e.az_id,is_gpu:e.is_gpu,os_disk_size:Number(e.os_info.disk_size),origin_disk_size:e.origin_disk_size,spec_family_id:e.spec_family_id},on:{"fn-billing-info":e.FnGetDiskBillingInfo,"fn-system-disk":e.FnChangeSystem}}),i("reset-pwd",{ref:"reset_pwd",attrs:{customer_id:e.customer_id,az_id:e.az_id,username:e.os_info.username}})]:e._e(),"reset_pwd"===e.default_operate_type?[i("reset-pwd",{ref:"reset_pwd",attrs:{label:"新密码",customer_id:e.customer_id,az_id:e.az_id}})]:e._e()],2),e.total_price?i("div",{staticClass:"text-right m-right20"},[e._v(" 变更后总价： "),i("span",{staticClass:"num_message"},[e._v(e._s(e.total_price))])]):e._e(),"shutdown_ecs"===e.default_operate_type?i("div",{staticClass:"text-center"},[e._v(" 关机方式： "),i("el-radio",{staticClass:"m-left20",attrs:{label:"shutdown_ecs"},model:{value:e.shutdown_ecs_type,callback:function(t){e.shutdown_ecs_type=t},expression:"shutdown_ecs_type"}},[e._v("正常关机")]),i("el-radio",{staticClass:"m-left20",attrs:{label:"compel_shutdown_ecs"},model:{value:e.shutdown_ecs_type,callback:function(t){e.shutdown_ecs_type=t},expression:"shutdown_ecs_type"}},[e._v("强制关机")]),i("mark-tip",{staticClass:"mark-tip",attrs:{content:"等同于断电处理，Windows操作系统可能会损坏，请谨慎选择"}})],1):e._e()],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.FnConfirm}},[e._v("确 定")]),i("el-button",{on:{click:e.FnClose}},[e._v("取 消")])],1)],2),e.record_visible?[i("Record",{attrs:{visible:e.record_visible,record_id:e.record_id},on:{close:e.closeRecord}})]:e._e(),e.detail_visible?[i("Detail",{attrs:{visible:e.detail_visible,detail_id:e.detail_id},on:{"close-detail":e.closeDetail}})]:e._e(),i("custom-list-item",{attrs:{type:"ecs",visible:e.show_custom,all_item:e.all_item,all_column_item:e.all_column_item},on:{"update:visible":function(t){e.show_custom=t},"fn-custom":e.get_custom_columns}})],2)},a=[],n=i("ade3"),o=i("5530"),r=i("2909"),c=i("1da1"),l=i("d4ec"),_=i("bee2"),u=i("262e"),p=i("2caf"),d=(i("96cf"),i("d81d"),i("99af"),i("4de4"),i("d3b7"),i("caad"),i("2532"),i("a15b"),i("ac1f"),i("1276"),i("e9c4"),i("159b"),i("a9e3"),i("b680"),i("b0c0"),i("25f0"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("9ab4")),h=i("1b40"),f=i("98c9"),m=i("c811"),b=i("3673"),v=i("ec7a"),g=i("3f8d"),y=i("8ce4"),k=i("e527"),O=i("9074"),w=i("268f"),j=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"配置详情",visible:e.visible,width:"60%","destroy-on-close":!0},on:{"update:visible":function(t){e.visible=t},close:e.back}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:10}},[i("span",{staticClass:"label"},[e._v("云服务器ID:")]),i("span",[e._v(e._s(e.detail&&e.detail.ecs_id))])]),i("el-col",{attrs:{span:10}},[i("span",{staticClass:"label"},[e._v("地域:")]),i("span",[e._v(e._s(e.detail&&e.detail.region_name))])])],1),i("el-row",{attrs:{gutter:20}},[i("el-col",{staticClass:"name-row",attrs:{span:10}},[i("span",{staticClass:"label"},[e._v("云服务器名称:")]),i("span",[i("pre",[e._v(e._s(e.detail&&e.detail.ecs_name))])])]),i("el-col",{attrs:{span:10}},[i("span",{staticClass:"label"},[e._v("可用区:")]),i("span",[e._v(e._s(e.detail&&e.detail.az_name))])])],1),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:10}},[i("span",{staticClass:"label"},[e._v("状态:")]),i("span",[e._v(e._s(e.detail&&e.detail.status_display))])])],1),i("div",{staticClass:"title"},[e._v("计算规格")]),i("el-row",{attrs:{gutter:20}},[e.detail&&e.detail.ecs_rule&&e.detail.ecs_rule.conf_name?i("el-col",{attrs:{span:20}},[i("span",{staticClass:"label"},[e._v(e._s(e.detail&&e.detail.ecs_rule&&e.detail.ecs_rule.conf_name)+":")]),i("span",[e._v(e._s(e.detail&&e.detail.ecs_rule&&e.detail.ecs_rule.name))]),e.detail&&e.detail.ecs_rule&&e.detail.ecs_rule.cpu_num?i("span",[e._v("   "+e._s(e.detail&&e.detail.ecs_rule&&e.detail.ecs_rule.cpu_num)+"vCPU "),i("span",[e._v(e._s(e.detail&&e.detail.ecs_rule&&e.detail.ecs_rule.ram)+"GiB")]),e.detail&&e.detail.is_gpu?i("span",[e._v(e._s(e.detail&&e.detail.ecs_rule&&e.detail.ecs_rule.gpu)+"*"+e._s(e.detail&&e.detail.card_name))]):e._e()]):e._e()]):e._e()],1),i("div",{staticClass:"title"},[e._v("操作系统")]),i("div",{staticClass:"content"},[e._v(e._s(e.detail&&e.detail.os_info&&e.detail.os_info.name))]),i("div",{staticClass:"title"},[e._v("存储")]),i("div",{staticClass:"content"},[i("span",{staticClass:"label"},[e._v("系统盘：")]),e.detail&&e.detail.disk&&e.detail.disk.system_disk_conf?i("span",{staticClass:"data-disk"},[e._v(e._s(e.detail&&e.detail.disk&&e.detail.disk.system_disk_conf&&e.detail.disk.system_disk_conf.disk_name))]):e._e(),e.detail&&e.detail.disk&&e.detail.disk.system_disk_conf&&e.detail.disk.system_disk_conf.size?i("span",{staticClass:"data-disk-unit"},[e._v(e._s(e.detail&&e.detail.disk&&e.detail.disk.system_disk_conf&&e.detail.disk.system_disk_conf.size)+e._s(e.detail&&e.detail.disk&&e.detail.disk.system_disk_conf&&e.detail.disk.system_disk_conf.unit))]):e._e(),e.detail&&e.detail.disk&&e.detail.disk.system_disk_conf&&e.detail.disk.system_disk_conf.id?i("span",{staticClass:"id_name"},[e._v("("+e._s(e.detail&&e.detail.disk&&e.detail.disk.system_disk_conf&&e.detail.disk.system_disk_conf.id)+" / "+e._s(e.detail&&e.detail.disk&&e.detail.disk.system_disk_conf&&e.detail.disk.system_disk_conf.name)+")")]):e._e()]),i("div",{staticClass:"content data_disk"},[i("span",{staticClass:"label"},[e._v("数据盘：")]),e.detail&&e.detail.disk&&e.detail.disk.data_disk_conf?i("div",{staticClass:"disk_content"},e._l(e.detail.disk.data_disk_conf,(function(t){return i("div",{key:t.id},[i("span",{staticClass:"data-disk"},[e._v(e._s(t.disk_name))]),i("span",{staticClass:"data-disk-unit"},[e._v(e._s(t.size)+e._s(t.unit))]),i("span",{staticClass:"id_name"},[e._v("("+e._s(t.id)+" / "+e._s(t.name)+")")]),i("span",[e._v(e._s(t.is_follow_delete?"随实例删除":"不随实例删除"))])])})),0):e._e()]),i("div",{staticClass:"title"},[e._v("网络")]),i("div",{staticClass:"content"},[i("span",{staticClass:"label"},[e._v("VPC:")]),e.detail&&e.detail.pipe&&e.detail.pipe.vpc_id?i("span",[e._v(e._s(e.detail&&e.detail.pipe&&e.detail.pipe.vpc_id)+" / "+e._s(e.detail&&e.detail.pipe&&e.detail.pipe.vpc_name))]):e._e()]),i("div",{staticClass:"content"},[i("span",{staticClass:"label"},[e._v("子网:")]),e.detail&&e.detail.pipe&&e.detail.pipe.subnet_id?i("span",[e._v(e._s(e.detail&&e.detail.pipe&&e.detail.pipe.subnet_id)+" / "+e._s(e.detail&&e.detail.pipe&&e.detail.pipe.subnet_name))]):e._e()]),i("div",{staticClass:"content display-flex"},[i("span",{staticClass:"label"},[e._v("私网IP：")]),e.detail&&e.detail.pipe?i("span",[e.detail.pipe.private_net?[e._v(e._s(e.detail.pipe.private_net)+" （主）")]:e._e(),i("br"),e.detail.pipe.pub_net?[e._v(" "+e._s(e.detail.pipe.pub_net)+" "),e.detail.pipe.eip_info[e.detail.pipe.pub_net]&&e.detail.pipe.eip_info[e.detail.pipe.pub_net].conf_name?[e._v(" （"+e._s(e.detail.pipe.eip_info[e.detail.pipe.pub_net].conf_name)+"） ")]:e._e(),i("br")]:e._e(),e._l(e.detail.pipe.virtual_net,(function(t){return i("span",{key:t},[e._v(" "+e._s(t)+" "),e.detail.pipe.eip_info[t]&&e.detail.pipe.eip_info[t].conf_name?[e._v(" （"+e._s(e.detail.pipe.eip_info[t].conf_name)+"） ")]:e._e(),i("br")],2)}))],2):e._e()]),i("div",{staticClass:"content display-flex"},[i("span",{staticClass:"label"},[e._v("公网IP：")]),e.detail&&e.detail.pipe?i("span",[e.detail.pipe.pub_net&&e.detail.pipe.eip_info[e.detail.pipe.pub_net]&&e.detail.pipe.eip_info[e.detail.pipe.pub_net].eip_ip?[e._v(" "+e._s(e.detail.pipe.eip_info[e.detail.pipe.pub_net].eip_ip)+" （"+e._s(e.detail.pipe.eip_info[e.detail.pipe.pub_net].conf_name)+"） "),i("br")]:e._e(),e._l(e.detail.pipe.virtual_net,(function(t){return i("span",{key:t},[e.detail.pipe.eip_info[t]&&e.detail.pipe.eip_info[t].conf_name?[e._v(" "+e._s(t.eip_ip)+" （"+e._s(e.detail.pipe.eip_info[t].conf_name)+"） ")]:e._e(),i("br")],2)}))],2):e._e()]),i("div",{staticClass:"divider"}),i("div",{staticClass:"content"},[i("span",{staticClass:"label"},[e._v("所属机房:")]),i("span",[e._v(e._s(e.detail&&e.detail.engine_room))])]),i("div",{staticClass:"content"},[i("span",{staticClass:"label"},[e._v("所属节点:")]),i("span",[e._v(e._s(e.detail&&e.detail.host_name))])]),i("div",{staticClass:"content"},[i("span",{staticClass:"label"},[e._v("所属物理机:")]),e.detail&&e.detail.host_id?i("span",[e._v(e._s(e.detail&&e.detail.host_id)+"   "),e.detail&&e.detail.host_status?i("span",[e._v("( "+e._s(e.detail&&e.detail.host_status)+" )")]):e._e()]):e._e()]),i("div",{staticClass:"content"},[i("span",{staticClass:"label"},[e._v("处理器型号:")]),i("span",[e._v(e._s(e.detail&&e.detail.cpu_type))])]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.back}},[e._v("返回")])],1)],1)])],1)},x=[],C=i("d772"),F=function(e){Object(u["a"])(i,e);var t=Object(p["a"])(i);function i(){var e;return Object(l["a"])(this,i),e=t.apply(this,arguments),e.detail=null,e.loading=!1,e}return Object(_["a"])(i,[{key:"getDetail",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C["a"].get_detail({ecs_id:this.detail_id});case 2:t=e.sent,"Success"===t.code?(this.loading=!1,this.detail=t.data):this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"back",value:function(){}},{key:"created",value:function(){this.getDetail()}}]),i}(h["e"]);Object(d["a"])([Object(h["c"])(Boolean)],F.prototype,"visible",void 0),Object(d["a"])([Object(h["c"])(String)],F.prototype,"detail_id",void 0),Object(d["a"])([Object(h["b"])("close-detail")],F.prototype,"back",null),F=Object(d["a"])([h["a"]],F);var S=F,T=S,z=(i("d8a7"),i("2877")),$=Object(z["a"])(T,j,x,!1,null,"33b12e64",null),R=$.exports,D=i("ed60"),P=i("3874"),I=i("29ab"),E=i("d4fd"),G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-alert",{attrs:{type:"warning",closable:!1},scopedSlots:e._u([{key:"title",fn:function(){return[i("p",[e._v("支持自定义填写恢复后新IP，若原IP未被占用则可以使用原IP；")]),i("p",[e._v("若未自定义填写恢复后新IP，则默认随机生成新可用IP；")]),i("p",[e._v("为避免自定义IP成功可用率较低，建议使用随机生成的新IP。")])]},proxy:!0}])}),i("el-table",{attrs:{data:e.multiple_selection,border:""}},[i("el-table-column",{attrs:{prop:"ecs_id",label:"云服务器ID"}}),i("el-table-column",{attrs:{prop:"ecs_name",label:"云服务器名称"}}),i("el-table-column",{attrs:{label:"原IP（最近使用）"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.ip_usage[t.row.ecs_id]?i("div",[e._v(" "+e._s(e.ip_usage[t.row.ecs_id].ip_address)+" "),e.ip_usage[t.row.ecs_id].is_used?i("span",{staticClass:"destroy"},[e._v("（已占用）")]):e._e()]):e._e()]}}])}),i("el-table-column",{attrs:{label:"恢复后新IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{placeholder:"请输入自定义IP"},model:{value:e.new_ip_address[t.row.ecs_id],callback:function(i){e.$set(e.new_ip_address,t.row.ecs_id,i)},expression:"new_ip_address[scope.row.ecs_id]"}})]}}])})],1)],1)},Y=[],M=(i("07ac"),function(e){Object(u["a"])(i,e);var t=Object(p["a"])(i);function i(){var e;return Object(l["a"])(this,i),e=t.apply(this,arguments),e.ip_usage={},e.ip_available_list={},e.new_ip_address={},e}return Object(_["a"])(i,[{key:"FnGetIpUsage",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,i,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={customer_id:this.customer_id,ecs_ids:this.multiple_selection.map((function(e){return e.ecs_id}))},this.ip_usage={},e.next=4,k["a"].get_usage_ip(t);case 4:i=e.sent,"Success"===i.code&&(i.data.forEach((function(e){s.ip_usage[e.ecs_id]={ip_address:e.ip_address,is_used:e.is_used}})),this.$set(this.ip_usage));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnRecover",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,i,s,a,n,o,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object.values(this.new_ip_address),i=[],e.t0=regeneratorRuntime.keys(this.new_ip_address);case 3:if((e.t1=e.t0()).done){e.next=12;break}if(s=e.t1.value,a=this.new_ip_address[s],!this.ip_usage[s].is_used||this.ip_usage[s].ip_address!==a){e.next=9;break}return this.$message.warning("恢复后新IP已被占用！"),e.abrupt("return");case 9:(i.indexOf(a)<0||!a)&&i.push(a),e.next=3;break;case 12:if(!(t.length>i.length)){e.next=15;break}return this.$message.warning("恢复后新IP重复！"),e.abrupt("return");case 15:return n={customer_id:this.customer_id,is_gpu:this.is_gpu,ecs_list:this.multiple_selection.map((function(e){return{ecs_id:e.ecs_id,ip_address:r.new_ip_address[e.ecs_id]}}))},e.next=18,k["a"].recover_instance(n);case 18:o=e.sent,"Success"==o.code&&(this.$message.success(o.msg||"成功下发 恢 复 任务！"),this.Fnclose());case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Fnclose",value:function(){}},{key:"created",value:function(){this.FnGetIpUsage()}}]),i}(h["e"]));Object(d["a"])([Object(h["c"])({default:""})],M.prototype,"customer_id",void 0),Object(d["a"])([Object(h["c"])({default:[]})],M.prototype,"multiple_selection",void 0),Object(d["a"])([Object(h["c"])({default:0})],M.prototype,"is_gpu",void 0),Object(d["a"])([Object(h["b"])("fn-close")],M.prototype,"Fnclose",null),M=Object(d["a"])([h["a"]],M);var L=M,H=L,A=Object(z["a"])(H,G,Y,!1,null,null,null),B=A.exports,U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-tooltip",{attrs:{content:e.content,placement:e.placement,effect:e.effect,"popper-class":"tooltip-class"},scopedSlots:e._u([{key:"content",fn:function(){return[e._t("content")]},proxy:!0}],null,!0)},[i("el-button",{attrs:{type:"text"}},[i("svg-icon",{attrs:{icon:"info",viewBox:"0 0 18 18"}})],1)],1)},N=[],V=function(e){Object(u["a"])(i,e);var t=Object(p["a"])(i);function i(){return Object(l["a"])(this,i),t.apply(this,arguments)}return Object(_["a"])(i)}(h["e"]);Object(d["a"])([Object(h["c"])({default:""})],V.prototype,"content",void 0),Object(d["a"])([Object(h["c"])({default:"right"})],V.prototype,"placement",void 0),Object(d["a"])([Object(h["c"])({default:"light"})],V.prototype,"effect",void 0),V=Object(d["a"])([Object(h["a"])({components:{svgIcon:b["a"]}})],V);var J=V,q=J,K=(i("b4f2"),Object(z["a"])(q,U,N,!1,null,null,null)),W=K.exports,Q=i("c1df"),X=i.n(Q),Z=function(e){Object(u["a"])(i,e);var t=Object(p["a"])(i);function i(){var e;return Object(l["a"])(this,i),e=t.apply(this,arguments),e.search_con={az_id:{placeholder:"请选择可用区",list:[]},ecs_id:{placeholder:"请输入云服务器ID"},ecs_name:{placeholder:"请输入云服务器名称"},status:{placeholder:"请选择云服务器状态",list:[],multiple:!0,default_value:[]},create_time:{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!0,dis_day:1,defaultTime:[]},customer_id:{placeholder:"请输入客户ID"},customer_name:{placeholder:"请输入客户名称"},os_type:{placeholder:"请选择操作系统",list:[]},private_net:{placeholder:"请输入私网IP"},public_net:{placeholder:"请输入公网IP"},host_name:{placeholder:"请输入宿主机名称",default_value:""}},e.search_reqData={},e.search_billing_method="all",e.search_op_source="",e.search_ecs_goods_name=[],e.customer_type=[],e.instance_list=[],e.customer_id="",e.az_id="",e.is_gpu=0,e.origin_disk_size=0,e.support_gpu_driver="",e.spec_family_id="",e.billing_method="0",e.multiple_selection=[],e.multiple_selection_id=[],e.operate_auth=[],e.show_operate_dialog=!1,e.operate_title="",e.default_operate_type="",e.shutdown_ecs_type="shutdown_ecs",e.record_visible=!1,e.record_id="",e.detail_visible=!1,e.detail_id="",e.tableHeight=70,e.page_info={page_sizes:[20,50,100],page_size:20,page_index:1,total:0},e.billing_method_relation={"":"不计费",0:"按需计费",1:"包年包月"},e.billing_method_list=[],e.ecs_goods_name_list=[],e.timer=null,e.os_info={},e.disk_billing_info={},e.total_price="",e.ecs_list_price={},e.loading=!1,e.sort_prop_name="",e.sort_order=void 0,e.show_custom=!1,e.all_item=[],e.all_column_item=[],e.all_table_item=[],e.select_table_item=[],e.filters_status=["destroy","destroying"],e.default_status=[],e}return Object(_["a"])(i,[{key:"get_list_field",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["a"].get_list_field();case 2:t=e.sent,"Success"===t.code&&(i=["field_name","show_name"],s=["prop","label"],a=[],t.data.map((function(e){return a=[].concat(Object(r["a"])(a),Object(r["a"])(e.filed)),e})),this.all_item=t.data,this.all_column_item=Object(y["b"])(a,s,i),this.get_custom_columns(this.$store.state.ecs_custom_item));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_custom_columns",value:function(e){var t=this;0!==e.length&&(this.select_table_item=this.all_column_item.filter((function(t){return e.includes(t.label)})),this.select_table_item.map((function(e){["ecs_id","ecs_name","customer_id","customer_level","system_disk_size","data_disk_size","host_name","create_time"].includes(e.prop)&&(e=Object.assign(e,{},{sortable:"custom"})),"calculation_specification"===e.prop&&(e=Object.assign(e,{},{column_key:"ecs_goods_name",multiple:!0,list:t.ecs_goods_name_list})),"customer_type"===e.prop&&(e=Object.assign(e,{},{column_key:"customer_type",list:[{text:"内部",value:"内部"},{text:"外部",value:"外部"}]}))})))}},{key:"FnSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.search_reqData={az_id:e.az_id,ecs_id:e.ecs_id,ecs_name:e.ecs_name,status:e.status&&e.status.length>0?e.status.join(","):"",customer_id:e.customer_id,customer_name:e.customer_name,os_type:e.os_type,private_net:e.private_net,public_net:e.public_net,host_name:e.host_name,start_time:e.create_time&&e.create_time[0]?X()(e.create_time[0]).format("YYYY-MM-DD"):void 0,end_time:e.create_time&&e.create_time[1]?X()(e.create_time[1]).format("YYYY-MM-DD"):void 0},this.page_info.page_index=1,this.FnGetList()}},{key:"handleFilterChange",value:function(e){e.op_source&&(this.search_op_source=e.op_source[0]),e.billing_method&&(this.search_billing_method=e.billing_method.length>0?e.billing_method[0]:"all"),e.ecs_goods_name&&(this.search_ecs_goods_name=e.ecs_goods_name),e.customer_type&&(this.customer_type=e.customer_type),this.FnGetList()}},{key:"handleSortChange",value:function(e){this.sort_prop_name="sort_".concat([e.prop]),this.sort_order="ascending"===e.order?"0":"descending"===e.order?"1":void 0,this.FnGetList()}},{key:"FnGetNet",value:function(e){var t=e.split(".");return[t[0],t[1],t[2],"0"].join(".")}},{key:"FnGetList",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,i,s,a,r=this,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=!(c.length>0&&void 0!==c[0])||c[0],this.multiple_selection_id=[],t||(this.$store.commit("SET_LOADING",!1),this.multiple_selection_id=this.multiple_selection.map((function(e){return e.ecs_id}))),i=Object(o["a"])(Object(n["a"])({billing_method:""==this.search_billing_method?"no":this.search_billing_method,page_index:this.page_info.page_index,page_size:this.page_info.page_size,is_op:!1},this.sort_prop_name,this.sort_order),this.search_reqData),this.search_op_source&&(i["op_source"]=this.search_op_source),this.search_ecs_goods_name.length>0&&(i["spec_family_ids"]=JSON.stringify(this.search_ecs_goods_name)),this.customer_type.length>0&&(i["customer_type"]=this.customer_type[0]),e.next=9,k["a"].get_instance_list(i);case 9:s=e.sent,"Success"===s.code&&(this.instance_list=s.data.ecs_list,a=[],this.multiple_selection_id.length>0&&(a=s.data.ecs_list.filter((function(e){return r.multiple_selection_id.includes(e.ecs_id)}))),a&&a.length>0&&this.$nextTick((function(){a.forEach((function(e){r.$refs.multipleTable.toggleRowSelection(e)}))})),this.page_info.total=s.data.page.count),this.FnSetTimer();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSelectionChange",value:function(e){this.multiple_selection=e}},{key:"FnToCreate",value:function(){this.$router.push("/instance/create")}},{key:"FnOperate",value:function(e){if(0!==this.multiple_selection.length){var t=g["a"].getInsOperateAuth(e);if(["reset_pwd","update_spec","update_system","open_bill"].indexOf(e)>=0){if(!this.FnJudegCustomerAz(t,e))return;"open_bill"===e&&this.FnGetEcsPrice()}else if(!this.FnJudgeCustomer(t,e))return;this.operate_title=t.label,this.show_operate_dialog=!0,this.default_operate_type=e,this.FnClearTimer()}else this.$message.warning("请选择要操作的实例！")}},{key:"FnJudgeCustomer",value:function(e,t){this.customer_id="";var i=!0;this.multiple_selection_id=[];for(var s=0;s<this.multiple_selection.length;s++){var a=this.multiple_selection[s];if(this.multiple_selection_id.push(a.ecs_id),0===s&&(this.customer_id=a.customer_id,this.is_gpu=Number(a.is_gpu)),a.customer_id!==this.customer_id){this.$message.warning("只允许对同一客户的实例进行批量操作！"),i=!1;break}if(["recover_ecs"].indexOf(t)>=0&&a.is_gpu!=this.is_gpu){this.$message.warning("只允许对同一类型实例进行批量".concat(e.label,"操作！")),i=!1;break}if(e.auth.indexOf(a.status)<0){this.$message.warning(e.msg),i=!1;break}}return i}},{key:"FnJudegCustomerAz",value:function(e,t){this.customer_id="",this.az_id="",this.billing_method="0",this.origin_disk_size=0,this.support_gpu_driver="",this.spec_family_id="";var i=!0;this.multiple_selection_id=[];for(var s=0;s<this.multiple_selection.length;s++){var a=this.multiple_selection[s];if(this.multiple_selection_id.push(a.ecs_id),0===s&&(this.customer_id=a.customer_id,this.az_id=a.az_id,this.billing_method=a.billing_method,this.is_gpu=Number(a.is_gpu),this.support_gpu_driver=a.support_gpu_driver,this.spec_family_id=a.spec_family_id),a.customer_id!==this.customer_id||a.az_id!==this.az_id){this.$message.warning("只允许对同一客户的同一可用区下实例进行批量操作！"),i=!1;break}if(["update_spec","update_system"].indexOf(t)>=0&&(a.is_gpu!=this.is_gpu||a.billing_method!==this.billing_method)){this.$message.warning("只允许对同一类型同一计费方式实例进行批量".concat(e.label,"操作！")),i=!1;break}if("open_bill"===t&&a.is_charge){this.$message.warning("只允许对未开启计费的实例开启计费！"),i=!1;break}if("update_system"===t&&a.support_gpu_driver!=this.support_gpu_driver){this.$message.warning("只允许对同一驱动类型实例进行批量".concat(e.label,"操作！")),i=!1;break}if("update_system"===t&&a.spec_family_id!=this.spec_family_id){this.$message.warning("只允许对同一规格族实例进行批量".concat(e.label,"操作！")),i=!1;break}if("update_spec"===t&&this.is_gpu){this.$message.warning("不允许对GPU实例".concat(e.label,"操作！")),i=!1;break}if(e.auth.indexOf(a.status)<0){this.$message.warning(e.msg),i=!1;break}this.origin_disk_size=Math.max(this.origin_disk_size,a.system_disk_size)}return i}},{key:"FnConfirm",value:function(){if("recover_ecs"!==this.default_operate_type){var e={op_type:this.default_operate_type,customer_id:this.customer_id,az_id:this.az_id,ecs_ids:this.multiple_selection_id};["start_up_ecs","shutdown_ecs","restart_ecs"].indexOf(this.default_operate_type)>=0?this.FnPowerOperate(e):"delete_ecs"===this.default_operate_type?this.FnDelete(e):"destroy_ecs"===this.default_operate_type?this.FnDestroy(e):"reset_pwd"===this.default_operate_type?this.FnResetPwd(e):"update_spec"===this.default_operate_type?this.FnUpdateSpec(e):"update_system"===this.default_operate_type?this.FnUpdateSystem(e):"open_bill"===this.default_operate_type&&this.FnOpenBill(Object.assign({billing_method:this.billing_method},e))}else this.$refs.recover.FnRecover()}},{key:"FnPowerOperate",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"shutdown_ecs"===this.default_operate_type&&(t.op_type=this.shutdown_ecs_type),e.next=3,k["a"].operate_instance(t);case 3:i=e.sent,"Success"==i.code&&(this.$message.success(i.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.FnClose());case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnDelete",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["a"].delete_instance(Object.assign({is_gpu:this.is_gpu},t));case 2:i=e.sent,"Success"==i.code&&(this.$message.success(i.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.FnClose());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnDestroy",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["a"].destroy_instance(Object.assign({is_gpu:this.is_gpu},t));case 2:i=e.sent,"Success"==i.code&&(this.$message.success(i.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.page_info.page_index=1,this.FnClose());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnResetPwd",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.$refs.reset_pwd.FnSubmit(),!i.flag){e.next=8;break}return t.password=i.password,e.next=5,k["a"].reset_password(t);case 5:s=e.sent,"Success"===s.code&&this.$message.success(s.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.FnClose();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnChangeSpec",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.billing_method){e.next=2;break}return e.abrupt("return");case 2:return i={customer_id:this.customer_id,az_id:this.az_id,billing_method:this.billing_method||"0",ecs_ids:this.multiple_selection_id,is_gpu:this.is_gpu,ecs_goods_info:{cpu:t.cpu,ram:t.ram,gpu:t.gpu},billing_info:t.billing_info[t.ecs_goods_id]},e.next=5,k["a"].change_config_price(i);case 5:s=e.sent,"Success"===s.code&&(this.total_price=s.data.price_symbol+s.data.total_price.toFixed(2)+"/"+s.data.price_unit);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnUpdateSpec",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.$refs.update_spec.FnSubmit(),!i.flag){e.next=10;break}return t.billing_info=i.spec_info.billing_info[i.spec_info.ecs_goods_id],t.is_gpu=this.is_gpu,t.ecs_info={ecs_goods_info:{ecs_goods_id:i.spec_info.ecs_goods_id,gic_goods_id:t.billing_info.gic_goods_id,cpu:i.spec_info.cpu,ram:i.spec_info.ram,gpu:i.spec_info.gpu}},e.next=7,k["a"].update_spec(t);case 7:s=e.sent,"Success"===s.code&&this.$message.success(s.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.FnClose();case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnGetOsInfo",value:function(e){this.os_info=e}},{key:"FnGetDiskBillingInfo",value:function(e){this.disk_billing_info=e}},{key:"FnChangeSystem",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.billing_method){e.next=2;break}return e.abrupt("return");case 2:return i={customer_id:this.customer_id,az_id:this.az_id,billing_method:this.billing_method||"0",is_gpu:this.is_gpu,ecs_ids:this.multiple_selection_id,ebs_goods_info:{},billing_info:this.disk_billing_info[t.ecs_goods_id]},this.is_gpu?(i.ebs_goods_info["local_disk-IOPS"]=t.iops,i.ebs_goods_info["local_disk-space"]=t.storage_space,i.ebs_goods_info["local_disk-throughput"]=t.handling_capacity):(i.ebs_goods_info["iops"]=t.iops,i.ebs_goods_info["storage_space"]=t.storage_space,i.ebs_goods_info["handling_capacity"]=t.handling_capacity),e.next=6,k["a"].change_system_price(i);case 6:s=e.sent,"Success"===s.code&&(this.total_price=s.data.price_symbol+s.data.total_price.toFixed(2)+"/"+s.data.price_unit);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnUpdateSystem",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i,s,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.$refs.update_os.FnSubmit(),s=this.$refs.update_disk.FnSubmit(),a=this.$refs.reset_pwd.FnSubmit(),!(i.flag&&s.flag&&a.flag)){e.next=17;break}return t.os_id=i.os_info.os_id,t.os_type=i.os_info.os_type,t.username=i.os_info.username,t.disk_info={system_disk:{ecs_goods_id:s.system_disk.ecs_goods_id,ebs_goods_id:s.system_disk.ecs_goods_id,gic_goods_id:null===(n=this.disk_billing_info[s.system_disk.ecs_goods_id])||void 0===n?void 0:n.gic_goods_id,goods_name:s.system_disk.disk_name,disk_feature:s.system_disk.disk_feature,disk_type:s.system_disk.disk_type,disk_size:s.system_disk.disk_size,storage_space:s.system_disk.disk_size,handling_capacity:s.system_disk.handling_capacity,iops:s.system_disk.iops,is_follow_delete:s.system_disk.is_follow_delete,origin_disk_size:this.origin_disk_size}},"local"===s.system_disk.disk_feature&&(t.disk_info.system_disk["local_disk-IOPS"]=t.disk_info.system_disk["iops"],t.disk_info.system_disk["local_disk-space"]=t.disk_info.system_disk["storage_space"],t.disk_info.system_disk["local_disk-throughput"]=t.disk_info.system_disk["handling_capacity"]),t.password=a.password,t.billing_info=this.disk_billing_info,t.is_gpu=this.is_gpu,e.next=14,k["a"].update_system(t);case 14:o=e.sent,"Success"===o.code&&this.$message.success(o.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.FnClose();case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnGetEcsPrice",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.ecs_list_price={},e.next=3,k["a"].each_resource_price({customer_id:this.customer_id,az_id:this.az_id,billing_method:"0",resource_ids:this.multiple_selection_id,resource_type:"ecs"});case 3:if(t=e.sent,"Success"===t.code)for(i in t.data.total_price)this.$set(this.ecs_list_price,i,t.data.price_symbol+t.data.total_price[i].toFixed(2)+"/"+t.data.price_unit);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnOpenBill",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={resource_ids:t.ecs_ids,customer_id:t.customer_id,billing_method:t.billing_method||"0",resource_type:"ecs"},e.next=3,k["a"].start_charge(i);case 3:s=e.sent,"Success"===s.code&&this.$message.success("成功开启计费！"),this.FnClose();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnToVnc",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["a"].get_vnc_url({ecs_id:t});case 2:i=e.sent,"Success"===i.code&&(s=i.data.vnc_info.split("/vnc_lite.html"),a="".concat(s[0],"/vnc_lite.html?op-token=").concat(this.$store.state.token,"?path=/?id=").concat(t),window.open(a));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnClose",value:function(){this.show_operate_dialog=!1,this.default_operate_type="",this.total_price="",this.FnGetList()}},{key:"FnToDetail",value:function(e){this.detail_id=e,this.detail_visible=!0}},{key:"FnToRecord",value:function(e){console.log("FnToRecord"),this.record_id=e,this.record_visible=!0}},{key:"FnToMonitor",value:function(e){this.$router.push("/instance/monitor/"+e)}},{key:"closeRecord",value:function(){this.record_visible=!1}},{key:"closeDetail",value:function(){this.detail_visible=!1}},{key:"FnSetTimer",value:function(){var e=this;this.timer&&this.FnClearTimer(),this.timer=setTimeout((function(){e.FnGetList(!1)}),5e3)}},{key:"FnClearTimer",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"FnGetStatus",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["a"].get_status_list();case 2:if(t=e.sent,"Success"===t.code){for(i in this.search_con.status.list=[],t.data)this.filters_status.includes(i)||(this.search_con.status.list.push({label:t.data[i],type:i}),this.default_status.push(i));this.$store.commit("SET_STATUS_LIST",this.search_con.status.list)}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_az_list",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O["a"].get_region_az_list({});case 2:t=e.sent,"Success"===t.code&&t.data.forEach((function(e){e.region_list.forEach((function(e){i.search_con.az_id.list=[].concat(Object(r["a"])(i.search_con.az_id.list),Object(r["a"])(Object(y["c"])(e.az_list,"az_name","az_id","label","type")))}))}));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnGetCateGoryList",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k["a"].get_family_data();case 2:t=e.sent,"Success"===t.code&&(this.ecs_goods_name_list=t.data.spec_family_list.map((function(e){return{value:e.spec_family_id,text:e.name}})),this.$nextTick((function(){i.select_table_item.map((function(e){"calculation_specification"===e.prop&&i.$set(e,"list",i.ecs_goods_name_list)}))})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnCustom",value:function(){this.show_custom=!0}},{key:"FnExport",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t=this.search_ecs_goods_name.map((function(e){return e.toString()})),e.next=4,k["a"].export_list(Object.assign({billing_method:""==this.search_billing_method?"no":this.search_billing_method,op_source:this.search_op_source,spec_family_ids:this.search_ecs_goods_name.length>0?t:void 0},this.search_reqData));case 4:i=e.sent,i&&(this.loading=!1,s=new Blob([i],{type:"application/octet-stream"}),a=new FileReader,a.readAsText(s,"utf-8"),a.onload=function(){var e=document.createElement("a");e.href=window.URL.createObjectURL(s),e.download="云服务器-"+X()(new Date).format("YYYYMMDD")+".xlsx",e.click(),window.URL.revokeObjectURL(e.href)});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){var e=this;for(var t in this.operate_auth=this.$store.state.auth_info[this.$route.name],this.FnGetStatus(),this.get_list_field(),this.get_az_list(),this.FnGetCateGoryList(),this.search_con.os_type.list=[{label:"centos",type:"centos"},{label:"ubuntu",type:"ubuntu"},{label:"windows",type:"windows"}],this.billing_method_relation)this.billing_method_list.push({value:t,text:this.billing_method_relation[t]});this.$route.query.host_name&&(this.search_con.host_name.default_value=this.$route.query.host_name,this.search_con.status.default_value=["running","shutdown","deleted"]),this.all_item.forEach((function(t){var i;(i=e.all_table_item).push.apply(i,Object(r["a"])(t.filed.map((function(e){return{label:e.show_name,prop:e.field_name,hidden:e.hidden,sortable:e.sortable}}))))}))}},{key:"mounted",value:function(){this.setHeight()}},{key:"FnIsOpen",value:function(){this.setHeight()}},{key:"setHeight",value:function(){var e=this;this.$nextTick((function(){var t=e.$refs.multipleTable;e.tableHeight=window.innerHeight-t.$el.offsetTop-70;var i=e;window.onresize=function(){i.tableHeight=window.innerHeight-t.$el.offsetTop-70}}))}},{key:"beforeDestroy",value:function(){this.FnClearTimer()}}]),i}(h["e"]);Z=Object(d["a"])([Object(h["a"])({components:{LabelBlock:f["a"],actionBlock:m["a"],Record:w["a"],Detail:R,resetPwd:D["a"],updateSpec:P["a"],updateOs:I["a"],updateDisk:E["a"],Recover:B,SvgIcon:b["a"],MarkTip:W,CustomListItem:v["a"]}})],Z);var ee=Z,te=ee,ie=(i("7b0a"),i("1170"),Object(z["a"])(te,s,a,!1,null,"65e215f3",null));t["default"]=ie.exports},"681d":function(e,t,i){"use strict";i("7bd4")},"6f53":function(e,t,i){var s=i("83ab"),a=i("e330"),n=i("df75"),o=i("fc6a"),r=i("d1e7").f,c=a(r),l=a([].push),_=function(e){return function(t){var i,a=o(t),r=n(a),_=r.length,u=0,p=[];while(_>u)i=r[u++],s&&!c(a,i)||l(p,e?[i,a[i]]:a[i]);return p}};e.exports={entries:_(!0),values:_(!1)}},"7b0a":function(e,t,i){"use strict";i("1a4b")},"7bd4":function(e,t,i){},8045:function(e,t,i){},"841c":function(e,t,i){"use strict";var s=i("c65b"),a=i("d784"),n=i("825a"),o=i("1d80"),r=i("129f"),c=i("577e"),l=i("dc4a"),_=i("14c3");a("search",(function(e,t,i){return[function(t){var i=o(this),a=void 0==t?void 0:l(t,e);return a?s(a,t,i):new RegExp(t)[e](c(i))},function(e){var s=n(this),a=c(e),o=i(t,s,a);if(o.done)return o.value;var l=s.lastIndex;r(l,0)||(s.lastIndex=0);var u=_(s,a);return r(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},"979f":function(e,t,i){},a15b:function(e,t,i){"use strict";var s=i("23e7"),a=i("e330"),n=i("44ad"),o=i("fc6a"),r=i("a640"),c=a([].join),l=n!=Object,_=r("join",",");s({target:"Array",proto:!0,forced:l||!_},{join:function(e){return c(o(this),void 0===e?",":e)}})},b4f2:function(e,t,i){"use strict";i("0692")},c811:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"action-box"},[i("div",{ref:"search",staticClass:"search-box",class:{fold:!e.isOpen}},[e._l(e.search_option,(function(t,s){return i("div",{key:s,staticClass:"search-input",style:t.width?{width:t.width+"px"}:{}},[t.list&&!t.type?i("el-select",{attrs:{placeholder:t.placeholder,multiple:t.multiple,filterable:t.filter,remote:t.filter,"remote-method":t.filter?e.FnRemoteFilter:void 0,clearable:""},model:{value:e.search_value[s],callback:function(t){e.$set(e.search_value,s,t)},expression:"search_value[key]"}},e._l(t.list,(function(e,s){return i("el-option",{key:Array.isArray(t.list)?e.type:s,attrs:{label:Array.isArray(t.list)?e.label:e,value:Array.isArray(t.list)?e.type:s}})})),1):e._e(),!t.list&&!t.type||"composite"===t.type?i("el-input",{staticClass:"composite",style:t.width?{width:t.width+"px"}:{},attrs:{placeholder:t.placeholder,clearable:""},model:{value:e.search_value[s],callback:function(t){e.$set(e.search_value,s,t)},expression:"search_value[key]"}},["composite"===t.type?i("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.search_value[s+"sub"],callback:function(t){e.$set(e.search_value,s+"sub",t)},expression:"search_value[key + 'sub']"}},e._l(t.list,(function(e){return i("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})})),1):e._e()],1):e._e(),"datetimerange"===t.type||"daterange"===t.type?[i("date-picker",{ref:"datepicker",refInFor:!0,attrs:{time_option:e.search_option[s]},on:{"fn-emit":function(t){return e.FnGetTime(t,s)}}})]:e._e()],2)})),e.type?e._e():i("div",{staticClass:"m-bottom20"},[i("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("查 询")]),i("el-button",{attrs:{type:"default"},on:{click:e.FnClear}},[e._v("清 空")])],1)],2),e.type?i("div",{staticClass:"m-bottom20"},[i("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("查 询")]),i("el-button",{attrs:{type:"default"},on:{click:e.FnClear}},[e._v("清 空")]),i("el-button",{staticClass:"m-bottom10",attrs:{type:"text"},on:{click:e.operate}},[e._v(e._s(e.isOpen?"折叠":"展开"))])],1):e._e(),e._t("default",(function(){return[e.create_btn?i("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.FnShowCreate}},[e._v(e._s(e.create_btn))]):e._e()]}))],2)},a=[],n=i("d4ec"),o=i("bee2"),r=i("262e"),c=i("2caf"),l=(i("ac1f"),i("841c"),i("5319"),i("caad"),i("9ab4")),_=i("1b40"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-date-picker",{attrs:{type:e.time_option.type,editable:!1,"range-separator":"至","picker-options":{disabledDate:e.dis_date,onPick:e.onPicker},clearable:e.time_option.clearable,"start-placeholder":e.time_option.placeholder[0],"end-placeholder":e.time_option.placeholder[1]},on:{change:e.FnEmit},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})},p=[],d=function(e){Object(r["a"])(i,e);var t=Object(c["a"])(i);function i(){var e;return Object(n["a"])(this,i),e=t.apply(this,arguments),e.time=[],e.min_date="",e.day=0,e}return Object(o["a"])(i,[{key:"dis_date",value:function(e){var t=this.day;if(0!==t){var i=864e5,s=(new Date).getTime(),a=(new Date).getTime(),n=(new Date).getTime();return this.time_option.min_date?(a=new Date(this.time_option.min_date).getTime(),e.getTime()>n||e.getTime()<a-i):e.getTime()>n||e.getTime()>(this.min_date||s)+i*t||e.getTime()<this.min_date-i*t}}},{key:"onPicker",value:function(e){e.maxDate;var t=e.minDate;this.min_date=t.getTime()}},{key:"created",value:function(){this.day=this.time_option.dis_day-1||0,this.FnChangeDefaultTime(this.time_option.defaultTime)}},{key:"FnClear",value:function(){this.FnChangeDefaultTime(this.time_option.defaultTime)}},{key:"FnChangeDefaultTime",value:function(e){e&&(this.time=e)}},{key:"FnEmit",value:function(){return this.time}}]),i}(_["e"]);Object(l["a"])([Object(_["c"])({default:function(){return{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!1,dis_day:31,min_date:"",defaultTime:[new Date,new Date]}}})],d.prototype,"time_option",void 0),Object(l["a"])([Object(_["c"])({default:!1})],d.prototype,"clear",void 0),Object(l["a"])([Object(_["f"])("time_option.defaultTime")],d.prototype,"FnChangeDefaultTime",null),Object(l["a"])([Object(_["b"])("fn-emit")],d.prototype,"FnEmit",null),d=Object(l["a"])([_["a"]],d);var h=d,f=h,m=i("2877"),b=Object(m["a"])(f,u,p,!1,null,null,null),v=b.exports,g=function(e){Object(r["a"])(i,e);var t=Object(c["a"])(i);function i(){var e;return Object(n["a"])(this,i),e=t.apply(this,arguments),e.search_value={},e.time=null,e.date_key="",e.isOpen=!0,e}return Object(o["a"])(i,[{key:"FnGetTime",value:function(e,t){this.time=e,this.date_key=t}},{key:"FnSearch",value:function(){return this.search_value[this.date_key]=this.time,this.search_value}},{key:"watch_search_option",value:function(){var e=this;this.type&&this.$nextTick((function(){var t=e.$refs.search,i=window.getComputedStyle(t).height.replace("px","");parseInt(i)>52&&e.isOpen&&(e.isOpen=!1),e.FnOperate()}))}},{key:"operate",value:function(){this.isOpen=!this.isOpen,this.FnOperate()}},{key:"FnRemoteFilter",value:function(e){}},{key:"FnOperate",value:function(){}},{key:"FnShowCreate",value:function(){}},{key:"watch_search_value",value:function(e,t){}},{key:"FnClear",value:function(){for(var e in this.search_option)["datetimerange","daterange"].includes(this.search_option[e].type)?this.$refs.datepicker[0].FnClear():this.search_value={};this.FnSearch()}},{key:"mounted",value:function(){var e=this,t=0;for(var i in this.search_option)this.search_option[i].default_value&&(this.$set(this.search_value,i,this.search_option[i].default_value),t++);(t>0||"physical"===this.type)&&setTimeout((function(){e.FnSearch()}),500)}}]),i}(_["e"]);Object(l["a"])([Object(_["c"])({default:{}})],g.prototype,"search_option",void 0),Object(l["a"])([Object(_["c"])({default:""})],g.prototype,"create_btn",void 0),Object(l["a"])([Object(_["c"])({default:!0})],g.prototype,"disabled",void 0),Object(l["a"])([Object(_["c"])({default:!1})],g.prototype,"type",void 0),Object(l["a"])([Object(_["b"])("fn-search")],g.prototype,"FnSearch",null),Object(l["a"])([Object(_["f"])("search_option",{immediate:!0,deep:!0})],g.prototype,"watch_search_option",null),Object(l["a"])([Object(_["b"])("fn-filter")],g.prototype,"FnRemoteFilter",null),Object(l["a"])([Object(_["b"])("fn-operate")],g.prototype,"FnOperate",null),Object(l["a"])([Object(_["b"])("fn-create")],g.prototype,"FnShowCreate",null),Object(l["a"])([Object(_["f"])("search_value",{immediate:!0,deep:!0})],g.prototype,"watch_search_value",null),g=Object(l["a"])([Object(_["a"])({components:{DatePicker:v}})],g);var y=g,k=y,O=(i("681d"),i("e198c"),Object(m["a"])(k,s,a,!1,null,"37d74386",null));t["a"]=O.exports},cb4f:function(e,t,i){},d772:function(e,t,i){"use strict";var s=i("81a9"),a=i("bff7");t["a"]={get_operate_record_list:function(e){return Object(s["a"])(Object(a["a"])("GET","/ecs/history_record/",e))},get_detail:function(e){return Object(s["a"])(Object(a["a"])("GET","/ecs/get_ecs_detail/",e))}}},d8a7:function(e,t,i){"use strict";i("fceb")},e198c:function(e,t,i){"use strict";i("979f")},e527:function(e,t,i){"use strict";var s=i("81a9"),a=i("bff7"),n=i("4328"),o=i.n(n);t["a"]={get_instance_list:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/ecs_list/",e))},operate_instance:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/operate/",e))},delete_instance:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/delete/",e))},recover_instance:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/recover/",e))},destroy_instance:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/destroy/",e))},get_status_list:function(){return Object(s["a"])(Object(a["a"])("GET","/ecs/ecs_status_list/"))},get_family_data:function(){return Object(s["a"])(Object(a["a"])("GET","/ecs/get_family_data/"))},reset_password:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/ecs_reset_password/",e))},update_spec:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/ecs_change_configure/",e))},update_system:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/ecs_change_system/",e))},get_usage_ip:function(e){return Object(s["a"])(Object(a["a"])("GET","/ecs/get_deleted_ecs_ip/",e))},get_vnc_url:function(e){return Object(s["a"])(Object(a["a"])("GET","/ecs/vnc_info/",e))},start_charge:function(e){return Object(s["a"])(Object(a["a"])("POST","/resource/start_charge/",e))},change_config_price:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/change_config_price/",e))},change_system_price:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/change_system_price/",e))},each_resource_price:function(e){return Object(s["a"])(Object(a["a"])("POST","/ecs/each_resource_price/",e))},export_list:function(e){return Object(s["a"])({method:"GET",url:"/ecs_business/v1/ecs/ecs_list_download/",params:e,paramsSerializer:function(e){return o.a.stringify(e)},responseType:"blob"})},get_list_field:function(){return Object(s["a"])(Object(a["a"])("POST","/ecs/get_ecs_list_field/"))}}},ec7a:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,title:"自定义列表项","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[i("div",{staticClass:"m-bottom10"},[e._v("清除缓存或者更换浏览器，自定义列表失效"),i("span",{staticClass:"warning_message m-left10"},[e._v("(最少选择5项，最多选择25项)")])]),i("div",{staticClass:"item"},[e._l(e.all_item,(function(t){return[i("div",{staticClass:"label"},[e._v(e._s(t.name))]),i("div",{staticClass:"checkbox-box"},[i("el-checkbox-group",{model:{value:e.select_item,callback:function(t){e.select_item=t},expression:"select_item"}},e._l(t.filed,(function(e){return i("el-checkbox",{key:e.show_name,attrs:{label:e.show_name,disabled:"主机名"===e.show_name||"云服务器ID"===e.show_name}})})),1)],1)]}))],2),i("span",[e._v("已选择："),i("span",{staticClass:"num_message"},[e._v(e._s(e.select_item.length))])]),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.FnConfirm}},[e._v("确 定")]),i("el-button",{on:{click:e.FnClose}},[e._v("取 消")])],1)])},a=[],n=i("2909"),o=i("d4ec"),r=i("bee2"),c=i("262e"),l=i("2caf"),_=i("9ab4"),u=i("1b40"),p=function(e){Object(c["a"])(i,e);var t=Object(l["a"])(i);function i(){var e;return Object(o["a"])(this,i),e=t.apply(this,arguments),e.select_item=[],e}return Object(r["a"])(i,[{key:"created",value:function(){"ecs"===this.type?this.FnHandleSelectItem(this.$store.state.ecs_custom_item):"physical"===this.type&&this.FnHandleSelectItem(this.$store.state.custom_host)}},{key:"FnHandleSelectItem",value:function(e){if(e.length>0)this.select_item=Object(n["a"])(e);else for(var t=0;t<this.all_column_item.length;t++){if(!(this.select_item.length<25))break;this.all_column_item[t].hidden||this.select_item.push(this.all_column_item[t].label)}this.FnEmit()}},{key:"FnConfirm",value:function(){this.select_item.length<5||this.select_item.length>25?this.$message.warning("自定义列表项最少为5项，最多为25项"):("ecs"===this.type?this.$store.commit("SET_ECS_CUSTOM_ITEM",this.select_item):"physical"===this.type&&this.$store.commit("SET_CUSTOM_HOST",this.select_item),this.FnEmit(),this.FnClose())}},{key:"FnClose",value:function(){this.$emit("update:visible",!1)}},{key:"FnEmit",value:function(){return this.select_item}}]),i}(u["e"]);Object(_["a"])([Object(u["c"])({default:!1})],p.prototype,"visible",void 0),Object(_["a"])([Object(u["c"])({default:"physical"})],p.prototype,"type",void 0),Object(_["a"])([Object(u["c"])({default:function(){return[]}})],p.prototype,"all_column_item",void 0),Object(_["a"])([Object(u["c"])({default:function(){return[]}})],p.prototype,"all_item",void 0),Object(_["a"])([Object(u["b"])("fn-custom")],p.prototype,"FnEmit",null),p=Object(_["a"])([u["a"]],p);var d=p,h=d,f=(i("f73f"),i("2877")),m=Object(f["a"])(h,s,a,!1,null,"173f2810",null);t["a"]=m.exports},f73f:function(e,t,i){"use strict";i("8045")},fceb:function(e,t,i){}}]);
//# sourceMappingURL=chunk-1e0f7944.d51fd574.js.map