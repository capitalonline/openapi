{"version":3,"sources":["webpack://AppOp/./src/views/cloud/inventory.vue?b561","webpack://AppOp/./src/https/cloudInventory/list.ts","webpack://AppOp/./src/views/cloud/inventory.vue?f1f5","webpack://AppOp/./src/views/cloud/inventory.vue?a670","webpack://AppOp/./src/views/cloud/inventory.vue","webpack://AppOp/./src/https/az/list.ts","webpack://AppOp/./src/views/cloud/inventory.vue?c74c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","echartForm","on","podChange","model","value","callback","$$v","$set","expression","_l","item","index","key","az_name","az_id","timeChange","timeList","cloud_inventory_used","cloudForm","az_idChange","searchList","_v","exportList","cloudList","scopedSlots","_u","fn","scope","authList","includes","$event","editNum","row","pageInfo","page_index","page_size","total","handleSizeChange","handleCurrentChange","dialogVisible","saleNumChangeCancel","saleNumChange","proxy","saleForm","_s","cur_pod","totalNum","staticStyle","staticRenderFns","get_disk_inventory","req","service","getEcsOptions","disk_inventory_download","get_disk_inventory_monitor","set_available_sale_size","Inventory","cur_az_id","az_list","create_time","end_time","TotalSize","title","unit","xTime","yValue","legend","resize","Date","getCurentTime","get_az_list","$store","state","auth_info","$route","name","format","date","day","curDate","getTime","dateMap","y","getFullYear","M","getMonth","d","getDate","h","getHours","m","getMinutes","s","getSeconds","S","getMilliseconds","replace","a","_add0","length","time","len","toString","l","repeat","start","end","dateFormat","val","monitoringSearch","cur","size","params","Service","then","res","code","data","result","page_info","cur_page","count","window","location","href","x_time","total_size","sold_size","$message","success","message","region_name","httpService","map","status","push","Vue","Component","components","LineEchart","component","edit","sync","get_backend_types","get_status","del_status","record","get_net_type","get_scheduling_policy","set_scheduling_policy","enable_cluster_schedule","get_image_disk_list","set_image_disk_strategy","get_rollback_info","rollback_image_disk"],"mappings":"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","file":"js/chunk-75b59e97.d2106732.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-bottom20\"},[_c('div',{staticClass:\"action-box\"},[_c('el-form',{attrs:{\"model\":_vm.echartForm,\"inline\":true,\"label-width\":\"100px\",\"label-position\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"节点:\"}},[_c('el-select',{on:{\"change\":_vm.podChange},model:{value:(_vm.echartForm.az_id),callback:function ($$v) {_vm.$set(_vm.echartForm, \"az_id\", $$v)},expression:\"echartForm.az_id\"}},_vm._l((_vm.az_list),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.az_name,\"value\":item.az_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"时间\"}},[_c('el-date-picker',{staticClass:\"date-picker\",attrs:{\"type\":\"datetimerange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},on:{\"change\":_vm.timeChange},model:{value:(_vm.timeList),callback:function ($$v) {_vm.timeList=$$v},expression:\"timeList\"}})],1)],1)],1),_c('div',{staticClass:\"m-bottom20\"},[_c('line-echart',{staticClass:\"item\",attrs:{\"chart_id\":\"cloud_inventory\",\"data\":_vm.cloud_inventory_used}})],1),_c('div',{staticClass:\"action-box\"},[_c('el-form',{attrs:{\"model\":_vm.cloudForm,\"inline\":true,\"label-width\":\"100px\",\"label-position\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"节点:\"}},[_c('el-select',{on:{\"change\":_vm.az_idChange},model:{value:(_vm.cloudForm.az_id),callback:function ($$v) {_vm.$set(_vm.cloudForm, \"az_id\", $$v)},expression:\"cloudForm.az_id\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"\"}}),_vm._l((_vm.az_list),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.az_name,\"value\":item.az_id}})})],2)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.searchList}},[_vm._v(\"刷新\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.exportList}},[_vm._v(\"导出\")])],1)],1)],1),_c('el-table',{attrs:{\"data\":_vm.cloudList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"az_name\",\"label\":\"节点\"}}),_c('el-table-column',{attrs:{\"prop\":\"total_size\",\"label\":\"总体可售容量(TB)\"}}),_c('el-table-column',{attrs:{\"prop\":\"sold_size\",\"label\":\"已售容量(TB)\"}}),_c('el-table-column',{attrs:{\"prop\":\"available_size\",\"label\":\"剩余可售容量(TB)\"}}),_c('el-table-column',{attrs:{\"prop\":\"sale_rate\",\"label\":\"售出百分比(%)\"}}),_c('el-table-column',{attrs:{\"prop\":\"update_time\",\"label\":\"更新时间\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"disabled\":!_vm.authList.includes('available_sale_size')},on:{\"click\":function($event){return _vm.editNum(scope.row)}}},[_vm._v(\"编辑\")])]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.pageInfo.page_index,\"page-sizes\":[20, 50, 100],\"page-size\":_vm.pageInfo.page_size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pageInfo.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":\"编辑云盘可售总量\",\"visible\":_vm.dialogVisible,\"width:\":\"450px\",\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('el-button',{on:{\"click\":_vm.saleNumChangeCancel}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saleNumChange}},[_vm._v(\"确定\")])]},proxy:true}])},[_c('el-form',{attrs:{\"data\":_vm.saleForm}},[_c('el-form-item',[_vm._v(\" 节点：\"+_vm._s(_vm.cur_pod)+\" \")]),_c('el-form-item',[_vm._v(\" 当前总容量：\"+_vm._s(_vm.totalNum)+\"TB \")]),_c('el-form-item',{attrs:{\"label\":'调整后总容量：'}},[_c('el-input-number',{staticStyle:{\"width\":\"282px\"},attrs:{\"controls\":false,\"min\":0,\"precision\":2},model:{value:(_vm.saleForm.TotalSize),callback:function ($$v) {_vm.$set(_vm.saleForm, \"TotalSize\", $$v)},expression:\"saleForm.TotalSize\"}}),_vm._v(\"TB \")],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 云盘库存\nimport service from \"../http\"\nimport { getEcsOptions } from '../common';\n\nexport default{\n  // 云盘库存列表查询\n  get_disk_inventory(req) {\n    return service(getEcsOptions('GET','/stock/disk_inventory/',req))\n  },\n  // 云盘库存列表导出\n  disk_inventory_download(req) {\n    return service(getEcsOptions('GET','/stock/disk_inventory_download/',req))\n  }, \n  // 云盘库存监控查询\n  get_disk_inventory_monitor(req) {\n    return service(getEcsOptions('GET','/stock/disk_inventory_monitor/',req))\n  },\n  // 云盘可售容量配额\n  set_available_sale_size(req){\n    return service(getEcsOptions('POST','/ebs/available_sale_size/',req))\n},\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport LineEchart from '@/components/chart/list.vue';\nimport Service from '../../https/cloudInventory/list';\nimport httpService from '../../https/az/list';\n@Component({\n  components: {\n    LineEchart\n  }\n})\nexport default class Inventory extends Vue {\n  private dialogVisible = false\n  private cur_pod = ''\n  private cur_az_id = ''\n  private totalNum = null\n  private az_list = []\n  private authList:any=[]\n  private echartForm: any = {\n    az_id: '',\n    create_time: '',\n    end_time: ''\n  }\n  private cloudForm: any = {\n    az_id: ''\n  }\n  private saleForm: any = {\n    TotalSize: null\n  }\n  private pageInfo:any={\n      page_index:1,\n      page_size:20,\n      total:0,\n  }\n  private cloud_inventory_used = {\n    title: '云盘库存',\n    unit: '',\n    xTime: [],\n    yValue: [],\n    legend: [],\n    resize: 0\n  }\n  private cloudList: any = []\n  private timeList: any = [new Date(), new Date()]\n\n  async created() {\n    await this.getCurentTime()\n    await this.get_az_list()\n    this.searchList()\n    this.authList = this.$store.state.auth_info[this.$route.name];\n  }\n  private dateFormat(format, date, day) {\n    if (!format) return '';\n    let curDate = new Date(date.getTime() - 24 * 60 * 60 * 1000 * day);\n    let dateMap = {\n        y: curDate.getFullYear(),\n        M: curDate.getMonth() + 1,\n        d: curDate.getDate(),\n        h: curDate.getHours(),\n        m: curDate.getMinutes(),\n        s: curDate.getSeconds(),\n        S: curDate.getMilliseconds()\n    };\n    return format.replace(/(y+)|(M+)|(d+)|(h+)|(m+)|(s+)|(S+)/g, (a) => this._add0(dateMap[a[0]], a.length))\n  }\n  private _add0(time, len) {\n    time = time.toString();\n    let l = time.length;\n    return l < len ? '0'.repeat(len - l) + time : time;\n  }\n  private getCurentTime() {\n    let start = new Date()\n    let end = new Date()\n\n    this.timeList = [this.dateFormat(\"yyyy-MM-dd hh:mm:ss\", start, 7), this.dateFormat(\"yyyy-MM-dd hh:mm:ss\", end, 0)]\n    this.echartForm.create_time = this.dateFormat(\"yyyy-MM-dd hh:mm:ss\", start, 7)\n    this.echartForm.end_time = this.dateFormat(\"yyyy-MM-dd hh:mm:ss\", end, 0)\n  }\n  private timeChange(val) {\n    this.echartForm.create_time = val[0]\n    this.echartForm.end_time = val[1]\n    this.monitoringSearch()\n  }\n  private handleCurrentChange(cur){\n      this.pageInfo.page_index = cur;\n      this.searchList()\n  }\n  private handleSizeChange(size){\n      this.pageInfo.page_size = size;\n      this.searchList()\n  }\n  private az_idChange(val) {\n    this.searchList()\n  }\n  private searchList() {\n    let params = {\n      az_id: this.cloudForm.az_id,\n      page_index:this.pageInfo.page_index,\n      page_size:this.pageInfo.page_size,\n    }\n    Service.get_disk_inventory(params).then(res => {\n      if(res.code === 'Success') {\n        this.cloudList = res.data.result\n        this.pageInfo.page_index = res.data.page_info.cur_page\n        this.pageInfo.total = res.data.page_info.count\n      }\n    })\n  }\n  private exportList() {\n    window.location.href = `/ecs_business/v1/stock/disk_inventory_download/?az_id=${this.cloudForm.az_id}`\n  }\n  private podChange(val) {\n    this.monitoringSearch()\n  }\n  private monitoringSearch() {\n    let params = {\n      ...this.echartForm\n    }\n    Service.get_disk_inventory_monitor(params).then(res => {\n      if(res.code === 'Success') {\n        this.cloud_inventory_used.xTime = res.data.x_time\n        this.cloud_inventory_used.yValue = [res.data.total_size,res.data.sold_size]\n        this.cloud_inventory_used.legend = ['总体可售容量', '已售容量']\n        this.cloud_inventory_used.unit = 'TB'\n        this.cloud_inventory_used.resize++\n      } else {\n        this.cloud_inventory_used = {\n          title: '云盘库存',\n          unit: '',\n          xTime: [],\n          yValue: [],\n          legend: [],\n          resize: 0\n        }\n      }\n      \n    })\n  }\n  private editNum(row) {\n    this.cur_pod = row.az_name\n    this.cur_az_id = row.az_id\n    this.totalNum = row.total_size\n    this.dialogVisible = true\n  }\n  private saleNumChange() {\n    let params = {\n      az_id: this.cur_az_id,\n      total_size: this.saleForm.TotalSize\n    }\n    Service.set_available_sale_size(params).then(res => {\n      if(res.code === 'Success') {\n        this.$message.success(res.message)\n        this.saleNumChangeCancel()\n        this.searchList()\n      }\n    })\n  }\n  private saleNumChangeCancel() {\n    this.cur_pod = ''\n    this.totalNum = null\n    this.saleForm.TotalSize = null\n    this.dialogVisible = false\n  }\n  private get_az_list() {\n    let params = {\n      region_name: '',\n      az_name: '',\n      page_index: 1,\n      page_size: 200\n    }\n    httpService.get_az_list(params).then(res => {\n      if(res.code === 'Success') {\n        if(res.data.az_list.length > 0) {\n          res.data.az_list.map(item => {\n            if(item.status !== 'global_close') {\n              this.az_list.push({\n                az_id: item.az_id,\n                az_name: item.az_name\n              })\n            }\n          })\n        }\n        this.echartForm.az_id = this.az_list[0].az_id\n        this.monitoringSearch()\n      }\n    })\n  }\n  \n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inventory.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inventory.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./inventory.vue?vue&type=template&id=908b7436&scoped=true&\"\nimport script from \"./inventory.vue?vue&type=script&lang=ts&\"\nexport * from \"./inventory.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./inventory.vue?vue&type=style&index=0&id=908b7436&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"908b7436\",\n  null\n  \n)\n\nexport default component.exports","// 可用区管理\nimport service from \"../http\"\nimport { getEcsOptions }from '../common'\n\nexport default{\n    //获取可用区列表\n    get_az_list(req){\n        return service(getEcsOptions('GET','/ecs/manage_az_list/',req))\n    },\n    //编辑可用区\n    edit(req){\n        return service(getEcsOptions('POST','/ecs/az_edit/',req))\n    },\n    //同步可用区信息\n    sync(){\n        return service(getEcsOptions('GET','/ecs/sync_az_info/'))\n    },\n    //获取可用区存储类型\n    get_backend_types(){\n        return service(getEcsOptions('GET','/ecs/get_backend_types/'))\n    },\n    //获取可用区状态\n    get_status(){\n        return service(getEcsOptions('GET','/ecs/get_az_status_list/'))\n    },\n    //删除可用区\n    del_status(req){\n        return service(getEcsOptions('POST','/ecs/delete_az/',req))\n    },\n    //获取可用区操作记录\n    record(req){\n        return service(getEcsOptions('GET','/ecs/get_az_history/',req))\n    },\n    //获取可用区网络类型\n    get_net_type(){\n        return service(getEcsOptions('GET','/ecs/get_az_net_types/'))\n    },\n    //获取可用区资源调度参数\n    get_scheduling_policy(req){\n        return service(getEcsOptions('GET','/ecs/get_scheduling_policy/',req))\n    },\n    //获取可用区资源调度参数\n    set_scheduling_policy(req){\n        return service(getEcsOptions('POST','/ecs/set_scheduling_policy/',req))\n    },\n    enable_cluster_schedule(req){\n        return service(getEcsOptions('POST','/ecs/enable_cluster_schedule/',req))\n    },\n    //获取镜像卷列表\n    get_image_disk_list(req){\n        return service(getEcsOptions('POST','/img/get_image_disk_list/',req))\n    },\n    //设置镜像卷调度策略\n    set_image_disk_strategy(req){\n        return service(getEcsOptions('POST','/img/set_image_disk_strategy/',req))\n    },\n    //获取回滚时快照信息\n    get_rollback_info(req){\n        return service(getEcsOptions('POST','/img/get_rollback_snapshot_dict/',req))\n    },\n    //回滚镜像卷\n    rollback_image_disk(req){\n        return service(getEcsOptions('POST','/img/rollback_image_disk/',req))\n    }\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inventory.vue?vue&type=style&index=0&id=908b7436&lang=scss&scoped=true&\""],"sourceRoot":""}