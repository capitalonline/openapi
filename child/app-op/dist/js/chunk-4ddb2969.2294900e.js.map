{"version":3,"sources":["webpack://AppOp/./src/views/nas/nas.vue?2ec5","webpack://AppOp/./src/views/nas/nas.vue?272c","webpack://AppOp/./src/https/nas/list.ts","webpack://AppOp/./src/views/nas/edit.vue?a5af","webpack://AppOp/./src/views/nas/edit.vue?4b8b","webpack://AppOp/./src/views/nas/edit.vue?490e","webpack://AppOp/./src/views/nas/edit.vue","webpack://AppOp/./src/views/nas/nas.vue?af7d","webpack://AppOp/./src/views/nas/nas.vue?4c3e","webpack://AppOp/./src/views/nas/nas.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","echartForm","on","podChange","model","value","callback","$$v","$set","expression","_l","item","index","key","name","az_id","timeChange","timeList","nas_chart","tableForm","az_idChange","FnGetList","_v","list","scopedSlots","_u","fn","scope","operate_auth","includes","$event","FnUpdate","row","pageInfo","page_index","page_size","total","handleSizeChange","handleCurrentChange","visible","data_info","closeUpdate","staticRenderFns","post_nas_line","req","service","getEcsOptions","get_nas_inventory","post_edit_nas","post_az_nas","back","ref","data","_s","az_name","staticStyle","slot","FnConfirm","Edit","newTotal","Service","res","code","$message","success","message","newVal","Vue","__decorate","Prop","Boolean","default","Emit","Watch","Component","component","NasInventory","az_list","Date","create_time","end_time","title","unit","xTime","yValue","legend","resize","n","getCurrentTime","get_az_info","$store","state","auth_info","$route","val","FnPostLine","cur","size","undefined","operation_log_list","page_info","count","create_time_start","create_time_end","map","used","format","date","day","curDate","getTime","dateMap","y","getFullYear","M","getMonth","d","getDate","h","getHours","m","getMinutes","s","getSeconds","S","getMilliseconds","replace","a","_add0","length","time","len","toString","l","repeat","start","end","dateFormat","components","LineEchart"],"mappings":"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","file":"js/chunk-4ddb2969.2294900e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./nas.vue?vue&type=style&index=0&id=2f7fc4c1&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-bottom20\"},[_c('div',{staticClass:\"action-box\"},[_c('el-form',{attrs:{\"model\":_vm.echartForm,\"inline\":true,\"label-width\":\"100px\",\"label-position\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"节点:\"}},[_c('el-select',{on:{\"change\":_vm.podChange},model:{value:(_vm.echartForm.az_id),callback:function ($$v) {_vm.$set(_vm.echartForm, \"az_id\", $$v)},expression:\"echartForm.az_id\"}},_vm._l((_vm.az_list),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.name,\"value\":item.az_id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"时间\"}},[_c('el-date-picker',{staticClass:\"date-picker\",attrs:{\"type\":\"datetimerange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},on:{\"change\":_vm.timeChange},model:{value:(_vm.timeList),callback:function ($$v) {_vm.timeList=$$v},expression:\"timeList\"}})],1)],1)],1),_c('div',{staticClass:\"m-bottom20\"},[_c('line-echart',{staticClass:\"item\",attrs:{\"chart_id\":\"nas_chart\",\"data\":_vm.nas_chart}})],1),_c('div',{staticClass:\"action-box\"},[_c('el-form',{attrs:{\"model\":_vm.tableForm,\"inline\":true,\"label-width\":\"100px\",\"label-position\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"节点:\"}},[_c('el-select',{on:{\"change\":_vm.az_idChange},model:{value:(_vm.tableForm.az_id),callback:function ($$v) {_vm.$set(_vm.tableForm, \"az_id\", $$v)},expression:\"tableForm.az_id\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"\"}}),_vm._l((_vm.az_list),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.name,\"value\":item.az_id}})})],2)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.FnGetList}},[_vm._v(\"刷新\")])],1)],1)],1),_c('el-table',{attrs:{\"data\":_vm.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"节点\"}}),_c('el-table-column',{attrs:{\"prop\":\"total\",\"label\":\"总体可售容量(TB)\"}}),_c('el-table-column',{attrs:{\"prop\":\"used\",\"label\":\"已售容量(TB)\"}}),_c('el-table-column',{attrs:{\"prop\":\"surplus\",\"label\":\"剩余可售容量(TB)\"}}),_c('el-table-column',{attrs:{\"prop\":\"utilization_rate\",\"label\":\"售出百分比(%)\"}}),_c('el-table-column',{attrs:{\"prop\":\"create_time\",\"label\":\"更新时间\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"disabled\":!_vm.operate_auth.includes('update')},on:{\"click\":function($event){return _vm.FnUpdate(scope.row)}}},[_vm._v(\"编辑\")])]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.pageInfo.page_index,\"page-sizes\":[20, 50, 100],\"page-size\":_vm.pageInfo.page_size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pageInfo.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_c('edit',{attrs:{\"visible\":_vm.visible,\"data_info\":_vm.data_info},on:{\"close\":_vm.closeUpdate}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import service from \"../http\"\r\nimport { getEcsOptions } from '../common';\r\n\r\nexport default{\r\n    //NAS库存折线图\r\n    post_nas_line(req){\r\n        return service(getEcsOptions('POST','/stock/stock_line/',req))\r\n    },\r\n    //获取NAS库存列表\r\n    get_nas_inventory(req){\r\n        return service(getEcsOptions('POST','/stock/stock_table/',req))\r\n    },\r\n    //编辑NAS总容量\r\n    post_edit_nas(req){\r\n        return service(getEcsOptions('POST','/stock/edit_stock/',req))\r\n    },\r\n    //获取节点\r\n    post_az_nas(){\r\n        return service(getEcsOptions('POST','/stock/az_info/'))\r\n    },\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"visible\":_vm.visible,\"title\":\"编辑NAS可售总量\"},on:{\"update:visible\":function($event){_vm.visible=$event},\"close\":_vm.back}},[_c('el-form',{ref:\"resetForm\",attrs:{\"model\":_vm.data,\"label-width\":\"120px\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"节点：\"}},[_vm._v(_vm._s(_vm.data.az_name))]),_c('el-form-item',{attrs:{\"label\":\"当前总容量：\"}},[_vm._v(\" \"+_vm._s(_vm.data.total)+\" TB \")]),_c('el-form-item',{attrs:{\"label\":\"调整后总容量：\"}},[_c('el-input-number',{staticStyle:{\"width\":\"282px\"},attrs:{\"controls\":false,\"min\":0,\"precision\":2},model:{value:(_vm.data.newTotal),callback:function ($$v) {_vm.$set(_vm.data, \"newTotal\", $$v)},expression:\"data.newTotal\"}}),_vm._v(\" TB \")],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.back}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.FnConfirm}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {Component, Emit, Prop, Vue, Watch} from \"vue-property-decorator\";\r\nimport Service from \"@/https/nas/list\";\r\n@Component({})\r\nexport default class Edit extends Vue{\r\n  @Prop(Boolean) visible!:Boolean;\r\n  @Prop({default:()=>{}}) private data_info!:any;\r\n\r\n  private data = {\r\n    az_name: '',\r\n    az_id: '',\r\n    total: '',\r\n    newTotal:''\r\n  }\r\n  private async FnConfirm(){\r\n    let req = {\r\n      az_id: this.data.az_id,\r\n      total: this.data.newTotal\r\n    }\r\n    const res:any = await Service.post_edit_nas(req)\r\n    if(res.code === 'Success'){\r\n      this.$message.success(res.message)\r\n      this.back()\r\n    }\r\n  }\r\n  @Emit('close')\r\n  private back(){\r\n  }\r\n  @Watch('visible')\r\n  private FnGetRow(newVal) {\r\n    if (!newVal) {\r\n      this.data.newTotal = ''\r\n    }\r\n    this.data.az_name = this.data_info.name\r\n    this.data.total = this.data_info.total\r\n    this.data.az_id = this.data_info.az_id\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=0d8b42f2&scoped=true&\"\nimport script from \"./edit.vue?vue&type=script&lang=ts&\"\nexport * from \"./edit.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d8b42f2\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {Component, Vue, Watch} from \"vue-property-decorator\";\r\nimport Service from \"@/https/nas/list\";\r\nimport Edit from \"@/views/nas/edit.vue\";\r\nimport LineEchart from '../../components/chart/list.vue';\r\n@Component({\r\n  components:{\r\n    Edit,\r\n    LineEchart\r\n  }\r\n})\r\nexport default class NasInventory extends Vue{\r\n  private list:Array<string> = []\r\n  private operate_auth = []\r\n  private visible:boolean = false\r\n  private data_info ={}\r\n  //private az_list = [{az_id:'09a38804-c1ee-11ec-bd22-4641dfd57315',az_name:'宿迁B'},{az_id:'e5aa47be-da46-11ec-bad2-defff767b3b5',az_name: '呼和浩特B'}]\r\n  private az_list = []\r\n  private timeList: any = [new Date(), new Date()]\r\n  private echartForm: any = {\r\n    az_id: '',\r\n    create_time: '',\r\n    end_time: ''\r\n  }\r\n  private tableForm: any = {\r\n    az_id: ''\r\n  }\r\n  private pageInfo:any={\r\n    page_index:1,\r\n    page_size:20,\r\n    total:0,\r\n  }\r\n  private nas_chart = {\r\n    title: 'NAS库存',\r\n    unit: '',\r\n    xTime: [],\r\n    yValue: [],\r\n    legend: [],\r\n    resize: 0\r\n  }\r\n  @Watch('visible')\r\n  private watch_vis(n){\r\n    if(!n){\r\n      this.FnGetList()\r\n    }\r\n  }\r\n\r\n  async created() {\r\n    await this.getCurrentTime()\r\n    await this.get_az_info()\r\n    await this.FnGetList()\r\n    this.operate_auth = this.$store.state.auth_info[this.$route.name];\r\n  }\r\n  private timeChange(val) {\r\n    this.echartForm.create_time = val[0]\r\n    this.echartForm.end_time = val[1]\r\n    if(this.echartForm.az_id){\r\n      this.FnPostLine()\r\n    }\r\n  }\r\n  private FnUpdate(row){\r\n    this.visible = true;\r\n    this.data_info = row\r\n  }\r\n  private closeUpdate() {\r\n    this.visible = false;\r\n  }\r\n  private podChange(val) {\r\n    this.FnPostLine()\r\n  }\r\n  private az_idChange(val) {\r\n    this.FnGetList()\r\n  }\r\n  private handleCurrentChange(cur){\r\n    this.pageInfo.page_index = cur;\r\n    this.FnGetList()\r\n  }\r\n  private handleSizeChange(size){\r\n    this.pageInfo.page_size = size;\r\n    this.FnGetList()\r\n  }\r\n  private async FnGetList(){\r\n    let res:any = await Service.get_nas_inventory({\r\n      az_id:this.tableForm.az_id ? this.tableForm.az_id :undefined,\r\n      page_index:this.pageInfo.page_index,\r\n      page_size:this.pageInfo.page_size,\r\n    })\r\n    if(res.code === 'Success'){\r\n      this.list = res.data.operation_log_list\r\n      this.pageInfo.total = res.data.page_info.count\r\n    }\r\n  }\r\n  private async FnPostLine(){\r\n    let res:any = await Service.post_nas_line({\r\n      az_id:this.echartForm.az_id,\r\n      create_time_start:this.echartForm.create_time,\r\n      create_time_end:this.echartForm.end_time\r\n    })\r\n    if(res.code === 'Success'){\r\n      this.nas_chart.xTime = res.data.map(item => item.create_time);\r\n      this.nas_chart.yValue = [\r\n        res.data.map(item => item.total),\r\n        res.data.map(item => item.used)\r\n      ]\r\n      this.nas_chart.legend = ['总体空间容量', '已售NAS容量']\r\n      this.nas_chart.unit = 'TB'\r\n      this.nas_chart.resize++\r\n    } else {\r\n      this.nas_chart = {\r\n        title: '云盘库存',\r\n        unit: '',\r\n        xTime: [],\r\n        yValue: [],\r\n        legend: [],\r\n        resize: 0\r\n      }\r\n    }\r\n\r\n  }\r\n  private async get_az_info(){\r\n    const res:any = await Service.post_az_nas()\r\n      if(res.code === 'Success') {\r\n        this.az_list = res.data\r\n    }\r\n  }\r\n  private dateFormat(format, date, day) {\r\n    if (!format) return '';\r\n    let curDate = new Date(date.getTime() - 24 * 60 * 60 * 1000 * day);\r\n    let dateMap = {\r\n      y: curDate.getFullYear(),\r\n      M: curDate.getMonth() + 1,\r\n      d: curDate.getDate(),\r\n      h: curDate.getHours(),\r\n      m: curDate.getMinutes(),\r\n      s: curDate.getSeconds(),\r\n      S: curDate.getMilliseconds()\r\n    };\r\n    return format.replace(/(y+)|(M+)|(d+)|(h+)|(m+)|(s+)|(S+)/g, (a) => this._add0(dateMap[a[0]], a.length))\r\n  }\r\n  private _add0(time, len) {\r\n    time = time.toString();\r\n    let l = time.length;\r\n    return l < len ? '0'.repeat(len - l) + time : time;\r\n  }\r\n  private getCurrentTime() {\r\n    let start = new Date()\r\n    let end = new Date()\r\n\r\n    this.timeList = [this.dateFormat(\"yyyy-MM-dd hh:mm:ss\", start, 7), this.dateFormat(\"yyyy-MM-dd hh:mm:ss\", end, 0)]\r\n    this.echartForm.create_time = this.dateFormat(\"yyyy-MM-dd hh:mm:ss\", start, 7)\r\n    this.echartForm.end_time = this.dateFormat(\"yyyy-MM-dd hh:mm:ss\", end, 0)\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./nas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./nas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./nas.vue?vue&type=template&id=2f7fc4c1&scoped=true&\"\nimport script from \"./nas.vue?vue&type=script&lang=ts&\"\nexport * from \"./nas.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./nas.vue?vue&type=style&index=0&id=2f7fc4c1&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f7fc4c1\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}