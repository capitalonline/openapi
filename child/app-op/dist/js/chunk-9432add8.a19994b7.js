(window["webpackJsonp_AppOp"]=window["webpackJsonp_AppOp"]||[]).push([["chunk-9432add8"],{"0cb2":function(e,t,a){var r=a("e330"),o=a("7b0b"),n=Math.floor,s=r("".charAt),i=r("".replace),l=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,r,p,h){var d=a+e.length,_=r.length,f=u;return void 0!==p&&(p=o(p),f=c),i(h,f,(function(o,i){var c;switch(s(i,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,a);case"'":return l(t,d);case"<":c=p[l(i,1,-1)];break;default:var u=+i;if(0===u)return o;if(u>_){var h=n(u/10);return 0===h?o:h<=_?void 0===r[h-1]?s(i,1):r[h-1]+s(i,1):o}c=r[u-1]}return void 0===c?"":c}))}},"47c0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("action-block",{attrs:{search_option:e.searchDom},on:{"fn-search":e.search,"fn-filter":e.FnFilter}}),a("div",{staticClass:"text-right m-bottom10"},[a("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{type:"text"},on:{click:e.exportList}},[a("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1)],1),a("el-table",{attrs:{data:e.list,border:""},on:{"sort-change":e.handleSort}},[a("el-table-column",{attrs:{prop:"region_name",label:"所属地域"}}),a("el-table-column",{attrs:{prop:"az_name",label:"可用区名称"}}),a("el-table-column",{attrs:{prop:"host_product_name",label:"物理机产品名称"}}),a("el-table-column",{attrs:{prop:"cpu",label:"CPU逻辑总核数(核)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"ram",label:"内存总容量(GB)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"gpu",label:"GPU总数量(块)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"local_disk_storage",label:"本地盘总容量",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""+t.row.local_disk_storage+t.row.local_disk_storage_unit))])]}}])}),a("el-table-column",{attrs:{prop:"cpu_allocate",label:"已分配CPU逻辑核数(核)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"ram_allocate",label:"已分配内存量(GB)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"gpu_allocate",label:"已分配GPU总数量(块)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"local_disk_allocate",label:"已分配本地盘容量",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""+t.row.local_disk_allocate+t.row.local_disk_allocate_unit))])]}}])}),a("el-table-column",{attrs:{prop:"gpu_fault",label:"GPU故障数量(块)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"cpu_available",label:"剩余物理CPU逻辑核数(核)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"ram_available",label:"剩余内存量(GB)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"gpu_available",label:"剩余GPU数量(块)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"local_disk_available",label:"剩余本地盘容量",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""+t.row.local_disk_available+t.row.local_disk_available_unit))])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageInfo.page_index,"page-sizes":[20,50,100],"page-size":e.pageInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},o=[],n=a("ade3"),s=a("5530"),i=a("2909"),l=a("1da1"),c=a("d4ec"),u=a("bee2"),p=a("262e"),h=a("2caf"),d=(a("96cf"),a("4e82"),a("b0c0"),a("99af"),a("ac1f"),a("841c"),a("d81d"),a("a15b"),a("d3b7"),a("25f0"),a("fb6a"),a("9ab4")),_=a("1b40"),f=a("5124"),b=a("9074"),g=a("c811"),m=a("8ce4"),v=a("3673"),k=function(e){Object(p["a"])(a,e);var t=Object(h["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.list=[],e.sort=void 0,e.sortLable="",e.authList=[],e.pageInfo={page_index:1,page_size:20,total:0},e.searchDom={region_id:{placeholder:"请选择地域",list:[],default_value:"",close_clearable:!1},az_id:{placeholder:"请选择可用区",list:[]},host_product_name:{placeholder:"请选择物理机产品名称",list:[],multiple:!0,filter:!0}},e.search_info={},e}return Object(u["a"])(a,[{key:"created",value:function(){this.authList=this.$store.state.auth_info[this.$route.name],this.getRegion(),this.getHostProductName(),this.getInventoryList()}},{key:"getRegion",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.searchDom.region_id.list=[],e.next=3,b["a"].get_region_az_list({employee_no:this.$store.state.employee_no,user_name:this.$store.state.login_name});case 3:if(t=e.sent,"Success"===t.code){for(a in t.data)for(r in this.searchDom.region_id.list=[].concat(Object(i["a"])(this.searchDom.region_id.list),Object(i["a"])(Object(m["c"])(t.data[a].region_list,"region_name","region_id","label","type"))),t.data[a].region_list)this.searchDom.az_id.list=[].concat(Object(i["a"])(this.searchDom.az_id.list),Object(i["a"])(Object(m["c"])(t.data[a].region_list[r].az_list,"az_name","az_id","label","type")));"1"==this.$store.state.is_special_user&&(this.searchDom.region_id.close_clearable=!0,this.searchDom.region_id.default_value=this.searchDom.region_id.list[0].type,this.search_info=this.searchDom.region_id.list[0].type,this.search(this.search_info))}case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getHostProductName",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,r,o=this,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",a=!(n.length>1&&void 0!==n[1])||n[1],a||this.$store.commit("SET_LOADING",!1),e.next=5,f["a"].get_product_host_name({page_index:1,page_size:20,name:t});case 5:r=e.sent,"Success"===r.code&&(this.searchDom.host_product_name.list=[],r.data.host_product_list.map((function(e){o.searchDom.host_product_name.list.push({type:e.name,label:e.name})})),this.pageInfo.total=r.data.page_info.count);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnFilter",value:function(e){this.getHostProductName(e,!1)}},{key:"search",value:function(e){this.pageInfo.page_index=1,this.search_info=Object(s["a"])({},e),this.getInventoryList()}},{key:"getInventoryList",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].get_inventory_list((t={region_id:this.search_info.region_id,az_id:this.search_info.az_id,host_product_name:this.search_info.host_product_name?this.search_info.host_product_name.join(","):void 0},Object(n["a"])(t,this.sortLable?"sort_".concat(this.sortLable):"",this.sortLable?this.sort.toString():void 0),Object(n["a"])(t,"page_index",this.pageInfo.page_index),Object(n["a"])(t,"page_size",this.pageInfo.page_size),t));case 2:a=e.sent,"Success"===a.code&&(this.list=a.data.product_stock_list,this.pageInfo.total=a.data.page_info.count);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCurrentChange",value:function(e){this.pageInfo.page_index=e,this.getInventoryList()}},{key:"handleSizeChange",value:function(e){this.pageInfo.page_size=e,this.getInventoryList()}},{key:"handleSort",value:function(e){this.sortLable=e.prop,this.sort="descending"===e.order?"1":"ascending"===e.order?"0":void 0,this.getInventoryList()}},{key:"exportList",value:function(){var e="";for(var t in this.search_info)this.search_info[t]&&(e+="".concat(t,"=").concat(Array.isArray(this.search_info[t])?this.search_info[t].join(","):this.search_info[t],"&"));var a=""===e?"":"?".concat(e.slice(0,e.length-1));window.location.href="/ecs_business/v1/stock/host_stock_download/".concat(a)}}]),a}(_["e"]);k=Object(d["a"])([Object(_["a"])({components:{ActionBlock:g["a"],svgIcon:v["a"]}})],k);var y=k,x=y,w=(a("b2d8"),a("2877")),O=Object(w["a"])(x,r,o,!1,null,"ef7687f8",null);t["default"]=O.exports},"48a1":function(e,t,a){},5319:function(e,t,a){"use strict";var r=a("2ba4"),o=a("c65b"),n=a("e330"),s=a("d784"),i=a("d039"),l=a("825a"),c=a("1626"),u=a("5926"),p=a("50c4"),h=a("577e"),d=a("1d80"),_=a("8aa5"),f=a("dc4a"),b=a("0cb2"),g=a("14c3"),m=a("b622"),v=m("replace"),k=Math.max,y=Math.min,x=n([].concat),w=n([].push),O=n("".indexOf),j=n("".slice),z=function(e){return void 0===e?e:String(e)},I=function(){return"$0"==="a".replace(/./,"$0")}(),$=function(){return!!/./[v]&&""===/./[v]("a","$0")}(),L=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));s("replace",(function(e,t,a){var n=$?"$":"$0";return[function(e,a){var r=d(this),n=void 0==e?void 0:f(e,v);return n?o(n,e,r,a):o(t,h(r),e,a)},function(e,o){var s=l(this),i=h(e);if("string"==typeof o&&-1===O(o,n)&&-1===O(o,"$<")){var d=a(t,s,i,o);if(d.done)return d.value}var f=c(o);f||(o=h(o));var m=s.global;if(m){var v=s.unicode;s.lastIndex=0}var I=[];while(1){var $=g(s,i);if(null===$)break;if(w(I,$),!m)break;var L=h($[0]);""===L&&(s.lastIndex=_(i,p(s.lastIndex),v))}for(var D="",S=0,C=0;C<I.length;C++){$=I[C];for(var P=h($[0]),A=k(y(u($.index),i.length),0),G=[],R=1;R<$.length;R++)w(G,z($[R]));var U=$.groups;if(f){var B=x([P],G,A,i);void 0!==U&&w(B,U);var F=h(r(o,void 0,B))}else F=b(P,i,A,G,U,o);A>=S&&(D+=j(i,S,A)+F,S=A+P.length)}return D+j(i,S)}]}),!L||!I||$)},b2d8:function(e,t,a){"use strict";a("48a1")},d81d:function(e,t,a){"use strict";var r=a("23e7"),o=a("b727").map,n=a("1dde"),s=n("map");r({target:"Array",proto:!0,forced:!s},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);