(window["webpackJsonp_AppOp"]=window["webpackJsonp_AppOp"]||[]).push([["chunk-088d135e"],{"04d1":function(t,e,i){var s=i("342f"),a=s.match(/firefox\/(\d+)/i);t.exports=!!a&&+a[1]},"0ae5":function(t,e,i){"use strict";i("2325")},1148:function(t,e,i){"use strict";var s=i("da84"),a=i("5926"),n=i("577e"),r=i("1d80"),o=s.RangeError;t.exports=function(t){var e=n(r(this)),i="",s=a(t);if(s<0||s==1/0)throw o("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(i+=e);return i}},2325:function(t,e,i){},"29ab":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",{ref:"resetForm",staticClass:"pwd-form",attrs:{model:t.data,"label-position":"left","label-width":"120px",rules:t.rules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"镜像"}},[i("el-radio-group",{model:{value:t.default_os_template_type.os_template_type,callback:function(e){t.$set(t.default_os_template_type,"os_template_type",e)},expression:"default_os_template_type.os_template_type"}},t._l(t.os_list,(function(e,s){return i("el-radio-button",{key:s,attrs:{label:s}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),i("div",{staticClass:"inline-form"},[i("el-form-item",{staticClass:"m-right20",attrs:{prop:"default_os_type"}},[i("el-select",{model:{value:t.data.default_os_type,callback:function(e){t.$set(t.data,"default_os_type",e)},expression:"data.default_os_type"}},t._l(t.default_os_template_type.os_types,(function(t){return i("el-option",{key:t,attrs:{value:t,label:t}})})),1)],1),i("el-form-item",{attrs:{prop:"default_os_version"}},[i("el-select",{attrs:{"value-key":"os_id"},on:{change:t.FnEmit},model:{value:t.data.default_os_version,callback:function(e){t.$set(t.data,"default_os_version",e)},expression:"data.default_os_version"}},t._l(t.default_os_version_list,(function(t){return i("el-option",{key:t.os_id,attrs:{value:t,label:t.name}})})),1)],1)],1)],1)},a=[],n=i("1da1"),r=i("d4ec"),o=i("bee2"),l=i("262e"),u=i("2caf"),_=(i("96cf"),i("d9e2"),i("b64b"),i("4de4"),i("d3b7"),i("caad"),i("2532"),i("b0c0"),i("7db0"),i("9ab4")),d=i("1b40"),c=i("9074"),f=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(r["a"])(this,i),t=e.apply(this,arguments),t.os_list={},t.default_os_template_type={os_template_type:"",os_types:[],os_versions:{}},t.default_os_version_list=[],t.data={default_os_type:"",default_os_version:{os_id:"",os_type:"",username:"",disk_size:0}},t.FnCheckOs=function(t,e,i){e.os_id||i(new Error("请选择镜像")),i()},t.rules={default_os_type:[{required:!0,trigger:"change",message:" "}],default_os_version:[{required:!0,validator:t.FnCheckOs,trigger:"change"}]},t}return Object(o["a"])(i,[{key:"FnGetOsList",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.az_id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,c["a"].get_os_list({customer_id:this.customer_id,az_id:this.az_id});case 4:e=t.sent,"Success"==e.code&&(this.os_list=e.data,this.FnHandleInitData());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnHandleInitData",value:function(){this.default_os_template_type.os_template_type===Object.keys(this.os_list)[0]?this.FnChangeOsTemType(this.default_os_template_type.os_template_type):this.default_os_template_type.os_template_type=Object.keys(this.os_list)[0]}},{key:"FnHandleOsList",value:function(t){var e=this;return t&&0!==t.length?t.filter((function(t){return e.is_gpu?t.support_type.includes("gpu")&&t.support_gpu_driver==e.support_gpu_driver:t.support_type.includes("cpu")&&t.support_gpu_driver==e.support_gpu_driver})):[]}},{key:"FnEmit",value:function(){var t=this;return{os_id:this.data.default_os_version.os_id,os_type:this.data.default_os_version.os_type,username:this.data.default_os_version.username,disk_size:this.data.default_os_version.disk_size,os_label:this.default_os_version_list.find((function(e){return e.os_id===t.data.default_os_version.os_id})).name}}},{key:"FnSubmit",value:function(){var t=!1;return this.$refs["resetForm"].validate((function(e){t=e})),{flag:t,os_info:this.FnEmit()}}},{key:"FnResetForm",value:function(){this.FnHandleInitData()}},{key:"created",value:function(){this.FnGetOsList()}},{key:"FnChangeOsTemType",value:function(t){this.default_os_template_type.os_types=this.os_list[t].os_types,this.default_os_template_type.os_versions=this.os_list[t].os_versions,this.data.default_os_type!==this.default_os_template_type.os_types[0]?this.data.default_os_type=this.default_os_template_type.os_types[0]:this.FnChangeOsType(this.data.default_os_type)}},{key:"FnChangeOsType",value:function(t){this.default_os_version_list=this.FnHandleOsList(this.default_os_template_type.os_versions[t]),this.default_os_version_list.length>0?this.data.default_os_version=this.default_os_version_list[0]:this.data.default_os_version={os_id:"",os_type:"",username:"",disk_size:0},this.FnEmit()}},{key:"FnChangeAz",value:function(t,e){this.FnGetOsList()}},{key:"FnChangeCustomer",value:function(t,e){this.FnGetOsList()}},{key:"FnChangeGpuDriver",value:function(t){this.FnChangeOsType(this.data.default_os_type)}},{key:"FnChangeGpu",value:function(t){this.FnChangeOsType(this.data.default_os_type)}}]),i}(d["e"]);Object(_["a"])([Object(d["c"])({default:""})],f.prototype,"az_id",void 0),Object(_["a"])([Object(d["c"])({default:""})],f.prototype,"customer_id",void 0),Object(_["a"])([Object(d["c"])({default:0})],f.prototype,"is_gpu",void 0),Object(_["a"])([Object(d["c"])({default:""})],f.prototype,"support_gpu_driver",void 0),Object(_["a"])([Object(d["b"])("fn-os")],f.prototype,"FnEmit",null),Object(_["a"])([Object(d["f"])("default_os_template_type.os_template_type")],f.prototype,"FnChangeOsTemType",null),Object(_["a"])([Object(d["f"])("data.default_os_type")],f.prototype,"FnChangeOsType",null),Object(_["a"])([Object(d["f"])("az_id")],f.prototype,"FnChangeAz",null),Object(_["a"])([Object(d["f"])("customer_id")],f.prototype,"FnChangeCustomer",null),Object(_["a"])([Object(d["f"])("support_gpu_driver")],f.prototype,"FnChangeGpuDriver",null),Object(_["a"])([Object(d["f"])("is_gpu")],f.prototype,"FnChangeGpu",null),f=Object(_["a"])([d["a"]],f);var p=f,m=p,h=(i("bfdd"),i("2877")),y=Object(h["a"])(m,s,a,!1,null,"ca2236a4",null);e["a"]=y.exports},"2dc1":function(t,e,i){"use strict";i("a68a")},3874:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",{ref:"resetForm",staticClass:"spec-form",attrs:{model:t.data,"label-position":"left"}},[i("div",{staticClass:"inline-form"},[i("el-form-item",{staticClass:"m-right20"},[i("el-select",{attrs:{placeholder:"全部vCPU",clearable:""},model:{value:t.default_cpu_size,callback:function(e){t.default_cpu_size=e},expression:"default_cpu_size"}},t._l(t.cpu_ram_size_list,(function(e,s){return i("el-option",{key:s+"cpu",attrs:{value:String(s)}},[t._v(t._s(s)+" vCPU")])})),1)],1),i("el-form-item",[i("el-select",{attrs:{placeholder:"全部内存",clearable:""},model:{value:t.default_ram_size,callback:function(e){t.default_ram_size=e},expression:"default_ram_size"}},t._l(t.ram_size_list,(function(e,s){return i("el-option",{key:e+s+"ram",attrs:{value:String(e)}},[t._v(t._s(e)+" GiB")])})),1)],1)],1),i("el-form-item",{attrs:{prop:""}},[i("span",[t._v("分类： ")]),i("el-radio-group",{model:{value:t.data.category_id,callback:function(e){t.$set(t.data,"category_id",e)},expression:"data.category_id"}},t._l(t.category_list,(function(e){return i("el-radio-button",{key:e.category_id,attrs:{label:e.category_id}},[t._v(t._s(e.name))])})),1)],1),i("el-form-item",{staticClass:"table-form"},[i("div",{staticClass:"table-box"},[i("el-table",{attrs:{data:t.family_list,border:""}},[i("el-table-column",{attrs:{label:"选择",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-radio",{attrs:{label:e.row.id},on:{change:t.FnEmit},model:{value:t.data.id,callback:function(e){t.$set(t.data,"id",e)},expression:"data.id"}},[t._v(" ")])]}}])}),i("el-table-column",{attrs:{prop:"ecs_family_name",label:"规格族"}}),i("el-table-column",{attrs:{prop:"cpu",label:"vCPU"}}),i("el-table-column",{attrs:{prop:"ram",label:"内存"}}),t.is_gpu?i("el-table-column",{attrs:{prop:"gpu",label:"GPU"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.gpu)+"*"+t._s(e.row.gpu_show_type)+" ")]}}],null,!1,3740856225)}):t._e(),i("el-table-column",{attrs:{prop:"cpu_name",label:"处理器型号",width:"200"}}),i("el-table-column",{attrs:{label:"参考价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t.cpu_ram_gpu_price[e.row.spec_id]))])]}}])})],1)],1)])],1)},a=[],n=i("2909"),r=i("1da1"),o=i("d4ec"),l=i("bee2"),u=i("262e"),_=i("2caf"),d=(i("96cf"),i("d3b7"),i("6062"),i("3ca3"),i("ddb0"),i("99af"),i("4e82"),i("4de4"),i("7db0"),i("159b"),i("b680"),i("a9e3"),i("9ab4")),c=i("1b40"),f=i("9074"),p=i("8ce4"),m=function(t){Object(u["a"])(i,t);var e=Object(_["a"])(i);function i(){var t;return Object(o["a"])(this,i),t=e.apply(this,arguments),t.cpu_ram_size_list=[],t.all_ram_size_list=[],t.ram_size_list=[],t.default_cpu_size="",t.default_ram_size="",t.category_list=[],t.family_list=[],t.is_gpu=0,t.billing_info={},t.cpu_ram_gpu_price={},t.data={category_id:"",spec_id:"",id:""},t}return Object(l["a"])(i,[{key:"FnGetAllCpuRam",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].get_all_cpu_ram();case 2:if(e=t.sent,"Success"==e.code){for(s in this.cpu_ram_size_list=e.data,i=[],this.cpu_ram_size_list)i=Object(n["a"])(new Set([].concat(Object(n["a"])(i),Object(n["a"])(this.cpu_ram_size_list[s]))));this.all_ram_size_list=i.sort((function(t,e){return t-e})),this.ram_size_list=this.all_ram_size_list}case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnGetCategoryList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.az_id){t.next=2;break}return t.abrupt("return");case 2:return this.family_list=[],t.next=5,f["a"].get_category_list({az_id:this.az_id,customer_id:this.customer_id,billing_method:this.billing_method,cpu:String(this.default_cpu_size),ram:String(this.default_ram_size)});case 5:e=t.sent,"Success"==e.code&&(this.category_list="batch_update"===this.type?e.data.category_list.filter((function(t){return t.is_gpu==i.default_is_gpu})):e.data.category_list,this.data.category_id===this.category_list[0].category_id?this.FnChangeCate(this.data.category_id):this.data.category_id=this.category_list[0].category_id);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnGetFamilyList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.az_id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f["a"].ecs_family_info({az_id:this.az_id,customer_id:this.customer_id,billing_method:this.billing_method,category_id:this.data.category_id,cpu:String(this.default_cpu_size),ram:String(this.default_ram_size)});case 4:e=t.sent,"Success"==e.code&&(this.family_list=e.data.ecs_family_info,this.billing_info=Object(p["a"])(e.data.billing_info,!0),this.data.spec_id=this.family_list[0].spec_id,this.data.id=null===(i=this.family_list[0])||void 0===i?void 0:i.id,this.FnGetPrice(),this.FnEmit());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnGetDefaultFamily",value:function(t){return this.family_list.find((function(e){return e.id===t}))}},{key:"FnGetPrice",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={customer_id:this.customer_id,az_id:this.az_id,is_gpu:this.is_gpu,batch:1,billing_method:this.billing_method,ecs_info:{billing_info:this.billing_info,ecs_goods_info:this.family_list},number:1},t.next=3,f["a"].get_price(e);case 3:i=t.sent,"Success"===i.code&&i.data.ecs.forEach((function(t){s.$set(s.cpu_ram_gpu_price,t.spec_id,i.data.price_symbol+Number(t.price).toFixed(2)+"/"+i.data.price_unit)}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnEmit",value:function(){var t=this.FnGetDefaultFamily(this.data.id);return{ecs_goods_id:t.ecs_goods_id,ecs_goods_name:t.ecs_family_name,cpu:t.cpu,ram:t.ram,gpu:t.gpu,gpu_id:t.gpu_type_id,card_name:t.gpu_show_type,is_gpu:this.is_gpu,cpu_model:t.cpu_name,support_gpu_driver:t.support_gpu_driver,spec_family_id:t.spec_family_id,spec_id:t.spec_id,billing_info:this.billing_info}}},{key:"FnSubmit",value:function(){var t=!1;return this.$refs["resetForm"].validate((function(e){t=e})),{flag:t,spec_info:this.FnEmit()}}},{key:"created",value:function(){this.FnGetAllCpuRam()}},{key:"FnChangeCpuSize",value:function(t){this.default_ram_size="",this.ram_size_list=t?this.cpu_ram_size_list[Number(t)]:this.all_ram_size_list,this.FnGetCategoryList()}},{key:"FnChangeRamSize",value:function(t){this.FnGetCategoryList()}},{key:"FnChangeCate",value:function(t){t&&(this.FnGetFamilyList(),this.is_gpu=this.category_list.find((function(e){return e.category_id===t})).is_gpu?1:0)}},{key:"FnChangeAz",value:function(t,e){this.FnGetCategoryList()}},{key:"FnChangeCustomer",value:function(t,e){this.FnGetCategoryList()}}]),i}(c["e"]);Object(d["a"])([Object(c["c"])({default:""})],m.prototype,"az_id",void 0),Object(d["a"])([Object(c["c"])({default:""})],m.prototype,"customer_id",void 0),Object(d["a"])([Object(c["c"])({default:"0"})],m.prototype,"billing_method",void 0),Object(d["a"])([Object(c["c"])({default:""})],m.prototype,"type",void 0),Object(d["a"])([Object(c["c"])({default:0})],m.prototype,"default_is_gpu",void 0),Object(d["a"])([Object(c["b"])("fn-spec")],m.prototype,"FnEmit",null),Object(d["a"])([Object(c["f"])("default_cpu_size")],m.prototype,"FnChangeCpuSize",null),Object(d["a"])([Object(c["f"])("default_ram_size")],m.prototype,"FnChangeRamSize",null),Object(d["a"])([Object(c["f"])("data.category_id")],m.prototype,"FnChangeCate",null),Object(d["a"])([Object(c["f"])("az_id")],m.prototype,"FnChangeAz",null),Object(d["a"])([Object(c["f"])("customer_id",{immediate:!0})],m.prototype,"FnChangeCustomer",null),m=Object(d["a"])([c["a"]],m);var h=m,y=h,b=(i("2dc1"),i("2877")),v=Object(b["a"])(y,s,a,!1,null,"79c0dc98",null);e["a"]=v.exports},"3eb7":function(t,e,i){"use strict";i("4d91")},"4d91":function(t,e,i){},"4e82":function(t,e,i){"use strict";var s=i("23e7"),a=i("e330"),n=i("59ed"),r=i("7b0b"),o=i("07fa"),l=i("577e"),u=i("d039"),_=i("addb"),d=i("a640"),c=i("04d1"),f=i("d998"),p=i("2d00"),m=i("512ce"),h=[],y=a(h.sort),b=a(h.push),v=u((function(){h.sort(void 0)})),g=u((function(){h.sort(null)})),k=d("sort"),F=!u((function(){if(p)return p<70;if(!(c&&c>3)){if(f)return!0;if(m)return m<603;var t,e,i,s,a="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(s=0;s<47;s++)h.push({k:e+s,v:i})}for(h.sort((function(t,e){return e.v-t.v})),s=0;s<h.length;s++)e=h[s].k.charAt(0),a.charAt(a.length-1)!==e&&(a+=e);return"DGBEFHACIJK"!==a}})),O=v||!g||!k||!F,j=function(t){return function(e,i){return void 0===i?-1:void 0===e?1:void 0!==t?+t(e,i)||0:l(e)>l(i)?1:-1}};s({target:"Array",proto:!0,forced:O},{sort:function(t){void 0!==t&&n(t);var e=r(this);if(F)return void 0===t?y(e):y(e,t);var i,s,a=[],l=o(e);for(s=0;s<l;s++)s in e&&b(a,e[s]);_(a,j(t)),i=a.length,s=0;while(s<i)e[s]=a[s++];while(s<l)delete e[s++];return e}})},"512ce":function(t,e,i){var s=i("342f"),a=s.match(/AppleWebKit\/(\d+)\./);t.exports=!!a&&+a[1]},"557f":function(t,e,i){},"7db0":function(t,e,i){"use strict";var s=i("23e7"),a=i("b727").find,n=i("44d2"),r="find",o=!0;r in[]&&Array(1)[r]((function(){o=!1})),s({target:"Array",proto:!0,forced:o},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n(r)},"98c9":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("div",{staticClass:"left-label",class:{"is-required":t.is_required}},[t._v(t._s(t.label))]),i("div",{staticClass:"right-content"},[t._t("default")],2)])},a=[],n=i("bee2"),r=i("d4ec"),o=i("262e"),l=i("2caf"),u=i("9ab4"),_=i("1b40"),d=function(t){Object(o["a"])(i,t);var e=Object(l["a"])(i);function i(){return Object(r["a"])(this,i),e.apply(this,arguments)}return Object(n["a"])(i)}(_["e"]);Object(u["a"])([Object(_["c"])({default:""})],d.prototype,"label",void 0),Object(u["a"])([Object(_["c"])({default:!1})],d.prototype,"is_required",void 0),d=Object(u["a"])([Object(_["a"])({})],d);var c=d,f=c,p=(i("3eb7"),i("2877")),m=Object(p["a"])(f,s,a,!1,null,"3b58a324",null);e["a"]=m.exports},a434:function(t,e,i){"use strict";var s=i("23e7"),a=i("da84"),n=i("23cb"),r=i("5926"),o=i("07fa"),l=i("7b0b"),u=i("65f0"),_=i("8418"),d=i("1dde"),c=d("splice"),f=a.TypeError,p=Math.max,m=Math.min,h=9007199254740991,y="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!c},{splice:function(t,e){var i,s,a,d,c,b,v=l(this),g=o(v),k=n(t,g),F=arguments.length;if(0===F?i=s=0:1===F?(i=0,s=g-k):(i=F-2,s=m(p(r(e),0),g-k)),g+i-s>h)throw f(y);for(a=u(v,s),d=0;d<s;d++)c=k+d,c in v&&_(a,d,v[c]);if(a.length=s,i<s){for(d=k;d<g-s;d++)c=d+s,b=d+i,c in v?v[b]=v[c]:delete v[b];for(d=g;d>g-s+i;d--)delete v[d-1]}else if(i>s)for(d=g-s;d>k;d--)c=d+s-1,b=d+i-1,c in v?v[b]=v[c]:delete v[b];for(d=0;d<i;d++)v[d+k]=arguments[d+2];return v.length=g-s+i,a}})},a68a:function(t,e,i){},b680:function(t,e,i){"use strict";var s=i("23e7"),a=i("da84"),n=i("e330"),r=i("5926"),o=i("408a"),l=i("1148"),u=i("d039"),_=a.RangeError,d=a.String,c=Math.floor,f=n(l),p=n("".slice),m=n(1..toFixed),h=function(t,e,i){return 0===e?i:e%2===1?h(t,e-1,i*t):h(t*t,e/2,i)},y=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},b=function(t,e,i){var s=-1,a=i;while(++s<6)a+=e*t[s],t[s]=a%1e7,a=c(a/1e7)},v=function(t,e){var i=6,s=0;while(--i>=0)s+=t[i],t[i]=c(s/e),s=s%e*1e7},g=function(t){var e=6,i="";while(--e>=0)if(""!==i||0===e||0!==t[e]){var s=d(t[e]);i=""===i?s:i+f("0",7-s.length)+s}return i},k=u((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!u((function(){m({})}));s({target:"Number",proto:!0,forced:k},{toFixed:function(t){var e,i,s,a,n=o(this),l=r(t),u=[0,0,0,0,0,0],c="",m="0";if(l<0||l>20)throw _("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return d(n);if(n<0&&(c="-",n=-n),n>1e-21)if(e=y(n*h(2,69,1))-69,i=e<0?n*h(2,-e,1):n/h(2,e,1),i*=4503599627370496,e=52-e,e>0){b(u,0,i),s=l;while(s>=7)b(u,1e7,0),s-=7;b(u,h(10,s,1),0),s=e-1;while(s>=23)v(u,1<<23),s-=23;v(u,1<<s),b(u,1,1),v(u,2),m=g(u)}else b(u,0,i),b(u,1<<-e,0),m=g(u)+f("0",l);return l>0?(a=m.length,m=c+(a<=l?"0."+f("0",l-a)+m:p(m,0,a-l)+"."+p(m,a-l))):m=c+m,m}})},bfdd:function(t,e,i){"use strict";i("557f")},c6c3:function(t,e,i){"use strict";i("ca94")},ca94:function(t,e,i){},d4fd:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",{ref:"resetForm",staticClass:"pwd-form",attrs:{model:t.data,"label-position":"left","label-width":"120px"}},[t.system_disk?i("div",{staticClass:"inline-form"},[i("el-form-item",{staticClass:"m-right20",attrs:{label:"系统盘",prop:"system_disk"}},[i("el-select",{attrs:{"value-key":"ecs_goods_id"},on:{change:t.FnChangeSystemType},model:{value:t.data.default_system_info,callback:function(e){t.$set(t.data,"default_system_info",e)},expression:"data.default_system_info"}},t._l(t.system_disk_info,(function(t){return i("el-option",{key:t.ecs_goods_id,attrs:{value:t,label:t.disk_name}})})),1)],1),i("el-form-item",[i("el-input-number",{attrs:{min:Number(t.data.system_disk_min),max:t.data.default_system_info?Number(t.data.default_system_info.disk_max):0,step:t.data.default_system_info?Number(t.data.default_system_info.disk_step):0,"step-strictly":""},on:{blur:t.FnCheckSystemSize,change:t.FnChangeSystemSize},model:{value:t.data.system_size,callback:function(e){t.$set(t.data,"system_size",e)},expression:"data.system_size"}}),t._v(" "+t._s(t.data.default_system_info?t.data.default_system_info.disk_unit:"GB")+" ")],1)],1):t._e(),t.data_disk?[t._l(t.data_disk_list,(function(e,s){return i("div",{key:s,staticClass:"inline-form"},[i("el-form-item",{staticClass:"short-select",attrs:{label:0===s?"数据盘":""}},[i("i",{staticClass:"el-icon-remove-outline delete-icon",on:{click:function(e){return t.FnDelDataDisk(s)}}}),i("el-select",{staticClass:"m-right20",attrs:{"value-key":"ecs_goods_id"},on:{change:t.FnDataEmit},model:{value:e.default_disk_info,callback:function(i){t.$set(e,"default_disk_info",i)},expression:"disk.default_disk_info"}},t._l(t.data_disk_info,(function(t){return i("el-option",{key:t.ecs_goods_id,attrs:{value:t,label:t.disk_name}})})),1)],1),i("el-form-item",[i("el-input-number",{attrs:{min:Number(e.default_disk_info.disk_min),max:Number(e.default_disk_info.disk_max),step:Number(e.default_disk_info.disk_step),"step-strictly":""},on:{blur:function(i){return t.FnCheckDataSize(e)},change:function(i){return t.FnChangeDataSize(e)}},model:{value:e.disk_size,callback:function(i){t.$set(e,"disk_size",i)},expression:"disk.disk_size"}}),t._v(" "+t._s(e.default_disk_info.disk_unit)+" ")],1),i("el-form-item",[i("el-input-number",{staticClass:"m-left10 m-right10",attrs:{min:e.min,max:t.FnGetSurplus+e.num,step:1},on:{blur:function(i){return t.FnCheckDataNum(e)},change:function(i){return t.FnChangeDataNum(e)}},model:{value:e.num,callback:function(i){t.$set(e,"num",i)},expression:"disk.num"}})],1),i("el-form-item",[t.is_gpu?t._e():i("el-checkbox",{on:{change:t.FnDataEmit},model:{value:e.del,callback:function(i){t.$set(e,"del",i)},expression:"disk.del"}},[t._v("随实例删除")])],1)],1)})),t.data_disk_info.length>0?i("el-form-item",{attrs:{label:0===t.data_disk_list.length?"数据盘":""}},[i("div",{staticClass:"disk-btn"},[i("el-button",{attrs:{type:"text",disabled:0===t.FnGetSurplus},on:{click:t.FnAddDataDisk}},[i("i",{staticClass:"el-icon-circle-plus"}),t._v(" 添加数据盘")]),i("div",{staticClass:"prompt_message"},[t._v("您已选择 "),i("span",{staticClass:"num_message"},[t._v(t._s(t.FnGetDiskNum))]),t._v(" 块盘， 还可以添加 "),i("span",{staticClass:"num_message"},[t._v(t._s(t.FnGetSurplus))]),t._v(" 块盘")])],1)]):t._e()]:t._e()],2)},a=[],n=i("1da1"),r=i("d4ec"),o=i("bee2"),l=i("262e"),u=i("2caf"),_=(i("4de4"),i("d3b7"),i("a434"),i("a9e3"),i("96cf"),i("9ab4")),d=i("1b40"),c=i("81a9"),f=i("bff7"),p={create:function(t){return Object(c["a"])(Object(f["a"])("POST","/ebs/create_disk/",t))},get_disk_type:function(t){return Object(c["a"])(Object(f["a"])("GET","/ebs/disk_info/",t))},get_price:function(t){return Object(c["a"])(Object(f["a"])("POST","/ecs/get_price/",t))},get_capacity_price:function(t){return Object(c["a"])(Object(f["a"])("POST","/ebs/get_ebs_price/",t))}};function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=e?(e-Number(t.disk_min))/Number(t.disk_step):0,s=Number(t.min_iops)+Number(t.iops_step)*i>t.max_iops?t.max_iops:Number(t.min_iops)+Number(t.iops_step)*i,a=Number(t.min_throughput)+Number(t.throughput_step)*i>t.max_throughput?t.max_throughput:Number(t.min_throughput)+Number(t.throughput_step)*i;return{iops_show:s+" "+t.iops_unit,throughput_show:a+" "+t.throughput_unit,iops:s,throughput:a}}var h=i("8ce4"),y=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(r["a"])(this,i),t=e.apply(this,arguments),t.all_disk_info={system_disk:[],data_disk:[]},t.system_disk_info=[],t.data_disk_info=[],t.data_disk_list=[],t.data={default_system_info:{ecs_goods_id:"",disk_name:"",disk_unit:"",disk_feature:"",disk_type:"",disk_min:0,disk_max:500,disk_step:10,min_iops:0,max_iops:0,min_throughput:0,throughput_step:0,throughput_unit:"",max_throughput:0,iops_step:0,iops_unit:""},system_disk_min:0,system_size:0},t}return Object(o["a"])(i,[{key:"FnGetDiskInfo",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.az_id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,p.get_disk_type({az_id:this.az_id,customer_id:this.customer_id,billing_method:this.billing_method,spec_family_id:this.spec_family_id});case 4:e=t.sent,"Success"==e.code&&(this.all_disk_info={system_disk:e.data.system_disk,data_disk:e.data.data_disk},this.FnBillingInfo(Object(h["a"])(e.data.billing_info,!0)),this.FnFilterDisk());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnFilterDisk",value:function(){this.is_gpu?this.system_disk_info=this.all_disk_info.system_disk.filter((function(t){return"local"===t.disk_feature})):(this.system_disk_info=this.all_disk_info.system_disk,this.data_disk_info=this.all_disk_info.data_disk),this.data.default_system_info=this.system_disk_info[0],this.data.default_system_info?this.FnChangeSystemType():(this.data.default_system_info=null,this.data_disk_info=[],this.FnSysEmit(),this.$message.error("该产品规格无可用的存储类型，请联系管理员"))}},{key:"FnChangeSystemType",value:function(){this.data_disk_list=[],"local"===this.data.default_system_info.disk_feature?this.data_disk_info=this.all_disk_info.data_disk.filter((function(t){return"local"===t.disk_feature})):this.data_disk_info=this.all_disk_info.data_disk.filter((function(t){return"local"!==t.disk_feature})),this.data.system_size=this.FnSystemMinSize(),this.FnSysEmit()}},{key:"FnGetDiskNum",get:function(){return this.data_disk_list.length>0?this.data_disk_list.reduce((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{num:0};return t+e.num}),0):0}},{key:"FnGetSurplus",get:function(){return 16-this.FnGetDiskNum}},{key:"FnGetSystemIops",get:function(){return m(this.data.default_system_info,this.data.system_size)}},{key:"FnAddDataDisk",value:function(){if(0!=this.FnGetSurplus){var t={default_disk_info:{disk_min:0,disk_max:0,disk_step:0,disk_unit:"G",disk_name:""},disk_size:0,num:1,min:1,del:!1};t.default_disk_info=this.data_disk_info[0]||{},t.default_disk_info.disk_name&&(t.disk_size=t.default_disk_info.disk_min,this.FnGetDataIops(t),this.data_disk_list.push(t),this.FnDataEmit())}}},{key:"FnDelDataDisk",value:function(t){this.data_disk_list.splice(t,1),this.FnDataEmit()}},{key:"FnGetDataIops",value:function(t){var e=m(t.default_disk_info,t.disk_size);t.iops=e.iops,t.iops_show=e.iops_show,t.handling_capacity=e.throughput,t.throughput_show=e.throughput_show,t.storage_space=t.disk_size}},{key:"FnCheckSystemSize",value:function(){this.data.system_size||(this.data.system_size=this.data.system_disk_min,this.FnSysEmit())}},{key:"FnChangeSystemSize",value:function(){this.data.system_size&&this.FnSysEmit()}},{key:"FnSysEmit",value:function(){var t,e,i,s,a;return{ecs_goods_id:(null===(t=this.data.default_system_info)||void 0===t?void 0:t.ecs_goods_id)||"",disk_name:(null===(e=this.data.default_system_info)||void 0===e?void 0:e.disk_name)||"",disk_feature:(null===(i=this.data.default_system_info)||void 0===i?void 0:i.disk_feature)||"",disk_type:(null===(s=this.data.default_system_info)||void 0===s?void 0:s.disk_type)||"",disk_size:this.data.default_system_info?this.data.system_size:0,disk_unit:(null===(a=this.data.default_system_info)||void 0===a?void 0:a.disk_unit)||"",iops:this.data.default_system_info?this.FnGetSystemIops.iops:0,handling_capacity:this.data.default_system_info?this.FnGetSystemIops.throughput:0,storage_space:this.data.default_system_info?this.data.system_size:0,is_follow_delete:1}}},{key:"FnCheckDataSize",value:function(t){t.disk_size||(t.disk_size=t.default_disk_info.disk_min,this.FnGetDataIops(t),this.FnDataEmit())}},{key:"FnChangeDataSize",value:function(t){t.disk_size&&(this.FnGetDataIops(t),this.FnDataEmit())}},{key:"FnCheckDataNum",value:function(t){t.num||(t.num=t.min,this.FnDataEmit())}},{key:"FnChangeDataNum",value:function(t){t.num&&this.FnDataEmit()}},{key:"FnDataEmit",value:function(){return this.data_disk_list}},{key:"FnBillingInfo",value:function(t){return t}},{key:"FnSubmit",value:function(){var t=!1;return this.$refs["resetForm"].validate((function(e){t=e})),{flag:t,system_disk:this.FnSysEmit()}}},{key:"FnResetForm",value:function(t){this.$refs["resetForm"].resetFields(),this.data.default_system_info=this.system_disk_info[0]}},{key:"FnSystemMinSize",value:function(){return this.data.system_disk_min=Math.max(Number(this.data.default_system_info.disk_min),this.os_disk_size,this.origin_disk_size),this.data.system_disk_min}},{key:"created",value:function(){this.az_id&&this.FnGetDiskInfo()}},{key:"FnChangeCustomer",value:function(t,e){this.FnGetDiskInfo()}},{key:"FnChangeFamily",value:function(t){t&&(this.data_disk_list=[],this.FnGetDiskInfo())}},{key:"FnChangeOs",value:function(t){var e=this.FnSystemMinSize();e!==this.data.system_size&&this.data.system_size&&(this.data.system_size=e,this.FnSysEmit())}}]),i}(d["e"]);Object(_["a"])([Object(d["c"])({default:""})],y.prototype,"az_id",void 0),Object(_["a"])([Object(d["c"])({default:""})],y.prototype,"customer_id",void 0),Object(_["a"])([Object(d["c"])({default:"0"})],y.prototype,"billing_method",void 0),Object(_["a"])([Object(d["c"])({default:!1})],y.prototype,"system_disk",void 0),Object(_["a"])([Object(d["c"])({default:!1})],y.prototype,"data_disk",void 0),Object(_["a"])([Object(d["c"])({default:0})],y.prototype,"os_disk_size",void 0),Object(_["a"])([Object(d["c"])({default:0})],y.prototype,"origin_disk_size",void 0),Object(_["a"])([Object(d["c"])({default:""})],y.prototype,"spec_family_id",void 0),Object(_["a"])([Object(d["c"])({default:0})],y.prototype,"is_gpu",void 0),Object(_["a"])([Object(d["b"])("fn-system-disk")],y.prototype,"FnSysEmit",null),Object(_["a"])([Object(d["b"])("fn-data-disk")],y.prototype,"FnDataEmit",null),Object(_["a"])([Object(d["b"])("fn-billing-info")],y.prototype,"FnBillingInfo",null),Object(_["a"])([Object(d["f"])("customer_id")],y.prototype,"FnChangeCustomer",null),Object(_["a"])([Object(d["f"])("spec_family_id")],y.prototype,"FnChangeFamily",null),Object(_["a"])([Object(d["f"])("os_disk_size")],y.prototype,"FnChangeOs",null),y=Object(_["a"])([d["a"]],y);var b=y,v=b,g=(i("c6c3"),i("2877")),k=Object(g["a"])(v,s,a,!1,null,"4b13d449",null);e["a"]=k.exports},d998:function(t,e,i){var s=i("342f");t.exports=/MSIE|Trident/.test(s)},ed60:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",{ref:"resetForm",staticClass:"pwd-form",attrs:{model:t.data,rules:t.rules,"label-position":"left","label-width":"120px"}},[i("el-form-item",{attrs:{label:"用户名"}},[t._v(" "+t._s(t.username)+" ")]),i("el-form-item",{attrs:{label:t.label,prop:"password"}},[i("div",{staticClass:"long-input"},[i("el-input",{attrs:{type:"password","show-password":""},model:{value:t.data.password,callback:function(e){t.$set(t.data,"password",e)},expression:"data.password"}})],1),i("div",{staticClass:"prompt_message"},[t._v(" 8-30个字符，且同时包含三项（大写字母、小写字母、数字、()`~!@#$%^&*-+=_|{}[]:;,.?/中的特殊字符）")])]),i("el-form-item",{attrs:{label:"确认密码",prop:"confirm_password"}},[i("div",{staticClass:"long-input"},[i("el-input",{attrs:{type:"password","show-password":""},model:{value:t.data.confirm_password,callback:function(e){t.$set(t.data,"confirm_password",e)},expression:"data.confirm_password"}})],1)])],1)},a=[],n=i("d4ec"),r=i("bee2"),o=i("262e"),l=i("2caf"),u=(i("d9e2"),i("9ab4")),_=i("1b40");i("ac1f"),i("00b4");function d(t){var e=/[A-Z]+/,i=/\d+/,s=/[a-z]+/,a=/[~`·！!@#￥$%……^&*()（）——+=【】[\]{}|、\\：:;；"”“’''<>《》,，。.?？/].*/,n=0,r=!0,o="";return e.test(t)&&n++,i.test(t)&&n++,s.test(t)&&n++,a.test(t)&&n++,(t.length<8||t.length>30)&&(o="长度应为8-30位之间",r=!1),n<3&&(o="需要包含大小写字母、数字、特殊符号中的任意三项",r=!1),{flag:r,msg:o}}var c=function(t){Object(o["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(n["a"])(this,i),t=e.apply(this,arguments),t.data={password:"",confirm_password:""},t.FnCheckPwd=function(t,e,i){var s=d(e);s.flag||i(new Error(s.msg)),i()},t.FnCheckConfirmPwd=function(e,i,s){""===i?s(new Error("请输入确认密码")):i!==t.data.password&&s(new Error("两次密码输入不一致")),s()},t.rules={password:[{required:!0,validator:t.FnCheckPwd,trigger:"blur"}],confirm_password:[{required:!0,validator:t.FnCheckConfirmPwd,trigger:"blur"}]},t}return Object(r["a"])(i,[{key:"FnSubmit",value:function(){var t=!1;return this.$refs["resetForm"].validate((function(e){t=e})),{flag:t,password:this.data.password}}},{key:"FnResetForm",value:function(){this.$refs["resetForm"].resetFields()}}]),i}(_["e"]);Object(u["a"])([Object(_["c"])({default:"root/administrator"})],c.prototype,"username",void 0),Object(u["a"])([Object(_["c"])({default:"密码"})],c.prototype,"label",void 0),c=Object(u["a"])([_["a"]],c);var f=c,p=f,m=(i("0ae5"),i("2877")),h=Object(m["a"])(p,s,a,!1,null,"61a0d7cc",null);e["a"]=h.exports}}]);
//# sourceMappingURL=chunk-088d135e.8286b467.js.map