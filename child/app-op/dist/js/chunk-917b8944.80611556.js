(window["webpackJsonp_AppOp"]=window["webpackJsonp_AppOp"]||[]).push([["chunk-917b8944"],{"0b17":function(t,e,a){"use strict";a("65c6")},"0cb2":function(t,e,a){var r=a("e330"),n=a("7b0b"),o=Math.floor,s=r("".charAt),i=r("".replace),c=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,a,r,p,h){var d=a+t.length,_=r.length,b=u;return void 0!==p&&(p=n(p),b=l),i(h,b,(function(n,i){var l;switch(s(i,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,a);case"'":return c(e,d);case"<":l=p[c(i,1,-1)];break;default:var u=+i;if(0===u)return n;if(u>_){var h=o(u/10);return 0===h?n:h<=_?void 0===r[h-1]?s(i,1):r[h-1]+s(i,1):n}l=r[u-1]}return void 0===l?"":l}))}},"47c0":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("action-block",{attrs:{search_option:t.searchDom},on:{"fn-search":t.search,"fn-filter":t.FnFilter}}),a("div",{staticClass:"text-right m-bottom10"},[a("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{type:"text"},on:{click:t.exportList}},[a("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1)],1),a("el-table",{attrs:{data:t.list,border:""},on:{"sort-change":t.handleSort}},[a("el-table-column",{attrs:{prop:"region_name",label:"所属地域"}}),a("el-table-column",{attrs:{prop:"az_name",label:"可用区名称"}}),a("el-table-column",{attrs:{prop:"host_product_name",label:"物理机产品名称"}}),a("el-table-column",{attrs:{prop:"cpu",label:"CPU逻辑总核数(核)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"ram",label:"内存总容量(GB)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"gpu",label:"GPU总数量(块)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"local_disk_storage",label:"本地盘总容量",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(""+e.row.local_disk_storage+e.row.local_disk_storage_unit))])]}}])}),a("el-table-column",{attrs:{prop:"cpu_allocate",label:"已分配CPU逻辑核数(核)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"ram_allocate",label:"已分配内存量(GB)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"gpu_allocate",label:"已分配GPU总数量(块)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"local_disk_allocate",label:"已分配本地盘容量",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(""+e.row.local_disk_allocate+e.row.local_disk_allocate_unit))])]}}])}),a("el-table-column",{attrs:{prop:"gpu_fault",label:"GPU故障数量(块)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"cpu_available",label:"剩余物理CPU逻辑核数(核)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"ram_available",label:"剩余内存量(GB)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"gpu_available",label:"剩余GPU数量(块)",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"local_disk_available",label:"剩余本地盘容量",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(""+e.row.local_disk_available+e.row.local_disk_available_unit))])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.pageInfo.page_index,"page-sizes":[20,50,100],"page-size":t.pageInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},n=[],o=a("ade3"),s=a("5530"),i=a("2909"),c=a("1da1"),l=a("d4ec"),u=a("bee2"),p=a("262e"),h=a("2caf"),d=(a("96cf"),a("4e82"),a("b0c0"),a("99af"),a("d81d"),a("a15b"),a("d3b7"),a("25f0"),a("fb6a"),a("9ab4")),_=a("1b40"),b=a("5124"),f=a("9074"),g=a("c811"),v=a("8ce4"),m=a("3673"),k=function(t){Object(p["a"])(a,t);var e=Object(h["a"])(a);function a(){var t;return Object(l["a"])(this,a),t=e.apply(this,arguments),t.list=[],t.sort=void 0,t.sortLable="",t.authList=[],t.pageInfo={page_index:1,page_size:20,total:0},t.searchDom={region_id:{placeholder:"请选择地域",list:[]},az_id:{placeholder:"请选择可用区",list:[]},host_product_name:{placeholder:"请选择物理机产品名称",list:[],multiple:!0,filter:!0}},t.search_info={},t}return Object(u["a"])(a,[{key:"created",value:function(){this.authList=this.$store.state.auth_info[this.$route.name],this.getRegion(),this.getHostProductName(),this.getInventoryList()}},{key:"getRegion",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.searchDom.region_id.list=[],t.next=3,f["a"].get_region_az_list({});case 3:if(e=t.sent,"Success"===e.code)for(a in e.data)for(r in this.searchDom.region_id.list=[].concat(Object(i["a"])(this.searchDom.region_id.list),Object(i["a"])(Object(v["c"])(e.data[a].region_list,"region_name","region_id","label","type"))),e.data[a].region_list)this.searchDom.az_id.list=[].concat(Object(i["a"])(this.searchDom.az_id.list),Object(i["a"])(Object(v["c"])(e.data[a].region_list[r].az_list,"az_name","az_id","label","type")));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getHostProductName",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,r,n=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"",a=!(o.length>1&&void 0!==o[1])||o[1],a||this.$store.commit("SET_LOADING",!1),t.next=5,b["a"].get_product_host_name({page_index:1,page_size:20,name:e});case 5:r=t.sent,"Success"===r.code&&(this.searchDom.host_product_name.list=[],r.data.host_product_list.map((function(t){n.searchDom.host_product_name.list.push({type:t.name,label:t.name})})),this.pageInfo.total=r.data.page_info.count);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnFilter",value:function(t){this.getHostProductName(t,!1)}},{key:"search",value:function(t){this.pageInfo.page_index=1,this.search_info=Object(s["a"])({},t),this.getInventoryList()}},{key:"getInventoryList",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b["a"].get_inventory_list((e={region_id:this.search_info.region_id,az_id:this.search_info.az_id,host_product_name:this.search_info.host_product_name?this.search_info.host_product_name.join(","):void 0},Object(o["a"])(e,this.sortLable?"sort_".concat(this.sortLable):"",this.sortLable?this.sort.toString():void 0),Object(o["a"])(e,"page_index",this.pageInfo.page_index),Object(o["a"])(e,"page_size",this.pageInfo.page_size),e));case 2:a=t.sent,"Success"===a.code&&(this.list=a.data.product_stock_list,this.pageInfo.total=a.data.page_info.count);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleCurrentChange",value:function(t){this.pageInfo.page_index=t,this.getInventoryList()}},{key:"handleSizeChange",value:function(t){this.pageInfo.page_size=t,this.getInventoryList()}},{key:"handleSort",value:function(t){this.sortLable=t.prop,this.sort="descending"===t.order?"1":"ascending"===t.order?"0":void 0,this.getInventoryList()}},{key:"exportList",value:function(){var t="";for(var e in this.search_info)this.search_info[e]&&(t+="".concat(e,"=").concat(Array.isArray(this.search_info[e])?this.search_info[e].join(","):this.search_info[e],"&"));var a=""===t?"":"?".concat(t.slice(0,t.length-1));window.location.href="/ecs_business/v1/stock/host_stock_download/".concat(a)}}]),a}(_["e"]);k=Object(d["a"])([Object(_["a"])({components:{ActionBlock:g["a"],svgIcon:m["a"]}})],k);var y=k,x=y,w=(a("0b17"),a("2877")),O=Object(w["a"])(x,r,n,!1,null,"5be6cb30",null);e["default"]=O.exports},5319:function(t,e,a){"use strict";var r=a("2ba4"),n=a("c65b"),o=a("e330"),s=a("d784"),i=a("d039"),c=a("825a"),l=a("1626"),u=a("5926"),p=a("50c4"),h=a("577e"),d=a("1d80"),_=a("8aa5"),b=a("dc4a"),f=a("0cb2"),g=a("14c3"),v=a("b622"),m=v("replace"),k=Math.max,y=Math.min,x=o([].concat),w=o([].push),O=o("".indexOf),j=o("".slice),z=function(t){return void 0===t?t:String(t)},I=function(){return"$0"==="a".replace(/./,"$0")}(),$=function(){return!!/./[m]&&""===/./[m]("a","$0")}(),L=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));s("replace",(function(t,e,a){var o=$?"$":"$0";return[function(t,a){var r=d(this),o=void 0==t?void 0:b(t,m);return o?n(o,t,r,a):n(e,h(r),t,a)},function(t,n){var s=c(this),i=h(t);if("string"==typeof n&&-1===O(n,o)&&-1===O(n,"$<")){var d=a(e,s,i,n);if(d.done)return d.value}var b=l(n);b||(n=h(n));var v=s.global;if(v){var m=s.unicode;s.lastIndex=0}var I=[];while(1){var $=g(s,i);if(null===$)break;if(w(I,$),!v)break;var L=h($[0]);""===L&&(s.lastIndex=_(i,p(s.lastIndex),m))}for(var S="",C=0,D=0;D<I.length;D++){$=I[D];for(var P=h($[0]),A=k(y(u($.index),i.length),0),G=[],R=1;R<$.length;R++)w(G,z($[R]));var U=$.groups;if(b){var B=x([P],G,A,i);void 0!==U&&w(B,U);var F=h(r(n,void 0,B))}else F=f(P,i,A,G,U,n);A>=C&&(S+=j(i,C,A)+F,C=A+P.length)}return S+j(i,C)}]}),!L||!I||$)},"65c6":function(t,e,a){},d81d:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("1dde"),s=o("map");r({target:"Array",proto:!0,forced:!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);