(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-75dfc524"],{"0692":function(e,t,s){},1148:function(e,t,s){"use strict";var i=s("da84"),n=s("5926"),r=s("577e"),a=s("1d80"),o=i.RangeError;e.exports=function(e){var t=r(a(this)),s="",i=n(e);if(i<0||i==1/0)throw o("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(s+=t);return s}},"11c4":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"instance-list"},[s("action-block",{attrs:{search_option:e.search_con,type:!0},on:{"fn-search":e.FnSearch}}),s("div",{staticClass:"icon m-bottom10"},[s("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"text"},on:{click:e.FnExport}},[s("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1)],1),s("el-table",{ref:"multipleTable",attrs:{data:e.instance_list,border:""},on:{"selection-change":e.handleSelectionChange,"filter-change":e.handleFilterChange,"sort-change":e.handleSortChange}},[s("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),s("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),s("el-table-column",{attrs:{prop:"ecs_id",label:"云服务器ID"}}),s("el-table-column",{attrs:{prop:"ecs_name",label:"云服务器名称",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("pre",[e._v(e._s(t.row.ecs_name))])]}}])}),s("el-table-column",{attrs:{prop:"status",label:"状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{class:t.row.status},[e._v(e._s(t.row.status_display))])]}}])}),s("el-table-column",{attrs:{label:"计算规格",filters:e.ecs_goods_name_list,"column-key":"ecs_goods_name",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.ecs_goods_name)+" "),s("br"),e._v(" "+e._s(t.row.cpu_size)+"vCPU | "+e._s(t.row.ram_size)+"GiB "),s("br"),t.row.gpu_size?s("span",[e._v("| "+e._s(t.row.gpu_size)+"*"+e._s(t.row.card_name))]):e._e()]}}])}),s("el-table-column",{attrs:{prop:"os_name",label:"操作系统"}}),s("el-table-column",{attrs:{prop:"host_name",label:"系统盘"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.system_disk_type+" "+t.row.system_disk_size+t.row.system_disk_unit))])]}}])}),s("el-table-column",{attrs:{prop:"host_name",label:"所属物理机",sortable:"custom"}}),s("el-table-column",{attrs:{prop:"update_time",label:"销毁时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"time-box"},[e._v(e._s(t.row.update_time))])]}}])}),s("el-table-column",{attrs:{prop:"create_time",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"time-box"},[e._v(e._s(t.row.create_time))])]}}])}),s("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.FnToRecord(t.row.ecs_id)}}},[e._v("操作记录")])]}}])})],1),s("el-pagination",{attrs:{"current-page":e.page_info.page_index,"page-sizes":e.page_info.page_sizes,"page-size":e.page_info.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.page_info.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.page_info,"page_index",t)},"update:current-page":function(t){return e.$set(e.page_info,"page_index",t)},"update:pageSize":function(t){return e.$set(e.page_info,"page_size",t)},"update:page-size":function(t){return e.$set(e.page_info,"page_size",t)}}}),e.record_visible?[s("Record",{attrs:{visible:e.record_visible,record_id:e.record_id},on:{close:e.closeRecord}})]:e._e()],2)},n=[],r=s("ade3"),a=s("5530"),o=s("1da1"),c=s("d4ec"),_=s("bee2"),u=s("262e"),l=s("2caf"),p=(s("96cf"),s("b0c0"),s("ac1f"),s("1276"),s("a15b"),s("d81d"),s("e9c4"),s("4de4"),s("d3b7"),s("caad"),s("2532"),s("159b"),s("a9e3"),s("b680"),s("99af"),s("3ca3"),s("ddb0"),s("2b3d"),s("9861"),s("9ab4")),d=s("1b40"),h=s("98c9"),f=s("c811"),g=s("3673"),m=s("3f8d"),b=s("e527"),v=s("9074"),y=s("268f"),O=s("1b7c"),w=s("c1df"),k=s.n(w),j=function(e){Object(u["a"])(s,e);var t=Object(l["a"])(s);function s(){var e;return Object(c["a"])(this,s),e=t.apply(this,arguments),e.search_con={ecs_id:{placeholder:"请输入云服务器ID"},ecs_name:{placeholder:"请输入云服务器名称"},customer_id:{placeholder:"请输入客户ID"},customer_name:{placeholder:"请输入客户名称"},os_info:{placeholder:"请输入操作系统ID/名称"},host_id:{placeholder:"请输入物理机ID"},host_name:{placeholder:"请输入物理机名称"},host_ip:{placeholder:"请输入物理机管理IP"},out_band_address:{placeholder:"请输入物理机带外IP"},create_time:{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!1,dis_day:1,defaultTime:[k()().subtract(1,"month").format("YYYY-MM-DD"),k()(new Date).format("YYYY-MM-DD")]}},e.search_reqData={},e.search_billing_method="all",e.search_op_source="",e.search_ecs_goods_name=[],e.search_status=[],e.instance_list=[],e.customer_id="",e.az_id="",e.is_gpu=0,e.origin_disk_size=0,e.support_gpu_driver="",e.spec_family_id="",e.os_type="",e.billing_method="0",e.multiple_selection=[],e.multiple_selection_id=[],e.operate_auth=[],e.show_operate_dialog=!1,e.operate_title="",e.default_operate_type="",e.shutdown_ecs_type="shutdown_ecs",e.record_visible=!1,e.record_id="",e.detail_visible=!1,e.detail_id="",e.isComponentDestroying=!1,e.page_info={page_sizes:[20,50,100],page_size:20,page_index:1,total:0},e.billing_method_relation={"":"不计费",0:"按需计费",1:"包年包月"},e.billing_method_list=[],e.ecs_goods_name_list=[],e.timer=null,e.os_info={},e.ecs_info={},e.common_visible=!1,e.disk_billing_info={},e.total_price="",e.ecs_list_price={},e.loading=!1,e.sort_prop_name="",e.sort_order=void 0,e.ecs_status_list=[],e}return Object(_["a"])(s,[{key:"watch_pod",value:function(e){e&&this.FnSearch(this.search_reqData)}},{key:"watch_az",value:function(e){e&&this.FnSearch(this.search_reqData)}},{key:"FnSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.FnClearTimer(),this.search_reqData={ecs_id:e.ecs_id,ecs_name:e.ecs_name,customer_id:e.customer_id,customer_name:e.customer_name,os_info:e.os_info,private_net:e.private_net,host_id:e.host_id,host_name:e.host_name,host_ip:e.host_ip,out_band_address:e.out_band_address,start_time:e.create_time?k()(e.create_time[0]).format("YYYY-MM-DD"):k()().subtract(1,"month").format("YYYY-MM-DD"),end_time:e.create_time?k()(e.create_time[1]).format("YYYY-MM-DD"):k()(new Date).format("YYYY-MM-DD")},"ecs_destroyed"===this.$route.name?this.search_reqData["pod_id"]=this.$store.state.pod_id:this.search_reqData["az_id"]=this.$store.state.az_id,this.page_info.page_index=1,this.FnGetList()}},{key:"handleFilterChange",value:function(e){var t=this;this.FnClearTimer(),setTimeout((function(){e.op_source&&(t.search_op_source=e.op_source[0]),e.billing_method&&(t.search_billing_method=e.billing_method.length>0?e.billing_method[0]:"all"),e.ecs_goods_name&&(t.search_ecs_goods_name=e.ecs_goods_name),e.status&&(t.search_status=e.status),t.FnGetList()}),500)}},{key:"handleSizeChange",value:function(e){this.FnClearTimer(),this.page_info.page_size=e,this.FnGetList()}},{key:"handleCurrentChange",value:function(e){this.FnClearTimer(),this.page_info.page_index=e,this.FnGetList()}},{key:"handleSortChange",value:function(e){this.FnClearTimer();var t={private_net:"sort_private_ip",host_name:"sort_host_name",ecs_name:"sort_ecs_name"};this.sort_prop_name=t[e.prop],this.sort_order="ascending"===e.order?"0":"descending"===e.order?"1":void 0,this.FnGetList()}},{key:"FnGetNet",value:function(e){var t=e.split(".");return[t[0],t[1],t[2],"0"].join(".")}},{key:"FnGetList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,i,n,o,c=this,_=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=!(_.length>0&&void 0!==_[0])||_[0],this.$store.state.pod_id){e.next=3;break}return e.abrupt("return");case 3:return this.multiple_selection_id=[],s||(this.$store.commit("SET_LOADING",!1),this.multiple_selection_id=this.multiple_selection.map((function(e){return e.ecs_id}))),i=Object(a["a"])((t={billing_method:""==this.search_billing_method?"no":this.search_billing_method,page_index:this.page_info.page_index,page_size:this.page_info.page_size,status:"destroy"},Object(r["a"])(t,this.sort_prop_name,this.sort_order),Object(r["a"])(t,"is_op",!0),t),this.search_reqData),this.search_op_source&&(i["op_source"]=this.search_op_source),this.search_ecs_goods_name.length>0&&(i["spec_family_ids"]=JSON.stringify(this.search_ecs_goods_name)),e.next=10,b["a"].get_instance_list(i);case 10:n=e.sent,"Success"===n.code&&(this.instance_list=n.data.ecs_list,o=[],this.multiple_selection_id.length>0&&(o=n.data.ecs_list.filter((function(e){return c.multiple_selection_id.includes(e.ecs_id)}))),o&&o.length>0&&this.$nextTick((function(){o.forEach((function(e){c.$refs.multipleTable.toggleRowSelection(e)}))})),this.page_info.total=n.data.page.count),this.isComponentDestroying||this.FnSetTimer();case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSelectionChange",value:function(e){this.multiple_selection=e}},{key:"FnToCreate",value:function(){this.$router.push("/instance/create")}},{key:"FnOperate",value:function(e){if(0!==this.multiple_selection.length){var t=m["a"].getInsOperateAuth(e);if(["reset_pwd","update_spec","update_system","open_bill"].indexOf(e)>=0){if(!this.FnJudegCustomerAz(t,e))return;"open_bill"===e&&this.FnGetEcsPrice()}else if(!this.FnJudgeCustomer(t,e))return;this.operate_title=t.label,this.show_operate_dialog=!0,this.default_operate_type=e,this.FnClearTimer()}else this.$message.warning("请选择要操作的实例！")}},{key:"FnJudgeCustomer",value:function(e,t){this.customer_id="";var s=!0;this.multiple_selection_id=[];for(var i=0;i<this.multiple_selection.length;i++){var n=this.multiple_selection[i];if(this.multiple_selection_id.push(n.ecs_id),0===i&&(this.customer_id=n.customer_id,this.is_gpu=Number(n.is_gpu)),n.customer_id!==this.customer_id){this.$message.warning("只允许对同一客户的实例进行批量操作！"),s=!1;break}if(["recover_ecs"].indexOf(t)>=0&&n.is_gpu!=this.is_gpu){this.$message.warning("只允许对同一类型实例进行批量".concat(e.label,"操作！")),s=!1;break}if(e.auth.indexOf(n.status)<0){this.$message.warning(e.msg),s=!1;break}}return s}},{key:"FnJudegCustomerAz",value:function(e,t){this.customer_id="",this.az_id="",this.billing_method="0",this.origin_disk_size=0,this.support_gpu_driver="",this.spec_family_id="",this.os_type="";var s=!0;this.multiple_selection_id=[];for(var i=0;i<this.multiple_selection.length;i++){var n=this.multiple_selection[i];if(this.multiple_selection_id.push(n.ecs_id),0===i&&(this.customer_id=n.customer_id,this.az_id=n.az_id,this.billing_method=n.billing_method,this.is_gpu=Number(n.is_gpu),this.support_gpu_driver=n.support_gpu_driver,this.spec_family_id=n.spec_family_id,this.os_type=n.os_type),n.customer_id!==this.customer_id||n.az_id!==this.az_id){this.$message.warning("只允许对同一客户的同一可用区下实例进行批量操作！"),s=!1;break}if(["update_spec","update_system"].indexOf(t)>=0&&(n.is_gpu!=this.is_gpu||n.billing_method!==this.billing_method)){this.$message.warning("只允许对同一类型同一计费方式实例进行批量".concat(e.label,"操作！")),s=!1;break}if("open_bill"===t&&n.is_charge){this.$message.warning("只允许对未开启计费的实例开启计费！"),s=!1;break}if("update_system"===t&&n.support_gpu_driver!=this.support_gpu_driver){this.$message.warning("只允许对同一驱动类型实例进行批量".concat(e.label,"操作！")),s=!1;break}if("update_system"===t&&n.spec_family_id!=this.spec_family_id){this.$message.warning("只允许对同一规格族实例进行批量".concat(e.label,"操作！")),s=!1;break}if("update_system"===t&&n.os_type!=this.os_type){this.$message.warning("Windows和linux系统不可以互换重装！"),s=!1;break}if("update_spec"===t&&this.is_gpu){this.$message.warning("不允许对GPU实例".concat(e.label,"操作！")),s=!1;break}if(e.auth.indexOf(n.status)<0){this.$message.warning(e.msg),s=!1;break}this.origin_disk_size=Math.max(this.origin_disk_size,n.system_disk_size)}return s}},{key:"FnConfirm",value:function(){if("recover_ecs"!==this.default_operate_type){var e={op_type:this.default_operate_type,customer_id:this.customer_id,az_id:this.az_id,ecs_ids:this.multiple_selection_id};["start_up_ecs","shutdown_ecs","restart_ecs"].indexOf(this.default_operate_type)>=0?this.FnPowerOperate(e):"delete_ecs"===this.default_operate_type?this.FnDelete(e):"destroy_ecs"===this.default_operate_type?this.FnDestroy(e):"reset_pwd"===this.default_operate_type?this.FnResetPwd(e):"update_spec"===this.default_operate_type?this.FnUpdateSpec(e):"update_system"===this.default_operate_type?this.FnUpdateSystem(e):"open_bill"===this.default_operate_type&&this.FnOpenBill(Object.assign({billing_method:this.billing_method},e))}else this.$refs.recover.FnRecover()}},{key:"FnPowerOperate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"shutdown_ecs"===this.default_operate_type&&(t.op_type=this.shutdown_ecs_type),e.next=3,b["a"].operate_instance(t);case 3:s=e.sent,"Success"==s.code&&(this.$message.success(s.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.FnClose());case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnDelete",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b["a"].delete_instance(Object.assign({is_gpu:this.is_gpu},t));case 2:s=e.sent,"Success"==s.code&&(this.$message.success(s.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.FnClose());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnDestroy",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b["a"].destroy_instance(Object.assign({is_gpu:this.is_gpu},t));case 2:s=e.sent,"Success"==s.code&&(this.$message.success(s.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.page_info.page_index=1,this.FnClose());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnResetPwd",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.$refs.reset_pwd.FnSubmit(),!s.flag){e.next=8;break}return t.password=s.password,e.next=5,b["a"].reset_password(t);case 5:i=e.sent,"Success"===i.code&&this.$message.success(i.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.FnClose();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnChangeSpec",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.billing_method){e.next=2;break}return e.abrupt("return");case 2:return s={customer_id:this.customer_id,az_id:this.az_id,billing_method:this.billing_method||"0",ecs_ids:this.multiple_selection_id,is_gpu:this.is_gpu,ecs_goods_info:{cpu:t.cpu,ram:t.ram,gpu:t.gpu},billing_info:t.billing_info[t.ecs_goods_id]},e.next=5,b["a"].change_config_price(s);case 5:i=e.sent,"Success"===i.code&&(this.total_price=i.data.price_symbol+i.data.total_price.toFixed(2)+"/"+i.data.price_unit);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnUpdateSpec",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.$refs.update_spec.FnSubmit(),!s.flag){e.next=10;break}return t.billing_info=s.spec_info.billing_info[s.spec_info.ecs_goods_id],t.is_gpu=this.is_gpu,t.ecs_info={ecs_goods_info:{ecs_goods_id:s.spec_info.ecs_goods_id,gic_goods_id:t.billing_info.gic_goods_id,cpu:s.spec_info.cpu,ram:s.spec_info.ram,gpu:s.spec_info.gpu}},e.next=7,b["a"].update_spec(t);case 7:i=e.sent,"Success"===i.code&&this.$message.success(i.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.FnClose();case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnGetOsInfo",value:function(e){this.os_info=e}},{key:"FnGetDiskBillingInfo",value:function(e){this.disk_billing_info=e}},{key:"FnChangeSystem",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.billing_method){e.next=2;break}return e.abrupt("return");case 2:return s={customer_id:this.customer_id,az_id:this.az_id,billing_method:this.billing_method||"0",is_gpu:this.is_gpu,ecs_ids:this.multiple_selection_id,ebs_goods_info:{},billing_info:this.disk_billing_info[t.ecs_goods_id]},this.is_gpu?(s.ebs_goods_info["local_disk-IOPS"]=t.iops,s.ebs_goods_info["local_disk-space"]=t.storage_space,s.ebs_goods_info["local_disk-throughput"]=t.handling_capacity):(s.ebs_goods_info["iops"]=t.iops,s.ebs_goods_info["storage_space"]=t.storage_space,s.ebs_goods_info["handling_capacity"]=t.handling_capacity),e.next=6,b["a"].change_system_price(s);case 6:i=e.sent,"Success"===i.code&&(this.total_price=i.data.price_symbol+i.data.total_price.toFixed(2)+"/"+i.data.price_unit);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnUpdateSystem",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,i,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.$refs.update_os.FnSubmit(),i=this.$refs.update_disk.FnSubmit(),n=this.$refs.reset_pwd.FnSubmit(),!(s.flag&&i.flag&&n.flag)){e.next=17;break}return t.os_id=s.os_info.os_id,t.os_type=s.os_info.os_type,t.username=s.os_info.username,t.disk_info={system_disk:{ecs_goods_id:i.system_disk.ecs_goods_id,ebs_goods_id:i.system_disk.ecs_goods_id,gic_goods_id:null===(r=this.disk_billing_info[i.system_disk.ecs_goods_id])||void 0===r?void 0:r.gic_goods_id,goods_name:i.system_disk.disk_name,disk_feature:i.system_disk.disk_feature,disk_type:i.system_disk.disk_type,disk_size:i.system_disk.disk_size,storage_space:i.system_disk.disk_size,handling_capacity:i.system_disk.handling_capacity,iops:i.system_disk.iops,is_follow_delete:i.system_disk.is_follow_delete,origin_disk_size:this.origin_disk_size}},"local"===i.system_disk.disk_feature&&(t.disk_info.system_disk["local_disk-IOPS"]=t.disk_info.system_disk["iops"],t.disk_info.system_disk["local_disk-space"]=t.disk_info.system_disk["storage_space"],t.disk_info.system_disk["local_disk-throughput"]=t.disk_info.system_disk["handling_capacity"]),t.password=n.password,t.billing_info=this.disk_billing_info,t.is_gpu=this.is_gpu,e.next=14,b["a"].update_system(t);case 14:a=e.sent,"Success"===a.code&&this.$message.success(a.msg||"成功下发 ".concat(this.operate_title," 任务！")),this.FnClose();case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnGetEcsPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.ecs_list_price={},e.next=3,b["a"].each_resource_price({customer_id:this.customer_id,az_id:this.az_id,billing_method:"0",resource_ids:this.multiple_selection_id,resource_type:"ecs"});case 3:if(t=e.sent,"Success"===t.code)for(s in t.data.total_price)this.$set(this.ecs_list_price,s,t.data.price_symbol+t.data.total_price[s].toFixed(2)+"/"+t.data.price_unit);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnOpenBill",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={resource_ids:t.ecs_ids,customer_id:t.customer_id,billing_method:t.billing_method||"0",resource_type:"ecs"},e.next=3,b["a"].start_charge(s);case 3:i=e.sent,"Success"===i.code&&this.$message.success("成功开启计费！"),this.FnClose();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnToVnc",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var s,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b["a"].get_vnc_url({ecs_id:t});case 2:s=e.sent,"Success"===s.code&&(i=s.data.vnc_info.split("/vnc_lite.html"),n="".concat(i[0],"/vnc_lite.html?op-token=").concat(this.$store.state.token,"?path=/?id=").concat(t),window.open(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addCommon",value:function(e){this.FnClearTimer(),this.ecs_info=e,this.common_visible=!0}},{key:"watch_common_visible",value:function(e){e||this.FnGetList()}},{key:"FnClose",value:function(){this.show_operate_dialog=!1,this.default_operate_type="",this.total_price="",this.FnGetList()}},{key:"FnToDetail",value:function(e){this.detail_id=e,this.detail_visible=!0}},{key:"FnToRecord",value:function(e){this.record_id=e,this.record_visible=!0}},{key:"FnToMonitor",value:function(e){this.$router.push("/instance/monitor/"+e)}},{key:"closeRecord",value:function(){this.record_visible=!1}},{key:"closeDetail",value:function(){this.detail_visible=!1}},{key:"FnSetTimer",value:function(){var e=this;this.timer&&this.FnClearTimer(),this.timer=setTimeout((function(){e.FnGetList(!1)}),5e3)}},{key:"FnClearTimer",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"FnGetStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b["a"].get_status_list();case 2:if(t=e.sent,"Success"===t.code)for(s in this.ecs_status_list=[],t.data)this.ecs_status_list.push({text:t.data[s],value:s});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_az_list",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["a"].get_region_az_list({employee_no:this.$store.state.employee_no,user_name:this.$store.state.login_name});case 2:t=e.sent,"Success"===t.code&&t.data.forEach((function(e){e.region_list.forEach((function(e){}))}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnGetCateGoryList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b["a"].get_family_data();case 2:t=e.sent,"Success"===t.code&&(this.ecs_goods_name_list=t.data.spec_family_list.map((function(e){return{value:e.spec_family_id,text:e.name}})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnExport",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,b["a"].export_list(Object.assign({billing_method:""==this.search_billing_method?"no":this.search_billing_method,op_source:this.search_op_source,spec_family_ids:this.search_ecs_goods_name.join(",")},this.search_reqData));case 3:t=e.sent,t&&(this.loading=!1,s=new Blob([t],{type:"application/octet-stream"}),i=new FileReader,i.readAsText(s,"utf-8"),i.onload=function(){var e=document.createElement("a");e.href=window.URL.createObjectURL(s),e.download="云服务器列表.xlsx",e.click(),window.URL.revokeObjectURL(e.href)});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){for(var e in this.operate_auth=this.$store.state.auth_info[this.$route.name],this.FnGetStatus(),this.get_az_list(),this.FnGetCateGoryList(),this.billing_method_relation)this.billing_method_list.push({value:e,text:this.billing_method_relation[e]});this.$route.query.host_id||this.FnSearch()}},{key:"beforeDestroy",value:function(){this.isComponentDestroying=!0,this.FnClearTimer()}}]),s}(d["e"]);Object(p["a"])([Object(d["f"])("$store.state.pod_id")],j.prototype,"watch_pod",null),Object(p["a"])([Object(d["f"])("$store.state.az_id")],j.prototype,"watch_az",null),Object(p["a"])([Object(d["f"])("common_visible")],j.prototype,"watch_common_visible",null),j=Object(p["a"])([Object(d["a"])({components:{LabelBlock:h["a"],actionBlock:f["a"],Record:y["a"],SvgIcon:g["a"],MarkTip:O["a"]}})],j);var x=j,S=x,F=(s("ccef"),s("a14a"),s("2877")),T=Object(F["a"])(S,i,n,!1,null,"4324f175",null);t["default"]=T.exports},"1b7c":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-tooltip",{attrs:{content:e.content,placement:e.placement,effect:e.effect,"popper-class":"tooltip-class"},scopedSlots:e._u([{key:"content",fn:function(){return[e._t("content")]},proxy:!0}],null,!0)},[s("el-button",{attrs:{type:"text"}},[s("svg-icon",{attrs:{icon:"info",viewBox:"0 0 18 18"}})],1)],1)},n=[],r=s("bee2"),a=s("d4ec"),o=s("262e"),c=s("2caf"),_=s("9ab4"),u=s("1b40"),l=s("3673"),p=function(e){Object(o["a"])(s,e);var t=Object(c["a"])(s);function s(){return Object(a["a"])(this,s),t.apply(this,arguments)}return Object(r["a"])(s)}(u["e"]);Object(_["a"])([Object(u["c"])({default:""})],p.prototype,"content",void 0),Object(_["a"])([Object(u["c"])({default:"right"})],p.prototype,"placement",void 0),Object(_["a"])([Object(u["c"])({default:"light"})],p.prototype,"effect",void 0),p=Object(_["a"])([Object(u["a"])({components:{svgIcon:l["a"]}})],p);var d=p,h=d,f=(s("b4f2"),s("2877")),g=Object(f["a"])(h,i,n,!1,null,null,null);t["a"]=g.exports},"3eb7":function(e,t,s){"use strict";s("4d91")},"3f8d":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return o}));var i={building:"创建中",running:"运行中",restarting:"重启中",shutting_down:"关机中",shutdown:"已关机",starting_up:"开机中",deleting:"删除中",deleted:"已删除",destroying:"销毁中",destroy:"已销毁",updating:"更新中",error:"错误",recovering:"恢复中",failed:"创建失败"},n={start_up_ecs:{auth:["shutdown"],msg:"已选实例状态需为已关机！",label:"开 机"},shutdown_ecs:{auth:["running"],msg:"已选实例需为运行中！",label:"关 机"},restart_ecs:{auth:["running"],msg:"已选实例状态需为运行中！",label:"重 启"},delete_ecs:{auth:["running","shutdown","error"],msg:"已选实例状态需为已关机或运行中或错误！",label:"逻辑删除"},recover_ecs:{auth:["deleted"],msg:"已选实例状态需为已删除！",label:"恢 复"},destroy_ecs:{auth:["deleted","failed"],msg:"已选实例状态需为已删除或创建失败！",label:"销 毁"},update_spec:{auth:["shutdown"],msg:"已选实例状态需为已关机！",label:"更换实例规格"},update_system:{auth:["shutdown"],msg:"已选实例状态需为已关机！",label:"更换操作系统"},reset_pwd:{auth:["running"],msg:"已选实例状态需为运行中！",label:"更换密码"},open_bill:{auth:["running","shutdown"],msg:"已选实例状态需为运行中或已关机！",label:"开启计费"},net_set:{auth:["running"],msg:"已选实例状态需为运行中！",label:"网络设置"}},r={start_up_host:{power:["shutdown"],host:["offline","online","exception","maintenance"],msg:"已选主机需为在线、离线、异常或维护状态",label:"开机"},shutdown_host:{power:["running"],host:["maintenance"],vm:1,msg:"已选主机需为维护状态",msg2:"操作关机前，请确保物理机上无云主机运行",label:"关机"},restart_host:{power:["running"],host:["offline","online","maintenance"],msg:"已选主机需为在线、离线或维护状态",label:"重启"},online_maintenance:{power:[],host:["online","exception"],msg:"已选主机需为在线状态",label:"在线维护"},maintenance:{power:[],host:[],msg:"",label:"设置维护"},offline_maintenance:{power:[],host:["offline","online","exception"],vm:1,msg:"已选主机需为在线或离线状态且已选主机上不能有虚拟机运行",label:"离线维护"},finish:{power:[],host:["maintenance","online_maintenance","offline_maintenance"],msg:"已选主机需为维护中状态",label:"完成维护"},shelves:{power:[],host:[],vm:1,msg:"已选主机上不能有虚拟机运行",label:"下架"},disperse:{power:["running"],host:["online"],msg:"已选主机需为在线状态",label:"驱散"},out_of_band:{power:[],host:["offline","online"],msg:"已选主机需为在线或离线状态",label:"进入带外管理"},migrate:{power:["running"],host:["online","storage_error","crash"],msg:"已选主机需为在线、存储异常或宕机状态",label:"迁移"},lock:{power:[],host:[],msg:"",label:"锁定"},unlock:{power:[],host:["lock"],msg:"已选主机需为锁定状态",label:"解锁"},unstore_exception:{power:[],host:["storage_error"],msg:"已选主机需为存储异常状态",label:"解除存储异常"},service:{power:[],host:[],msg:"",label:"服务更新"},rollback:{power:[],host:[],label:"回滚"},physical_detail:{power:[],host:[],msg:"",label:"详情"},data_clear:{power:[],host:["crash_clear"],msg:"",label:"数据清理同步"},down_recover:{power:[],host:["crash_recover"],msg:"",label:"宕机恢复"},sign:{power:[],host:[],msg:"",label:"设备标记"},upload:{power:[],host:[],msg:"",label:"导入"},under_sync:{power:[],host:[],msg:"",label:"底层同步"},cheat:{power:[],host:[],msg:"",label:"欺骗器管理"},business_test:{power:[],host:[],msg:"",label:"业务测试"},record:{power:[],host:[],msg:"",label:"操作记录"},resource:{power:[],host:[],msg:"",label:"分配资源"},remark:{power:[],host:[],msg:"",label:"编辑备注"},add_cluster:{power:[],host:["online"],msg:"已选主机需为在线状态",label:"加入集群"},change_cluster:{power:[],host:[],msg:"",label:"更换集群"},remove_cluster:{power:[],host:["maintenance"],mag:"",label:"移出集群"},set_label:{power:[],host:[],msg:"",label:"添加标签"},set_prepar_host:{power:[],host:["online"],msg:"已选主机需为在线状态",label:"设为备机"},set_resource_pools:{power:[],host:["online"],msg:"",label:"设为资源池"}};t["a"]={getInsOperateAuth:function(e){return n[e]}};var a=function(e){return i[e]},o=function(e){return r[e]}},"408a":function(e,t,s){var i=s("e330");e.exports=i(1..valueOf)},"4d91":function(e,t,s){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,s){var i=s("e330"),n=s("1d80"),r=s("577e"),a=s("5899"),o=i("".replace),c="["+a+"]",_=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),l=function(e){return function(t){var s=r(n(t));return 1&e&&(s=o(s,_,"")),2&e&&(s=o(s,u,"")),s}};e.exports={start:l(1),end:l(2),trim:l(3)}},"748e":function(e,t,s){},9074:function(e,t,s){"use strict";var i=s("81a9"),n=s("bff7");t["a"]={get_customer_name:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/get_customer_name/",e))},get_region_az_list:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/region_az_info/",e))},get_net_list:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/net_info/",e))},get_all_cpu_ram:function(){return Object(i["a"])(Object(n["b"])("GET","/ecs/ram_cpu_list/"))},get_category_list:function(e){return Object(i["a"])(Object(n["b"])("GET","/ecs/ecs_category_list/",e))},ecs_family_info:function(e){return Object(i["a"])(Object(n["b"])("GET","/ecs/ecs_family_info/",e))},get_os_list:function(e){return Object(i["a"])(Object(n["b"])("POST","/img/image_info/",e))},get_price:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/get_price/",e))},create_instance:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/create_ecs/",e))},get_ecs_limit:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/get_ecs_limit/",e))},get_ram_cpu_price_list:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/ecs_spec_attach_price/",e))},difference_price:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/ecs_difference_price/",e))},change_configure_limit:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/change_configure_limit/",e))}}},"98c9":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box"},[s("div",{staticClass:"left-label",class:{"is-required":e.is_required}},[e._v(e._s(e.label))]),s("div",{staticClass:"right-content"},[e._t("default")],2)])},n=[],r=s("bee2"),a=s("d4ec"),o=s("262e"),c=s("2caf"),_=s("9ab4"),u=s("1b40"),l=function(e){Object(o["a"])(s,e);var t=Object(c["a"])(s);function s(){return Object(a["a"])(this,s),t.apply(this,arguments)}return Object(r["a"])(s)}(u["e"]);Object(_["a"])([Object(u["c"])({default:""})],l.prototype,"label",void 0),Object(_["a"])([Object(u["c"])({default:!1})],l.prototype,"is_required",void 0),l=Object(_["a"])([Object(u["a"])({})],l);var p=l,d=p,h=(s("3eb7"),s("2877")),f=Object(h["a"])(d,i,n,!1,null,"3b58a324",null);t["a"]=f.exports},a14a:function(e,t,s){"use strict";s("d891")},a15b:function(e,t,s){"use strict";var i=s("23e7"),n=s("e330"),r=s("44ad"),a=s("fc6a"),o=s("a640"),c=n([].join),_=r!=Object,u=o("join",",");i({target:"Array",proto:!0,forced:_||!u},{join:function(e){return c(a(this),void 0===e?",":e)}})},a9e3:function(e,t,s){"use strict";var i=s("83ab"),n=s("da84"),r=s("e330"),a=s("94ca"),o=s("6eeb"),c=s("1a2d"),_=s("7156"),u=s("3a9b"),l=s("d9b5"),p=s("c04e"),d=s("d039"),h=s("241c").f,f=s("06cf").f,g=s("9bf2").f,m=s("408a"),b=s("58a8").trim,v="Number",y=n[v],O=y.prototype,w=n.TypeError,k=r("".slice),j=r("".charCodeAt),x=function(e){var t=p(e,"number");return"bigint"==typeof t?t:S(t)},S=function(e){var t,s,i,n,r,a,o,c,_=p(e,"number");if(l(_))throw w("Cannot convert a Symbol value to a number");if("string"==typeof _&&_.length>2)if(_=b(_),t=j(_,0),43===t||45===t){if(s=j(_,2),88===s||120===s)return NaN}else if(48===t){switch(j(_,1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+_}for(r=k(_,2),a=r.length,o=0;o<a;o++)if(c=j(r,o),c<48||c>n)return NaN;return parseInt(r,i)}return+_};if(a(v,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var F,T=function(e){var t=arguments.length<1?0:y(x(e)),s=this;return u(O,s)&&d((function(){m(s)}))?_(Object(t),s,T):t},z=i?h(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),C=0;z.length>C;C++)c(y,F=z[C])&&!c(T,F)&&g(T,F,f(y,F));T.prototype=O,O.constructor=T,o(n,v,T)}},b4f2:function(e,t,s){"use strict";s("0692")},b680:function(e,t,s){"use strict";var i=s("23e7"),n=s("da84"),r=s("e330"),a=s("5926"),o=s("408a"),c=s("1148"),_=s("d039"),u=n.RangeError,l=n.String,p=Math.floor,d=r(c),h=r("".slice),f=r(1..toFixed),g=function(e,t,s){return 0===t?s:t%2===1?g(e,t-1,s*e):g(e*e,t/2,s)},m=function(e){var t=0,s=e;while(s>=4096)t+=12,s/=4096;while(s>=2)t+=1,s/=2;return t},b=function(e,t,s){var i=-1,n=s;while(++i<6)n+=t*e[i],e[i]=n%1e7,n=p(n/1e7)},v=function(e,t){var s=6,i=0;while(--s>=0)i+=e[s],e[s]=p(i/t),i=i%t*1e7},y=function(e){var t=6,s="";while(--t>=0)if(""!==s||0===t||0!==e[t]){var i=l(e[t]);s=""===s?i:s+d("0",7-i.length)+i}return s},O=_((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!_((function(){f({})}));i({target:"Number",proto:!0,forced:O},{toFixed:function(e){var t,s,i,n,r=o(this),c=a(e),_=[0,0,0,0,0,0],p="",f="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return l(r);if(r<0&&(p="-",r=-r),r>1e-21)if(t=m(r*g(2,69,1))-69,s=t<0?r*g(2,-t,1):r/g(2,t,1),s*=4503599627370496,t=52-t,t>0){b(_,0,s),i=c;while(i>=7)b(_,1e7,0),i-=7;b(_,g(10,i,1),0),i=t-1;while(i>=23)v(_,1<<23),i-=23;v(_,1<<i),b(_,1,1),v(_,2),f=y(_)}else b(_,0,s),b(_,1<<-t,0),f=y(_)+d("0",c);return c>0?(n=f.length,f=p+(n<=c?"0."+d("0",c-n)+f:h(f,0,n-c)+"."+h(f,n-c))):f=p+f,f}})},ccef:function(e,t,s){"use strict";s("748e")},d81d:function(e,t,s){"use strict";var i=s("23e7"),n=s("b727").map,r=s("1dde"),a=r("map");i({target:"Array",proto:!0,forced:!a},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},d891:function(e,t,s){},e527:function(e,t,s){"use strict";var i=s("81a9"),n=s("bff7"),r=s("4328"),a=s.n(r);t["a"]={get_instance_list:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/ecs_list/",e))},operate_instance:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/operate/",e))},delete_instance:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/delete/",e))},recover_instance:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/recover/",e))},destroy_instance:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/destroy/",e))},get_status_list:function(){return Object(i["a"])(Object(n["b"])("GET","/ecs/ecs_status_list/"))},get_family_data:function(){return Object(i["a"])(Object(n["b"])("GET","/ecs/get_family_data/"))},reset_password:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/ecs_reset_password/",e))},update_spec:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/ecs_change_configure/",e))},update_system:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/ecs_change_system/",e))},get_usage_ip:function(e){return Object(i["a"])(Object(n["b"])("GET","/ecs/get_deleted_ecs_ip/",e))},get_vnc_url:function(e){return Object(i["a"])(Object(n["b"])("GET","/ecs/vnc_info/",e))},start_charge:function(e){return Object(i["a"])(Object(n["b"])("POST","/resource/start_charge/",e))},change_config_price:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/change_config_price/",e))},change_system_price:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/change_system_price/",e))},each_resource_price:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/each_resource_price/",e))},add_common_mirror:function(e){return Object(i["a"])(Object(n["b"])("POST","/img/create_pub_image_by_ecs/",e))},set_net:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/ecs_set_base_nic/",e))},get_default_dns:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/az_default_dns/",e))},mount_gpu_card:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/instance_gpu_card/",e))},update_gpu_status:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/update_gpu_status/",e))},export_list:function(e){return Object(i["a"])({method:"GET",url:"/ecs_business/v1/ecs/ecs_list_download/",params:e,paramsSerializer:function(e){return a.a.stringify(e)},responseType:"blob"})},get_tag_list:function(){return Object(i["a"])(Object(n["b"])("GET","/ecs/get_tag_list/"))},get_rescue_image_list:function(e){return Object(i["a"])(Object(n["b"])("GET","/ecs/get_rescue_image_list/",e))},enter_rescue:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/enter_rescue/",e))},exit_rescue:function(e){return Object(i["a"])(Object(n["b"])("POST","/ecs/exit_rescue/",e))}}}}]);
//# sourceMappingURL=chunk-75dfc524.1747715207673.js.map