(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-61c2492a"],{"0843":function(e,t,r){},"4d8e":function(e,t,r){"use strict";var s=r("81a9"),a=r("bff7");t["a"]={get_pod_ecs_field(){return Object(s["a"])(Object(a["b"])("GET","/pod/get_pod_ecs_field/"))},get_vm_status_list(){return Object(s["a"])(Object(a["b"])("GET","/ecs/ecs_status_list/"))},get_vnc_url(e){return Object(s["a"])(Object(a["b"])("GET","/ecs/vnc_info/",e))},update_gpu_status(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/update_gpu_status/",e))},each_resource_price(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/each_resource_price/",e))},get_pod_ecs_list(e){return Object(s["a"])(Object(a["b"])("GET","/pod/get_pod_ecs_list/",e))},change_config_price(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/change_config_price/",e))},change_system_price(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/change_system_price/",e))},operate_instance(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/operate/",e))},delete_instance(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/delete/",e))},destroy_instance(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/destroy/",e))},reset_password(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/ecs_reset_password/",e))},update_spec(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/ecs_change_configure/",e))},update_system(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/ecs_change_system/",e))},start_charge(e){return Object(s["a"])(Object(a["b"])("POST","/resource/start_charge/",e))},mount_gpu_card(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/instance_gpu_card/",e))},get_family_data(){return Object(s["a"])(Object(a["b"])("GET","/ecs/get_family_data/"))},get_product_source(){return Object(s["a"])(Object(a["b"])("GET","/ecs/get_product_source/"))},enter_rescue(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/enter_rescue/",e))},exit_rescue(e){return Object(s["a"])(Object(a["b"])("POST","/ecs/exit_rescue/",e))},get_security_info(e){return Object(s["a"])(Object(a["b"])("GET","/ecs/security_info/",e))}}},"7f2d":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticStyle:{height:"100%"}},[t("div",{staticStyle:{"margin-top":"-76px"}},[t("back-header-new",{attrs:{title:"安全组详情"}})],1),t("div",{staticClass:"box"},[t("div",{staticClass:"left-box"},[t("div",[e._v("已关联安全组")]),t("el-divider"),t("div",[t("el-table",{attrs:{data:e.security_list}},[t("el-table-column",{attrs:{label:"安全组名称",prop:"name",width:"220px"}}),t("el-table-column",{attrs:{label:"优先级",prop:"priority",sortable:""}})],1)],1)],1),t("div",{staticClass:"right-box"},[t("el-card",{staticClass:"safe-rule"},[t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"入方向",name:"enter"}},[t("el-table",{attrs:{data:e.enterList,"span-method":e.objectSpanMethod("ingress"),"row-class-name":e.rowClassName},on:{"cell-mouse-enter":e.handleCellMouseEnter,"cell-mouse-leave":e.handleCellMouseLeave}},[t("el-table-column",{attrs:{label:"安全组名称",prop:"name"}}),t("el-table-column",{attrs:{label:"优先级",prop:"priority"}}),t("el-table-column",{attrs:{label:"授权策略",prop:"policy"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(e.ruleInfo.strategyObj[r.row.status]))])]}}])}),t("el-table-column",{attrs:{label:"协议类型",prop:"protocol"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(e.ruleInfo.agreement[r.row.protocol]))])]}}])}),t("el-table-column",{attrs:{label:"端口范围",prop:""},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(e.ruleInfo.portRange[r.row.port]?e.ruleInfo.portRange[r.row.port]:r.row.port))])]}}])}),t("el-table-column",{attrs:{label:"授权对象",prop:"cidrIp"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(e.ruleInfo.authObj[r.row.cidr_block]?e.ruleInfo.authObj[r.row.cidr_block]:r.row.cidr_block))])]}}])}),t("el-table-column",{attrs:{label:"描述",prop:"policy_description"}})],1)],1),t("el-tab-pane",{attrs:{label:"出方向",name:"out"}},[t("el-table",{attrs:{data:e.outList,"span-method":e.objectSpanMethod("egress"),"row-class-name":e.rowClassName},on:{"cell-mouse-enter":e.handleCellMouseEnter,"cell-mouse-leave":e.handleCellMouseLeave}},[t("el-table-column",{attrs:{label:"安全组名称",prop:"name"}}),t("el-table-column",{attrs:{label:"优先级",prop:"priority"}}),t("el-table-column",{attrs:{label:"授权策略",prop:"policy"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(e.ruleInfo.strategyObj[r.row.status]))])]}}])}),t("el-table-column",{attrs:{label:"协议类型",prop:"protocol"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(e.ruleInfo.agreement[r.row.protocol]))])]}}])}),t("el-table-column",{attrs:{label:"端口范围",prop:""},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(e.ruleInfo.portRange[r.row.port]?e.ruleInfo.portRange[r.row.port]:r.row.port))])]}}])}),t("el-table-column",{attrs:{label:"授权对象",prop:"cidrIp"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(e.ruleInfo.authObj[r.row.cidr_block]?e.ruleInfo.authObj[r.row.cidr_block]:r.row.cidr_block))])]}}])}),t("el-table-column",{attrs:{label:"描述",prop:"policy_description"}})],1)],1)],1)],1)],1)])])},a=[],c=(r("14d9"),r("e9f5"),r("7d54"),r("ab43"),r("9ab4")),n=r("1b40"),o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"header"},[t("div",[t("span",[e._v(e._s(e.title))]),e._t("left")],2),t("div",[e._t("default"),t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.FnBack}},[e._v("返回")])],2)])])},l=[];let i=class extends n["e"]{FnBack(){this.back_url?this.$router.push(this.back_url):this.$router.go(-1)}};Object(c["a"])([Object(n["c"])({default:""})],i.prototype,"title",void 0),Object(c["a"])([Object(n["c"])({default:""})],i.prototype,"back_url",void 0),i=Object(c["a"])([Object(n["a"])({})],i);var u=i,p=u,b=(r("a824"),r("2877")),_=Object(b["a"])(p,o,l,!1,null,"72a82682",null),d=_.exports,f=r("4d8e");let h=class extends n["e"]{constructor(){super(...arguments),this.activeName="enter",this.security_list=[],this.enterList=[],this.outList=[],this.currentId=0,this.ruleInfo={strategyObj:{true:"允许",false:"拒绝"},agreement:{tcp:"自定义TCP",udp:"自定义UDP",icmp:"全部ICMP"},portRange:{"22/22":"SSH(22)","23/23":"telnet(23)","80/80":"HTTP(80)","443/443":"HTTPS(443)","1521/1521":"Oracle(1521)","3306/3306":"MySQL(3306)","3389/3389":"RDP(3389)","6379/6379":"Redis(6379)","1/65535":"全部(1/65535)"},authObj:{"0.0.0.0/0":"0.0.0.0/0","10.0.0.0/8":"10.0.0.0/8","172.16.0.0/12":"172.16.0.0/12","192.168.0.0/16":"192.168.0.0/16"}}}created(){this.get_security_group()}async get_security_group(){const e=await f["a"].get_security_info({ecs_id:this.$route.query.ecs_id});"Success"===e.code&&(this.security_list=e.data.sg_list,this.init_list())}init_list(){this.enterList=[],this.outList=[],this.security_list.map(e=>{const t=e.ingress.map(t=>({id:e.id,name:e.name,...t}));t.length&&this.enterList.push(...t)}),this.security_list.map(e=>{const t=e.egress.map(t=>({id:e.id,name:e.name,...t}));t.length&&this.outList.push(...t)})}countRules(e){const t=new Map;return e.forEach(e=>{const r=t.get(e.id)||0;t.set(e.id,r+1)}),t}objectSpanMethod(e){return({row:t,column:r,rowIndex:s,columnIndex:a})=>{if(0===a){const r=t.id,a="ingress"===e?this.countRules(this.enterList):this.countRules(this.outList),c=a.get(r)||1,n=s-("ingress"===e?this.enterList:this.outList).findIndex(e=>e.id===r);if(c>1&&0===n)return{rowspan:c,colspan:1};if(c>1&&n>0)return{rowspan:0,colspan:0}}}}handleClick(){}handleCellMouseEnter(e,t,r,s){this.currentId=e.id}handleCellMouseLeave(){this.currentId=-1}rowClassName({row:e}){return e.id===this.currentId?"current-hover-row":""}};h=Object(c["a"])([Object(n["a"])({components:{BackHeaderNew:d}})],h);var O=h,m=O,j=(r("ece9"),Object(b["a"])(m,s,a,!1,null,"4214cc8b",null));t["default"]=j.exports},a824:function(e,t,r){"use strict";r("0843")},ab43:function(e,t,r){"use strict";var s=r("23e7"),a=r("c65b"),c=r("59ed"),n=r("825a"),o=r("46c4"),l=r("c5cc"),i=r("9bdd"),u=r("2a62"),p=r("f99f"),b=r("c430"),_=!b&&p("map",TypeError),d=l((function(){var e=this.iterator,t=n(a(this.next,e)),r=this.done=!!t.done;if(!r)return i(e,this.mapper,[t.value,this.counter++],!0)}));s({target:"Iterator",proto:!0,real:!0,forced:b||_},{map:function(e){n(this);try{c(e)}catch(t){u(this,"throw",t)}return _?a(_,this,e):new d(o(this),{mapper:e})}})},ece9:function(e,t,r){"use strict";r("fc46")},fc46:function(e,t,r){}}]);
//# sourceMappingURL=chunk-61c2492a.1751615839339.js.map