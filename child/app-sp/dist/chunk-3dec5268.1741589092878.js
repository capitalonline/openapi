(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-3dec5268","chunk-30f3228e"],{"039b":function(t,e,r){"use strict";var s=r("81a9"),n=r("bff7");e["a"]={get_snapshot_list:function(t){return Object(s["a"])(Object(n["b"])("GET","/snapshot/snapshot_list/",t))},get_snapshot_chains_list:function(t){return Object(s["a"])(Object(n["b"])("GET","/snapshot/snapshot_chains_list/",t))},chains_detail:function(t){return Object(s["a"])(Object(n["b"])("GET","/snapshot/snapshot_chains_detail/",t))},record:function(t){return Object(s["a"])(Object(n["b"])("GET","/snapshot/history_record/",t))},get_monitor_id:function(t){return Object(s["a"])(Object(n["b"])("GET","/snapshot/snapshot_disk_ids/",t))},get_snapshot_info:function(t){return Object(s["a"])(Object(n["i"])("POST","/snapshot/snapshot_use_monitor",t))}}},1116:function(t,e,r){"use strict";r("cb4f")},1477:function(t,e,r){"use strict";var s=r("81a9"),n=r("bff7");e["a"]={get_host_list:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/get_host_list/",t))},get_room_list:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/machine_room_list/",t))},get_status_list:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/host_status_list/",t))},external_management:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/external_management/",t))},migrate:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/migration_operation/",t))},disperse:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/disperse_operation/",t))},record:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/host_operation_record/",t))},recommended_host:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/recommended_host/",t))},host_maintenance:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/host_maintenance/",t))},finish_maintenance:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/host_finish_maintenance/",t))},shelves:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/host_off_shelves/",t))},get_detail_overview:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/host_main_details/",t))},get_detail_storage:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/host_disk/",t))},down:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/host_list_download/",t))},host_operate:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/operate/",t))},host_import:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/import/",t))},get_host_attribution:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/get_host_attribution/",t))},set_host_attribution:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/set_host_attribution/",t))},get_host_type:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/get_host_config/",t))},update_attribute:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/set_host_config/",t))},getCustomerList:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/get_customer_list/",t))},getFamilyList:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/get_family_list/",t))},finish_validate:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/verification_finish/",t))},get_host_recycle_department:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/get_host_recycle_department/",t))},get_host_list_field:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/get_host_list_field/",t))},get_task_list:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/business_test_task/",t))},create_test_task:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/create_test_task/",t))},get_host_filter_item:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/get_host_filter_item/",t))},set_remark:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/set_host_remark/",t))},set_flag:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/set_host_tag/",t))},update_ecs_info:function(t){return Object(s["a"])(Object(n["d"])("POST","/ecs/update_ecs_info/",t))},crash_clear:function(t){return Object(s["a"])(Object(n["b"])("POST","/host/crash_clear/",t))},crash_recover:function(t){return Object(s["a"])(Object(n["b"])("POST","/host/crash_recover/",t))},set_lock:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/host_lock/",t))},set_unlock:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/host_unlock/",t))},set_maintenance:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/host_maintenance/",t))},get_maintenance_record:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/host_maintenance_record/",t))},get_lock_record:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/host_lock_record/",t))},recover_storage_error:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/recover_storage_error/",t))},agent_update:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/handle_host_agent_update/",t))},agent_rollback:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/handle_host_agent_rollback/",t))},set_prepare_host:function(t){return Object(s["a"])(Object(n["d"])("POST","/host/set_prepare_host/",t))},get_ovs_version:function(t){return Object(s["a"])(Object(n["d"])("GET","/host/ovs_version_list/",t))}}},"268f":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{title:"操作记录",visible:t.visible,width:"60%","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e},close:t.back}},[r("div",[r("el-dialog",{attrs:{title:"响应信息",visible:t.res_visible,width:"60%","destroy-on-close":!0,"append-to-body":"","custom-class":"response-data"},on:{"update:visible":function(e){t.res_visible=e},close:t.clost_res}},[r("div",[t._v(t._s(t.response))])])],1),r("div",[r("action-block",{attrs:{search_option:["physical","message"].includes(t.type)?Object.assign({},t.search):t.search},on:{"fn-search":t.fn_search}}),["physical","message"].includes(t.type)?r("div",{staticClass:"icon m-bottom10"},[r("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[r("el-button",{attrs:{type:"text"},on:{click:t.getOperateRecordList}},[r("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1):t._e(),r("el-table",{staticClass:"record-table",attrs:{data:t.record_list,border:""}},[r("el-table-column",{attrs:{prop:"oper_time",label:"操作时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.oper_time?t.moment(e.row.oper_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),r("el-table-column",{attrs:{prop:"oper_type_display",label:"操作内容"}}),r("el-table-column",{attrs:{prop:"status_display",label:"状态"}}),["message","physical"].includes(t.type)?r("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.response?r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.view(e.row.response)}}},[t._v("查看")]):r("span",[t._v("-")])]}}])}):r("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.result?r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.view(e.row.result)}}},[t._v("查看")]):r("span",[t._v("-")])]}}],null,!1,79404134)}),r("el-table-column",{attrs:{prop:"finish_time",label:"完成时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.finish_time?t.moment(e.row.finish_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),r("el-table-column",{attrs:{prop:"oper_user",label:"nas"===t.type?"操作用户":"用户名"}}),["physical","message"].includes(t.type)?t._e():r("el-table-column",{attrs:{prop:"flag_display",label:"操作标识"}})],1),r("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[20,50,100],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:t.back}},[t._v("返回")])],1)],1)])],1)},n=[],a=r("5530"),i=r("1da1"),o=r("d4ec"),c=r("bee2"),l=r("262e"),u=r("2caf"),_=(r("96cf"),r("ac1f"),r("841c"),r("caad"),r("9ab4")),d=r("1b40"),p=r("c811"),b=r("d772"),h=r("1477"),f=r("e4d0"),m=r("039b"),g=r("fc43"),v=r("c1df"),O=r.n(v),y=r("8ce4"),j=r("3673"),k=function(t){Object(l["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.state_list=[{type:"",label:"全部"},{type:"doing",label:"执行中"},{type:"success",label:"成功"},{type:"failed",label:"失败"}],t.search={state:{list:t.state_list,placeholder:"请选择状态"},content:{placeholder:"请输入操作内容"}},t.record_list=[],t.current=1,t.size=20,t.total=0,t.search_data={},t.moment=O.a,t.response="",t.res_visible=!1,t}return Object(c["a"])(r,[{key:"created",value:function(){this.fn_search()}},{key:"fn_search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.search_data=t,this.getOperateRecordList()}},{key:"getOperateRecordList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,s,n,i,o,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=this.search_data,s="physical"!==this.type?{task_type:r.content,cloud_id:this.record_id}:{content:r.content,cloud_id:this.record_id,cloud_type:"host"},n=Object(a["a"])({status:r.state||"",page_size:this.size,page_index:this.current},s),"physical"!==this.type){t.next=9;break}return t.next=6,h["a"].record(Object(a["a"])({},n));case 6:e=t.sent,t.next=30;break;case 9:if("message"!==this.type){t.next=15;break}return t.next=12,f["a"].get_pub_operate_record({os_id:this.record_id,status:r.state||"",content_type:r.content,page_size:this.size,page_index:this.current});case 12:e=t.sent,t.next=30;break;case 15:if("snapshot"!==this.type){t.next=21;break}return t.next=18,m["a"].record({cloud_id:this.record_id,cloud_type:"snapshot",status:r.state||"",task_type:r.content,page_size:this.size,page_index:this.current});case 18:e=t.sent,t.next=30;break;case 21:if("nas"!==this.type){t.next=27;break}return t.next=24,g["a"].get_nas_record(Object(a["a"])({},n));case 24:e=t.sent,t.next=30;break;case 27:return t.next=29,b["a"].get_operate_record_list(Object(a["a"])({cloud_type:this.type?this.type:"ecs"},n));case 29:e=t.sent;case 30:"Success"===e.code&&(["physical","message"].includes(this.type)?(l=["create_time","content","status_name","response","update_time","op_user"],u=["oper_time","oper_type_display","status_display","response","finish_time","oper_user"],this.record_list=Object(y["b"])(e.data.operation_list,u,l)):this.record_list=(null===(c=e.data)||void 0===c?void 0:c.history_record)||[],this.total=(null===(i=e.data)||void 0===i||null===(o=i.page_info)||void 0===o?void 0:o.count)||0);case 31:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSizeChange",value:function(t){this.size=t,this.getOperateRecordList()}},{key:"handleCurrentChange",value:function(t){this.current=t,this.getOperateRecordList()}},{key:"view",value:function(t){this.response=t,this.res_visible=!0}},{key:"clost_res",value:function(){this.res_visible=!1,this.response=""}},{key:"back",value:function(){}}]),r}(d["e"]);Object(_["a"])([Object(d["c"])(Boolean)],k.prototype,"visible",void 0),Object(_["a"])([Object(d["c"])(String)],k.prototype,"record_id",void 0),Object(_["a"])([Object(d["c"])(String)],k.prototype,"type",void 0),Object(_["a"])([Object(d["b"])("close")],k.prototype,"back",null),k=Object(_["a"])([Object(d["a"])({components:{ActionBlock:p["a"],SvgIcon:j["a"]}})],k);var w=k,S=w,T=(r("1116"),r("2877")),x=Object(T["a"])(S,s,n,!1,null,null,null);e["a"]=x.exports},2804:function(t,e,r){},"28a2":function(t,e,r){},"8ce4":function(t,e,r){"use strict";r.d(e,"e",(function(){return a})),r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return l}));var s=r("5530"),n=r("ade3");r("d81d"),r("b0c0"),r("99af"),r("fb6a");function a(t,e,r,s,a){var i=[];return t.map((function(t){var o;i.push((o={},Object(n["a"])(o,s,t[e]),Object(n["a"])(o,a,t[r]),o))})),i}function i(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=[];return t.map((function(t){var i={};e.map((function(e,s){i[e]=t[r[s]]})),a.push(Object(s["a"])(Object(s["a"])({},i),n))})),a}function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};for(var n in t){var a=t[n],i=a.billing_scheme_id,o=a.billing_cycle_id,c=a.billing_items,l=a.gic_goods_id,u={};for(var _ in c){var d={attr_id:c[_].attr_id,name:c[_].name},p={id:c[_].id,key:_};u[_]=e?Object(s["a"])(Object(s["a"])({},d),p):p}r[n]={billing_scheme_id:i,billing_cycle_id:o,billing_items:u,gic_goods_id:e?l:void 0}}return r}function c(t,e){return t.map((function(t){return t[e]}))}function l(t){var e="";for(var r in t)t[r]&&(e+="".concat(r,"=").concat(t[r],"&"));return""===e?"":"?".concat(e.slice(0,e.length-1))}},"99af":function(t,e,r){"use strict";var s=r("23e7"),n=r("da84"),a=r("d039"),i=r("e8b5"),o=r("861d"),c=r("7b0b"),l=r("07fa"),u=r("8418"),_=r("65f0"),d=r("1dde"),p=r("b622"),b=r("2d00"),h=p("isConcatSpreadable"),f=9007199254740991,m="Maximum allowed index exceeded",g=n.TypeError,v=b>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),O=d("concat"),y=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:i(t)},j=!v||!O;s({target:"Array",proto:!0,forced:j},{concat:function(t){var e,r,s,n,a,i=c(this),o=_(i,0),d=0;for(e=-1,s=arguments.length;e<s;e++)if(a=-1===e?i:arguments[e],y(a)){if(n=l(a),d+n>f)throw g(m);for(r=0;r<n;r++,d++)r in a&&u(o,d,a[r])}else{if(d>=f)throw g(m);u(o,d++,a)}return o.length=d,o}})},aee4:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("action-block",{attrs:{search_option:t.search_option},on:{"fn-search":t.search}}),r("div",{staticClass:"icon m-bottom10"},[r("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[r("el-button",{attrs:{type:"text",disabled:!t.auth_list.includes("export")},on:{click:t.down}},[r("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1)],1),r("el-table",{ref:"table",staticClass:"event-table",attrs:{data:t.list,border:"","row-class-name":t.rowStyle},on:{"sort-change":t.FnSortChange,"filter-change":t.filterAttribute,"selection-change":t.handleSelectionChange,"row-click":t.FnOperRow,"row-contextmenu":t.FnRightClick}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),r("el-table-column",{attrs:{prop:"os_id",label:"镜像ID","min-width":"160px"}}),r("el-table-column",{attrs:{prop:"display_name",label:"镜像名称","min-width":"120px","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),r("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),r("el-table-column",{attrs:{prop:"os_type",label:"镜像类型","filter-multiple":!1,"column-key":"os_type",filters:t.mirror_type}}),r("el-table-column",{attrs:{prop:"product_source",label:"产品来源","filter-multiple":!1,"column-key":"product_source",filters:t.source_list}}),r("el-table-column",{attrs:{prop:"init_mirror",label:"初始镜像","min-width":"140px","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.os_type+" "+e.row.os_version+" "+e.row.os_bit+"位"))])]}}])}),r("el-table-column",{attrs:{prop:"size",label:"规格",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.size)+"GB")])]}}])}),r("el-table-column",{attrs:{prop:"used_size",label:"占用容量(GB)",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.used_size)+"GB")])]}}])}),r("el-table-column",{attrs:{prop:"support_type",label:"计算类型","filter-multiple":!1,"column-key":"support_type",filters:t.compute_type}}),r("el-table-column",{attrs:{prop:"support_gpu_driver",label:"驱动类型","filter-multiple":!1,"column-key":"support_gpu_driver",filters:t.drive_type}}),r("el-table-column",{attrs:{prop:"business_disk_type",label:"盘类型","filter-multiple":!1,"column-key":"business_disk_type",filters:t.disk_type}}),r("el-table-column",{attrs:{prop:"backend_type",label:"存储介质","filter-multiple":!1,"column-key":"backend_type",filters:t.storage_list}}),r("el-table-column",{attrs:{prop:"az",label:"存在可用区数量",width:"120","class-name":"private-mirror-az"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v("共 "),r("span",{staticClass:"num_message"},[t._v(t._s(e.row.az_list?e.row.az_list.length:0))]),t._v(" 个")]),r("span",[t._v(" ( 可用:"),r("span",{staticClass:"num_message"},[t._v(" "+t._s(e.row.az_list?e.row.az_list.filter((function(t){return"running"===t.status})).length:0))]),t._v(" )")])]}}])}),r("el-table-column",{attrs:{prop:"",label:"",type:"expand",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.az_list,(function(e,s){return r("div",{key:s,staticClass:"table-expand"},[r("div",{staticClass:"az-name"},[t._v(t._s(e.az_name))]),r("div",{staticClass:"status",class:e.status},[t._v(t._s(e.status_display))]),r("div",{staticClass:"time"},[t._v(t._s(e.create_time))])])}))}}])}),r("el-table-column",{attrs:{prop:"status_display",label:"状态","filter-multiple":!1,"column-key":"status",filters:t.status_list,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",{class:[e.row.status]},[t._v(t._s(e.row.status_display))])]}}])}),r("el-table-column",{attrs:{prop:"speed",label:"优化加速"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_accelerate?r("span",{staticClass:"running"},[t._v("开启")]):t._e(),e.row.is_accelerate?t._e():r("span",[t._v("-")])]}}])}),r("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"custom",width:"140"}}),r("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:"custom",width:"140"}}),r("el-table-column",{attrs:{prop:"operate",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text",disabled:!t.auth_list.includes("record")},on:{click:function(r){return t.record(e.row)}}},[t._v("操作记录")])]}}])})],1),r("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[20,50,100],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t.visible?[r("Record",{attrs:{visible:t.visible,type:"message",record_id:t.oper_info.os_id},on:{"update:visible":function(e){t.visible=e},close:t.close}})]:t._e(),r("right-click",{attrs:{multi_rows:t.multiple_selection,menus:t.menus,name:t.multiple_selection.length>0?t.multiple_selection[0].display_name:"",error_msg:t.error_msg},on:{"fn-click":t.infoClick}})],2)},n=[],a=r("5530"),i=r("1da1"),o=r("d4ec"),c=r("bee2"),l=r("262e"),u=r("2caf"),_=(r("96cf"),r("ac1f"),r("841c"),r("d81d"),r("d3b7"),r("99af"),r("fb6a"),r("9ab4")),d=r("1b40"),p=r("c811"),b=r("3673"),h=r("e4d0"),f=r("c1df"),m=r.n(f),g=r("268f"),v=r("e8c0"),O=r("cf88"),y=r("bd4d"),j=function(t){Object(l["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.search_option={customer_info:{placeholder:"请输入客户ID/名称"},image_info:{placeholder:"请输入镜像ID/名称"},time:{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!0,dis_day:1,defaultTime:[]}},t.list=[{id:1,status:"enable"}],t.current=1,t.size=20,t.total=0,t.search_data={},t.auth_list=[],t.mirror_type=[],t.source_list=[],t.multiple_selection=[],t.compute_type=[{text:"GPU",value:"GPU"},{text:"CPU",value:"CPU"},{text:"CPU/GPU",value:"CPU/GPU"}],t.drive_type=[{text:"DataCenter",value:"DataCenter"},{text:"Geforce",value:"Geforce"},{text:"Enflame",value:"Enflame"}],t.disk_type=[{text:"系统盘",value:"system"},{text:"数据盘",value:"data"}],t.storage_list=[{value:"local",text:"本地盘"},{value:"block",text:"云盘"}],t.status_list=[],t.visible=!1,t.oper_type="",t.support_product_source_type="",t.oper_info={},t.filter_data={},t.menus=[{label:"操作记录",value:"record",single:!0,disabled:!1}],t.error_msg={},t.selectedRow=null,t}return Object(c["a"])(r,[{key:"created",value:function(){this.auth_list=this.$store.state.auth_info["private_mirror_list"],this.get_mirror_type(),this.get_source_type(),this.get_status_list(),this.search()}},{key:"get_mirror_type",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h["a"].get_mirror_type({});case 2:e=t.sent,"Success"===e.code&&(r=[],e.data.type_list.map((function(t){return r.push({text:t,value:t}),t})),this.mirror_type=r);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"get_source_type",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h["a"].get_product_source();case 2:e=t.sent,"Success"===e.code&&e.data.map((function(t){r.source_list.push({text:t.value,value:t.value})}));case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"watch_pod",value:function(){this.search(this.search_data)}},{key:"FnRightClick",value:function(t,e,r){this.$refs.table.clearSelection();var s=this.multiple_selection.some((function(e){return e.os_id===t.os_id}));s||this.$refs.table.toggleRowSelection(t),Object(v["a"])(t,e,r)}},{key:"FnOperRow",value:function(t){var e=this.$refs.table;this.selectedRow!==t?(this.selectedRow&&e.clearSelection(),e.toggleRowSelection(t,!0),this.selectedRow=t):(e.toggleRowSelection(t,!1),this.selectedRow=null)}},{key:"rowStyle",value:function(t){var e=t.row,r=this.multiple_selection.some((function(t){return t.os_id===e.os_id}));if(r)return"rowStyle"}},{key:"infoClick",value:function(t){this[t.value](this.multiple_selection[0]),Object(O["a"])()}},{key:"search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.search_data=Object(a["a"])(Object(a["a"])({},t),this.filter_data),this.getMirrorList()}},{key:"get_status_list",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h["a"].get_status_list({});case 2:if(e=t.sent,"Success"===e.code){for(s in r=[],e.data)r.push({text:e.data[s],value:s});this.status_list=r}case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getMirrorList",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,s,n,a,i,o,c,l,u,_,d,p,b,f,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.search_data,r=e.image_info,s=e.customer_info,n=e.time,a=e.os_type,i=e.sort_size,o=e.sort_used_size,c=e.support_gpu_driver,l=e.support_type,e.support_product_source_type,u=e.business_disk_type,_=e.status,d=e.backend_type,p=e.sort_update_time,b=e.sort_create_time,f=e.product_source,t.next=3,h["a"].get_private_mirror_list({image_info:r,customer_info:s,az_id:this.$store.state.az_id,start_day:n&&n[0]?m()(n[0]).format("YYYY-MM-DD"):void 0,end_day:n&&n[1]?m()(n[1]).format("YYYY-MM-DD"):void 0,os_type:a?a[0]:void 0,sort_size:i,sort_used_size:o,support_gpu_driver:c?c[0]:void 0,support_type:l?l[0]:void 0,business_disk_type:u?u[0]:void 0,status:_?_[0]:void 0,backend_type:d?d[0]:void 0,product_source:f?f[0]:void 0,sort_update_time:p,sort_create_time:b,page_index:this.current,page_size:this.size});case 3:g=t.sent,"Success"===g.code&&(this.list=g.data.image_list,this.total=g.data.page_info.count);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSizeChange",value:function(t){this.size=t,this.getMirrorList()}},{key:"handleCurrentChange",value:function(t){this.current=t,this.getMirrorList()}},{key:"FnSortChange",value:function(t){this.search_data.sort_size=void 0,this.search_data.sort_update_time=void 0,this.search_data.sort_create_time=void 0,this.search_data.sort_used_size=void 0,this.search_data["sort_".concat(t.prop)]="descending"===t.order?"1":"ascending"===t.order?"0":void 0,this.getMirrorList()}},{key:"filterAttribute",value:function(t){this.filter_data=Object(a["a"])(Object(a["a"])({},this.filter_data),t),this.search(this.search_data)}},{key:"handleSelectionChange",value:function(t){this.multiple_selection=t}},{key:"record",value:function(t){this.oper_info=t,this.visible=!0}},{key:"close",value:function(t){this.visible=!1}},{key:"down",value:function(){var t=this.search_data,e=t.image_info,r=t.customer_info,s=t.time,n=t.os_type,a=t.sort_size,i=t.support_gpu_driver,o=t.support_type,c=t.business_disk_type,l=t.status,u=t.backend_type,_=t.sort_update_time,d=t.sort_create_time,p=t.product_source,b={image_info:e,customer_info:r,start_day:s&&s[0]?m()(s[0]).format("YYYY-MM-DD"):void 0,end_day:s&&s[1]?m()(s[1]).format("YYYY-MM-DD"):void 0,os_type:n?n[0]:void 0,sort_size:a,support_gpu_driver:i?i[0]:void 0,support_type:o?o[0]:void 0,product_source:p?p[0]:void 0,business_disk_type:c?c[0]:void 0,status:l?l[0]:void 0,backend_type:u?u[0]:void 0,sort_update_time:_,sort_create_time:d,az_id:this.$store.state.az_id},h="";for(var f in b)b[f]&&(h+="".concat(f,"=").concat(b[f],"&"));var g=""===h?"":"?".concat(h.slice(0,h.length-1));window.location.href="/ecs_business/v1/img/private_image_list_download/".concat(g)}}]),r}(d["e"]);Object(_["a"])([Object(d["f"])("$store.state.az_id")],j.prototype,"watch_pod",null),j=Object(_["a"])([Object(d["a"])({components:{ActionBlock:p["a"],SvgIcon:b["a"],Record:g["a"],RightClick:y["a"]}})],j);var k=j,w=k,S=(r("b3e8"),r("fee4"),r("2877")),T=Object(S["a"])(w,s,n,!1,null,"4b2011e7",null);e["default"]=T.exports},b3e8:function(t,e,r){"use strict";r("28a2")},cb4f:function(t,e,r){},d772:function(t,e,r){"use strict";var s=r("81a9"),n=r("bff7");e["a"]={get_operate_record_list:function(t){return Object(s["a"])(Object(n["b"])("GET","/ecs/history_record/",t))},get_detail:function(t){return Object(s["a"])(Object(n["b"])("GET","/ecs/get_ecs_detail/",t))}}},e4d0:function(t,e,r){"use strict";var s=r("81a9"),n=r("bff7");e["a"]={get_pub_mirror_list:function(t){return Object(s["a"])(Object(n["b"])("GET","/img/get_pub_image_list/",t))},check_name:function(t){return Object(s["a"])(Object(n["b"])("POST","/img/name_check/",t))},get_mirror_type:function(t){return Object(s["a"])(Object(n["b"])("GET","/img/image_type/",t))},get_model_image_type:function(t){return Object(s["a"])(Object(n["b"])("GET","/img/model_image_type/",t))},add_pub_mirror:function(t){return Object(s["a"])(Object(n["b"])("GET","/img/create_pub_image/",t))},edit_pub_mirror:function(t){return Object(s["a"])(Object(n["b"])("POST","/img/edit_image/",t))},change_status:function(t){return Object(s["a"])(Object(n["b"])("POST","/img/alter_image/",t))},del_pub_mirror_az:function(t){return Object(s["a"])(Object(n["b"])("POST","/img/delete_pub_image/",t))},del_pub_mirror:function(t){return Object(s["a"])(Object(n["b"])("POST","/img/batch_delete_pub_image/",t))},get_pub_operate_record:function(t){return Object(s["a"])(Object(n["b"])("POST","/img/pub_image_operation_list/",t))},get_pub_sync_detail:function(t){return Object(s["a"])(Object(n["b"])("POST","/img/pub_image_info/",t))},sync_mirror:function(t){return Object(s["a"])(Object(n["b"])("POST","/img/sync_pub_image/",t))},get_private_mirror_list:function(t){return Object(s["a"])(Object(n["b"])("GET","/img/get_private_image_list/",t))},get_status_list:function(t){return Object(s["a"])(Object(n["b"])("GET","/img/get_image_status_list/",t))},get_available_az:function(t){return Object(s["a"])(Object(n["b"])("POST","/img/get_available_az/",t))},get_disk_list:function(t){return Object(s["a"])(Object(n["b"])("GET","/img/backend_type/",t))},get_product_source:function(){return Object(s["a"])(Object(n["b"])("GET","/ecs/get_product_source/"))}}},e8c0:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var s=r("cf88");function n(t,e,r){r.preventDefault(),document.addEventListener("contextmenu",(function(t){var e=t.target;if(e.closest(".el-table")){var r=document.querySelector("#menu");if(r){r.style.display="block";var n=r.offsetHeight,a=r.offsetWidth;console.log("menuHeight",n);var i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=t.clientX,l=t.clientY,u=c,_=l;o<c+a&&(u=c-a),i<l+n&&(_=i-n),r.style.left=u-250+"px",r.style.top=_-50+"px",r.style.display="block",r.style.zIndex="1000",document.addEventListener("click",s["a"])}}})),document.addEventListener("contextmenu",s["a"])}},fb6a:function(t,e,r){"use strict";var s=r("23e7"),n=r("da84"),a=r("e8b5"),i=r("68ee"),o=r("861d"),c=r("23cb"),l=r("07fa"),u=r("fc6a"),_=r("8418"),d=r("b622"),p=r("1dde"),b=r("f36a"),h=p("slice"),f=d("species"),m=n.Array,g=Math.max;s({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var r,s,n,d=u(this),p=l(d),h=c(t,p),v=c(void 0===e?p:e,p);if(a(d)&&(r=d.constructor,i(r)&&(r===m||a(r.prototype))?r=void 0:o(r)&&(r=r[f],null===r&&(r=void 0)),r===m||void 0===r))return b(d,h,v);for(s=new(void 0===r?m:r)(g(v-h,0)),n=0;h<v;h++,n++)h in d&&_(s,n,d[h]);return s.length=n,s}})},fee4:function(t,e,r){"use strict";r("2804")}}]);
//# sourceMappingURL=chunk-3dec5268.1741589092878.js.map