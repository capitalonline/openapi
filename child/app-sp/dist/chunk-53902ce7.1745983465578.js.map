{"version":3,"sources":["webpack://AppSp/./src/https/task/main-task.ts","webpack://AppSp/./src/views/task/main-task-list.vue?2002","webpack://AppSp/./src/views/task/main-task-list.vue?3aaf","webpack://AppSp/./src/views/task/main-task-list.vue?a382","webpack://AppSp/./src/views/task/main-task-list.vue?9439","webpack://AppSp/./src/views/task/main-task-list.vue","webpack://AppSp/./node_modules/core-js/modules/es.array.map.js"],"names":["get_maintask_list","reqData","service","method","url","params","add_maintask","data","update_maitask","delete_maintask","get_maintask_detail","render","_vm","this","_h","$createElement","_c","_self","attrs","search_con","operate_auth","includes","on","FnGetList","FnShowCreate","task_list","scopedSlots","_u","key","fn","scope","$event","FnDetail","row","id","_v","_s","FnShowUpdate","FnShowDel","maintask_name","page_info","page_index","page_sizes","page_size","total","$set","dialog_title","create_dialog","FnClose","model","value","main_config","callback","$$v","expression","proxy","staticClass","_e","sub_task_list","default_sub_task","FnGetRelTask","slot","FnConfirm","staticRenderFns","MainTaskList","placeholder","default_id","main_name","main_type","priority","retry","timeout","callback_url","sub_task","is_valid","FnGetSubList","Boolean","JSON","parse","subtask_flow","map","list","item","subtask_index_id","maintask_type","page_number","Service","resData","code","maintask_info","SubService","get_subtask_list","subtask_info","stringify","Number","FnUpdate","FnCreate","$message","success","msg","Object","assign","task_name","$confirm","cancelButtonText","confirmButtonText","type","then","FnDel","catch","$router","push","$store","state","auth_info","$route","name","Vue","Component","components","LabelBlock","draggerTask","actionBlock","component","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"chunk-53902ce7.1745983465578.js","sourcesContent":["import service from \"../http\"\n\nexport default {\n  // 获取主任务配置列表\n  get_maintask_list(reqData: any) {\n    return service({\n      method: \"GET\",\n      url: \"/api/v1/maintask/configuration\",\n      params: reqData\n    })\n  },\n  // 添加主任务配置\n  add_maintask(reqData: any) {\n    return service({\n      method: \"POST\",\n      url: \"/api/v1/maintask/configuration\",\n      data: reqData\n    })\n  },\n  // 更新主任务配置\n  update_maitask(reqData: any) {\n    return service({\n      method: \"PUT\",\n      url: \"/api/v1/maintask/configuration\",\n      data: reqData\n    })\n  },\n  // 删除主任务配置\n  delete_maintask(reqData: any) {\n    return service({\n      method: \"DELETE\",\n      url: \"/api/v1/maintask/configuration\",\n      params: reqData\n    })\n  },\n  // 获取主任务详情\n  get_maintask_detail(reqData: any) {\n    return service({\n      method: \"GET\",\n      url: \"/api/v1/maintask/configuration/detail\",\n      params: reqData\n    })\n  }\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-task-list.vue?vue&type=style&index=0&id=0c3d3a9b&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('action-block',{attrs:{\"search_option\":_vm.search_con,\"create_btn\":\"新建主任务配置\",\"disabled\":!_vm.operate_auth.includes('create')},on:{\"fn-search\":_vm.FnGetList,\"fn-create\":_vm.FnShowCreate}}),_c('el-table',{attrs:{\"data\":_vm.task_list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"disabled\":!_vm.operate_auth.includes('main_task_detail')},on:{\"click\":function($event){return _vm.FnDetail(scope.row.id)}}},[_vm._v(_vm._s(scope.row.id))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"maintask_name\",\"label\":\"名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"priority\",\"label\":\"优先级\"}}),_c('el-table-column',{attrs:{\"prop\":\"retry\",\"label\":\"重试次数\"}}),_c('el-table-column',{attrs:{\"prop\":\"timeout\",\"label\":\"超时时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"callback_url\",\"label\":\"回退地址\"}}),_c('el-table-column',{attrs:{\"prop\":\"is_valid\",\"label\":\"is_valid\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"disabled\":!_vm.operate_auth.includes('edit')},on:{\"click\":function($event){return _vm.FnShowUpdate(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"text\",\"disabled\":!_vm.operate_auth.includes('delete')},on:{\"click\":function($event){return _vm.FnShowDel(scope.row.id, scope.row.maintask_name)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.page_info.page_index,\"page-sizes\":_vm.page_info.page_sizes,\"page-size\":_vm.page_info.page_size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.page_info.total},on:{\"size-change\":function($event){return _vm.FnGetList()},\"current-change\":function($event){return _vm.FnGetList()},\"update:currentPage\":function($event){return _vm.$set(_vm.page_info, \"page_index\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.page_info, \"page_index\", $event)},\"update:pageSize\":function($event){return _vm.$set(_vm.page_info, \"page_size\", $event)},\"update:page-size\":function($event){return _vm.$set(_vm.page_info, \"page_size\", $event)}}}),_c('el-dialog',{attrs:{\"title\":_vm.dialog_title,\"visible\":_vm.create_dialog,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.create_dialog=$event},\"close\":_vm.FnClose}},[_c('div',[_c('label-block',{attrs:{\"label\":\"主任务名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.main_config.main_name),callback:function ($$v) {_vm.$set(_vm.main_config, \"main_name\", $$v)},expression:\"main_config.main_name\"}})]},proxy:true}])}),_c('label-block',{attrs:{\"label\":\"主任务优先级\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-input-number',{attrs:{\"min\":1,\"max\":10},model:{value:(_vm.main_config.priority),callback:function ($$v) {_vm.$set(_vm.main_config, \"priority\", $$v)},expression:\"main_config.priority\"}})]},proxy:true}])}),_c('label-block',{attrs:{\"label\":\"主任务重试次数\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-input-number',{attrs:{\"min\":1,\"max\":10},model:{value:(_vm.main_config.retry),callback:function ($$v) {_vm.$set(_vm.main_config, \"retry\", $$v)},expression:\"main_config.retry\"}}),_vm._v(\" 次 \")]},proxy:true}])}),_c('label-block',{attrs:{\"label\":\"主任务超时时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-input-number',{attrs:{\"min\":1,\"max\":600},model:{value:(_vm.main_config.timeout),callback:function ($$v) {_vm.$set(_vm.main_config, \"timeout\", $$v)},expression:\"main_config.timeout\"}}),_vm._v(\" 秒 \")]},proxy:true}])}),_c('label-block',{attrs:{\"label\":\"主任务回退地址\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.main_config.callback_url),callback:function ($$v) {_vm.$set(_vm.main_config, \"callback_url\", $$v)},expression:\"main_config.callback_url\"}})]},proxy:true}])}),(_vm.default_id)?_c('label-block',{staticClass:\"switch-box\",attrs:{\"label\":\"有效\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-switch',{attrs:{\"active-color\":\"#455cc6\",\"inactive-color\":\"#ccc\"},model:{value:(_vm.main_config.is_valid),callback:function ($$v) {_vm.$set(_vm.main_config, \"is_valid\", $$v)},expression:\"main_config.is_valid\"}})]},proxy:true}],null,false,1067134834)}):_vm._e(),_c('label-block',{attrs:{\"label\":\"子任务配置\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('dragger-task',{attrs:{\"sub_task\":_vm.sub_task_list,\"rel_task\":_vm.default_sub_task},on:{\"fn-rel-task\":_vm.FnGetRelTask}})]},proxy:true}])})],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.FnConfirm}},[_vm._v(\"确 定\")]),_c('el-button',{on:{\"click\":_vm.FnClose}},[_vm._v(\"取 消\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport LabelBlock from '../../components/labelBlock.vue';\nimport draggerTask from '../../components/draggerTask.vue';\nimport actionBlock from '../../components/search/actionBlock.vue';\nimport Service from '../../https/task/main-task';\nimport SubService from '../../https/task/sub-task';\n\n@Component({\n  components: {\n    LabelBlock,\n    draggerTask,\n    actionBlock\n  },\n})\nexport default class MainTaskList extends Vue {\n  $message;\n  $confirm;\n  $router;\n  $route;\n  $store;\n  private search_con = {\n    id: { placeholder: '请输入任务ID' },\n    // maintask_type: { placeholder: '请输入任务类型' },\n    maintask_name: { placeholder: '请输入任务名称' }\n  };\n  private create_dialog: boolean = false;\n  private dialog_title: string = '';\n  private task_list = [];\n  private operate_auth = [];\n  private default_id = '';\n  private default_sub_task = [];\n  private main_config = {\n    main_name: '',\n    main_type: '',\n    priority: 1,\n    retry: 1,\n    timeout: 60,\n    callback_url: '',\n    sub_task: [],\n    is_valid: true,\n  };\n  private sub_task_list = [];\n  private page_info = {\n    page_sizes: [20, 50, 100],\n    page_size: 20,\n    page_index: 1,\n    total: 0\n  };\n  private FnShowCreate(): void {\n    this.create_dialog = true;\n    this.dialog_title = '新建主任务配置';\n    this.FnGetSubList();\n  }\n  private async FnShowUpdate(row){\n    this.create_dialog = true;\n    this.dialog_title = '更新主任务配置';\n    await this.FnGetSubList();\n    this.default_id = row.id;\n    this.main_config.main_name = row.maintask_name;\n    // this.main_config.main_type = row.maintask_type;\n    this.main_config.retry = row.retry;\n    this.main_config.priority = row.priority;\n    this.main_config.timeout = row.timeout;\n    this.main_config.callback_url = row.callback_url;\n    this.main_config.is_valid = Boolean(row.is_valid);\n    this.default_sub_task = JSON.parse(row.subtask_flow).map(list => {\n      return list.map(item => {\n        return item.subtask_index_id\n      })\n    })\n  }\n  private FnClose(): void {\n    this.create_dialog = false;\n    this.main_config.main_name = '';\n    this.main_config.main_type = '';\n    this.main_config.retry = 1;\n    this.main_config.priority = 1;\n    this.main_config.timeout = 60;\n    this.main_config.callback_url = '';\n    this.main_config.sub_task = [];\n    this.main_config.is_valid = true;\n    this.sub_task_list = [];\n    this.default_id = '';\n    this.default_sub_task = [];\n  }\n  private async FnGetList(data: any = {}) {\n    let reqData: any = {};\n    if (data.id) reqData.id = data.id;\n    if (data.maintask_type) reqData.maintask_type = data.maintask_type;\n    if (data.maintask_name) reqData.maintask_name = data.maintask_name;\n    reqData.page_number = this.page_info.page_index;\n    reqData.page_size = this.page_info.page_size;\n    const resData: any = await Service.get_maintask_list(reqData);\n    if ( resData.code === 'Success' ) {\n      this.task_list = resData.data.maintask_info;\n      this.page_info.total = resData.data.total;\n    }\n  }\n  private async FnGetSubList() {\n    const resData: any = await SubService.get_subtask_list();\n    if ( resData.code === 'Success' ) {\n      this.sub_task_list =  resData.data.subtask_info;\n    }\n  }\n  private FnGetRelTask(task_list) {\n    this.main_config.sub_task = task_list.map(list => {\n      return list.map(item => {\n        return {'subtask_index_id': item}\n      })\n    })\n  }\n  private FnConfirm() {\n    // TODO：数据校验\n    let reqData = {\n      // maintask_type: this.main_config.main_type,\n      maintask_name: this.main_config.main_name,\n      priority: this.main_config.priority,\n      retry: this.main_config.retry,\n      timeout: this.main_config.timeout,\n      callback_url: this.main_config.callback_url,\n      subtask_flow: JSON.stringify(this.main_config.sub_task),\n      is_valid: Number(this.main_config.is_valid)\n    }\n    if(this.default_id) {\n      this.FnUpdate(reqData);\n    } else {\n      this.FnCreate(reqData);\n    }\n  }\n  private async FnCreate(reqData) {\n    const resData: any = await Service.add_maintask(reqData);\n    if ( resData.code === 'Success' ) {\n      this.FnClose();\n      this.$message.success(resData.msg || '成功新建主任务配置！');\n      this.FnGetList();\n    }\n  }\n  private async FnUpdate(reqData) {\n    const resData: any = await Service.update_maitask(Object.assign({}, reqData, {id: this.default_id}));\n    if ( resData.code === 'Success' ) {\n      this.FnClose();\n      this.$message.success(resData.msg || '成功更新主任务配置！');\n      this.FnGetList();\n    }\n  }\n  private FnShowDel(id, task_name) {\n    this.$confirm(`确认删除主任务配置 -- ${task_name}`, '删除提示', {\n      cancelButtonText: '取消',\n      confirmButtonText: '确定',\n      type: 'warning'\n    }).then(() => {\n      this.default_id = id;\n      this.FnDel();\n    }).catch();\n  }\n  private async FnDel() {\n    const resData: any = await Service.delete_maintask({id: this.default_id});\n    if ( resData.code === 'Success' ) {\n      this.$message.success(resData.msg || '成功删除主项目配置！');\n      this.FnGetList();\n    }\n  }\n  private FnDetail(id) {\n    this.$router.push(`/mainTaskDetail/${id}`)\n  }\n\n  created() {\n    this.operate_auth = this.$store.state.auth_info[this.$route.name]\n    this.FnGetList();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-task-list.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-task-list.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./main-task-list.vue?vue&type=template&id=0c3d3a9b&scoped=true&\"\nimport script from \"./main-task-list.vue?vue&type=script&lang=ts&\"\nexport * from \"./main-task-list.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./main-task-list.vue?vue&type=style&index=0&id=0c3d3a9b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c3d3a9b\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}