(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-6ddf6615"],{"0c67":function(e,t,a){},"13f1":function(e,t,a){"use strict";var n=a("81a9"),i=a("bff7");function s(e){var t=i["f"];return"gpu"===e&&(t=i["c"]),t}t["a"]={get_cpu:function(e,t){return Object(n["a"])(s(e)("GET","/cpu_info",t))},get_disk:function(e,t){return Object(n["a"])(s(e)("GET","/disk_info",t))},get_load:function(e,t){return Object(n["a"])(s(e)("GET","/load_info",t))},get_memory:function(e,t){return Object(n["a"])(s(e)("GET","/memory_info",t))},get_network:function(e,t){return Object(n["a"])(s(e)("GET","/network_info",t))},get_gpu:function(e,t){return Object(n["a"])(s(e)("GET","/gpu_info",t))},get_disk_info:function(e,t){return Object(n["a"])(s(e)("GET","/disk_info",t))},get_eip_info:function(e){return Object(n["a"])(Object(i["b"])("POST","/ecs/eip_monitor_info/",e))}}},"29f3":function(e,t,a){},"3f89":function(e,t,a){"use strict";a("0c67")},"5b49":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"monitor"},["monitor"===e.source_name?a("div",[a("back-header",{attrs:{title:"NFV云服务器监控",back_url:"/nfv"}}),a("el-card",{staticClass:"m-bottom20 m-top20",scopedSlots:e._u([{key:"header",fn:function(){return[a("span",[e._v("NFV云服务器详情")])]},proxy:!0}],null,!1,2430631505)},[a("div",{staticClass:"detail-box"},e._l(e.detail_info,(function(t,n){return a("div",{key:n,staticClass:"row"},[a("span",{staticClass:"left-title"},[e._v(e._s(t.label)+":")]),a("span",{domProps:{innerHTML:e._s(t.value)}})])})),0)])],1):e._e(),a("el-card",{staticClass:"tab-card"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.default_tab,callback:function(t){e.default_tab=t},expression:"default_tab"}},e._l(e.tab_list,(function(e,t){return a("el-tab-pane",{key:t,attrs:{label:e,name:t}})})),1),e.nfv_info.create_finish_time?a("time-group",{attrs:{start_time:e.nfv_info.create_finish_time},on:{"fn-emit":e.FnGetTimer}}):e._e(),"instance"===e.default_tab?a("div",{staticClass:"chart-box"},[a("line-echart",{staticClass:"item",attrs:{chart_id:"cpu_chart",data:e.cpu_used}}),a("line-echart",{staticClass:"item",attrs:{chart_id:"ram_chart",data:e.memory_used}}),"windows"!==e.nfv_info.os_system.toLocaleLowerCase()?a("line-echart",{staticClass:"item",attrs:{chart_id:"system_chart",data:e.system_load}}):e._e()],1):e._e(),"net"===e.default_tab?a("div",{staticClass:"chart-box"},[a("line-echart",{staticClass:"item",attrs:{chart_id:"net_rate_chart",data:e.net_rate}})],1):e._e(),"disk"===e.default_tab?a("div",{staticClass:"chart-box"},[a("line-echart",{staticClass:"item",attrs:{chart_id:"disk_chart",data:e.disk_used}}),a("line-echart",{staticClass:"item",attrs:{chart_id:"disk_through_chart",data:e.disk_bytes}}),a("line-echart",{staticClass:"item",attrs:{chart_id:"disk_iops_chart",data:e.disk_iops}})],1):e._e(),"gpu"===e.default_tab?a("div",{staticClass:"chart-box"},[a("line-echart",{staticClass:"item",attrs:{chart_id:"gpu_chart",data:e.gpu_used}}),a("line-echart",{staticClass:"item",attrs:{chart_id:"gpu_memory_chart",data:e.gpu_memory_used}}),a("line-echart",{staticClass:"item",attrs:{chart_id:"gpu_temperature",data:e.gpu_temperature}}),a("line-echart",{staticClass:"item",attrs:{chart_id:"gpu_frequency",data:e.gpu_frequency}})],1):e._e()],1)],1)},i=[],s=a("2909"),r=a("1da1"),u=a("d4ec"),c=a("bee2"),o=a("262e"),l=a("2caf"),d=(a("96cf"),a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("d81d"),a("b64b"),a("b0c0"),a("9ab4")),_=a("1b40"),f=a("ed46"),p=a("1f82"),b=a("ff48"),h=a("9f4c"),y=a("13f1"),m=a("c1df"),g=a.n(m),v=function(e){Object(o["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(u["a"])(this,a),e=t.apply(this,arguments),e.source_name="",e.nfv_info={region_id:"",az_id:"",create_finish_time:"",os_system:""},e.detail_info={nfv_id:{label:"云服务器ID",value:""},ecs_rule:{label:"云服务器规格",value:""},status_display:{label:"运行状态",value:""}},e.cpu_used={title:"CPU使用率",unit:"",xTime:[],yValue:[],resize:0},e.memory_used={title:"内存使用率",unit:"",xTime:[],yValue:[],resize:0},e.system_load={title:"系统平均负载",unit:"",xTime:[],yValue:[],resize:0,legend:["1m","5m","15m"]},e.net_in_out={title:"网络流量",unit:"",xTime:[],yValue:[],resize:0,legend:[],line_name:["出网流量","入网流量"],type:"double_line"},e.net_rate={title:"网络吞吐量",unit:"",xTime:[],yValue:[],resize:0,legend:[],line_name:["出网流量速率","入网流量速率"],type:"double_line"},e.disk_used={title:"磁盘使用率",unit:"",xTime:[],yValue:[],resize:0,legend:[]},e.disk_iops={title:"磁盘IOPS",unit:"",xTime:[],yValue:[],resize:0,legend:[],line_name:["读","写"],type:"double_line"},e.disk_bytes={title:"磁盘吞吐量",unit:"",xTime:[],yValue:[],resize:0,legend:[],line_name:["读","写"],type:"double_line"},e.default_tab="",e.tab_list={instance:"主机",net:"网络",disk:"磁盘"},e.gpu_used={title:"GPU使用率",unit:"",xTime:[],yValue:[],resize:0},e.gpu_memory_used={title:"显存使用率",unit:"",xTime:[],yValue:[],resize:0},e.gpu_temperature={title:"GPU温度",unit:"",xTime:[],yValue:[],resize:0},e.gpu_frequency={title:"GPU主频",unit:"",xTime:[],yValue:[],resize:0,line_name:["GPU核心频率","显存频率"],type:"double_line"},e.default_date_timer=[],e}return Object(c["a"])(a,[{key:"FnGetTimer",value:function(e){this.default_date_timer=e,this.FnGetChartData()}},{key:"FnGetChartData",value:function(){var e="kvm",t=this.detail_info.nfv_id.value,a=this.nfv_info.region_id,n=this.nfv_info.az_id,i="vm";if(t){var s={hostId:t,region:a,replica:n,ip:this.$route.params.ip,instanceType:i,os:this.nfv_info.os_system.toLocaleLowerCase(),start:g.a.utc(this.default_date_timer[0]).format("YYYY-MM-DD HH:mm:ss"),end:g.a.utc(this.default_date_timer[1]).format("YYYY-MM-DD HH:mm:ss")};"instance"===this.default_tab?(this.FnGetCpu(e,s),this.FnGetMemory(e,s),"windows"!==this.nfv_info.os_system.toLocaleLowerCase()&&this.FnGetLoad(e,s)):"disk"===this.default_tab?this.FnGetDiskInfo(e,s):"net"===this.default_tab?this.FnGetNetInfo(e,s):"gpu"===this.default_tab&&this.FnGetGpuInfo(e,s)}}},{key:"FnGetDetail",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].get_detail({nfv_id:this.$route.params.id});case 2:t=e.sent,"Success"===t.code&&(a=t.data.nfv_info,this.nfv_info={region_id:a.region_id,az_id:a.az_id,os_system:"",create_finish_time:g()(new Date(a.create_finish_time)).format()},this.detail_info.nfv_id.value=a.nfv_id,this.detail_info.status_display.value=a.status_display,this.detail_info.ecs_rule.value="".concat(a.cpu,"vCPU ").concat(a.ram,"GiB"),a.is_gpu||_["e"].delete(this.tab_list,"gpu"));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnGetCpu",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y["a"].get_cpu(t,Object.assign({queryType:"use_total"},a));case 2:n=e.sent,this.FnHandleSingleData("cpu_used",n);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"FnGetMemory",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y["a"].get_memory(t,Object.assign({queryType:"used"},a));case 2:n=e.sent,this.FnHandleSingleData("memory_used",n);case 4:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"FnHandleSingleData",value:function(e,t){"Success"===t.code&&(this[e].xTime=t.data.xTime,this[e].yValue=t.data.yValues,this[e].unit=t.data.unit),this[e].resize++}},{key:"FnGetLoad",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a){var n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.system_load.yValue=[],n=this.system_load.legend,Promise.all([y["a"].get_load(t,Object.assign({queryType:n[0]},a)),y["a"].get_load(t,Object.assign({queryType:n[1]},a)),y["a"].get_load(t,Object.assign({queryType:n[2]},a))]).then((function(e){i.FnHandleMoreData("system_load",e)}));case 3:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"FnHandleMoreData",value:function(e,t){var a=this,n=0;t.forEach((function(t){"Success"===t.code&&(0===n&&(a[e].xTime=t.data.xTime,a[e].unit=t.data.unit),a[e].yValue.push(t.data.yValues)),n++})),this[e].resize++}},{key:"FnGetDiskInfo",value:function(e,t){var a=this;y["a"].get_disk(e,Object.assign({queryType:"use"},t)).then((function(e){"Success"===e.code&&(a.disk_used.xTime=e.data.xTime,a.disk_used.yValue=e.data.yValues,a.disk_used.legend=e.data.metricInfo,a.disk_used.unit=e.data.unit);a.disk_used.resize++})),this.disk_bytes.yValue=[],Promise.all([y["a"].get_disk(e,Object.assign({queryType:"readbytes"},t)),y["a"].get_disk(e,Object.assign({queryType:"writebytes"},t))]).then((function(e){a.FnHandleDubleData("disk_bytes",e)})),this.disk_iops.yValue=[],Promise.all([y["a"].get_disk(e,Object.assign({queryType:"readiops"},t)),y["a"].get_disk(e,Object.assign({queryType:"writeiops"},t))]).then((function(e){a.FnHandleDubleData("disk_iops",e)}))}},{key:"FnHandleDubleData",value:function(e,t){var a=this,n=0;t.forEach((function(t){var i;"Success"===t.code&&(t.data.metricInfo=t.data.metricInfo||t.data.device||t.data.gpuName,0===n?(a[e].xTime=t.data.xTime,a[e].legend=t.data.metricInfo,a[e].unit=t.data.unit):t.data.metricInfo&&t.data.metricInfo.forEach((function(t){a[e].legend.push(t+a.disk_iops.type)})),t.data.yValues&&(console.log("1",a[e].yValue),(i=a[e].yValue).push.apply(i,Object(s["a"])(t.data.yValues)),console.log("2",a[e].yValue)));n++})),this[e].resize++,console.log("####",this[e])}},{key:"FnGetNetInfo",value:function(e,t){var a=this;this.net_in_out.yValue=[],this.net_rate.yValue=[],Promise.all([y["a"].get_network(e,Object.assign({queryType:"networkout_rate"},t)),y["a"].get_network(e,Object.assign({queryType:"networkin_rate"},t))]).then((function(e){a.FnHandleDubleData("net_rate",e)}))}},{key:"FnGetGpuInfo",value:function(e,t){var a=this;this.gpu_used.yValue=[],y["a"].get_gpu(e,Object.assign({queryType:"gpu_usage"},t)).then((function(e){a.FnHandleDubleData("gpu_used",[e])})),this.gpu_memory_used.yValue=[],y["a"].get_gpu(e,Object.assign({queryType:"memory_usage"},t)).then((function(e){a.FnHandleDubleData("gpu_memory_used",[e])})),this.gpu_temperature.yValue=[],y["a"].get_gpu(e,Object.assign({queryType:"temperature"},t)).then((function(e){a.FnHandleDubleData("gpu_temperature",[e])})),this.gpu_frequency.yValue=[],Promise.all([y["a"].get_gpu(e,Object.assign({queryType:"gpu_clocks_graphics"},t)),y["a"].get_gpu(e,Object.assign({queryType:"gpu_clocks_memory"},t))]).then((function(e){a.FnHandleDubleData("gpu_frequency",e)})),this.gpu_frequency.yValue=[],Promise.all([y["a"].get_gpu(e,Object.assign({queryType:"gpu_clocks_graphics"},t)),y["a"].get_gpu(e,Object.assign({queryType:"gpu_clocks_memory"},t))]).then((function(e){console.log("resData",e),e.map((function(e){return e.data.yValues&&e.data.yValues.length>0&&(e.data.yValues=[e.data.yValues]),e})),a.FnHandleDubleData("gpu_frequency",e)}))}},{key:"created",value:function(){this.default_tab=Object.keys(this.tab_list)[0],this.source_name=this.$route.name,this.FnGetDetail()}},{key:"destroyed",value:function(){}},{key:"FnChangeTab",value:function(e,t){t&&this.FnGetChartData()}}]),a}(_["e"]);Object(d["a"])([Object(_["f"])("default_tab")],v.prototype,"FnChangeTab",null),v=Object(d["a"])([Object(_["a"])({components:{BackHeader:f["a"],TimeGroup:p["a"],LineEchart:b["a"]}})],v);var k=v,O=k,j=(a("3f89"),a("5fe8"),a("2877")),T=Object(j["a"])(O,n,i,!1,null,"cd89ec7c",null);t["default"]=T.exports},"5fe8":function(e,t,a){"use strict";a("9dbc")},"99af":function(e,t,a){"use strict";var n=a("23e7"),i=a("da84"),s=a("d039"),r=a("e8b5"),u=a("861d"),c=a("7b0b"),o=a("07fa"),l=a("8418"),d=a("65f0"),_=a("1dde"),f=a("b622"),p=a("2d00"),b=f("isConcatSpreadable"),h=9007199254740991,y="Maximum allowed index exceeded",m=i.TypeError,g=p>=51||!s((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),v=_("concat"),k=function(e){if(!u(e))return!1;var t=e[b];return void 0!==t?!!t:r(e)},O=!g||!v;n({target:"Array",proto:!0,forced:O},{concat:function(e){var t,a,n,i,s,r=c(this),u=d(r,0),_=0;for(t=-1,n=arguments.length;t<n;t++)if(s=-1===t?r:arguments[t],k(s)){if(i=o(s),_+i>h)throw m(y);for(a=0;a<i;a++,_++)a in s&&l(u,_,s[a])}else{if(_>=h)throw m(y);l(u,_++,s)}return u.length=_,u}})},"9dbc":function(e,t,a){},"9f4c":function(e,t,a){"use strict";var n=a("81a9"),i=a("bff7");t["a"]={get_nfv_list:function(e){return Object(n["a"])(Object(i["b"])("GET","/nfv/nfv_list/",e))},operate_nfv:function(e){return Object(n["a"])(Object(i["b"])("POST","/nfv/operate/",e))},get_vnc_url:function(e){return Object(n["a"])(Object(i["b"])("POST","/nfv/vnc_info/",e))},get_status_list:function(){return Object(n["a"])(Object(i["b"])("GET","/nfv/nfv_status_list/"))},get_detail:function(e){return Object(n["a"])(Object(i["b"])("GET","/nfv/nfv_detail/",e))}}},bd09:function(e,t,a){"use strict";a("29f3")},ed46:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"box"},[a("div",[a("span",[e._v(e._s(e.title))]),e._t("left")],2),a("div",[e._t("default"),e.no_back?e._e():a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.FnBack}},[e._v("返回")])],2)]),a("div",{staticClass:"perch"})])},i=[],s=a("d4ec"),r=a("bee2"),u=a("262e"),c=a("2caf"),o=a("9ab4"),l=a("1b40"),d=function(e){Object(u["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return Object(r["a"])(a,[{key:"FnBack",value:function(){this.back_url?this.$router.push(this.back_url):this.$router.go(-1)}}]),a}(l["e"]);Object(o["a"])([Object(l["c"])({default:""})],d.prototype,"title",void 0),Object(o["a"])([Object(l["c"])({default:""})],d.prototype,"back_url",void 0),Object(o["a"])([Object(l["c"])({default:!1})],d.prototype,"no_back",void 0),d=Object(o["a"])([l["a"]],d);var _=d,f=_,p=(a("bd09"),a("2877")),b=Object(p["a"])(f,n,i,!1,null,"bdf5ebe2",null);t["a"]=b.exports}}]);
//# sourceMappingURL=chunk-6ddf6615.1745983465578.js.map