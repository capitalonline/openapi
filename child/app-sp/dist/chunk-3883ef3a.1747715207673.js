(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-3883ef3a"],{"09d6":function(t,e,a){},"11e4":function(t,e,a){"use strict";a("09d6")},"14da":function(t,e,a){},"1f82":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"time-box"},[a("el-radio-group",{staticClass:"m-right20",on:{change:t.FnChangeTime},model:{value:t.default_time,callback:function(e){t.default_time=e},expression:"default_time"}},t._l(t.time_list,(function(e,i){return a("el-radio-button",{key:i,attrs:{label:i}},[t._v(" "+t._s(e.label)+" ")])})),1),a("span",{staticClass:"m-left20 m-right10"},[t._v("选择时间范围:")]),a("date-picker",{attrs:{time_option:t.time_option},on:{"fn-emit":t.FnChangeDateTimer}})],1)},n=[],s=a("d4ec"),r=a("bee2"),l=a("262e"),c=a("2caf"),o=(a("b64b"),a("9ab4")),u=a("1b40"),_=a("9a8d"),m=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.time_option={placeholder:["开始时间","结束时间"],type:"datetimerange",width:"360",clearable:!1,dis_day:t.dis_day,min_date:t.start_time,defaultTime:[]},t.time_list=Object.keys(t.timeList).length>0?t.timeList:{hour:{label:"1小时",time:36e5},"6_hour":{label:"6小时",time:216e5},"12_hour":{label:"12小时",time:432e5},day:{label:"1天",time:864e5},"3_day":{label:"3天",time:2592e5},week:{label:"7天",time:6048e5},"14_day":{label:"14天",time:12096e5}},t.default_time="",t}return Object(r["a"])(a,[{key:"FnChangeTime",value:function(){var t=this.time_list[this.default_time].time,e=(new Date).getTime(),a=new Date(e-t);this.start_time&&new Date(this.start_time)>a&&(a=new Date(this.start_time)),this.time_option.defaultTime=[a,new Date(e)],this.FnEmit(this.time_option.defaultTime)}},{key:"FnChangeDateTimer",value:function(t){if(this.default_time="",0!==t.length){var e=t[1].getTime()-t[0].getTime();for(var a in this.time_list)this.time_list[a].time===e&&(this.default_time=a);this.FnEmit(t)}}},{key:"FnEmit",value:function(t){}},{key:"created",value:function(){this.default_time=this.default_timer?this.default_timer:Object.keys(this.time_list)[0],this.FnChangeTime()}}]),a}(u["e"]);Object(o["a"])([Object(u["c"])({default:""})],m.prototype,"start_time",void 0),Object(o["a"])([Object(u["c"])({default:function(){return{}}})],m.prototype,"timeList",void 0),Object(o["a"])([Object(u["c"])({default:31})],m.prototype,"dis_day",void 0),Object(o["a"])([Object(u["c"])({default:""})],m.prototype,"default_timer",void 0),Object(o["a"])([Object(u["b"])("fn-emit")],m.prototype,"FnEmit",null),m=Object(o["a"])([Object(u["a"])({components:{DatePicker:_["a"]}})],m);var d=m,f=d,h=(a("a06c"),a("11e4"),a("2877")),p=Object(h["a"])(f,i,n,!1,null,"07769091",null);e["a"]=p.exports},4414:function(t,e,a){"use strict";var i=a("81a9"),n=a("bff7");e["a"]={get_cluster_outline:function(t){return Object(i["a"])(Object(n["b"])("GET","/pod/get_cluster_outline/",t))},get_resource_list:function(t){return Object(i["a"])(Object(n["b"])("GET","/cluster/get_resource_available_count_list/",t))},get_cluster_task_list:function(t){return Object(i["a"])(Object(n["b"])("POST","/event/get_cluster_task_list/",t))}}},a06c:function(t,e,a){"use strict";a("14da")},e6e0:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("action-block",{staticClass:"m-bottom10",attrs:{search_option:t.search_option},on:{"fn-search":t.fn_search}},[a("time-group",{attrs:{start_time:t.start_time,timeList:t.timeList,default_timer:"30_day"},on:{"fn-emit":t.FnGetTimer}})],1),a("div",{staticClass:"main-2"},[a("el-table",{ref:"table",attrs:{data:t.data_list,height:"100%"},on:{"filter-change":t.filterAttribute}},[a("el-table-column",{attrs:{prop:"task_type",label:"任务名称"}}),a("el-table-column",{attrs:{prop:"cloud_id",label:"对象"}}),a("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),a("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",filters:t.status_list,"filter-multiple":!1,"column-key":"status",width:"80px"}}),a("el-table-column",{attrs:{prop:"event_content",label:"详细信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[Object.keys(e.row.event_content).length>0?a("div",t._l(e.row.event_content,(function(e,i){return a("div",{key:i},[t._v(" "+t._s(i)+": "+t._s(e)+" ")])})),0):a("div",[t._v("-")])]}}])}),a("el-table-column",{attrs:{prop:"create_time",label:"开始时间"}}),a("el-table-column",{attrs:{prop:"end_time",label:"完成时间"}})],1)],1),a("el-pagination",{attrs:{"current-page":t.page_info.current,"page-sizes":[20,50,100],"page-size":t.page_info.size,layout:"total, sizes, prev, pager, next, jumper",total:t.page_info.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},n=[],s=a("5530"),r=a("1da1"),l=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),_=(a("96cf"),a("ac1f"),a("5319"),a("9ab4")),m=a("1b40"),d=a("c811"),f=a("1f82"),h=a("1296"),p=a("4414"),b=a("c1df"),v=a.n(b),g=function(t){Object(o["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(l["a"])(this,a),t=e.apply(this,arguments),t.default_date_timer=[],t.data_list=[],t.status_list=[],t.search_data={},t.filter_obj=null,t.type_list=[{type:"crash_cold_migrate",label:"宕机迁移"},{type:"gpu_recover",label:"GPU恢复"},{type:"gpu_ff",label:"GPU掉卡"}],t.search_option={event_concre:{placeholder:"请输入事件内容"},event_type:{placeholder:"请选择事件类型",list:t.type_list},customer_id:{placeholder:"请输入客户ID"},cloud_id:{placeholder:"请输入对象ID"}},t.start_time=new Date((new Date).setDate((new Date).getDate()-90)).toISOString().replace("Z","+08:00"),t.timeList={"6_hour":{label:"6小时",time:216e5},"12_hour":{label:"12小时",time:432e5},day:{label:"1天",time:864e5},"3_day":{label:"3天",time:2592e5},week:{label:"7天",time:6048e5},"14_day":{label:"14天",time:12096e5},"30_day":{label:"30天",time:2592e6}},t.page_info={current:1,size:20,total:0},t}return Object(c["a"])(a,[{key:"created",value:function(){this.getFilterList()}},{key:"getFilterList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h["a"].get_filter_list({filed_names:["event_status"]});case 2:if(e=t.sent,"Success"===e.code)for(a in e.data.event_status)this.status_list.push({text:e.data.event_status[a],value:a});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"fn_search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.search_data=Object(s["a"])(Object(s["a"])({},t),this.filter_obj),this.FnGetList()}},{key:"FnGetList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.search_data,a={cluster_id:this.$route.params.id,page_index:this.page_info.current,page_size:this.page_info.size,status:e.status?e.status[0]:void 0,customer_id:e.customer_id||"",task_type:e.event_type||"",cloud_id:e.cloud_id||"",event_content:e.event_concre||"",start_time:v()(this.default_date_timer[0]).format("YYYY-MM-DD HH:mm:ss"),end_time:v()(this.default_date_timer[1]).format("YYYY-MM-DD HH:mm:ss")},t.next=4,p["a"].get_cluster_task_list(a);case 4:i=t.sent,"Success"===i.code&&(this.data_list=i.data.event_list,this.page_info.total=i.data.page_info.count);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnGetTimer",value:function(t){this.default_date_timer=t,this.fn_search(this.search_data)}},{key:"handleSizeChange",value:function(t){this.page_info.size=t,this.fn_search(this.search_data)}},{key:"handleCurrentChange",value:function(t){this.page_info.current=t,this.fn_search(this.search_data)}},{key:"filterAttribute",value:function(t){this.filter_obj=Object(s["a"])(Object(s["a"])({},this.filter_obj),t),this.fn_search(this.search_data)}}]),a}(m["e"]);g=Object(_["a"])([Object(m["a"])({components:{TimeGroup:f["a"],ActionBlock:d["a"]}})],g);var y=g,j=y,O=a("2877"),k=Object(O["a"])(j,i,n,!1,null,"48470450",null);e["default"]=k.exports}}]);
//# sourceMappingURL=chunk-3883ef3a.1747715207673.js.map