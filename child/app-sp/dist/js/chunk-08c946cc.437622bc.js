(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-08c946cc"],{"1c50":function(t,e,a){"use strict";var n=a("81a9");e["a"]={get_maintask_list:function(t){return Object(n["a"])({method:"GET",url:"/api/v1/maintask/configuration",params:t})},add_maintask:function(t){return Object(n["a"])({method:"POST",url:"/api/v1/maintask/configuration",data:t})},update_maitask:function(t){return Object(n["a"])({method:"PUT",url:"/api/v1/maintask/configuration",data:t})},delete_maintask:function(t){return Object(n["a"])({method:"DELETE",url:"/api/v1/maintask/configuration",params:t})},get_maintask_detail:function(t){return Object(n["a"])({method:"GET",url:"/api/v1/maintask/configuration/detail",params:t})}}},"574f":function(t,e,a){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),i=a("5899"),r="["+i+"]",s=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),o=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(c,"")),a}};t.exports={start:o(1),end:o(2),trim:o(3)}},"5c06":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action-box"},[a("div",{staticClass:"search-box"},[t._l(t.search_option,(function(e,n){return a("div",{key:n,staticClass:"search-input"},[e.list?a("el-select",{model:{value:t.search_value[n],callback:function(e){t.$set(t.search_value,n,e)},expression:"search_value[key]"}},t._l(e.list,(function(t){return a("el-option",{key:t.type,attrs:{label:t.label,value:t.type}})})),1):a("el-input",{attrs:{placeholder:e.placeholder},model:{value:t.search_value[n],callback:function(e){t.$set(t.search_value,n,e)},expression:"search_value[key]"}})],1)})),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.FnSearch}},[t._v("查 询")])],1)],2),t._t("default",(function(){return[t.create_btn?a("el-button",{attrs:{type:"primary"},on:{click:t.FnShowCreate}},[t._v(t._s(t.create_btn))]):t._e()]}))],2)},i=[],r=a("d4ec"),s=a("bee2"),c=a("262e"),o=a("2caf"),u=a("9ab4"),l=a("1b40"),f=function(t){Object(c["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.search_value={id:"",maintask_name:"",maintask_type:"",subtask_type:"",subtask_name:""},t}return Object(s["a"])(a,[{key:"FnSearch",value:function(){this.$emit("fn-search",this.search_value)}},{key:"FnShowCreate",value:function(){this.$emit("fn-create")}},{key:"created",value:function(){}}]),a}(l["c"]);Object(u["a"])([Object(l["b"])({default:{}})],f.prototype,"search_option",void 0),Object(u["a"])([Object(l["b"])({default:""})],f.prototype,"create_btn",void 0),f=Object(u["a"])([Object(l["a"])({})],f);var _=f,m=_,p=(a("b968"),a("2877")),d=Object(p["a"])(m,n,i,!1,null,"6dc302fe",null);e["a"]=d.exports},"6f25":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("action-block",{attrs:{search_option:t.search_con,create_btn:"新建主任务配置"},on:{"fn-search":t.FnGetList,"fn-create":t.FnShowCreate}}),a("el-table",{attrs:{data:t.task_list,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.FnDetail(e.row.id)}}},[t._v(t._s(e.row.id))])]}}])}),a("el-table-column",{attrs:{prop:"maintask_name",label:"名称"}}),a("el-table-column",{attrs:{prop:"priority",label:"优先级"}}),a("el-table-column",{attrs:{prop:"retry",label:"重试次数"}}),a("el-table-column",{attrs:{prop:"timeout",label:"超时时间"}}),a("el-table-column",{attrs:{prop:"callback_url",label:"回退地址"}}),a("el-table-column",{attrs:{prop:"is_valid",label:"is_valid"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.FnShowUpdate(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.FnShowDel(e.row.id,e.row.maintask_name)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:t.dialog_title,visible:t.create_dialog,width:"50%"},on:{"update:visible":function(e){t.create_dialog=e}}},[a("div",[a("label-block",{attrs:{label:"主任务名称"},scopedSlots:t._u([{key:"default",fn:function(){return[a("el-input",{attrs:{type:"text"},model:{value:t.main_config.main_name,callback:function(e){t.$set(t.main_config,"main_name",e)},expression:"main_config.main_name"}})]},proxy:!0}])}),a("label-block",{attrs:{label:"主任务优先级"},scopedSlots:t._u([{key:"default",fn:function(){return[a("el-input-number",{attrs:{min:1,max:10},model:{value:t.main_config.priority,callback:function(e){t.$set(t.main_config,"priority",e)},expression:"main_config.priority"}})]},proxy:!0}])}),a("label-block",{attrs:{label:"主任务重试次数"},scopedSlots:t._u([{key:"default",fn:function(){return[a("el-input-number",{attrs:{min:1,max:10},model:{value:t.main_config.retry,callback:function(e){t.$set(t.main_config,"retry",e)},expression:"main_config.retry"}}),t._v(" 次 ")]},proxy:!0}])}),a("label-block",{attrs:{label:"主任务超时时间"},scopedSlots:t._u([{key:"default",fn:function(){return[a("el-input-number",{attrs:{min:1,max:600},model:{value:t.main_config.timeout,callback:function(e){t.$set(t.main_config,"timeout",e)},expression:"main_config.timeout"}}),t._v(" 秒 ")]},proxy:!0}])}),a("label-block",{attrs:{label:"主任务回退地址"},scopedSlots:t._u([{key:"default",fn:function(){return[a("el-input",{attrs:{type:"text"},model:{value:t.main_config.callback_url,callback:function(e){t.$set(t.main_config,"callback_url",e)},expression:"main_config.callback_url"}})]},proxy:!0}])}),t.default_id?a("label-block",{staticClass:"switch-box",attrs:{label:"有效"},scopedSlots:t._u([{key:"default",fn:function(){return[a("el-switch",{attrs:{"active-color":"#455cc6","inactive-color":"#ccc"},model:{value:t.main_config.is_valid,callback:function(e){t.$set(t.main_config,"is_valid",e)},expression:"main_config.is_valid"}})]},proxy:!0}],null,!1,1067134834)}):t._e(),a("label-block",{attrs:{label:"子任务配置"},scopedSlots:t._u([{key:"default",fn:function(){return[a("dragger-task",{attrs:{sub_task:t.sub_task_list,rel_task:t.default_sub_task},on:{"fn-rel-task":t.FnGetRelTask}})]},proxy:!0}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.FnConfirm}},[t._v("确 定")]),a("el-button",{on:{click:t.FnClose}},[t._v("取 消")])],1)])],1)},i=[],r=a("1da1"),s=a("d4ec"),c=a("bee2"),o=a("262e"),u=a("2caf"),l=(a("96cf"),a("d81d"),a("a9e3"),a("9ab4")),f=a("1b40"),_=a("98c9"),m=a("b508"),p=a("5c06"),d=a("1c50"),b=a("bcc9"),h=function(t){Object(o["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.search_con={id:{placeholder:"请输入任务ID"},maintask_name:{placeholder:"请输入任务名称"}},t.create_dialog=!1,t.dialog_title="",t.task_list=[],t.default_id="",t.default_sub_task=[],t.main_config={main_name:"",main_type:"",priority:1,retry:1,timeout:60,callback_url:"",sub_task:[],is_valid:!0},t.sub_task_list=[],t}return Object(c["a"])(a,[{key:"FnShowCreate",value:function(){this.create_dialog=!0,this.dialog_title="新建主任务配置",this.FnGetSubList()}},{key:"FnShowUpdate",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.create_dialog=!0,this.dialog_title="更新主任务配置",t.next=4,this.FnGetSubList();case 4:this.default_id=e.id,this.main_config.main_name=e.maintask_name,this.main_config.retry=e.retry,this.main_config.priority=e.priority,this.main_config.timeout=e.timeout,this.main_config.callback_url=e.callback_url,this.main_config.is_valid=Boolean(e.is_valid),this.default_sub_task=JSON.parse(e.subtask_flow).map((function(t){return t.map((function(t){return t.subtask_index_id}))}));case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"FnClose",value:function(){this.create_dialog=!1,this.main_config.main_name="",this.main_config.main_type="",this.main_config.retry=1,this.main_config.priority=1,this.main_config.timeout=60,this.main_config.callback_url="",this.main_config.sub_task=[],this.main_config.is_valid=!0,this.sub_task_list=[],this.default_id="",this.default_sub_task=[]}},{key:"FnGetList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},a={},e.id&&(a.id=e.id),e.maintask_type&&(a.maintask_type=e.maintask_type),e.maintask_name&&(a.maintask_name=e.maintask_name),t.next=7,d["a"].get_maintask_list(a);case 7:n=t.sent,"Success"==n.code&&(this.task_list=n.data.maintask_info);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnGetSubList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b["a"].get_subtask_list();case 2:e=t.sent,"Success"==e.code&&(this.sub_task_list=e.data.subtask_info);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnGetRelTask",value:function(t){this.main_config.sub_task=t.map((function(t){return t.map((function(t){return{subtask_index_id:t}}))}))}},{key:"FnConfirm",value:function(){var t={maintask_name:this.main_config.main_name,priority:this.main_config.priority,retry:this.main_config.retry,timeout:this.main_config.timeout,callback_url:this.main_config.callback_url,subtask_flow:JSON.stringify(this.main_config.sub_task),is_valid:Number(this.main_config.is_valid)};this.default_id?this.FnUpdate(t):this.FnCreate(t)}},{key:"FnCreate",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].add_maintask(e);case 2:a=t.sent,"Success"==a.code&&(this.FnClose(),this.$message.success(a.msg||"成功新建主任务配置！"),this.FnGetList());case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"FnUpdate",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].update_maitask(Object.assign({},e,{id:this.default_id}));case 2:a=t.sent,"Success"==a.code&&(this.FnClose(),this.$message.success(a.msg||"成功更新主任务配置！"),this.FnGetList());case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"FnShowDel",value:function(t,e){var a=this;this.$confirm("确认删除主任务配置 -- ".concat(e),"删除提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then((function(){a.default_id=t,a.FnDel()})).catch()}},{key:"FnDel",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].delete_maintask({id:this.default_id});case 2:e=t.sent,"Success"==e.code&&(this.$message.success(e.msg||"成功删除主项目配置！"),this.FnGetList());case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnDetail",value:function(t){this.$router.push("/mainTaskDetail/".concat(t))}},{key:"created",value:function(){this.FnGetList()}}]),a}(f["c"]);h=Object(l["a"])([Object(f["a"])({components:{LabelBlock:_["a"],draggerTask:m["a"],actionBlock:p["a"]}})],h);var k=h,v=k,g=(a("d830"),a("2877")),y=Object(g["a"])(v,n,i,!1,null,"01844a44",null);e["default"]=y.exports},7156:function(t,e,a){var n=a("861d"),i=a("d2bb");t.exports=function(t,e,a){var r,s;return i&&"function"==typeof(r=e.constructor)&&r!==a&&n(s=r.prototype)&&s!==a.prototype&&i(t,s),t}},a9e3:function(t,e,a){"use strict";var n=a("83ab"),i=a("da84"),r=a("94ca"),s=a("6eeb"),c=a("5135"),o=a("c6b6"),u=a("7156"),l=a("c04e"),f=a("d039"),_=a("7c73"),m=a("241c").f,p=a("06cf").f,d=a("9bf2").f,b=a("58a8").trim,h="Number",k=i[h],v=k.prototype,g=o(_(v))==h,y=function(t){var e,a,n,i,r,s,c,o,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=b(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+u}for(r=u.slice(2),s=r.length,c=0;c<s;c++)if(o=r.charCodeAt(c),o<48||o>i)return NaN;return parseInt(r,n)}return+u};if(r(h,!k(" 0o1")||!k("0b1")||k("+0x1"))){for(var x,w=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof w&&(g?f((function(){v.valueOf.call(a)})):o(a)!=h)?u(new k(y(e)),a,w):y(e)},F=n?m(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),O=0;F.length>O;O++)c(k,x=F[O])&&!c(w,x)&&d(w,x,p(k,x));w.prototype=v,v.constructor=w,s(i,h,w)}},b968:function(t,e,a){"use strict";a("bdfd")},bcc9:function(t,e,a){"use strict";var n=a("81a9");e["a"]={get_subtask_list:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({method:"GET",url:"/api/v1/subtask/configuration",params:t})},add_subtask:function(t){return Object(n["a"])({method:"POST",url:"/api/v1/subtask/configuration",data:t})},update_subtask:function(t){return Object(n["a"])({method:"PUT",url:"/api/v1/subtask/configuration",data:t})},delete_subtask:function(t){return Object(n["a"])({method:"DELETE",url:"/api/v1/subtask/configuration",params:t})}}},bdfd:function(t,e,a){},d81d:function(t,e,a){"use strict";var n=a("23e7"),i=a("b727").map,r=a("1dde"),s=r("map");n({target:"Array",proto:!0,forced:!s},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},d830:function(t,e,a){"use strict";a("574f")}}]);
//# sourceMappingURL=chunk-08c946cc.437622bc.js.map