(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-cae8f778"],{"13f1":function(e,t,a){"use strict";var s=a("81a9"),i=a("bff7");function n(e){let t=i["f"];return"gpu"===e&&(t=i["c"]),t}t["a"]={get_cpu(e,t){return Object(s["a"])(n(e)("GET","/cpu_info",t))},get_disk(e,t){return Object(s["a"])(n(e)("GET","/disk_info",t))},get_load(e,t){return Object(s["a"])(n(e)("GET","/load_info",t))},get_memory(e,t){return Object(s["a"])(n(e)("GET","/memory_info",t))},get_network(e,t){return Object(s["a"])(n(e)("GET","/network_info",t))},get_gpu(e,t){return Object(s["a"])(n(e)("GET","/gpu_info",t))},get_disk_info(e,t){return Object(s["a"])(n(e)("GET","/disk_info",t))},get_eip_info(e){return Object(s["a"])(Object(i["b"])("POST","/ecs/eip_monitor_info/",e))}}},"5b49":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"monitor"},["monitor"===e.source_name?t("div",[t("back-header",{attrs:{title:"NFV云服务器监控",back_url:"/nfv"}}),t("el-card",{staticClass:"m-bottom20 m-top20",scopedSlots:e._u([{key:"header",fn:function(){return[t("span",[e._v("NFV云服务器详情")])]},proxy:!0}],null,!1,2430631505)},[t("div",{staticClass:"detail-box"},e._l(e.detail_info,(function(a,s){return t("div",{key:s,staticClass:"row"},[t("span",{staticClass:"left-title"},[e._v(e._s(a.label)+":")]),t("span",{domProps:{innerHTML:e._s(a.value)}})])})),0)])],1):e._e(),t("el-card",{staticClass:"tab-card"},[t("el-tabs",{attrs:{type:"card"},model:{value:e.default_tab,callback:function(t){e.default_tab=t},expression:"default_tab"}},e._l(e.tab_list,(function(e,a){return t("el-tab-pane",{key:a,attrs:{label:e,name:a}})})),1),e.nfv_info.create_finish_time?t("time-group",{attrs:{start_time:e.nfv_info.create_finish_time},on:{"fn-emit":e.FnGetTimer}}):e._e(),"instance"===e.default_tab?t("div",{staticClass:"chart-box"},[t("line-echart",{staticClass:"item",attrs:{chart_id:"cpu_chart",data:e.cpu_used}}),t("line-echart",{staticClass:"item",attrs:{chart_id:"ram_chart",data:e.memory_used}}),"windows"!==e.nfv_info.os_system.toLocaleLowerCase()?t("line-echart",{staticClass:"item",attrs:{chart_id:"system_chart",data:e.system_load}}):e._e()],1):e._e(),"net"===e.default_tab?t("div",{staticClass:"chart-box"},[t("line-echart",{staticClass:"item",attrs:{chart_id:"net_rate_chart",data:e.net_rate}})],1):e._e(),"disk"===e.default_tab?t("div",{staticClass:"chart-box"},[t("line-echart",{staticClass:"item",attrs:{chart_id:"disk_chart",data:e.disk_used}}),t("line-echart",{staticClass:"item",attrs:{chart_id:"disk_through_chart",data:e.disk_bytes}}),t("line-echart",{staticClass:"item",attrs:{chart_id:"disk_iops_chart",data:e.disk_iops}})],1):e._e(),"gpu"===e.default_tab?t("div",{staticClass:"chart-box"},[t("line-echart",{staticClass:"item",attrs:{chart_id:"gpu_chart",data:e.gpu_used}}),t("line-echart",{staticClass:"item",attrs:{chart_id:"gpu_memory_chart",data:e.gpu_memory_used}}),t("line-echart",{staticClass:"item",attrs:{chart_id:"gpu_temperature",data:e.gpu_temperature}}),t("line-echart",{staticClass:"item",attrs:{chart_id:"gpu_frequency",data:e.gpu_frequency}})],1):e._e()],1)],1)},i=[],n=(a("14d9"),a("e9f5"),a("7d54"),a("ab43"),a("9ab4")),u=a("1b40"),r=a("ed46"),l=a("1f82"),_=a("ff48"),c=a("9f4c"),d=a("13f1"),o=a("c1df"),h=a.n(o);let p=class extends u["e"]{constructor(){super(...arguments),this.source_name="",this.nfv_info={region_id:"",az_id:"",create_finish_time:"",os_system:""},this.detail_info={nfv_id:{label:"云服务器ID",value:""},ecs_rule:{label:"云服务器规格",value:""},status_display:{label:"运行状态",value:""}},this.cpu_used={title:"CPU使用率",unit:"",xTime:[],yValue:[],resize:0},this.memory_used={title:"内存使用率",unit:"",xTime:[],yValue:[],resize:0},this.system_load={title:"系统平均负载",unit:"",xTime:[],yValue:[],resize:0,legend:["1m","5m","15m"]},this.net_in_out={title:"网络流量",unit:"",xTime:[],yValue:[],resize:0,legend:[],line_name:["出网流量","入网流量"],type:"double_line"},this.net_rate={title:"网络吞吐量",unit:"",xTime:[],yValue:[],resize:0,legend:[],line_name:["出网流量速率","入网流量速率"],type:"double_line"},this.disk_used={title:"磁盘使用率",unit:"",xTime:[],yValue:[],resize:0,legend:[]},this.disk_iops={title:"磁盘IOPS",unit:"",xTime:[],yValue:[],resize:0,legend:[],line_name:["读","写"],type:"double_line"},this.disk_bytes={title:"磁盘吞吐量",unit:"",xTime:[],yValue:[],resize:0,legend:[],line_name:["读","写"],type:"double_line"},this.default_tab="",this.tab_list={instance:"主机",net:"网络",disk:"磁盘"},this.gpu_used={title:"GPU使用率",unit:"",xTime:[],yValue:[],resize:0},this.gpu_memory_used={title:"显存使用率",unit:"",xTime:[],yValue:[],resize:0},this.gpu_temperature={title:"GPU温度",unit:"",xTime:[],yValue:[],resize:0},this.gpu_frequency={title:"GPU主频",unit:"",xTime:[],yValue:[],resize:0,line_name:["GPU核心频率","显存频率"],type:"double_line"},this.default_date_timer=[]}FnGetTimer(e){this.default_date_timer=e,this.FnGetChartData()}FnGetChartData(){let e="kvm",t=this.detail_info.nfv_id.value,a=this.nfv_info.region_id,s=this.nfv_info.az_id,i="vm";if(!t)return;let n={hostId:t,region:a,replica:s,ip:this.$route.params.ip,instanceType:i,os:this.nfv_info.os_system.toLocaleLowerCase(),start:h.a.utc(this.default_date_timer[0]).format("YYYY-MM-DD HH:mm:ss"),end:h.a.utc(this.default_date_timer[1]).format("YYYY-MM-DD HH:mm:ss")};"instance"===this.default_tab?(this.FnGetCpu(e,n),this.FnGetMemory(e,n),"windows"!==this.nfv_info.os_system.toLocaleLowerCase()&&this.FnGetLoad(e,n)):"disk"===this.default_tab?this.FnGetDiskInfo(e,n):"net"===this.default_tab?this.FnGetNetInfo(e,n):"gpu"===this.default_tab&&this.FnGetGpuInfo(e,n)}async FnGetDetail(){const e=await c["a"].get_detail({nfv_id:this.$route.params.id});if("Success"===e.code){let t=e.data.nfv_info;this.nfv_info={region_id:t.region_id,az_id:t.az_id,os_system:"",create_finish_time:h()(new Date(t.create_finish_time)).format()},this.detail_info.nfv_id.value=t.nfv_id,this.detail_info.status_display.value=t.status_display,this.detail_info.ecs_rule.value=`${t.cpu}vCPU ${t.ram}GiB`,t.is_gpu||u["e"].delete(this.tab_list,"gpu")}}async FnGetCpu(e,t){let a=await d["a"].get_cpu(e,Object.assign({queryType:"use_total"},t));this.FnHandleSingleData("cpu_used",a)}async FnGetMemory(e,t){let a=await d["a"].get_memory(e,Object.assign({queryType:"used"},t));this.FnHandleSingleData("memory_used",a)}FnHandleSingleData(e,t){"Success"===t.code&&(this[e].xTime=t.data.xTime,this[e].yValue=t.data.yValues,this[e].unit=t.data.unit),this[e].resize++}async FnGetLoad(e,t){this.system_load.yValue=[];let a=this.system_load.legend;Promise.all([d["a"].get_load(e,Object.assign({queryType:a[0]},t)),d["a"].get_load(e,Object.assign({queryType:a[1]},t)),d["a"].get_load(e,Object.assign({queryType:a[2]},t))]).then(e=>{this.FnHandleMoreData("system_load",e)})}FnHandleMoreData(e,t){let a=0;t.forEach(t=>{"Success"===t.code&&(0===a&&(this[e].xTime=t.data.xTime,this[e].unit=t.data.unit),this[e].yValue.push(t.data.yValues)),a++}),this[e].resize++}FnGetDiskInfo(e,t){d["a"].get_disk(e,Object.assign({queryType:"use"},t)).then(e=>{"Success"===e.code&&(this.disk_used.xTime=e.data.xTime,this.disk_used.yValue=e.data.yValues,this.disk_used.legend=e.data.metricInfo,this.disk_used.unit=e.data.unit);this.disk_used.resize++}),this.disk_bytes.yValue=[],Promise.all([d["a"].get_disk(e,Object.assign({queryType:"readbytes"},t)),d["a"].get_disk(e,Object.assign({queryType:"writebytes"},t))]).then(e=>{this.FnHandleDubleData("disk_bytes",e)}),this.disk_iops.yValue=[],Promise.all([d["a"].get_disk(e,Object.assign({queryType:"readiops"},t)),d["a"].get_disk(e,Object.assign({queryType:"writeiops"},t))]).then(e=>{this.FnHandleDubleData("disk_iops",e)})}FnHandleDubleData(e,t){let a=0;t.forEach(t=>{"Success"===t.code&&(t.data.metricInfo=t.data.metricInfo||t.data.device||t.data.gpuName,0===a?(this[e].xTime=t.data.xTime,this[e].legend=t.data.metricInfo,this[e].unit=t.data.unit):t.data.metricInfo&&t.data.metricInfo.forEach(t=>{this[e].legend.push(t+this.disk_iops.type)}),t.data.yValues&&(console.log("1",this[e].yValue),this[e].yValue.push(...t.data.yValues),console.log("2",this[e].yValue))),a++}),this[e].resize++,console.log("####",this[e])}FnGetNetInfo(e,t){this.net_in_out.yValue=[],this.net_rate.yValue=[],Promise.all([d["a"].get_network(e,Object.assign({queryType:"networkout_rate"},t)),d["a"].get_network(e,Object.assign({queryType:"networkin_rate"},t))]).then(e=>{this.FnHandleDubleData("net_rate",e)})}FnGetGpuInfo(e,t){this.gpu_used.yValue=[],d["a"].get_gpu(e,Object.assign({queryType:"gpu_usage"},t)).then(e=>{this.FnHandleDubleData("gpu_used",[e])}),this.gpu_memory_used.yValue=[],d["a"].get_gpu(e,Object.assign({queryType:"memory_usage"},t)).then(e=>{this.FnHandleDubleData("gpu_memory_used",[e])}),this.gpu_temperature.yValue=[],d["a"].get_gpu(e,Object.assign({queryType:"temperature"},t)).then(e=>{this.FnHandleDubleData("gpu_temperature",[e])}),this.gpu_frequency.yValue=[],Promise.all([d["a"].get_gpu(e,Object.assign({queryType:"gpu_clocks_graphics"},t)),d["a"].get_gpu(e,Object.assign({queryType:"gpu_clocks_memory"},t))]).then(e=>{this.FnHandleDubleData("gpu_frequency",e)}),this.gpu_frequency.yValue=[],Promise.all([d["a"].get_gpu(e,Object.assign({queryType:"gpu_clocks_graphics"},t)),d["a"].get_gpu(e,Object.assign({queryType:"gpu_clocks_memory"},t))]).then(e=>{console.log("resData",e),e.map(e=>(e.data.yValues&&e.data.yValues.length>0&&(e.data.yValues=[e.data.yValues]),e)),this.FnHandleDubleData("gpu_frequency",e)})}created(){this.default_tab=Object.keys(this.tab_list)[0],this.source_name=this.$route.name,this.FnGetDetail()}destroyed(){}FnChangeTab(e,t){t&&this.FnGetChartData()}};Object(n["a"])([Object(u["f"])("default_tab")],p.prototype,"FnChangeTab",null),p=Object(n["a"])([Object(u["a"])({components:{BackHeader:r["a"],TimeGroup:l["a"],LineEchart:_["a"]}})],p);var f=p,y=f,m=(a("9eb2"),a("90cc"),a("2877")),b=Object(m["a"])(y,s,i,!1,null,"cd89ec7c",null);t["default"]=b.exports},"6d04":function(e,t,a){},"8a45":function(e,t,a){},"90cc":function(e,t,a){"use strict";a("8a45")},"9eb2":function(e,t,a){"use strict";a("6d04")},"9f4c":function(e,t,a){"use strict";var s=a("81a9"),i=a("bff7");t["a"]={get_nfv_list(e){return Object(s["a"])(Object(i["b"])("GET","/nfv/nfv_list/",e))},operate_nfv(e){return Object(s["a"])(Object(i["b"])("POST","/nfv/operate/",e))},get_vnc_url(e){return Object(s["a"])(Object(i["b"])("POST","/nfv/vnc_info/",e))},get_status_list(){return Object(s["a"])(Object(i["b"])("GET","/nfv/nfv_status_list/"))},get_detail(e){return Object(s["a"])(Object(i["b"])("GET","/nfv/nfv_detail/",e))}}},a58a:function(e,t,a){"use strict";a("e410")},e410:function(e,t,a){},ed46:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"box"},[t("div",[t("span",[e._v(e._s(e.title))]),e._t("left")],2),t("div",[e._t("default"),e.no_back?e._e():t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.FnBack}},[e._v("返回")])],2)]),t("div",{staticClass:"perch"})])},i=[],n=(a("14d9"),a("9ab4")),u=a("1b40");let r=class extends u["e"]{FnBack(){this.back_url?this.$router.push(this.back_url):this.$router.go(-1)}};Object(n["a"])([Object(u["c"])({default:""})],r.prototype,"title",void 0),Object(n["a"])([Object(u["c"])({default:""})],r.prototype,"back_url",void 0),Object(n["a"])([Object(u["c"])({default:!1})],r.prototype,"no_back",void 0),r=Object(n["a"])([u["a"]],r);var l=r,_=l,c=(a("a58a"),a("2877")),d=Object(c["a"])(_,s,i,!1,null,"bdf5ebe2",null);t["a"]=d.exports}}]);
//# sourceMappingURL=chunk-cae8f778.1763535500878.js.map