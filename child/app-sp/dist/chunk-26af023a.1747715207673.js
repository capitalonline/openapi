(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-26af023a"],{"00b4":function(e,t,a){"use strict";a("ac1f");var n=a("23e7"),r=a("da84"),i=a("c65b"),s=a("e330"),o=a("1626"),c=a("861d"),l=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),u=r.Error,p=s(/./.test);n({target:"RegExp",proto:!0,forced:!l},{test:function(e){var t=this.exec;if(!o(t))return p(this,e);var a=i(t,this,e);if(null!==a&&!c(a))throw new u("RegExp exec method returned something other than an Object or null");return!!a}})},"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3"),a("ac1f"),a("00b4");var n=a("6b75");function r(e,t){if(e){if("string"===typeof e)return Object(n["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(n["a"])(e,t):void 0}}},"249f":function(e,t,a){"use strict";a("9366")},"2d76":function(e,t,a){"use strict";a("a5d9")},3673:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("svg",{staticClass:"svg-icon",attrs:{id:"svgIcon",viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("defs",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[a("linearGradient",{attrs:{x1:"50%",y1:"18.3303197%",x2:"50%",y2:"100%",id:"linearGradient-1"}},[a("stop",{attrs:{"stop-color":"#8C8D94","stop-opacity":"0",offset:"0%"}}),a("stop",{attrs:{"stop-color":"#8C8D94",offset:"100%"}})],1),a("linearGradient",{attrs:{x1:"50%",y1:"21.3748651%",x2:"50%",y2:"100%",id:"linearGradient-2"}},[a("stop",{attrs:{"stop-color":"#8C8D94","stop-opacity":"0",offset:"0%"}}),a("stop",{attrs:{"stop-color":"#8C8D94",offset:"100%"}})],1),a("linearGradient",{attrs:{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"linearGradient-3"}},[a("stop",{attrs:{"stop-color":"#8C8D94","stop-opacity":"0",offset:"0%"}}),a("stop",{attrs:{"stop-color":"#8C8D94",offset:"100%"}})],1),a("linearGradient",{attrs:{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"linearGradient-4"}},[a("stop",{attrs:{"stop-color":"#8C8D94","stop-opacity":"0",offset:"0%"}}),a("stop",{attrs:{"stop-color":"#8C8D94",offset:"100%"}})],1)],1),e._v(" "),"search"===e.icon?a("g",[a("path",{attrs:{d:"M5.66666667,10.8333333 C2.81319546,10.8333333 0.5,8.52013787 0.5,5.66666667 C0.5,2.81319546 2.81319546,0.5 5.66666667,0.5 C8.52013787,\n    0.5 10.8333333,2.81319546 10.8333333,5.66666667 C10.8333333,8.52013787 8.52013787,10.8333333 5.66666667,10.8333333 Z M5.66666667,9.83333333 C7.96785312,\n    9.83333333 9.83333333,7.96785312 9.83333333,5.66666667 C9.83333333,3.36548021 7.96785312,1.5 5.66666667,1.5 C3.36548021,1.5 1.5,3.36548021 1.5,\n    5.66666667 C1.5,7.96785312 3.36548021,9.83333333 5.66666667,9.83333333 Z"}}),a("path",{attrs:{d:"M8.24644661,9.75355339 L11.4464466,12.9535534 C11.6417088,13.1488155 11.9582912,13.1488155 12.1535534,12.9535534 C12.3488155,12.7582912 12.3488155,\n    12.4417088 12.1535534,12.2464466 L8.95355339,9.04644661 C8.75829124,8.85118446 8.44170876,8.85118446 8.24644661,9.04644661 C8.05118446,9.24170876 8.05118446,\n    9.55829124 8.24644661,9.75355339 Z"}})]):e._e(),"refresh"===e.icon?a("g",[a("g",{attrs:{transform:"translate(-160.000000, -212.000000)"}},[a("path",{attrs:{d:"M173.918376,216.305631 L172.182224,217.058009 C172.182224,217.058009 170.986665,213.932711 167.628085,213.903723 C164.269505,\n    213.8749 163.244856,216.305631 163.244856,216.305631 L164.497115,216.913397 L160.540755,219.980882 L160,215.003465 L161.423168,\n    215.611231 C161.423168,215.611231 163.017085,212.543745 166.005657,212.10958 C168.99423,211.67558 170.759056,212.601557 171.982964,\n    213.643323 C173.206873,214.685089 173.918376,216.305631 173.918376,216.305631 Z M161.081624,221.694369 L162.817938,220.941991 C162.817938,\n    220.941991 164.013335,224.067289 167.371915,224.096277 C170.730657,224.1251 171.755144,221.694369 171.755144,221.694369 L170.502885,\n    221.086603 L174.459245,218.019283 L175,222.996535 L173.576832,222.388934 C173.576832,222.388934 171.982915,225.456255 168.994343,\n    225.89042 C166.00577,226.32442 164.240944,225.398443 163.017036,224.356677 C161.793289,223.314911 161.081624,221.694369 161.081624,221.694369 Z"}})])]):e._e(),"export"===e.icon?a("g",[a("rect",{attrs:{x:"6",y:"4",width:"4",height:"6"}}),a("polygon",{attrs:{transform:"translate(8.000000, 2.500000) rotate(-180.000000) translate(-8.000000, -2.500000) ",points:"3 0 13 0 8 5"}}),a("path",{attrs:{d:"M3.5,16.4734508 L4.5,16.4734508 L4.5,18.5 L6.9,18.5 C9.44050985,18.5 11.5,16.4405098 11.5,13.9 L11.5,9.1 C11.5,6.55949015 9.44050985,\n    4.5 6.9,4.5 L4.5,4.5 L4.5,6.52654919 L3.5,6.52654919 L3.5,4.5 C3.5,3.94771525 3.94771525,3.5 4.5,3.5 L6.9,3.5 C9.9927946,3.5 12.5,6.0072054 12.5,\n    9.1 L12.5,13.9 C12.5,16.9927946 9.9927946,19.5 6.9,19.5 L6.27777778,19.5 L4.5,19.5 C3.94771525,19.5 3.5,19.0522847 3.5,18.5 L3.5,16.4734508 Z M3.5,\n    16.4734508 L4.5,16.4734508 L4.5,18.5 L6.27777778,18.5 L6.9,18.5 C9.44050985,18.5 11.5,16.4405098 11.5,13.9 L11.5,9.1 C11.5,6.55949015 9.44050985,\n    4.5 6.9,4.5 L4.5,4.5 L4.5,6.52654919 L3.5,6.52654919 L3.5,4.5 C3.5,3.94771525 3.94771525,3.5 4.5,3.5 L6.9,3.5 C9.9927946,3.5 12.5,6.0072054 12.5,\n    9.1 L12.5,13.9 C12.5,16.9927946 9.9927946,19.5 6.9,19.5 L4.5,19.5 C3.94771525,19.5 3.5,19.0522847 3.5,18.5 L3.5,16.4734508 Z",transform:"translate(8.000000, 11.500000) rotate(-270.000000) translate(-8.000000, -11.500000) "}})]):e._e(),"detail"===e.icon?a("g",[a("path",{attrs:{d:"M0,5.9 L1.5,5.9 L1.5,10.1 C1.5,11.9777681 3.02223185,13.5 4.9,13.5 L9.1,13.5 C10.9777681,13.5 12.5,11.9777681 12.5,10.1 L12.5,5.9 C12.5,\n    4.02223185 10.9777681,2.5 9.1,2.5 L4.9,2.5 L4.9,1 L9.1,1 C11.8061953,1 14,3.19380473 14,5.9 L14,10.1 C14,12.8061953 11.8061953,15 9.1,15 L4.9,\n    15 C2.19380473,15 3.31413338e-16,12.8061953 0,10.1 L0,5.9 Z M0,5.9 L1.5,5.9 L1.5,10.1 C1.5,11.9777681 3.02223185,13.5 4.9,13.5 L9.1,13.5 C10.9777681,\n    13.5 12.5,11.9777681 12.5,10.1 L12.5,5.9 C12.5,4.02223185 10.9777681,2.5 9.1,2.5 L4.9,2.5 L4.9,1 L9.1,1 C11.8061953,1 14,3.19380473 14,5.9 L14,\n    10.1 C14,12.8061953 11.8061953,15 9.1,15 L4.9,15 C2.19380473,15 3.31413338e-16,12.8061953 0,10.1 L0,5.9 Z",transform:"translate(7.000000, 8.000000) rotate(-270.000000) translate(-7.000000, -8.000000) "}}),a("path",{attrs:{d:"M13.0304984,0.969669914 L10.0304984,3.96966991 C9.73760516,4.26256313 9.73760516,4.73743687 10.0304984,5.03033009 C10.3233916,5.3232233 10.7982653,\n    5.3232233 11.0911586,5.03033009 L14.0911586,2.03033009 C14.3840518,1.73743687 14.3840518,1.26256313 14.0911586,0.969669914 C13.7982653,0.676776695 13.3233916,\n    0.676776695 13.0304984,0.969669914 Z"}}),e._v(" "),a("path",{attrs:{d:"M4,7.75 L7,7.75 C7.41421356,7.75 7.75,7.41421356 7.75,7 C7.75,6.58578644 7.41421356,6.25 7,6.25 L4,\n    6.25 C3.58578644,6.25 3.25,6.58578644 3.25,7 C3.25,7.41421356 3.58578644,7.75 4,7.75 Z"}}),e._v(" "),a("path",{attrs:{d:"M4,10.75 L9,10.75 C9.41421356,10.75 9.75,\n    10.4142136 9.75,10 C9.75,9.58578644 9.41421356,9.25 9,9.25 L4,9.25 C3.58578644,9.25 3.25,9.58578644 3.25,10 C3.25,10.4142136 3.58578644,10.75 4,10.75 Z"}})]):e._e(),"more"===e.icon?a("g",[a("g",{attrs:{transform:"translate(2, 7)"}},[a("circle",{attrs:{cx:"1.5",cy:"1.5",r:"1.5"}}),e._v(" "),a("circle",{attrs:{cx:"6.5",cy:"1.5",r:"1.5"}}),a("circle",{attrs:{cx:"11.5",cy:"1.5",r:"1.5"}})])]):e._e(),"copy"===e.icon?a("g",[a("g",{attrs:{transform:"translate(-30.000000, -141.000000)","fill-rule":"nonzero",fill:"#8078D6"}},[a("g",{attrs:{transform:"translate(30.000000, 141.000000)"}},[a("path",{attrs:{d:"M6.18949336e-15,5.74573472 C0.603568923,4.70213211 1.73168467,4 3.02375885,4 L8.50923955,4 C10.4371333,4 12,5.56318412 12,7.49146945 L12,\n    12.975627 C12,14.2679636 11.2980105,15.3963085 10.2546198,16 L10.2546198,13.942267 C10.41349,13.6559043 10.5039598,13.326333 10.5039598,\n    12.975627 L10.5039598,7.49146945 C10.5039598,6.38959212 9.61089313,5.49634405 8.50923955,5.49634405 L3.02375885,5.49634405 C2.67312412,\n    5.49634405 2.34361974,5.58683223 2.0573151,5.74573472 L6.10622664e-15,5.74573472 Z",id:"Combined-Shape",transform:"translate(6.000000, 10.000000) rotate(-180.000000) translate(-6.000000, -10.000000) "}}),a("path",{attrs:{d:"M14.5,6.87867966 L14.5,3.9 C14.5,2.5745166 13.4254834,1.5 12.1,1.5 L6.9,1.5 C5.5745166,1.5 4.5,\n    2.5745166 4.5,3.9 L4.5,9.1 C4.5,10.4254834 5.5745166,11.5 6.9,11.5 L9.87867966,11.5 L14.5,6.87867966 Z M10.5,\n    13 L6.9,13 C4.74608948,13 3,11.2539105 3,9.1 L3,3.9 C3,1.74608948 4.74608948,0 6.9,0 L12.1,4.4408921e-16 C14.2539105,\n    4.4408921e-16 16,1.74608948 16,3.9 L16,7.5 L10.5,13 Z",id:"Rectangle-99",transform:"translate(9.500000, 6.500000) rotate(-90.000000) translate(-9.500000, -6.500000) "}}),e._v(" "),a("path",{attrs:{d:"M15,0.5 L11,0.5 C10.1715729,0.5 9.5,1.17157288 9.5,2 L9.5,6 L10.5,6 L10.5,2 C10.5,1.72385763 10.7238576,\n    1.5 11,1.5 L15,1.5 L15,0.5 Z",id:"Path-52",transform:"translate(12.250000, 3.250000) rotate(-90.000000) translate(-12.250000, -3.250000) "}})])])]):e._e(),"info"===e.icon?a("g",[a("path",{attrs:{d:"M8.51248164,17.1097561 C4.08294846,17.1097561 0.5,13.3873542 0.5,8.80487805 C0.5,4.22240188 4.08294846,0.5 8.51248164,0.5 C12.9420148,\n    0.5 16.5249633,4.22240188 16.5249633,8.80487805 C16.5249633,13.3873542 12.9420148,17.1097561 8.51248164,17.1097561 Z M8.51248164,16.1097561 C12.3810065,16.1097561 15.5249633,\n    12.8434321 15.5249633,8.80487805 C15.5249633,4.76632398 12.3810065,1.5 8.51248164,1.5 C4.64395674,1.5 1.5,4.76632398 1.5,8.80487805 C1.5,12.8434321 4.64395674,\n    16.1097561 8.51248164,16.1097561 Z",id:"Oval-3","fill-rule":"nonzero",fill:"#455cc6"}}),a("ellipse",{attrs:{id:"Oval-4",cx:"8.51248164",cy:"4.90243902",rx:"1",ry:"1"}}),a("rect",{attrs:{id:"Rectangle-10",x:"7.57342144",y:"6.85365854",width:"1.87812041",height:"6.82926829",rx:"0.939060206"}})]):e._e()])},r=[],i=a("bee2"),s=a("d4ec"),o=a("262e"),c=a("2caf"),l=a("9ab4"),u=a("1b40"),p=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(s["a"])(this,a),t.apply(this,arguments)}return Object(i["a"])(a)}(u["e"]);Object(l["a"])([Object(u["c"])({default:""})],p.prototype,"icon",void 0),p=Object(l["a"])([u["a"]],p);var d=p,f=d,h=(a("249f"),a("2877")),_=Object(h["a"])(f,n,r,!1,null,"7bbf8d24",null);t["a"]=_.exports},"41aa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"gpuBox"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"GPU管理",name:"first"}}),a("el-tab-pane",{attrs:{label:"GPU故障记录",name:"second"}})],1),a("div",["first"===e.activeName?[a("gpu_list")]:[a("gpu_fault-record")]],2)],1)},r=[],i=a("bee2"),s=a("d4ec"),o=a("262e"),c=a("2caf"),l=a("9ab4"),u=a("1b40"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"instance-list"},[a("action-block",{attrs:{search_option:e.search_con,type:!0},on:{"fn-search":e.FnSearch}}),a("el-table",{ref:"table",attrs:{data:e.gpu_list,"row-class-name":e.rowStyle,border:""},on:{"filter-change":e.handleFilterChange,"selection-change":e.handleSelectionChange,"row-click":e.FnOperRow,"row-contextmenu":e.FnRightClick}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),a("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),a("el-table-column",{attrs:{prop:"host_name",label:"主机名"}}),a("el-table-column",{attrs:{prop:"host_id",label:"物理机ID",width:"200px"}}),a("el-table-column",{attrs:{prop:"host_ip",label:"管理网IP"}}),a("el-table-column",{attrs:{prop:"card_name",label:"GPU"}}),a("el-table-column",{attrs:{label:"Slot号",prop:"slot"}}),a("el-table-column",{attrs:{label:"PCIe号",prop:"pci_address"}}),a("el-table-column",{attrs:{label:"SN号",prop:"sn"}}),a("el-table-column",{attrs:{label:"状态",prop:"status","column-key":"status",filters:e.status_list,"filter-multiple":!1},scopedSlots:e._u([{key:"default",fn:function(t){return["禁售"===t.row.status?a("span",[a("el-tooltip",{attrs:{content:t.row.message,"popper-class":"tooltip-width",placement:"bottom",effect:"light"}},[a("span",{staticClass:"id-cell"},[e._v(e._s(t.row.status))])])],1):a("span",{class:["FF"===t.row.status?"err":"normal"]},[e._v(e._s(t.row.status))])]}}])}),a("el-table-column",{attrs:{label:"监控"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.FnGoToMonitor(t.row)}}},[e._v("查看监控")])]}}])}),a("el-table-column",{attrs:{label:"所属云主机",prop:"vm_id"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"create_time"}}),a("el-table-column",{attrs:{label:"更新时间",prop:"update_time"}})],1),a("el-pagination",{attrs:{"current-page":e.page_info.page_index,"page-sizes":e.page_info.page_sizes,"page-size":e.page_info.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.page_info.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.page_info,"page_index",t)},"update:current-page":function(t){return e.$set(e.page_info,"page_index",t)},"update:pageSize":function(t){return e.$set(e.page_info,"page_size",t)},"update:page-size":function(t){return e.$set(e.page_info,"page_size",t)}}}),a("gpu-edit",{attrs:{visible:e.visible,oper_info:e.oper_info},on:{"update:visible":function(t){e.visible=t}}}),a("sale",{attrs:{oper_info:e.oper_info,visible:e.visible_sale,type:e.hand_type},on:{"update:visible":function(t){e.visible_sale=t}}}),1===e.multi_rows.length?a("right-click",{attrs:{multi_rows:e.multi_rows,menus:e.menus,name:e.multi_rows.length>0?e.multi_rows[0].host_name:""},on:{"fn-click":e.infoClick}}):e._e()],1)},d=[],f=a("5530"),h=a("1da1"),_=a("b85c"),b=(a("96cf"),a("d3b7"),a("b0c0"),a("fb6a"),a("a15b"),a("d81d"),a("c811")),m=a("c1df"),g=a.n(m),v=a("8693"),y=a("d220"),C=a("bd4d"),w=a("e8c0"),L=a("cf88"),x=a("6285"),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"forbid"===e.type?"禁售":"取消禁售",visible:e.visible_sync,width:"800px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t},close:function(t){e.visible_sync=!1}}},[a("el-alert",{attrs:{title:"是否确定要对以下实例执行 "+("forbid"===e.type?"禁售":"取消禁售")+" 操作",type:"warning",closable:!1,center:""}}),a("el-table",{attrs:{data:e.oper_info,border:""}},[a("el-table-column",{attrs:{prop:"card_name",label:"GPU"}}),a("el-table-column",{attrs:{prop:"host_id",label:"物理机ID"}}),a("el-table-column",{attrs:{prop:"host_name",label:"主机名"}}),a("el-table-column",{attrs:{prop:"pci_address",label:"PCIe号"}}),"forbid"===e.type?a("el-table-column",{attrs:{prop:"lock",label:"禁售原因"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",placeholder:"请输入禁售原因",maxlength:"50","show-word-limit":""},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.reason,expression:"!reason"}],staticClass:"error_message"},[e._v("请输入禁售原因")])]}}],null,!1,3678557658)}):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),a("el-button",{on:{click:function(t){e.visible_sync=!1}}},[e._v("取消")])],1)],1)],1)},O=[],k=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.reason="",e}return Object(i["a"])(a,[{key:"watch_visible",value:function(e){e||(this.reason="")}},{key:"confirm",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("forbid"!==this.type||""!==this.reason){e.next=2;break}return e.abrupt("return");case 2:return t=Object(x["b"])(this.$route.params.id),a={pod_id:t,op_type:this.type,host_id:this.oper_info[0].host_id,pci_address:this.oper_info[0].pci_address},"forbid"===this.type&&(a["message"]=this.reason),e.next=7,v["a"].handle_gpu_sale(a);case 7:n=e.sent,"Success"===n.code&&(this.$message.success(n.message),this.visible_sync=!1);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(u["e"]);Object(l["a"])([Object(u["d"])("visible")],k.prototype,"visible_sync",void 0),Object(l["a"])([Object(u["c"])({default:function(){}})],k.prototype,"oper_info",void 0),Object(l["a"])([Object(u["c"])({default:""})],k.prototype,"type",void 0),Object(l["a"])([Object(u["f"])("visible_sync")],k.prototype,"watch_visible",null),k=Object(l["a"])([Object(u["a"])({})],k);var S=k,D=S,F=a("2877"),z=Object(F["a"])(D,j,O,!1,null,"5ce99dfe",null),G=z.exports,M=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.gpu_list=[],e.search_reqData={},e.visible=!1,e.oper_info={},e.err="err",e.normal="normal",e.operate_auth=[],e.search_status=[],e.multi_rows=[],e.hand_type="",e.visible_sale=!1,e.status_list=[{text:"正常",value:"READY"},{text:"FF",value:"DISCONNECTED"}],e.menus=[{label:"编辑",value:"edit",single:!0,disabled:!1},{label:"禁售",value:"forbid",single:!0,disabled:!1},{label:"取消禁售",value:"cancel_forbid",single:!0,disabled:!1},{label:"同步",value:"sync",single:!0,disabled:!1}],e.page_info={page_sizes:[20,50,100],page_size:20,page_index:1,total:0},e.search_con={vm_id:{placeholder:"请输入云服务器ID"},card_name:{placeholder:"请输入显卡名称"},host_ip:{placeholder:"请输入管理网IP"},customer_id:{placeholder:"请输入客户ID"},customer_name:{placeholder:"请输入客户名称"},sn:{placeholder:"请输入sn号"},create_time:{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!0,dis_day:1,defaultTime:[]}},e.menuConditions={cancel_forbid:function(){return!e.hasStatus("禁售")},forbid:function(){return e.hasStatus("禁售")}},e}return Object(i["a"])(a,[{key:"watch_visible",value:function(e){e||(this.oper_info={},this.FnGetList())}},{key:"watch_pod",value:function(e){e&&this.FnGetList()}},{key:"watch_multi",value:function(){this.handleMenus()}},{key:"hasStatus",value:function(e){return this.multi_rows.every((function(t){return t.status===e}))}},{key:"handleMenus",value:function(){var e,t=Object(_["a"])(this.menus);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.disabled=!!this.menuConditions[a.value]&&this.menuConditions[a.value]()}}catch(n){t.e(n)}finally{t.f()}}},{key:"infoClick",value:function(e){if(!e.disabled){e.label;var t=e.value;"edit"===t?this.FnEdit(this.multi_rows[0]):"forbid"===t?this.FnHandleGpuSale(this.multi_rows[0],"forbid"):"cancel_forbid"===t?this.FnHandleGpuSale(this.multi_rows[0],"cancel_forbid"):"sync"===t&&this.FnSync(this.multi_rows[0]),Object(L["a"])()}}},{key:"FnSync",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(x["b"])(this.$route.params.id),e.next=3,v["a"].update_host_gpu_status({pod_id:a,host_id:t.host_id,pci_address:t.pci_address});case 3:n=e.sent,"Success"===n.code&&this.$message.success(n.message);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnHandleGpuSale",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.visible_sale=!0,this.oper_info=[t],this.hand_type=a;case 3:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"handleFilterChange",value:function(e){this.search_status=e.status,console.log("this.search_status",this.search_status),this.FnGetList()}},{key:"handleSelectionChange",value:function(e){this.multi_rows=e}},{key:"FnOperRow",value:function(e){this.$refs.table.toggleRowSelection(e)}},{key:"rowStyle",value:function(e){var t=e.row,a=this.multi_rows.some((function(e){return e.index===t.index}));if(a)return"rowStyle"}},{key:"FnRightClick",value:function(e,t,a){console.log(a);var n=this.multi_rows.some((function(t){return t.index===e.index}));n||this.$refs.table.toggleRowSelection(e),Object(w["a"])(e,t,a)}},{key:"created",value:function(){this.FnGetList(),this.operate_auth=this.$store.state.auth_info[this.$route.name]}},{key:"FnEdit",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.visible=!0,this.oper_info=t;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnGoToMonitor",value:function(e){this.$router.push({name:"host_monitor",params:{id:e.host_id,gpuTab:"gpu"}})}},{key:"FnSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.search_reqData={vm_id:e.vm_id,card_name:e.card_name,customer_id:e.customer_id,customer_name:e.customer_name,host_ip:e.host_ip,host_name:e.host_name,sn:e.sn,create_time_start:e.create_time&&e.create_time[0]?g()(e.create_time[0]).local().format("YYYY-MM-DDTHH:mm:ss[Z]"):void 0,create_time_end:e.create_time&&e.create_time[0]?g()(e.create_time[1]).local().format("YYYY-MM-DDTHH:mm:ss[Z]"):void 0},this.FnGetList()}},{key:"FnGetList",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="",t="waiting_hosts"===this.$route.name?this.$route.params.id.slice(0,this.$route.params.id.length-1):this.$route.params.id,a=Object(x["b"])(t),e.next=5,v["a"].get_gpu_list(Object(f["a"])({pod_id:a,page_index:this.page_info.page_index,page_size:this.page_info.page_size,status:this.search_status.length>0?this.search_status.join(","):this.search_status.map((function(e){return e.value})).join(","),host_id:this.$route.params.id},this.search_reqData));case 5:n=e.sent,"Success"===n.code&&(this.gpu_list=n.data.page_info_list,this.page_info.total=n.data.page_info.count);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSizeChange",value:function(e){this.page_info.page_size=e,this.page_info.page_index=1,this.FnGetList()}},{key:"handleCurrentChange",value:function(e){this.page_info.page_index=e,this.FnGetList()}}]),a}(u["e"]);Object(l["a"])([Object(u["f"])("visible")],M.prototype,"watch_visible",null),Object(l["a"])([Object(u["f"])("$store.state.pod_id")],M.prototype,"watch_pod",null),Object(l["a"])([Object(u["f"])("multi_rows",{immediate:!0,deep:!0})],M.prototype,"watch_multi",null),M=Object(l["a"])([Object(u["a"])({components:{Sale:G,RightClick:C["a"],GpuEdit:y["a"],ActionBlock:b["a"]}})],M);var R=M,$=R,I=(a("2d76"),Object(F["a"])($,p,d,!1,null,"9accdb9c",null)),Y=I.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"instance-list"},[a("action-block",{attrs:{search_option:e.search_con,type:!1},on:{"fn-search":e.FnSearch}}),a("div",{staticClass:"icon m-bottom10"},[a("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"text"},on:{click:e.down}},[a("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1)],1),a("el-table",{attrs:{data:e.history_list,border:""}},[a("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),a("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),a("el-table-column",{attrs:{prop:"host_name",label:"主机名"}}),a("el-table-column",{attrs:{prop:"host_id",label:"物理机ID"}}),a("el-table-column",{attrs:{prop:"host_ip",label:"管理网IP"}}),a("el-table-column",{attrs:{prop:"card_name",label:"GPU"}}),a("el-table-column",{attrs:{label:"所属云主机",prop:"vm_id"}}),a("el-table-column",{attrs:{label:"Slot号",prop:"slot"}}),a("el-table-column",{attrs:{label:"PCIe号",prop:"pci_address"}}),a("el-table-column",{attrs:{label:"SN号",prop:"sn"}}),a("el-table-column",{attrs:{label:"更新内容",prop:"content"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"create_time"}})],1),a("el-pagination",{attrs:{"current-page":e.page_info.page_index,"page-sizes":e.page_info.page_sizes,"page-size":e.page_info.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.page_info.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.page_info,"page_index",t)},"update:current-page":function(t){return e.$set(e.page_info,"page_index",t)},"update:pageSize":function(t){return e.$set(e.page_info,"page_size",t)},"update:page-size":function(t){return e.$set(e.page_info,"page_size",t)}}})],1)},E=[],P=(a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("3673")),A=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.history_list=[],e.search_reqData={},e.loading=!1,e.page_info={page_sizes:[20,50,100],page_size:20,page_index:1,total:0},e.search_con={pci_address:{placeholder:"请输入PCIe号"},host_ip:{placeholder:"请输入管理网IP"},customer_id:{placeholder:"请输入客户ID"},customer_name:{placeholder:"请输入客户名称"},create_time:{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!0,dis_day:1,defaultTime:[]}},e}return Object(i["a"])(a,[{key:"watch_pod",value:function(e){e&&this.FnGetList()}},{key:"FnSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.search_reqData={pci_address:e.pci_address,customer_id:e.customer_id,customer_name:e.customer_name,host_ip:e.host_ip,host_name:e.host_name,create_time_start:e.create_time&&e.create_time[0]?g()(e.create_time[0]).local().format("YYYY-MM-DDTHH:mm:ss[Z]"):void 0,create_time_end:e.create_time&&e.create_time[0]?g()(e.create_time[1]).local().format("YYYY-MM-DDTHH:mm:ss[Z]"):void 0},this.FnGetList()}},{key:"created",value:function(){this.FnGetList()}},{key:"FnGetList",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Object(x["b"])(this.$route.params.id),e.next=3,v["a"].get_gpu_record(Object(f["a"])({pod_id:t,page_index:this.page_info.page_index,page_size:this.page_info.page_size,host_id:this.$route.params.id},this.search_reqData));case 3:a=e.sent,"Success"===a.code&&(this.history_list=a.data.gpu_record_list,this.page_info.total=a.data.page_info.count);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSizeChange",value:function(e){this.page_info.page_size=e,this.page_info.page_index=1,this.FnGetList()}},{key:"handleCurrentChange",value:function(e){this.page_info.page_index=e,this.FnGetList()}},{key:"down",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,v["a"].gpu_record_download(Object(f["a"])({},this.search_reqData));case 3:t=e.sent,t&&(this.loading=!1,a=new Blob([t],{type:"application/octet-stream"}),n=new FileReader,r="GPU故障记录--"+g()(new Date).format("YYYYMMDD"),n.readAsText(a,"utf-8"),n.onload=function(){var e=document.createElement("a");e.href=window.URL.createObjectURL(a),e.download=r+".xlsx",e.click(),window.URL.revokeObjectURL(e.href)});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(u["e"]);Object(l["a"])([Object(u["f"])("$store.state.pod_id")],A.prototype,"watch_pod",null),A=Object(l["a"])([Object(u["a"])({components:{ActionBlock:b["a"],SvgIcon:P["a"]}})],A);var H=A,T=H,N=(a("9d19"),Object(F["a"])(T,Z,E,!1,null,"415d0e30",null)),U=N.exports,q=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.activeName="first",e}return Object(i["a"])(a)}(u["e"]);q=Object(l["a"])([Object(u["a"])({components:{Gpu_faultRecord:U,Gpu_list:Y}})],q);var B=q,W=B,J=(a("6434"),Object(F["a"])(W,n,r,!1,null,"3b3d1647",null));t["default"]=J.exports},6285:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a("b85c"),r=a("0613");function i(e){var t,a=Object(n["a"])(r["a"].state.tree_list);try{for(a.s();!(t=a.n()).done;){var i,s=t.value,o=Object(n["a"])(s.children);try{for(o.s();!(i=o.n()).done;){var c=i.value;if(c.cluster_id===e)return s.pod_id}}catch(l){o.e(l)}finally{o.f()}}}catch(l){a.e(l)}finally{a.f()}return null}function s(e){var t,a=Object(n["a"])(r["a"].state.tree_list);try{for(a.s();!(t=a.n()).done;){var i,s=t.value,o=Object(n["a"])(s.children||[]);try{for(o.s();!(i=o.n()).done;){var c,l=i.value,u=Object(n["a"])(l.children||[]);try{for(u.s();!(c=u.n()).done;){var p=c.value;if(p.host_id===e)return s.pod_id}}catch(d){u.e(d)}finally{u.f()}}}catch(d){o.e(d)}finally{o.f()}}}catch(d){a.e(d)}finally{a.f()}return null}},6434:function(e,t,a){"use strict";a("9a2c")},"6b75":function(e,t,a){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a.d(t,"a",(function(){return n}))},9366:function(e,t,a){},"9a2c":function(e,t,a){},"9d19":function(e,t,a){"use strict";a("f18a")},a5d9:function(e,t,a){},a630:function(e,t,a){var n=a("23e7"),r=a("4df4"),i=a("1c7e"),s=!i((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:s},{from:r})},b85c:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("d9e2");var n=a("06c5");function r(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Object(n["a"])(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(c)throw s}}}}},e8c0:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("cf88");function r(e,t,a){a.preventDefault(),document.addEventListener("contextmenu",(function(e){var t=e.target;if(t.closest(".el-table")){var a=document.querySelector("#menu");if(a){a.style.display="block";var r=a.offsetHeight,i=a.offsetWidth;console.log("menuHeight",r);var s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=e.clientX,l=e.clientY,u=c,p=l;o<c+i&&(u=c-i),s<l+r&&(p=s-r),a.style.left=u-250+"px",a.style.top=p-50+"px",a.style.display="block",a.style.zIndex="1000",document.addEventListener("click",n["a"])}}})),document.addEventListener("contextmenu",n["a"])}},f18a:function(e,t,a){},fb6a:function(e,t,a){"use strict";var n=a("23e7"),r=a("da84"),i=a("e8b5"),s=a("68ee"),o=a("861d"),c=a("23cb"),l=a("07fa"),u=a("fc6a"),p=a("8418"),d=a("b622"),f=a("1dde"),h=a("f36a"),_=f("slice"),b=d("species"),m=r.Array,g=Math.max;n({target:"Array",proto:!0,forced:!_},{slice:function(e,t){var a,n,r,d=u(this),f=l(d),_=c(e,f),v=c(void 0===t?f:t,f);if(i(d)&&(a=d.constructor,s(a)&&(a===m||i(a.prototype))?a=void 0:o(a)&&(a=a[b],null===a&&(a=void 0)),a===m||void 0===a))return h(d,_,v);for(n=new(void 0===a?m:a)(g(v-_,0)),r=0;_<v;_++,r++)_ in d&&p(n,r,d[_]);return n.length=r,n}})}}]);
//# sourceMappingURL=chunk-26af023a.1747715207673.js.map