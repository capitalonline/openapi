(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-5c74fe1a"],{"13d5":function(t,e,i){"use strict";var s=i("23e7"),a=i("d58f").left,r=i("a640"),c=i("1212"),n=i("9adc"),o=!n&&c>79&&c<83,l=o||!r("reduce");s({target:"Array",proto:!0,forced:l},{reduce:function(t){var e=arguments.length;return a(this,t,e,e>1?arguments[1]:void 0)}})},"1c33":function(t,e,i){},"1c98":function(t,e,i){"use strict";var s=i("81a9"),a=i("bff7");e["a"]={create(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/create_disk/",t))},get_disk_type(t){return Object(s["a"])(Object(a["b"])("GET","/ebs/disk_info/",t))},get_price(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/get_price/",t))},get_capacity_price(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/get_ebs_price/",t))},get_disk_limit(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/get_disk_limit/",t))},get_disk_detail(t){return Object(s["a"])(Object(a["b"])("GET","/ebs/get_disk_detail/",t))},getDiskRules(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/disk_rules/",t))}}},"29cb":function(t,e,i){"use strict";i("c85b")},"2ba4":function(t,e,i){"use strict";var s=i("40d5"),a=Function.prototype,r=a.apply,c=a.call;t.exports="object"==typeof Reflect&&Reflect.apply||(s?c.bind(r):function(){return c.apply(r,arguments)})},3673:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("svg",{staticClass:"svg-icon",attrs:{id:"svgIcon",viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[e("defs",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[e("linearGradient",{attrs:{x1:"50%",y1:"18.3303197%",x2:"50%",y2:"100%",id:"linearGradient-1"}},[e("stop",{attrs:{"stop-color":"#8C8D94","stop-opacity":"0",offset:"0%"}}),e("stop",{attrs:{"stop-color":"#8C8D94",offset:"100%"}})],1),e("linearGradient",{attrs:{x1:"50%",y1:"21.3748651%",x2:"50%",y2:"100%",id:"linearGradient-2"}},[e("stop",{attrs:{"stop-color":"#8C8D94","stop-opacity":"0",offset:"0%"}}),e("stop",{attrs:{"stop-color":"#8C8D94",offset:"100%"}})],1),e("linearGradient",{attrs:{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"linearGradient-3"}},[e("stop",{attrs:{"stop-color":"#8C8D94","stop-opacity":"0",offset:"0%"}}),e("stop",{attrs:{"stop-color":"#8C8D94",offset:"100%"}})],1),e("linearGradient",{attrs:{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"linearGradient-4"}},[e("stop",{attrs:{"stop-color":"#8C8D94","stop-opacity":"0",offset:"0%"}}),e("stop",{attrs:{"stop-color":"#8C8D94",offset:"100%"}})],1)],1),t._v(" "),"search"===t.icon?e("g",[e("path",{attrs:{d:"M5.66666667,10.8333333 C2.81319546,10.8333333 0.5,8.52013787 0.5,5.66666667 C0.5,2.81319546 2.81319546,0.5 5.66666667,0.5 C8.52013787,\n    0.5 10.8333333,2.81319546 10.8333333,5.66666667 C10.8333333,8.52013787 8.52013787,10.8333333 5.66666667,10.8333333 Z M5.66666667,9.83333333 C7.96785312,\n    9.83333333 9.83333333,7.96785312 9.83333333,5.66666667 C9.83333333,3.36548021 7.96785312,1.5 5.66666667,1.5 C3.36548021,1.5 1.5,3.36548021 1.5,\n    5.66666667 C1.5,7.96785312 3.36548021,9.83333333 5.66666667,9.83333333 Z"}}),e("path",{attrs:{d:"M8.24644661,9.75355339 L11.4464466,12.9535534 C11.6417088,13.1488155 11.9582912,13.1488155 12.1535534,12.9535534 C12.3488155,12.7582912 12.3488155,\n    12.4417088 12.1535534,12.2464466 L8.95355339,9.04644661 C8.75829124,8.85118446 8.44170876,8.85118446 8.24644661,9.04644661 C8.05118446,9.24170876 8.05118446,\n    9.55829124 8.24644661,9.75355339 Z"}})]):t._e(),"refresh"===t.icon?e("g",[e("g",{attrs:{transform:"translate(-160.000000, -212.000000)"}},[e("path",{attrs:{d:"M173.918376,216.305631 L172.182224,217.058009 C172.182224,217.058009 170.986665,213.932711 167.628085,213.903723 C164.269505,\n    213.8749 163.244856,216.305631 163.244856,216.305631 L164.497115,216.913397 L160.540755,219.980882 L160,215.003465 L161.423168,\n    215.611231 C161.423168,215.611231 163.017085,212.543745 166.005657,212.10958 C168.99423,211.67558 170.759056,212.601557 171.982964,\n    213.643323 C173.206873,214.685089 173.918376,216.305631 173.918376,216.305631 Z M161.081624,221.694369 L162.817938,220.941991 C162.817938,\n    220.941991 164.013335,224.067289 167.371915,224.096277 C170.730657,224.1251 171.755144,221.694369 171.755144,221.694369 L170.502885,\n    221.086603 L174.459245,218.019283 L175,222.996535 L173.576832,222.388934 C173.576832,222.388934 171.982915,225.456255 168.994343,\n    225.89042 C166.00577,226.32442 164.240944,225.398443 163.017036,224.356677 C161.793289,223.314911 161.081624,221.694369 161.081624,221.694369 Z"}})])]):t._e(),"export"===t.icon?e("g",[e("rect",{attrs:{x:"6",y:"4",width:"4",height:"6"}}),e("polygon",{attrs:{transform:"translate(8.000000, 2.500000) rotate(-180.000000) translate(-8.000000, -2.500000) ",points:"3 0 13 0 8 5"}}),e("path",{attrs:{d:"M3.5,16.4734508 L4.5,16.4734508 L4.5,18.5 L6.9,18.5 C9.44050985,18.5 11.5,16.4405098 11.5,13.9 L11.5,9.1 C11.5,6.55949015 9.44050985,\n    4.5 6.9,4.5 L4.5,4.5 L4.5,6.52654919 L3.5,6.52654919 L3.5,4.5 C3.5,3.94771525 3.94771525,3.5 4.5,3.5 L6.9,3.5 C9.9927946,3.5 12.5,6.0072054 12.5,\n    9.1 L12.5,13.9 C12.5,16.9927946 9.9927946,19.5 6.9,19.5 L6.27777778,19.5 L4.5,19.5 C3.94771525,19.5 3.5,19.0522847 3.5,18.5 L3.5,16.4734508 Z M3.5,\n    16.4734508 L4.5,16.4734508 L4.5,18.5 L6.27777778,18.5 L6.9,18.5 C9.44050985,18.5 11.5,16.4405098 11.5,13.9 L11.5,9.1 C11.5,6.55949015 9.44050985,\n    4.5 6.9,4.5 L4.5,4.5 L4.5,6.52654919 L3.5,6.52654919 L3.5,4.5 C3.5,3.94771525 3.94771525,3.5 4.5,3.5 L6.9,3.5 C9.9927946,3.5 12.5,6.0072054 12.5,\n    9.1 L12.5,13.9 C12.5,16.9927946 9.9927946,19.5 6.9,19.5 L4.5,19.5 C3.94771525,19.5 3.5,19.0522847 3.5,18.5 L3.5,16.4734508 Z",transform:"translate(8.000000, 11.500000) rotate(-270.000000) translate(-8.000000, -11.500000) "}})]):t._e(),"detail"===t.icon?e("g",[e("path",{attrs:{d:"M0,5.9 L1.5,5.9 L1.5,10.1 C1.5,11.9777681 3.02223185,13.5 4.9,13.5 L9.1,13.5 C10.9777681,13.5 12.5,11.9777681 12.5,10.1 L12.5,5.9 C12.5,\n    4.02223185 10.9777681,2.5 9.1,2.5 L4.9,2.5 L4.9,1 L9.1,1 C11.8061953,1 14,3.19380473 14,5.9 L14,10.1 C14,12.8061953 11.8061953,15 9.1,15 L4.9,\n    15 C2.19380473,15 3.31413338e-16,12.8061953 0,10.1 L0,5.9 Z M0,5.9 L1.5,5.9 L1.5,10.1 C1.5,11.9777681 3.02223185,13.5 4.9,13.5 L9.1,13.5 C10.9777681,\n    13.5 12.5,11.9777681 12.5,10.1 L12.5,5.9 C12.5,4.02223185 10.9777681,2.5 9.1,2.5 L4.9,2.5 L4.9,1 L9.1,1 C11.8061953,1 14,3.19380473 14,5.9 L14,\n    10.1 C14,12.8061953 11.8061953,15 9.1,15 L4.9,15 C2.19380473,15 3.31413338e-16,12.8061953 0,10.1 L0,5.9 Z",transform:"translate(7.000000, 8.000000) rotate(-270.000000) translate(-7.000000, -8.000000) "}}),e("path",{attrs:{d:"M13.0304984,0.969669914 L10.0304984,3.96966991 C9.73760516,4.26256313 9.73760516,4.73743687 10.0304984,5.03033009 C10.3233916,5.3232233 10.7982653,\n    5.3232233 11.0911586,5.03033009 L14.0911586,2.03033009 C14.3840518,1.73743687 14.3840518,1.26256313 14.0911586,0.969669914 C13.7982653,0.676776695 13.3233916,\n    0.676776695 13.0304984,0.969669914 Z"}}),t._v(" "),e("path",{attrs:{d:"M4,7.75 L7,7.75 C7.41421356,7.75 7.75,7.41421356 7.75,7 C7.75,6.58578644 7.41421356,6.25 7,6.25 L4,\n    6.25 C3.58578644,6.25 3.25,6.58578644 3.25,7 C3.25,7.41421356 3.58578644,7.75 4,7.75 Z"}}),t._v(" "),e("path",{attrs:{d:"M4,10.75 L9,10.75 C9.41421356,10.75 9.75,\n    10.4142136 9.75,10 C9.75,9.58578644 9.41421356,9.25 9,9.25 L4,9.25 C3.58578644,9.25 3.25,9.58578644 3.25,10 C3.25,10.4142136 3.58578644,10.75 4,10.75 Z"}})]):t._e(),"more"===t.icon?e("g",[e("g",{attrs:{transform:"translate(2, 7)"}},[e("circle",{attrs:{cx:"1.5",cy:"1.5",r:"1.5"}}),t._v(" "),e("circle",{attrs:{cx:"6.5",cy:"1.5",r:"1.5"}}),e("circle",{attrs:{cx:"11.5",cy:"1.5",r:"1.5"}})])]):t._e(),"copy"===t.icon?e("g",[e("g",{attrs:{transform:"translate(-30.000000, -141.000000)","fill-rule":"nonzero",fill:"#8078D6"}},[e("g",{attrs:{transform:"translate(30.000000, 141.000000)"}},[e("path",{attrs:{d:"M6.18949336e-15,5.74573472 C0.603568923,4.70213211 1.73168467,4 3.02375885,4 L8.50923955,4 C10.4371333,4 12,5.56318412 12,7.49146945 L12,\n    12.975627 C12,14.2679636 11.2980105,15.3963085 10.2546198,16 L10.2546198,13.942267 C10.41349,13.6559043 10.5039598,13.326333 10.5039598,\n    12.975627 L10.5039598,7.49146945 C10.5039598,6.38959212 9.61089313,5.49634405 8.50923955,5.49634405 L3.02375885,5.49634405 C2.67312412,\n    5.49634405 2.34361974,5.58683223 2.0573151,5.74573472 L6.10622664e-15,5.74573472 Z",id:"Combined-Shape",transform:"translate(6.000000, 10.000000) rotate(-180.000000) translate(-6.000000, -10.000000) "}}),e("path",{attrs:{d:"M14.5,6.87867966 L14.5,3.9 C14.5,2.5745166 13.4254834,1.5 12.1,1.5 L6.9,1.5 C5.5745166,1.5 4.5,\n    2.5745166 4.5,3.9 L4.5,9.1 C4.5,10.4254834 5.5745166,11.5 6.9,11.5 L9.87867966,11.5 L14.5,6.87867966 Z M10.5,\n    13 L6.9,13 C4.74608948,13 3,11.2539105 3,9.1 L3,3.9 C3,1.74608948 4.74608948,0 6.9,0 L12.1,4.4408921e-16 C14.2539105,\n    4.4408921e-16 16,1.74608948 16,3.9 L16,7.5 L10.5,13 Z",id:"Rectangle-99",transform:"translate(9.500000, 6.500000) rotate(-90.000000) translate(-9.500000, -6.500000) "}}),t._v(" "),e("path",{attrs:{d:"M15,0.5 L11,0.5 C10.1715729,0.5 9.5,1.17157288 9.5,2 L9.5,6 L10.5,6 L10.5,2 C10.5,1.72385763 10.7238576,\n    1.5 11,1.5 L15,1.5 L15,0.5 Z",id:"Path-52",transform:"translate(12.250000, 3.250000) rotate(-90.000000) translate(-12.250000, -3.250000) "}})])])]):t._e(),"info"===t.icon?e("g",[e("path",{attrs:{d:"M8.51248164,17.1097561 C4.08294846,17.1097561 0.5,13.3873542 0.5,8.80487805 C0.5,4.22240188 4.08294846,0.5 8.51248164,0.5 C12.9420148,\n    0.5 16.5249633,4.22240188 16.5249633,8.80487805 C16.5249633,13.3873542 12.9420148,17.1097561 8.51248164,17.1097561 Z M8.51248164,16.1097561 C12.3810065,16.1097561 15.5249633,\n    12.8434321 15.5249633,8.80487805 C15.5249633,4.76632398 12.3810065,1.5 8.51248164,1.5 C4.64395674,1.5 1.5,4.76632398 1.5,8.80487805 C1.5,12.8434321 4.64395674,\n    16.1097561 8.51248164,16.1097561 Z",id:"Oval-3","fill-rule":"nonzero",fill:"#455cc6"}}),e("ellipse",{attrs:{id:"Oval-4",cx:"8.51248164",cy:"4.90243902",rx:"1",ry:"1"}}),e("rect",{attrs:{id:"Rectangle-10",x:"7.57342144",y:"6.85365854",width:"1.87812041",height:"6.82926829",rx:"0.939060206"}})]):t._e()])},a=[],r=i("9ab4"),c=i("1b40");let n=class extends c["e"]{};Object(r["a"])([Object(c["c"])({default:""})],n.prototype,"icon",void 0),n=Object(r["a"])([c["a"]],n);var o=n,l=o,_=(i("29cb"),i("2877")),u=Object(_["a"])(l,s,a,!1,null,"7bbf8d24",null);e["a"]=u.exports},"7b2b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"root"},[e("back-header",{attrs:{title:"云盘扩容",back_url:"/disk"},scopedSlots:t._u([{key:"default",fn:function(){return[e("el-button",{staticClass:"remove",attrs:{type:"text"},on:{click:t.remove}},[t._v("移除")]),e("el-button",{attrs:{type:"text"},on:{click:t.refresh}},[e("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)]},proxy:!0}])}),e("div",{staticClass:"content"},[e("el-alert",{attrs:{title:"仅支持对实例状态为运行且云盘状态为使用中，或云盘状态为待挂载的云盘执行扩容操作",type:"warning",closable:!1}}),Object.keys(t.showResetVolume).length>0?e("div",{staticClass:"prompt_message m-top10 prompt"},t._l(t.usedVolume,(function(i,s){return e("div",{key:i},[t._v(" 当前可用区已购买"),e("span",{staticClass:"num_message num-prompt"},[t._v(t._s(s))]),t._v("云盘"),e("span",{staticClass:"num_message num-prompt"},[t._v(t._s(i))]),t._v(" GB,还可以购买的容量额度"),e("span",{staticClass:"num_message num-prompt"},[t._v(t._s(t.showResetVolume[s]))]),t._v("GB ")])})),0):t._e(),e("el-table",{ref:"capacity_table",attrs:{data:t.list,border:""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection"}}),e("el-table-column",{attrs:{prop:"disk_id",label:"云盘名称/ID"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("pre",[t._v(t._s(i.row.disk_name)+" / "+t._s(i.row.disk_id))])]}}])}),e("el-table-column",{attrs:{prop:"az_name",label:"可用区"}}),e("el-table-column",{attrs:{prop:"feature",label:"云盘类型"}}),e("el-table-column",{attrs:{prop:"capacity_size",label:"当前规格"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v("容量： "+t._s(i.row.capacity_size)+"GB")])]}}])}),e("el-table-column",{attrs:{prop:"status_name",label:"状态"}}),e("el-table-column",{attrs:{prop:"size",label:"扩容后容量",width:"300"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"expansion_spec"},[e("el-input-number",{attrs:{size:"small",step:i.row.disk_step,max:i.row.disk_max,min:i.row.capacity_size},on:{blur:function(e){return t.change_capacity(i.$index)},change:function(e){return t.change_capacity(i.$index)}},model:{value:i.row.size,callback:function(e){t.$set(i.row,"size",e)},expression:"scope.row.size"}}),e("div",{staticClass:"m-left10"})],1)]}}])}),e("el-table-column",{attrs:{prop:"bill_way",label:"计费方式"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.row.billing_method_display?i.row.billing_method_display:"不计费"))])]}}])}),e("el-table-column",{attrs:{prop:"fee",label:"费用"},scopedSlots:t._u([{key:"default",fn:function(i){return[0===i.row.is_charge?e("span",[t._v(t._s(i.row.fee))]):e("span",{staticClass:"num_message"},[t._v(t._s(i.row.fee))])]}}])})],1)],1),e("div",{staticClass:"footer"},[e("el-checkbox",{on:{change:t.select_all},model:{value:t.isSelectedAll,callback:function(e){t.isSelectedAll=e},expression:"isSelectedAll"}}),e("div",{staticClass:"btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确认扩容")]),e("el-button",{attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},a=[],r=(i("14d9"),i("13d5"),i("e9f5"),i("910d"),i("ab43"),i("9485"),i("a732"),i("9ab4")),c=i("1b40"),n=i("ed46"),o=i("f33c"),l=i("1c98"),_=i("9074"),u=i("8bcb"),d=i("8ce4"),p=i("3673");let b=class extends c["e"]{constructor(){super(...arguments),this.list=[],this.capacity_list=[],this.isSelectedAll=!1,this.data_disk_info=null,this.system_disk_info=null,this.billing_info={},this.price_unit="￥",this.showResetVolume={},this.volumeInfo=[],this.usedVolume={},this.diskRules={}}created(){this.list=JSON.parse(this.$route.query.list),this.get_customer_name()}async get_customer_name(){const t=await _["a"].get_customer_name({customer_id:this.list[0].customer_id});"Success"==t.code&&(this.price_unit=t.data.area_id,this.getDiskRules())}getTotalSize(t){return this.capacity_list.filter(e=>e.feature.slice(0,-2)===t).reduce((t,e)=>t+(e.size-e.capacity_size),0)}getAlerInfo(){this.volumeInfo=[];for(let t in this.showResetVolume)this.volumeInfo.push({feature:t,add:this.getTotalSize(t),remain:this.showResetVolume[t]-this.getTotalSize(t)})}async getDiskRules(){let t=await l["a"].getDiskRules({disk_ids:this.list.map(t=>t.disk_id),customer_id:this.list[0].customer_id,az_id:this.list[0].az_id,billing_method:"0"});if("Success"===t.code){this.billing_info=t.data.billing_info,this.diskRules=t.data.disk_rules;let e={};this.list.map(t=>{e[t.disk_feature]=t.disk_id}),this.get_disk_limit(Object.keys(e))}}async get_disk_info(){let t=await l["a"].get_disk_type({customer_id:this.list[0].customer_id,az_id:this.list[0].az_id,billing_method:"0"});if("Success"===t.code){this.billing_info=t.data.billing_info;let e=[];t.data.data_disk.filter(t=>"local"!==t.disk_feature).map(t=>{e.push(t.disk_feature),this.data_disk_info=Object.assign({},this.data_disk_info,{[t.disk_name]:t})}),t.data.system_disk.filter(t=>{this.system_disk_info=Object.assign({},this.system_disk_info,{[t.disk_name]:t})}),this.get_disk_limit(e)}}async get_disk_limit(t){let e=await l["a"].get_disk_limit({customer_id:this.list[0].customer_id,az_id:this.list[0].az_id,feature:t});if("Success"===e.code){for(let t in e.data)this.usedVolume[t]=Math.max(e.data[t].current_volume,0),this.showResetVolume[t]=Math.max(e.data[t].rest_volume,0);this.$nextTick(()=>{this.list.map(t=>{t.disk_info=this.diskRules[t.disk_id],t.capacity_size=t.size,t.capacity_iops=Object(u["a"])(t.disk_info,t.size).iops,t.capacity_throughput=Object(u["a"])(t.disk_info,t.size).throughput,t.disk_iops=t.capacity_iops,t.band_mbps=t.capacity_throughput;let e=Math.min(this.showResetVolume[t.feature.slice(0,-2)]+t.capacity_size,t.disk_info.disk_max);return t.disk_max=e,t.disk_step=t.disk_info.disk_step,t});let t=this.list.map(t=>{if(0!==t.is_charge)return t.disk_id});this.get_expansion_price(t,"init"),this.getAlerInfo()})}}async get_expansion_price(t,e){const i={};if(this.list.some(t=>0===t.size||!t.size))return;this.list.map(e=>{if(t.includes(e.disk_id)){const{ebs_goods_id:t,gic_goods_id:s,feature:a,size:r,disk_iops:c,band_mbps:n}=e;i[e.disk_id]={billing_method:"0",ebs_goods_id:t,gic_goods_id:s,disk_feature:a,handling_capacity:n,iops:c,storage_space:r}}});let s=await l["a"].get_capacity_price({customer_id:this.list[0].customer_id,az_id:this.list[0].az_id,disks:{...i}});if("Success"===s.code){let i=s.data.disks;this.list.map(a=>{let r;if(t.includes(a.disk_id))r=`${s.data.price_symbol}${i[a.disk_id].toFixed(2)}/${s.data.price_unit}`;else{if("change"===e)return;r="$"===this.price_unit?"$0.00/day":"￥0.00/天"}return this.$set(a,"fee",r),a})}}async change_capacity(t){await this.$nextTick(()=>{this.list.map((e,i)=>{if(i===t){let i;if(e.size){let t=Math.floor((Math.min(e.size,e.disk_max)-e.capacity_size)/e.disk_info.disk_step);i=e.disk_info.disk_step*t+e.capacity_size}else i=e.capacity_size;e.disk_iops=Object(u["a"])(e.disk_info,i).iops,e.band_mbps=Object(u["a"])(e.disk_info,i).throughput,this.capacity_list.length>0&&(this.capacity_list[t]=e),this.$set(e,"size",i),0!==e.is_charge&&this.get_expansion_price([this.list[t].disk_id],"change")}return e}),this.getAlerInfo()})}handleSelectionChange(t){t.length===this.list.length?this.isSelectedAll=!0:this.isSelectedAll=!1,this.capacity_list=t,this.getAlerInfo()}select_all(t){const e=this.$refs.capacity_table;t?e.toggleAllSelection():e.clearSelection()}remove(){if(0===this.capacity_list.length)return void this.$message.warning("请先勾选需要移除的云盘");if(this.capacity_list.length===this.list.length)return void this.$message.warning("至少保留一块云盘");let t=Object(d["c"])(this.capacity_list,"disk_id");this.list=this.list.filter(e=>!t.includes(e.disk_id))}refresh(){this.list.map(t=>(t.size=t.capacity_size,t.disk_iops=t.capacity_iops,t.band_mbps=t.capacity_throughput,t));let t=Object(d["c"])(this.list,"disk_id");this.get_expansion_price(t,"change")}async confirm(){if(0===this.capacity_list.length)return void this.$message.warning("请先勾选需要扩容的云盘");const t=["ecs_goods_id","gic_goods_id","disk_feature","is_charge","disk_id","disk_type","current_spec","current_iops","current_storage","status","storage_space","iops","handling_capacity"],e=["ebs_goods_id","gic_goods_id","feature","is_charge","disk_id","disk_type","capacity_size","capacity_iops","capacity_throughput","status","size","disk_iops","band_mbps"];let i=Object(d["b"])(this.capacity_list,t,e),s=Object(d["a"])(this.billing_info);for(let r in s)s[r].gic_goods_id=this.billing_info[r].gic_goods_id;let a=await o["a"].expansion({customer_id:this.capacity_list[0].customer_id,expansion_info:i,az_id:this.capacity_list[0].az_id,disk_ids:this.capacity_list.map(t=>t.disk_id),billing_info:s});"Success"===a.code&&this.$message.success("云盘扩容任务下发成功！"),this.$router.push("/disk")}cancel(){this.$router.push("/disk")}};b=Object(r["a"])([Object(c["a"])({components:{backHeader:n["a"],svgIcon:p["a"]}})],b);var f=b,h=f,m=(i("ff9e"),i("2877")),g=Object(m["a"])(h,s,a,!1,null,"75db31d0",null);e["default"]=g.exports},8558:function(t,e,i){"use strict";var s=i("cfe9"),a=i("b5db"),r=i("c6b6"),c=function(t){return a.slice(0,t.length)===t};t.exports=function(){return c("Bun/")?"BUN":c("Cloudflare-Workers")?"CLOUDFLARE":c("Deno/")?"DENO":c("Node.js/")?"NODE":s.Bun&&"string"==typeof Bun.version?"BUN":s.Deno&&"object"==typeof Deno.version?"DENO":"process"===r(s.process)?"NODE":s.window&&s.document?"BROWSER":"REST"}()},"8bcb":function(t,e,i){"use strict";function s(t,e=NaN){let i=e?(e-Number(t.disk_min))/Number(t.disk_step):0,s=Number(t.min_iops)+Number(t.iops_step)*i>t.max_iops?t.max_iops:Number(t.min_iops)+Number(t.iops_step)*i,a=Number(t.min_throughput)+Number(t.throughput_step)*i>t.max_throughput?t.max_throughput:Number(t.min_throughput)+Number(t.throughput_step)*i;return{iops_show:s+" "+t.iops_unit,throughput_show:a+" "+t.throughput_unit,iops:s,throughput:a}}i.d(e,"a",(function(){return s}))},"8ce4":function(t,e,i){"use strict";i.d(e,"e",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return r})),i.d(e,"c",(function(){return c})),i.d(e,"d",(function(){return n}));i("14d9"),i("e9f5"),i("ab43");function s(t,e,i,s,a){let r=[];return t.map(t=>{r.push({[s]:t[e],[a]:t[i]})}),r}function a(t,e,i,s={}){let a=[];return t.map(t=>{let r={};e.map((e,s)=>{r[e]=t[i[s]]}),a.push({...r,...s})}),a}function r(t,e=!1){let i={};for(let s in t){const{billing_scheme_id:a,billing_cycle_id:r,billing_items:c,gic_goods_id:n}=t[s];let o={};for(let t in c){let i={attr_id:c[t].attr_id,name:c[t].name},s={id:c[t].id,key:t};o[t]=e?{...i,...s}:s}i[s]={billing_scheme_id:a,billing_cycle_id:r,billing_items:o,gic_goods_id:e?n:void 0}}return i}function c(t,e){return t.map(t=>t[e])}function n(t){let e="";for(let i in t)t[i]&&(e+=`${i}=${t[i]}&`);return""===e?"":"?"+e.slice(0,e.length-1)}},9074:function(t,e,i){"use strict";var s=i("81a9"),a=i("bff7");e["a"]={get_customer_name(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/get_customer_name/",t))},get_region_az_list(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/region_az_info/",t))},get_net_list(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/net_info/",t))},get_all_cpu_ram(){return Object(s["a"])(Object(a["b"])("GET","/ecs/ram_cpu_list/"))},get_category_list(t){return Object(s["a"])(Object(a["b"])("GET","/ecs/ecs_category_list/",t))},ecs_family_info(t){return Object(s["a"])(Object(a["b"])("GET","/ecs/ecs_family_info/",t))},get_os_list(t){return Object(s["a"])(Object(a["b"])("POST","/img/image_info/",t))},get_price(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/get_price/",t))},create_instance(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/create_ecs/",t))},get_ecs_limit(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/get_ecs_limit/",t))},get_ram_cpu_price_list(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/ecs_spec_attach_price/",t))},difference_price(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/ecs_difference_price/",t))},change_configure_limit(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/change_configure_limit/",t))}}},9485:function(t,e,i){"use strict";var s=i("23e7"),a=i("2266"),r=i("59ed"),c=i("825a"),n=i("46c4"),o=i("2a62"),l=i("f99f"),_=i("2ba4"),u=i("d039"),d=TypeError,p=u((function(){[].keys().reduce((function(){}),void 0)})),b=!p&&l("reduce",d);s({target:"Iterator",proto:!0,real:!0,forced:p||b},{reduce:function(t){c(this);try{r(t)}catch(u){o(this,"throw",u)}var e=arguments.length<2,i=e?void 0:arguments[1];if(b)return _(b,this,e?[t]:[t,i]);var s=n(this),l=0;if(a(s,(function(s){e?(e=!1,i=s):i=t(i,s,l),l++}),{IS_RECORD:!0}),e)throw new d("Reduce of empty iterator with no initial value");return i}})},"9adc":function(t,e,i){"use strict";var s=i("8558");t.exports="NODE"===s},a58a:function(t,e,i){"use strict";i("e410")},a640:function(t,e,i){"use strict";var s=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&s((function(){i.call(null,e||function(){return 1},1)}))}},a732:function(t,e,i){"use strict";var s=i("23e7"),a=i("c65b"),r=i("2266"),c=i("59ed"),n=i("825a"),o=i("46c4"),l=i("2a62"),_=i("f99f"),u=_("some",TypeError);s({target:"Iterator",proto:!0,real:!0,forced:u},{some:function(t){n(this);try{c(t)}catch(s){l(this,"throw",s)}if(u)return a(u,this,t);var e=o(this),i=0;return r(e,(function(e,s){if(t(e,i++))return s()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},ab43:function(t,e,i){"use strict";var s=i("23e7"),a=i("c65b"),r=i("59ed"),c=i("825a"),n=i("46c4"),o=i("c5cc"),l=i("9bdd"),_=i("2a62"),u=i("2baa"),d=i("f99f"),p=i("c430"),b=!p&&!u("map",(function(){})),f=!p&&!b&&d("map",TypeError),h=p||b||f,m=o((function(){var t=this.iterator,e=c(a(this.next,t)),i=this.done=!!e.done;if(!i)return l(t,this.mapper,[e.value,this.counter++],!0)}));s({target:"Iterator",proto:!0,real:!0,forced:h},{map:function(t){c(this);try{r(t)}catch(e){_(this,"throw",e)}return f?a(f,this,t):new m(n(this),{mapper:t})}})},c85b:function(t,e,i){},d58f:function(t,e,i){"use strict";var s=i("59ed"),a=i("7b0b"),r=i("44ad"),c=i("07fa"),n=TypeError,o="Reduce of empty array with no initial value",l=function(t){return function(e,i,l,_){var u=a(e),d=r(u),p=c(u);if(s(i),0===p&&l<2)throw new n(o);var b=t?p-1:0,f=t?-1:1;if(l<2)while(1){if(b in d){_=d[b],b+=f;break}if(b+=f,t?b<0:p<=b)throw new n(o)}for(;t?b>=0:p>b;b+=f)b in d&&(_=i(_,d[b],b,u));return _}};t.exports={left:l(!1),right:l(!0)}},e410:function(t,e,i){},ed46:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("div",{staticClass:"box"},[e("div",[e("span",[t._v(t._s(t.title))]),t._t("left")],2),e("div",[t._t("default"),t.no_back?t._e():e("el-button",{attrs:{type:"primary",plain:""},on:{click:t.FnBack}},[t._v("返回")])],2)]),e("div",{staticClass:"perch"})])},a=[],r=(i("14d9"),i("9ab4")),c=i("1b40");let n=class extends c["e"]{FnBack(){this.back_url?this.$router.push(this.back_url):this.$router.go(-1)}};Object(r["a"])([Object(c["c"])({default:""})],n.prototype,"title",void 0),Object(r["a"])([Object(c["c"])({default:""})],n.prototype,"back_url",void 0),Object(r["a"])([Object(c["c"])({default:!1})],n.prototype,"no_back",void 0),n=Object(r["a"])([c["a"]],n);var o=n,l=o,_=(i("a58a"),i("2877")),u=Object(_["a"])(l,s,a,!1,null,"bdf5ebe2",null);e["a"]=u.exports},f33c:function(t,e,i){"use strict";var s=i("81a9"),a=i("bff7");e["a"]={get_disk_list(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/get_disk_list/",t))},get_disk_state(t){return Object(s["a"])(Object(a["b"])("GET","/ebs/disk_status/",t))},edit_disk_name(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/disk_name_update/",t))},edit_disk_attr(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/disk_property_update/ ",t))},mount(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/mount/",t))},unmount(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/unmount/",t))},del_disk(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/delete/",t))},recover(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/recover/",t))},destroy(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/destroy_disk/",t))},expansion(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/expansion/",t))},get_fee(t){return Object(s["a"])(Object(a["b"])("POST","/ecs/each_resource_price/",t))},open_bill(t){return Object(s["a"])(Object(a["b"])("POST","/resource/start_charge/",t))},get_product_source(t){return Object(s["a"])(Object(a["b"])("GET","/ebs/disk_product_source/",t))},change_iops_mbps(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/change_iops_mbps/",t))},iops_mbps_record(t){return Object(s["a"])(Object(a["b"])("POST","/ebs/iops_mbps_record/",t))},get_iops_mbps_limit(){return Object(s["a"])(Object(a["b"])("GET","/ebs/get_iops_mbps_limit/"))}}},ff9e:function(t,e,i){"use strict";i("1c33")}}]);