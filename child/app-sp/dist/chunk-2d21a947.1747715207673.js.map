{"version":3,"sources":["webpack://AppSp/./src/views/log/list.vue?7b2b","webpack://AppSp/./src/views/log/list.vue?a197","webpack://AppSp/./src/views/log/list.vue?a84f","webpack://AppSp/./src/views/log/list.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","search_option","on","search","staticClass","list","scopedSlots","_u","key","fn","scope","_l","item","type","row","operation_type","_v","_s","label","_e","class","status","response","page_info","page_index","page_sizes","page_size","total","handleSizeChange","handleCurrentChange","$event","$set","staticRenderFns","LogList","cloud_type","placeholder","az_id","cloud_id","op_user","create_time","width","clearable","dis_day","defaultTime","search_data","current","getLogList","get_az_list","EcsService","get_region_az_list","res","code","data","forEach","region_list","inn","trans","az_list","val","cur","create_time_start","moment","local","format","undefined","create_time_end","Service","get_log_list","operation_log_list","count","$message","error","message","Vue","Component","components","ActionBlock","component"],"mappings":"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","file":"chunk-2d21a947.1747715207673.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('action-block',{attrs:{\"search_option\":_vm.search_option},on:{\"fn-search\":_vm.search}}),_c('el-table',{staticClass:\"event-table\",attrs:{\"data\":_vm.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"operation_type\",\"label\":\"操作类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((_vm.operation_type),function(item){return _c('span',[(item.type === scope.row.operation_type)?_c('span',[_vm._v(\" \"+_vm._s(item.label)+\" \")]):_vm._e()])})}}])}),_c('el-table-column',{attrs:{\"prop\":\"cloud_type_display\",\"label\":\"操作对象类型\"}}),_c('el-table-column',{attrs:{\"prop\":\"cloud_name\",\"label\":\"对象名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"cloud_id\",\"label\":\"对象ID\"}}),_c('el-table-column',{attrs:{\"prop\":\"content\",\"label\":\"操作内容\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"操作结果\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{class:scope.row.status},[(scope.row.status === 'failed')?_c('span',[_vm._v(\"失败\")]):_vm._e(),(scope.row.status === 'success' || scope.row.status === 'finish')?_c('span',[_vm._v(\"成功\")]):_vm._e()])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"response\",\"label\":\"失败原因\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.response)?_c('span',[_vm._v(_vm._s(scope.row.response))]):_c('span',[_vm._v(\"--\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"create_time\",\"label\":\"操作时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"op_user\",\"label\":\"操作人\"}})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.page_info.page_index,\"page-sizes\":_vm.page_info.page_sizes,\"page-size\":_vm.page_info.page_size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.page_info.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange,\"update:currentPage\":function($event){return _vm.$set(_vm.page_info, \"page_index\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.page_info, \"page_index\", $event)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Component, Vue} from \"vue-property-decorator\";\nimport ActionBlock from \"../../components/search/actionBlock.vue\";\nimport Service from \"../../https/log/list\";\nimport moment from \"moment\";\nimport EcsService from \"@/https/instance/create\";\nimport {trans} from \"@/utils/transIndex\";\n\n@Component({\n  components: {\n    ActionBlock,\n  }\n})\nexport default class LogList extends Vue{\n  private operation_type:any = [\n    {type:'create',label:'创建'},\n    {type:'change',label:'变更'},\n    {type:'delete',label:'删除'}\n  ]\n  private cloud_type:any = [\n    {type:'host',label:'宿主机'},\n    {type:'ecs',label:'云主机'},\n    {type:'image',label:'镜像'},\n    {type:'disk',label:'云盘'},\n    {type:'pool',label:'块存储'},\n    {type:'troubleshoot',label:'故障处理任务'},\n  ]\n  private search_option:any={\n    operation_type: {placeholder: \"请选择操作类型\", list:this.operation_type},\n    cloud_type: {placeholder: \"请选择操作对象\", list: this.cloud_type},\n    az_id: {placeholder: \"请选择可用区\", list:[]},\n    cloud_id:{placeholder:'请输入操作对象ID'},\n    op_user:{placeholder:'请输入操作人'},\n    create_time:{\n      placeholder:['开始时间','结束时间'],\n      type:'daterange',\n      width:'360',\n      clearable:true,\n      dis_day:1,\n      defaultTime:[]\n    }\n  }\n  private page_info = {\n    page_sizes: [20, 50, 100],\n    page_size: 20,\n    page_index: 1,\n    total: 0\n  };\n  private list:Array<any>=[]\n  private search_data:any={};\n  private current:number = 1\n\n  created(){\n    this.getLogList()\n    this.get_az_list()\n  }\n  private async get_az_list(){\n    this.search_option.az_id.list=[]\n    let res:any=await EcsService.get_region_az_list({})\n    if(res.code===\"Success\"){\n      res.data.forEach(item=>{\n        item.region_list.forEach(inn=>{\n          this.search_option.az_id.list=[...this.search_option.az_id.list,...trans(inn.az_list,'az_name','az_id','label','type')]\n        })\n      })\n    }\n  }\n  //handleSizeChange\n  private handleSizeChange(val){\n    this.page_info.page_size = val;\n    this.page_info.page_index = 1\n    this.getLogList()\n  }\n  private handleCurrentChange(cur){\n    this.page_info.page_index = cur\n    this.getLogList();\n  }\n  private search(data:any={}){\n    this.search_data = {\n      operation_type:data.operation_type,\n      cloud_type:data.cloud_type,\n      cloud_id:data.cloud_id,\n      op_user:data.op_user,\n      az_id:data.az_id,\n      create_time_start:\n        data.create_time && data.create_time[0]\n          ? moment(data.create_time[0]).local().format(\"YYYY-MM-DDTHH:mm:ss[Z]\")\n          : undefined,\n      create_time_end:\n        data.create_time && data.create_time[1]\n          ? moment(data.create_time[1]).local().format(\"YYYY-MM-DDTHH:mm:ss[Z]\")\n          : undefined\n    }\n    this.current = 1;\n    this.getLogList()\n  }\n  private async getLogList(){\n    let res:any = await Service.get_log_list({\n      page_index: this.page_info.page_index,\n      page_size: this.page_info.page_size,\n      ...this.search_data\n    })\n    if(res.code === 'Success'){\n      this.list = res.data.operation_log_list\n      this.page_info.total = res.data.page_info.count;\n    } else {\n      this.$message.error(res.message)\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=13c72aca&scoped=true&\"\nimport script from \"./list.vue?vue&type=script&lang=ts&\"\nexport * from \"./list.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13c72aca\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}