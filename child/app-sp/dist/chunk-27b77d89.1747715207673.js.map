{"version":3,"sources":["webpack://AppSp/./src/https/task/main-task.ts","webpack://AppSp/./src/views/vmOp2/task/main-task-list.vue?d450","webpack://AppSp/./src/views/vmOp2/task/main-task-list.vue?b5b5","webpack://AppSp/./src/views/vmOp2/task/main-task-list.vue?5479","webpack://AppSp/./src/views/vmOp2/task/main-task-list.vue","webpack://AppSp/./src/views/vmOp2/task/main-task-list.vue?ad30","webpack://AppSp/./src/utils/vmOp2/rightClick.ts"],"names":["get_maintask_list","reqData","service","method","url","params","add_maintask","data","update_maitask","delete_maintask","get_maintask_detail","render","_vm","this","_h","$createElement","_c","_self","attrs","search_con","on","FnGetList","FnShowCreate","ref","task_list","rowStyle","FnOperRow","FnRightClick","handleSelectionChange","scopedSlots","_u","key","fn","scope","$event","FnDetail","row","id","_v","_s","page_info","page_index","page_sizes","page_size","total","$set","dialog_title","create_dialog","FnClose","model","value","main_config","callback","$$v","expression","proxy","staticClass","_e","sub_task_list","default_sub_task","FnGetRelTask","slot","FnConfirm","multi_rows","length","menus","maintask_name","infoClick","staticRenderFns","MainTaskList","placeholder","operate_auth","default_id","main_name","main_type","priority","retry","timeout","callback_url","sub_task","is_valid","label","single","disabled","item","FnShowUpdate","FnShowDel","hideMenu","$refs","table","toggleRowSelection","isSelected","some","column","event","console","log","rightClick","FnGetSubList","Boolean","JSON","parse","subtask_flow","map","list","subtask_index_id","maintask_type","page_number","Service","resData","code","maintask_info","SubService","get_subtask_list","subtask_info","stringify","Number","FnUpdate","FnCreate","$message","success","msg","Object","assign","task_name","$confirm","cancelButtonText","confirmButtonText","type","then","FnDel","catch","$router","push","$store","state","auth_info","$route","name","Vue","Component","components","LabelBlock","draggerTask","actionBlock","RightClick","component","preventDefault","document","addEventListener","target","closest","menu","querySelector","style","display","menuHeight","offsetHeight","menuWidth","offsetWidth","pageHeight","window","innerHeight","documentElement","clientHeight","body","pageWidth","innerWidth","clientWidth","mouseX","clientX","mouseY","clientY","posX","posY","left","top","zIndex"],"mappings":"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","file":"chunk-27b77d89.1747715207673.js","sourcesContent":["import service from \"../http\"\n\nexport default {\n  // 获取主任务配置列表\n  get_maintask_list(reqData: any) {\n    return service({\n      method: \"GET\",\n      url: \"/api/v1/maintask/configuration\",\n      params: reqData\n    })\n  },\n  // 添加主任务配置\n  add_maintask(reqData: any) {\n    return service({\n      method: \"POST\",\n      url: \"/api/v1/maintask/configuration\",\n      data: reqData\n    })\n  },\n  // 更新主任务配置\n  update_maitask(reqData: any) {\n    return service({\n      method: \"PUT\",\n      url: \"/api/v1/maintask/configuration\",\n      data: reqData\n    })\n  },\n  // 删除主任务配置\n  delete_maintask(reqData: any) {\n    return service({\n      method: \"DELETE\",\n      url: \"/api/v1/maintask/configuration\",\n      params: reqData\n    })\n  },\n  // 获取主任务详情\n  get_maintask_detail(reqData: any) {\n    return service({\n      method: \"GET\",\n      url: \"/api/v1/maintask/configuration/detail\",\n      params: reqData\n    })\n  }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('action-block',{attrs:{\"search_option\":_vm.search_con,\"create_btn\":\"新建主任务配置\",\"disabled\":false},on:{\"fn-search\":_vm.FnGetList,\"fn-create\":_vm.FnShowCreate}}),_c('el-table',{ref:\"table\",attrs:{\"data\":_vm.task_list,\"border\":\"\",\"row-class-name\":_vm.rowStyle},on:{\"row-click\":_vm.FnOperRow,\"row-contextmenu\":_vm.FnRightClick,\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\"}}),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.FnDetail(scope.row.id)}}},[_vm._v(_vm._s(scope.row.id))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"maintask_name\",\"label\":\"名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"priority\",\"label\":\"优先级\"}}),_c('el-table-column',{attrs:{\"prop\":\"retry\",\"label\":\"重试次数\"}}),_c('el-table-column',{attrs:{\"prop\":\"timeout\",\"label\":\"超时时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"callback_url\",\"label\":\"回退地址\"}}),_c('el-table-column',{attrs:{\"prop\":\"is_valid\",\"label\":\"is_valid\"}})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.page_info.page_index,\"page-sizes\":_vm.page_info.page_sizes,\"page-size\":_vm.page_info.page_size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.page_info.total},on:{\"size-change\":function($event){return _vm.FnGetList()},\"current-change\":function($event){return _vm.FnGetList()},\"update:currentPage\":function($event){return _vm.$set(_vm.page_info, \"page_index\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.page_info, \"page_index\", $event)},\"update:pageSize\":function($event){return _vm.$set(_vm.page_info, \"page_size\", $event)},\"update:page-size\":function($event){return _vm.$set(_vm.page_info, \"page_size\", $event)}}}),_c('el-dialog',{attrs:{\"title\":_vm.dialog_title,\"visible\":_vm.create_dialog,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.create_dialog=$event},\"close\":_vm.FnClose}},[_c('div',[_c('label-block',{attrs:{\"label\":\"主任务名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.main_config.main_name),callback:function ($$v) {_vm.$set(_vm.main_config, \"main_name\", $$v)},expression:\"main_config.main_name\"}})]},proxy:true}])}),_c('label-block',{attrs:{\"label\":\"主任务优先级\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-input-number',{attrs:{\"min\":1,\"max\":10},model:{value:(_vm.main_config.priority),callback:function ($$v) {_vm.$set(_vm.main_config, \"priority\", $$v)},expression:\"main_config.priority\"}})]},proxy:true}])}),_c('label-block',{attrs:{\"label\":\"主任务重试次数\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-input-number',{attrs:{\"min\":1,\"max\":10},model:{value:(_vm.main_config.retry),callback:function ($$v) {_vm.$set(_vm.main_config, \"retry\", $$v)},expression:\"main_config.retry\"}}),_vm._v(\" 次 \")]},proxy:true}])}),_c('label-block',{attrs:{\"label\":\"主任务超时时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-input-number',{attrs:{\"min\":1,\"max\":600},model:{value:(_vm.main_config.timeout),callback:function ($$v) {_vm.$set(_vm.main_config, \"timeout\", $$v)},expression:\"main_config.timeout\"}}),_vm._v(\" 秒 \")]},proxy:true}])}),_c('label-block',{attrs:{\"label\":\"主任务回退地址\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.main_config.callback_url),callback:function ($$v) {_vm.$set(_vm.main_config, \"callback_url\", $$v)},expression:\"main_config.callback_url\"}})]},proxy:true}])}),(_vm.default_id)?_c('label-block',{staticClass:\"switch-box\",attrs:{\"label\":\"有效\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('el-switch',{attrs:{\"active-color\":\"#455cc6\",\"inactive-color\":\"#ccc\"},model:{value:(_vm.main_config.is_valid),callback:function ($$v) {_vm.$set(_vm.main_config, \"is_valid\", $$v)},expression:\"main_config.is_valid\"}})]},proxy:true}],null,false,1067134834)}):_vm._e(),_c('label-block',{attrs:{\"label\":\"子任务配置\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('dragger-task',{attrs:{\"sub_task\":_vm.sub_task_list,\"rel_task\":_vm.default_sub_task},on:{\"fn-rel-task\":_vm.FnGetRelTask}})]},proxy:true}])})],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.FnConfirm}},[_vm._v(\"确 定\")]),_c('el-button',{on:{\"click\":_vm.FnClose}},[_vm._v(\"取 消\")])],1)]),(_vm.multi_rows.length === 1)?_c('right-click',{attrs:{\"multi_rows\":_vm.multi_rows,\"menus\":_vm.menus,\"name\":_vm.multi_rows.length>0 ? _vm.multi_rows[0].maintask_name: ''},on:{\"fn-click\":_vm.infoClick}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport LabelBlock from '@/components/labelBlock.vue';\nimport draggerTask from '@/components/draggerTask.vue';\nimport actionBlock from '@/components/search/actionBlock.vue';\nimport Service from '@/https/task/main-task';\nimport SubService from '@/https/task/sub-task';\nimport {rightClick} from \"@/utils/vmOp2/rightClick\";\nimport {hideMenu} from \"@/utils/vmOp2/hideMenu\";\nimport RightClick from \"@/views/vmOp2/component/right-click.vue\";\n\n@Component({\n  components: {\n    LabelBlock,\n    draggerTask,\n    actionBlock,\n    RightClick\n  },\n})\nexport default class MainTaskList extends Vue {\n  $message;\n  $confirm;\n  $router;\n  $route;\n  $store;\n  private search_con = {\n    id: { placeholder: '请输入任务ID' },\n    // maintask_type: { placeholder: '请输入任务类型' },\n    maintask_name: { placeholder: '请输入任务名称' }\n  };\n  private create_dialog: boolean = false;\n  private dialog_title: string = '';\n  private task_list = [];\n  private operate_auth = [];\n  private default_id = '';\n  private default_sub_task = [];\n  private main_config = {\n    main_name: '',\n    main_type: '',\n    priority: 1,\n    retry: 1,\n    timeout: 60,\n    callback_url: '',\n    sub_task: [],\n    is_valid: true,\n  };\n  private sub_task_list = [];\n  private page_info = {\n    page_sizes: [20, 50, 100],\n    page_size: 20,\n    page_index: 1,\n    total: 0\n  };\n  private multi_rows:any=[];\n  private menus= [\n    {label: '编辑',value: 'edit',single:true,disabled:false},\n    {label: '删除',value: 'delete',single:true,disabled:false},\n  ]\n  private infoClick(item) {\n    const {label, value}=item\n    if(value === 'edit') {\n      this.FnShowUpdate(this.multi_rows[0])\n    }else {\n      this.FnShowDel(this.multi_rows[0].id,this.multi_rows[0].maintask_name)\n    }\n    hideMenu()\n  }\n  private handleSelectionChange(data){\n    this.multi_rows = data\n  }\n  //改变点击行得选中状态\n  private FnOperRow(row){\n    (this.$refs.table as any).toggleRowSelection(row)\n  }\n  //改变选中行的背景颜色\n  rowStyle({row}) {\n    const isSelected = this.multi_rows.some(item => item.id === row.id);\n    if (isSelected) {\n      return 'rowStyle'\n    }\n  }\n  //右键弹出操作\n  FnRightClick(row,column,event){\n    //判断当前行是否被选中，没选中时需选中并弹出菜单\n    console.log(event)\n    const isSelected = this.multi_rows.some(item => item.id === row.id);\n    if (!isSelected) {\n      (this.$refs.table as any).toggleRowSelection(row)\n    }\n    rightClick(row,column,event)\n  }\n  private FnShowCreate(): void {\n    this.create_dialog = true;\n    this.dialog_title = '新建主任务配置';\n    this.FnGetSubList();\n  }\n  private async FnShowUpdate(row){\n    this.create_dialog = true;\n    this.dialog_title = '更新主任务配置';\n    await this.FnGetSubList();\n    this.default_id = row.id;\n    this.main_config.main_name = row.maintask_name;\n    // this.main_config.main_type = row.maintask_type;\n    this.main_config.retry = row.retry;\n    this.main_config.priority = row.priority;\n    this.main_config.timeout = row.timeout;\n    this.main_config.callback_url = row.callback_url;\n    this.main_config.is_valid = Boolean(row.is_valid);\n    this.default_sub_task = JSON.parse(row.subtask_flow).map(list => {\n      return list.map(item => {\n        return item.subtask_index_id\n      })\n    })\n  }\n  private FnClose(): void {\n    this.create_dialog = false;\n    this.main_config.main_name = '';\n    this.main_config.main_type = '';\n    this.main_config.retry = 1;\n    this.main_config.priority = 1;\n    this.main_config.timeout = 60;\n    this.main_config.callback_url = '';\n    this.main_config.sub_task = [];\n    this.main_config.is_valid = true;\n    this.sub_task_list = [];\n    this.default_id = '';\n    this.default_sub_task = [];\n  }\n  private async FnGetList(data: any = {}) {\n    let reqData: any = {};\n    if (data.id) reqData.id = data.id;\n    if (data.maintask_type) reqData.maintask_type = data.maintask_type;\n    if (data.maintask_name) reqData.maintask_name = data.maintask_name;\n    reqData.page_number = this.page_info.page_index;\n    reqData.page_size = this.page_info.page_size;\n    const resData: any = await Service.get_maintask_list(reqData);\n    if ( resData.code === 'Success' ) {\n      this.task_list = resData.data.maintask_info;\n      this.page_info.total = resData.data.total;\n    }\n  }\n  private async FnGetSubList() {\n    const resData: any = await SubService.get_subtask_list();\n    if ( resData.code === 'Success' ) {\n      this.sub_task_list =  resData.data.subtask_info;\n    }\n  }\n  private FnGetRelTask(task_list) {\n    this.main_config.sub_task = task_list.map(list => {\n      return list.map(item => {\n        return {'subtask_index_id': item}\n      })\n    })\n  }\n  private FnConfirm() {\n    // TODO：数据校验\n    let reqData = {\n      // maintask_type: this.main_config.main_type,\n      maintask_name: this.main_config.main_name,\n      priority: this.main_config.priority,\n      retry: this.main_config.retry,\n      timeout: this.main_config.timeout,\n      callback_url: this.main_config.callback_url,\n      subtask_flow: JSON.stringify(this.main_config.sub_task),\n      is_valid: Number(this.main_config.is_valid)\n    }\n    if(this.default_id) {\n      this.FnUpdate(reqData);\n    } else {\n      this.FnCreate(reqData);\n    }\n  }\n  private async FnCreate(reqData) {\n    const resData: any = await Service.add_maintask(reqData);\n    if ( resData.code === 'Success' ) {\n      this.FnClose();\n      this.$message.success(resData.msg || '成功新建主任务配置！');\n      this.FnGetList();\n    }\n  }\n  private async FnUpdate(reqData) {\n    const resData: any = await Service.update_maitask(Object.assign({}, reqData, {id: this.default_id}));\n    if ( resData.code === 'Success' ) {\n      this.FnClose();\n      this.$message.success(resData.msg || '成功更新主任务配置！');\n      this.FnGetList();\n    }\n  }\n  private FnShowDel(id, task_name) {\n    this.$confirm(`确认删除主任务配置 -- ${task_name}`, '删除提示', {\n      cancelButtonText: '取消',\n      confirmButtonText: '确定',\n      type: 'warning'\n    }).then(() => {\n      this.default_id = id;\n      this.FnDel();\n    }).catch();\n  }\n  private async FnDel() {\n    const resData: any = await Service.delete_maintask({id: this.default_id});\n    if ( resData.code === 'Success' ) {\n      this.$message.success(resData.msg || '成功删除主项目配置！');\n      this.FnGetList();\n    }\n  }\n  private FnDetail(id) {\n    this.$router.push(`/mainTaskDetail/${id}`)\n  }\n\n  created() {\n    this.operate_auth = this.$store.state.auth_info[this.$route.name]\n    this.FnGetList();\n  }\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-task-list.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-task-list.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./main-task-list.vue?vue&type=template&id=011caab9&scoped=true&\"\nimport script from \"./main-task-list.vue?vue&type=script&lang=ts&\"\nexport * from \"./main-task-list.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./main-task-list.vue?vue&type=style&index=0&id=011caab9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"011caab9\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-task-list.vue?vue&type=style&index=0&id=011caab9&lang=scss&scoped=true&\"","import {hideMenu} from \"@/utils/vmOp2/hideMenu\";\n\nexport function rightClick(row, column, event) {\n  // 阻止浏览器默认右键菜单弹出\n  event.preventDefault();\n  // 获取菜单元素\n  document.addEventListener('contextmenu', (event) => {\n    const target = event.target as HTMLElement;\n  if (target.closest('.el-table')) {\n    let menu = document.querySelector(\"#menu\") as HTMLElement;\n    if (menu) {\n      menu.style.display = 'block';\n      // 计算菜单的高度和宽度\n      let menuHeight = menu.offsetHeight;\n      let menuWidth = menu.offsetWidth;\n      console.log('menuHeight', menuHeight)\n\n      // 获取当前页面的高度和宽度\n      let pageHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n      let pageWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n\n\n      // 获取鼠标的位置\n      let mouseX = event.clientX;\n      let mouseY = event.clientY;\n\n      //定义菜单出现的位置变量\n      let posX = mouseX\n      let posY = mouseY\n      // 检查是否会溢出屏幕右侧，如果是，则将菜单镜像到左侧\n      if (pageWidth < mouseX + menuWidth) {\n        posX = mouseX - menuWidth;\n      }\n\n      // 检查是否会溢出屏幕底部，如果是，则整体向上移动菜单\n      if (pageHeight < mouseY + menuHeight) {\n        posY = pageHeight - menuHeight\n      }\n\n      // 设置菜单的位置\n      menu.style.left = posX - 250 + \"px\";\n      menu.style.top = posY - 50 + \"px\";\n      menu.style.display = \"block\";\n      menu.style.zIndex = '1000';\n      //监听点击事件，点击时隐藏右键菜单\n      document.addEventListener('click', hideMenu);\n    }\n  }\n  })\n  document.addEventListener('contextmenu', hideMenu);\n}\n"],"sourceRoot":""}