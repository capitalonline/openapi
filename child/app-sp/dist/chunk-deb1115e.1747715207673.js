(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-deb1115e"],{"00b4":function(e,t,r){"use strict";r("ac1f");var n=r("23e7"),a=r("da84"),i=r("c65b"),c=r("e330"),o=r("1626"),s=r("861d"),u=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),l=a.Error,_=c(/./.test);n({target:"RegExp",proto:!0,forced:!u},{test:function(e){var t=this.exec;if(!o(t))return _(this,e);var r=i(t,this,e);if(null!==r&&!s(r))throw new l("RegExp exec method returned something other than an Object or null");return!!r}})},"06c5":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("fb6a"),r("d3b7"),r("b0c0"),r("a630"),r("3ca3"),r("ac1f"),r("00b4");var n=r("6b75");function a(e,t){if(e){if("string"===typeof e)return Object(n["a"])(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n["a"])(e,t):void 0}}},1928:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("action-block",{attrs:{search_option:e.search},on:{"fn-search":e.fn_search}}),r("div",{staticClass:"prompt_message"},[e._v("重试：支持对失败状态的任务进行重试；忽略：支持对任务进行忽略，忽略的任务不展示")]),r("el-table",{staticClass:"event-table",attrs:{data:e.event_list,border:""},on:{"filter-change":e.filterAttribute}},[r("el-table-column",{attrs:{prop:"cloud_id",label:"资源ID"}}),r("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),r("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),r("el-table-column",{attrs:{prop:"az_name",label:"可用区"}}),r("el-table-column",{attrs:{prop:"task_id",label:"任务ID"}}),r("el-table-column",{attrs:{prop:"task_type",label:"任务名称"}}),r("el-table-column",{attrs:{prop:"task_state",label:"任务状态"}}),r("el-table-column",{attrs:{prop:"error_type",label:"失败类型","filter-multiple":!1,"column-key":"error_type",filters:e.error_type_list},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.error_type))])]}}])}),r("el-table-column",{attrs:{prop:"subtask_name",label:"当前执行流程"}}),r("el-table-column",{attrs:{prop:"detail",label:"失败原因"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{attrs:{content:t.row.detail,"popper-class":"tooltip-width",placement:"bottom",effect:"light"}},[r("span",[e._v(e._s(t.row.detail.length>20?t.row.detail.slice(0,21)+"...":t.row.detail))])])]}}])}),r("el-table-column",{attrs:{prop:"create_time",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.create_time?e.moment(t.row.create_time).format("YYYY-MM-DD HH:mm:ss"):"--"))])]}}])}),r("el-table-column",{attrs:{prop:"update_time",label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.update_time?e.moment(t.row.update_time).format("YYYY-MM-DD HH:mm:ss"):"--"))])]}}])}),r("el-table-column",{attrs:{prop:"end_time",label:"完成时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.end_time?e.moment(t.row.end_time).format("YYYY-MM-DD HH:mm:ss"):"--"))])]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.retry(t.row.task_id,t.row.event_id)}}},[e._v("重试")]),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.ignore(t.row.task_id,t.row.event_id)}}},[e._v("忽略")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},a=[],i=r("5530"),c=r("2909"),o=r("1da1"),s=r("d4ec"),u=r("bee2"),l=r("262e"),_=r("2caf"),f=(r("96cf"),r("ac1f"),r("841c"),r("d3b7"),r("159b"),r("99af"),r("9ab4")),d=r("1b40"),p=r("c811"),b=r("1296"),m=r("9074"),h=r("8ce4"),g=r("c1df"),v=r.n(g),y=function(e){Object(l["a"])(r,e);var t=Object(_["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.search={az_id:{placeholder:"请选择可用区",list:[]},cloud_id:{placeholder:"请输入资源ID"},task_id:{placeholder:"请输入任务ID"},task_type:{placeholder:"请输入任务名称"},customer_id:{placeholder:"请输入客户ID"},customer_name:{placeholder:"请输入客户名称"},time:{type:"datetimerange",placeholder:["开始时间","结束时间"],clearable:!1,width:360,defaultTime:[v()(new Date).format("YYYY-MM-DD 00:00:00"),v()(new Date).format("YYYY-MM-DD HH:mm:ss")]}},e.event_num=0,e.finish_num=0,e.finished_percent="0.00%",e.fail_num=0,e.error_percent="0.00%",e.err="err",e.current=1,e.size=20,e.total=0,e.moment=v.a,e.event_list=[],e.min_date="",e.search_data={},e.event_detail=!1,e.sort_prop_name="",e.sort_value="",e.error_type_list=[],e.filter_obj={},e}return Object(u["a"])(r,[{key:"created",value:function(){this.get_az_list(),this.getFilterList(),this.fn_search()}},{key:"get_az_list",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.search.az_id.list=[],e.next=3,m["a"].get_region_az_list({});case 3:t=e.sent,"Success"===t.code&&t.data.forEach((function(e){e.region_list.forEach((function(e){r.search.az_id.list=[].concat(Object(c["a"])(r.search.az_id.list),Object(c["a"])(Object(h["e"])(e.az_list,"az_name","az_id","label","type")))}))}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getFilterList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b["a"].get_filter_item({filed_names:["error_type"]});case 2:if(t=e.sent,"Success"===t.code)for(r in t.data.error_type)this.error_type_list.push({text:t.data.error_type[r],value:r});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fn_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.search_data=Object(i["a"])(Object(i["a"])({},e),this.filter_obj),this.get_error_task_list()}},{key:"get_error_task_list",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.search_data,e.next=3,b["a"].get_error_task_list({page_index:this.current,page_size:this.size,az_id:t.az_id||"",cloud_id:t.cloud_id||"",task_type:t.task_type||"",task_id:t.task_id||"",customer_id:t.customer_id||"",customer_name:t.customer_name||"",error_type:t.error_type?t.error_type[0]:void 0,start_time:t.time?v()(t.time[0]).format("YYYY-MM-DD HH:mm:ss"):v()(new Date).format("YYYY-MM-DD 00:00:00"),end_time:t.time?v()(t.time[1]).format("YYYY-MM-DD HH:mm:ss"):v()(new Date).format("YYYY-MM-DD HH:mm:ss")});case 3:r=e.sent,"Success"===r.code?(this.event_list=(null===(n=r.data)||void 0===n?void 0:n.task_list)||[],this.total=(null===(a=r.data)||void 0===a||null===(i=a.page_info)||void 0===i?void 0:i.count)||0):this.$message.error(r.msg||"操作错误");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSizeChange",value:function(e){this.size=e,this.get_error_task_list()}},{key:"handleCurrentChange",value:function(e){this.current=e,this.get_error_task_list()}},{key:"filterAttribute",value:function(e){this.filter_obj=Object(i["a"])(Object(i["a"])({},this.filter_obj),e),this.fn_search(this.search_data)}},{key:"retry",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b["a"].retry_task({task_id:t,event_id:r});case 2:n=e.sent,"Success"===n.code&&(this.$message.success(n.message),this.get_error_task_list());case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"ignore",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b["a"].ignore({task_id:t});case 2:r=e.sent,"Success"===r.code&&(this.$message.success(r.message),this.get_error_task_list());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(d["e"]);y=Object(f["a"])([Object(d["a"])({components:{ActionBlock:p["a"]}})],y);var O=y,j=O,k=r("2877"),w=Object(k["a"])(j,n,a,!1,null,"b091c8d4",null);t["default"]=w.exports},2909:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("6b75");function a(e){if(Array.isArray(e))return Object(n["a"])(e)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var c=r("06c5");r("d9e2");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return a(e)||i(e)||Object(c["a"])(e)||o()}},"6b75":function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return n}))},"8ce4":function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return u}));var n=r("5530"),a=r("ade3");r("d81d"),r("b0c0"),r("99af"),r("fb6a");function i(e,t,r,n,i){var c=[];return e.map((function(e){var o;c.push((o={},Object(a["a"])(o,n,e[t]),Object(a["a"])(o,i,e[r]),o))})),c}function c(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=[];return e.map((function(e){var c={};t.map((function(t,n){c[t]=e[r[n]]})),i.push(Object(n["a"])(Object(n["a"])({},c),a))})),i}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};for(var a in e){var i=e[a],c=i.billing_scheme_id,o=i.billing_cycle_id,s=i.billing_items,u=i.gic_goods_id,l={};for(var _ in s){var f={attr_id:s[_].attr_id,name:s[_].name},d={id:s[_].id,key:_};l[_]=t?Object(n["a"])(Object(n["a"])({},f),d):d}r[a]={billing_scheme_id:c,billing_cycle_id:o,billing_items:l,gic_goods_id:t?u:void 0}}return r}function s(e,t){return e.map((function(e){return e[t]}))}function u(e){var t="";for(var r in e)e[r]&&(t+="".concat(r,"=").concat(e[r],"&"));return""===t?"":"?".concat(t.slice(0,t.length-1))}},9074:function(e,t,r){"use strict";var n=r("81a9"),a=r("bff7");t["a"]={get_customer_name:function(e){return Object(n["a"])(Object(a["b"])("POST","/ecs/get_customer_name/",e))},get_region_az_list:function(e){return Object(n["a"])(Object(a["b"])("POST","/ecs/region_az_info/",e))},get_net_list:function(e){return Object(n["a"])(Object(a["b"])("POST","/ecs/net_info/",e))},get_all_cpu_ram:function(){return Object(n["a"])(Object(a["b"])("GET","/ecs/ram_cpu_list/"))},get_category_list:function(e){return Object(n["a"])(Object(a["b"])("GET","/ecs/ecs_category_list/",e))},ecs_family_info:function(e){return Object(n["a"])(Object(a["b"])("GET","/ecs/ecs_family_info/",e))},get_os_list:function(e){return Object(n["a"])(Object(a["b"])("POST","/img/image_info/",e))},get_price:function(e){return Object(n["a"])(Object(a["b"])("POST","/ecs/get_price/",e))},create_instance:function(e){return Object(n["a"])(Object(a["b"])("POST","/ecs/create_ecs/",e))},get_ecs_limit:function(e){return Object(n["a"])(Object(a["b"])("POST","/ecs/get_ecs_limit/",e))},get_ram_cpu_price_list:function(e){return Object(n["a"])(Object(a["b"])("POST","/ecs/ecs_spec_attach_price/",e))},difference_price:function(e){return Object(n["a"])(Object(a["b"])("POST","/ecs/ecs_difference_price/",e))},change_configure_limit:function(e){return Object(n["a"])(Object(a["b"])("POST","/ecs/change_configure_limit/",e))}}},"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),i=r("d039"),c=r("e8b5"),o=r("861d"),s=r("7b0b"),u=r("07fa"),l=r("8418"),_=r("65f0"),f=r("1dde"),d=r("b622"),p=r("2d00"),b=d("isConcatSpreadable"),m=9007199254740991,h="Maximum allowed index exceeded",g=a.TypeError,v=p>=51||!i((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),y=f("concat"),O=function(e){if(!o(e))return!1;var t=e[b];return void 0!==t?!!t:c(e)},j=!v||!y;n({target:"Array",proto:!0,forced:j},{concat:function(e){var t,r,n,a,i,c=s(this),o=_(c,0),f=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?c:arguments[t],O(i)){if(a=u(i),f+a>m)throw g(h);for(r=0;r<a;r++,f++)r in i&&l(o,f,i[r])}else{if(f>=m)throw g(h);l(o,f++,i)}return o.length=f,o}})},a630:function(e,t,r){var n=r("23e7"),a=r("4df4"),i=r("1c7e"),c=!i((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:c},{from:a})},d81d:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").map,i=r("1dde"),c=i("map");n({target:"Array",proto:!0,forced:!c},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),i=r("e8b5"),c=r("68ee"),o=r("861d"),s=r("23cb"),u=r("07fa"),l=r("fc6a"),_=r("8418"),f=r("b622"),d=r("1dde"),p=r("f36a"),b=d("slice"),m=f("species"),h=a.Array,g=Math.max;n({target:"Array",proto:!0,forced:!b},{slice:function(e,t){var r,n,a,f=l(this),d=u(f),b=s(e,d),v=s(void 0===t?d:t,d);if(i(f)&&(r=f.constructor,c(r)&&(r===h||i(r.prototype))?r=void 0:o(r)&&(r=r[m],null===r&&(r=void 0)),r===h||void 0===r))return p(f,b,v);for(n=new(void 0===r?h:r)(g(v-b,0)),a=0;b<v;b++,a++)b in f&&_(n,a,f[b]);return n.length=a,n}})}}]);
//# sourceMappingURL=chunk-deb1115e.1747715207673.js.map