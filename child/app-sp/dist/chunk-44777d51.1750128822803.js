(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-44777d51"],{"0b73":function(e,t,a){"use strict";a("7428")},"0cb2":function(e,t,a){var n=a("e330"),r=a("7b0b"),i=Math.floor,s=n("".charAt),c=n("".replace),o=n("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,n,p,d){var b=a+e.length,_=n.length,h=u;return void 0!==p&&(p=r(p),h=l),c(d,h,(function(r,c){var l;switch(s(c,0)){case"$":return"$";case"&":return e;case"`":return o(t,0,a);case"'":return o(t,b);case"<":l=p[o(c,1,-1)];break;default:var u=+c;if(0===u)return r;if(u>_){var d=i(u/10);return 0===d?r:d<=_?void 0===n[d-1]?s(c,1):n[d-1]+s(c,1):r}l=n[u-1]}return void 0===l?"":l}))}},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},5319:function(e,t,a){"use strict";var n=a("2ba4"),r=a("c65b"),i=a("e330"),s=a("d784"),c=a("d039"),o=a("825a"),l=a("1626"),u=a("5926"),p=a("50c4"),d=a("577e"),b=a("1d80"),_=a("8aa5"),h=a("dc4a"),f=a("0cb2"),m=a("14c3"),v=a("b622"),y=v("replace"),O=Math.max,k=Math.min,j=i([].concat),g=i([].push),w=i("".indexOf),x=i("".slice),S=function(e){return void 0===e?e:String(e)},T=function(){return"$0"==="a".replace(/./,"$0")}(),F=function(){return!!/./[y]&&""===/./[y]("a","$0")}(),C=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));s("replace",(function(e,t,a){var i=F?"$":"$0";return[function(e,a){var n=b(this),i=void 0==e?void 0:h(e,y);return i?r(i,e,n,a):r(t,d(n),e,a)},function(e,r){var s=o(this),c=d(e);if("string"==typeof r&&-1===w(r,i)&&-1===w(r,"$<")){var b=a(t,s,c,r);if(b.done)return b.value}var h=l(r);h||(r=d(r));var v=s.global;if(v){var y=s.unicode;s.lastIndex=0}var T=[];while(1){var F=m(s,c);if(null===F)break;if(g(T,F),!v)break;var C=d(F[0]);""===C&&(s.lastIndex=_(c,p(s.lastIndex),y))}for(var $="",D=0,P=0;P<T.length;P++){F=T[P];for(var I=d(F[0]),z=O(k(u(F.index),c.length),0),E=[],A=1;A<F.length;A++)g(E,S(F[A]));var L=F.groups;if(h){var R=j([I],E,z,c);void 0!==L&&g(R,L);var G=d(n(r,void 0,R))}else G=f(I,c,z,E,L,r);z>=D&&($+=x(c,D,z)+G,D=z+I.length)}return $+x(c,D)}]}),!C||!T||F)},7428:function(e,t,a){},"841c":function(e,t,a){"use strict";var n=a("c65b"),r=a("d784"),i=a("825a"),s=a("1d80"),c=a("129f"),o=a("577e"),l=a("dc4a"),u=a("14c3");r("search",(function(e,t,a){return[function(t){var a=s(this),r=void 0==t?void 0:l(t,e);return r?n(r,t,a):new RegExp(t)[e](o(a))},function(e){var n=i(this),r=o(e),s=a(t,n,r);if(s.done)return s.value;var l=n.lastIndex;c(l,0)||(n.lastIndex=0);var p=u(n,r);return c(n.lastIndex,l)||(n.lastIndex=l),null===p?-1:p.index}]}))},"979f":function(e,t,a){},"9a8d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-date-picker",{attrs:{type:e.time_option.type,editable:!1,"range-separator":"至","picker-options":{disabledDate:e.dis_date,onPick:e.onPicker},clearable:e.time_option.clearable,"start-placeholder":e.time_option.placeholder[0],"end-placeholder":e.time_option.placeholder[1]},on:{change:e.FnEmit},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})},r=[],i=a("d4ec"),s=a("bee2"),c=a("262e"),o=a("2caf"),l=a("9ab4"),u=a("1b40"),p=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.time=[],e.min_date="",e.day=0,e}return Object(s["a"])(a,[{key:"dis_date",value:function(e){var t=this.day;if(0!==t){var a=864e5,n=(new Date).getTime(),r=(new Date).getTime(),i=(new Date).getTime();return this.time_option.min_date?(r=new Date(this.time_option.min_date).getTime(),e.getTime()>i||e.getTime()<r-a):e.getTime()>i||e.getTime()>(this.min_date||n)+a*t||this.min_date&&e.getTime()<this.min_date-a*t}}},{key:"onPicker",value:function(e){e.maxDate;var t=e.minDate;this.min_date=t.getTime()}},{key:"created",value:function(){this.day=this.time_option.dis_day-1||0,this.FnChangeDefaultTime(this.time_option.defaultTime)}},{key:"FnClear",value:function(){this.FnChangeDefaultTime(this.time_option.defaultTime)}},{key:"FnChangeDefaultTime",value:function(e){console.log("clear",e),e.length,this.time=e,this.FnEmit()}},{key:"FnEmit",value:function(){return this.min_date="",this.time}}]),a}(u["e"]);Object(l["a"])([Object(u["c"])({default:function(){return{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!1,dis_day:31,min_date:"",defaultTime:[new Date,new Date]}}})],p.prototype,"time_option",void 0),Object(l["a"])([Object(u["c"])({default:!1})],p.prototype,"clear",void 0),Object(l["a"])([Object(u["f"])("time_option.defaultTime")],p.prototype,"FnChangeDefaultTime",null),Object(l["a"])([Object(u["b"])("fn-emit")],p.prototype,"FnEmit",null),p=Object(l["a"])([u["a"]],p);var d=p,b=d,_=a("2877"),h=Object(_["a"])(b,n,r,!1,null,null,null);t["a"]=h.exports},c811:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"action-box",style:e.isShowBg?{}:{background:"#fff",padding:0,margin:0,border:"none"}},[a("div",{ref:"search",staticClass:"search-box",class:{fold:!e.isOpen}},[e._l(e.search_option,(function(t,n){return a("div",{key:n,staticClass:"search-input",style:t.width?{width:t.width+"px"}:{}},[t.list&&!t.type?a("el-select",{attrs:{placeholder:t.placeholder,multiple:t.multiple,filterable:t.filter,clearable:""},model:{value:e.search_value[n],callback:function(t){e.$set(e.search_value,n,t)},expression:"search_value[key]"}},e._l(t.list,(function(e,n){return a("el-option",{key:Array.isArray(t.list)?e.type:n,attrs:{label:Array.isArray(t.list)?e.label:e,value:Array.isArray(t.list)?e.type:n}})})),1):e._e(),(t.list||t.type||t.multi)&&"composite"!==t.type?e._e():a("el-input",{staticClass:"composite",style:t.width?{width:t.width+"px"}:{},attrs:{placeholder:t.placeholder,clearable:""},model:{value:e.search_value[n],callback:function(t){e.$set(e.search_value,n,t)},expression:"search_value[key]"}},["composite"===t.type?a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.search_value[n+"sub"],callback:function(t){e.$set(e.search_value,n+"sub",t)},expression:"search_value[key + 'sub']"}},e._l(t.list,(function(e){return a("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})})),1):e._e()],1),t.multi?a("el-popover",{attrs:{placement:"bottom",width:"250",trigger:"click"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:t.placeholder+"（使用回车或英文逗号隔开）"},model:{value:e.search_value[n],callback:function(t){e.$set(e.search_value,n,t)},expression:"search_value[key]"}}),!t.list&&!t.type||t.multi?a("el-input",{staticClass:"multi_input",style:t.width?{width:t.width+"px"}:{},attrs:{slot:"reference",placeholder:t.placeholder,clearable:""},slot:"reference",model:{value:e.search_value[n],callback:function(t){e.$set(e.search_value,n,t)},expression:"search_value[key]"}}):e._e()],1):e._e(),"datetimerange"===t.type||"daterange"===t.type?[a("date-picker",{ref:"datepicker",refInFor:!0,attrs:{time_option:e.search_option[n]},on:{"fn-emit":function(t){return e.FnGetTime(t,n)}}})]:e._e()],2)})),e.type?e._e():a("div",{staticClass:"m-bottom20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("查 询")]),a("el-button",{attrs:{type:"default"},on:{click:e.FnClear}},[e._v("清 空")])],1)],2),e.type?a("div",{staticClass:"m-bottom5"},[a("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("查 询")]),"physical"===e.type?a("el-button",{attrs:{type:"primary"},on:{click:e.FnMultiSearch}},[e._v("批量查询")]):e._e(),a("el-button",{attrs:{type:"default"},on:{click:e.FnClear}},[e._v("清 空")]),a("el-button",{staticClass:"m-bottom10",attrs:{type:"text"},on:{click:e.operate}},[e._v(e._s(e.isOpen?"折叠":"展开"))])],1):e._e(),e._t("default",(function(){return[e.create_btn?a("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.FnShowCreate}},[e._v(e._s(e.create_btn))]):e._e()]})),a("el-dialog",{attrs:{title:"批量查询",visible:e.syncVisible,width:"400px","destroy-on-close":!0,"close-on-click-modal":!1}},[a("el-input",{attrs:{type:"textarea",rows:13,placeholder:"请输入主机ID/名称,格式如下：\nPOD01-CLU01-H001\nPOD01-CLU01-H002\nPOD01-CLU01-H003\n..."},model:{value:e.search_value["host_info"],callback:function(t){e.$set(e.search_value,"host_info",t)},expression:"search_value['host_info']"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("确认")]),a("el-button",{on:{click:function(t){e.syncVisible=!1}}},[e._v("取消")])],1)],1)],2)},r=[],i=a("d4ec"),s=a("bee2"),c=a("262e"),o=a("2caf"),l=(a("ac1f"),a("841c"),a("5319"),a("caad"),a("9ab4")),u=a("1b40"),p=a("9a8d"),d=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(i["a"])(this,a),e=t.apply(this,arguments),e.search_value={},e.time=null,e.date_key="",e.syncVisible=!1,e.isOpen=!0,e}return Object(s["a"])(a,[{key:"FnGetTime",value:function(e,t){this.time=e,this.date_key=t}},{key:"FnSearch",value:function(){return this.syncVisible=!1,this.search_value[this.date_key]=this.time,this.search_value}},{key:"watch_search_option",value:function(){var e=this;this.type&&this.$nextTick((function(){var t=e.$refs.search,a=window.getComputedStyle(t).height.replace("px","");parseInt(a)>52&&e.isOpen&&(e.isOpen=!1),e.FnOperate()}))}},{key:"FnMultiSearch",value:function(){this.syncVisible=!0}},{key:"operate",value:function(){this.isOpen=!this.isOpen,this.FnOperate()}},{key:"FnOperate",value:function(){}},{key:"FnShowCreate",value:function(){}},{key:"watch_search_value",value:function(e,t){}},{key:"FnClear",value:function(){for(var e in this.search_option)["datetimerange","daterange"].includes(this.search_option[e].type)?this.$refs.datepicker[0].FnClear():this.search_value={};this.FnSearch()}},{key:"mounted",value:function(){var e=this,t=0;for(var a in this.search_option)this.search_option[a].default_value&&(this.$set(this.search_value,a,this.search_option[a].default_value),t++),"composite"===this.search_option[a].type&&this.$set(this.search_value,a+"sub",this.search_option[a].list[0].type);(t>0||"physical"===this.type)&&setTimeout((function(){e.FnSearch()}),500)}}]),a}(u["e"]);Object(l["a"])([Object(u["c"])({default:{}})],d.prototype,"search_option",void 0),Object(l["a"])([Object(u["c"])({default:""})],d.prototype,"create_btn",void 0),Object(l["a"])([Object(u["c"])({default:!0})],d.prototype,"disabled",void 0),Object(l["a"])([Object(u["c"])({default:!1})],d.prototype,"type",void 0),Object(l["a"])([Object(u["c"])({default:!0})],d.prototype,"isShowBg",void 0),Object(l["a"])([Object(u["b"])("fn-search")],d.prototype,"FnSearch",null),Object(l["a"])([Object(u["f"])("search_option",{immediate:!0,deep:!0})],d.prototype,"watch_search_option",null),Object(l["a"])([Object(u["b"])("fn-operate")],d.prototype,"FnOperate",null),Object(l["a"])([Object(u["b"])("fn-create")],d.prototype,"FnShowCreate",null),Object(l["a"])([Object(u["f"])("search_value",{immediate:!0,deep:!0})],d.prototype,"watch_search_value",null),d=Object(l["a"])([Object(u["a"])({components:{DatePicker:p["a"]}})],d);var b=d,_=b,h=(a("0b73"),a("e198c"),a("2877")),f=Object(h["a"])(_,n,r,!1,null,"20a86f62",null);t["a"]=f.exports},e198c:function(e,t,a){"use strict";a("979f")},f33c:function(e,t,a){"use strict";var n=a("81a9"),r=a("bff7");t["a"]={get_disk_list:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/get_disk_list/",e))},get_disk_state:function(e){return Object(n["a"])(Object(r["b"])("GET","/ebs/disk_status/",e))},edit_disk_name:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/disk_name_update/",e))},edit_disk_attr:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/disk_property_update/ ",e))},mount:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/mount/",e))},unmount:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/unmount/",e))},del_disk:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/delete/",e))},recover:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/recover/",e))},destroy:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/destroy_disk/",e))},expansion:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/expansion/",e))},get_fee:function(e){return Object(n["a"])(Object(r["b"])("POST","/ecs/each_resource_price/",e))},open_bill:function(e){return Object(n["a"])(Object(r["b"])("POST","/resource/start_charge/",e))},get_product_source:function(e){return Object(n["a"])(Object(r["b"])("GET","/ebs/disk_product_source/",e))},change_iops_mbps:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/change_iops_mbps/",e))},iops_mbps_record:function(e){return Object(n["a"])(Object(r["b"])("POST","/ebs/iops_mbps_record/",e))},get_iops_mbps_limit:function(){return Object(n["a"])(Object(r["b"])("GET","/ebs/get_iops_mbps_limit/"))}}},f751:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("action-block",{attrs:{search_option:e.search_dom},on:{"fn-search":e.search}}),a("el-table",{attrs:{data:e.disk_record,border:""}},[a("el-table-column",{attrs:{prop:"create_time",label:"操作时间"}}),a("el-table-column",{attrs:{prop:"op_user",label:"操作人"}}),a("el-table-column",{attrs:{prop:"operation_type",label:"操作类型","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("change_iops"===t.row.operation_type?"修改云盘IOPS":"修改云盘吞吐量"))])]}}])}),a("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),a("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),a("el-table-column",{attrs:{prop:"disk_id",label:"云盘ID"}}),a("el-table-column",{attrs:{prop:"disk_name",label:"云盘名称"}}),a("el-table-column",{attrs:{prop:"status_name",label:"云盘状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.status},[e._v(e._s(t.row.status_name))])]}}])}),a("el-table-column",{attrs:{prop:"disk_iops",label:"修改前IOPS","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.disk_iops?""+t.row.disk_iops+t.row.iops_unit:""))])]}}])}),a("el-table-column",{attrs:{prop:"disk_iops_after",label:"修改后IOPS","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.disk_iops_after?""+t.row.disk_iops_after+t.row.iops_unit:""))])]}}])}),a("el-table-column",{attrs:{prop:"band_mbps",label:"修改前吞吐量","min-width":"95px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.band_mbps?""+t.row.band_mbps+t.row.mbps_unit:""))])]}}])}),a("el-table-column",{attrs:{prop:"band_mbps_after",label:"修改后吞吐量","min-width":"95px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.band_mbps_after?""+t.row.band_mbps_after+t.row.mbps_unit:""))])]}}])}),a("el-table-column",{attrs:{prop:"change_reason",label:"修改原因"}}),a("el-table-column",{attrs:{prop:"az_name",label:"地域-可用区","min-width":"95px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.region_name)+"  "+e._s(t.row.az_name))])]}}])}),a("el-table-column",{attrs:{prop:"disk_type",label:"属性"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("data"===t.row.disk_type?"数据盘":"系统盘"))])]}}])}),a("el-table-column",{attrs:{prop:"ecs_id",label:"实例ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("pre",[e._v(e._s(t.row.ecs_id?t.row.ecs_id:""))])]}}])}),a("el-table-column",{attrs:{prop:"dev_id",label:"dev_id"}}),a("el-table-column",{attrs:{prop:"dev_name",label:"dev_name"}}),a("el-table-column",{attrs:{prop:"cluster_name",label:"集群名称"}}),a("el-table-column",{attrs:{prop:"pool_name",label:"存储池名称","min-width":"100px"}})],1),a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],i=a("1da1"),s=a("5530"),c=a("d4ec"),o=a("bee2"),l=a("262e"),u=a("2caf"),p=(a("96cf"),a("ac1f"),a("841c"),a("9ab4")),d=a("1b40"),b=a("c811"),_=a("f33c"),h=function(e){Object(l["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.disk_record=[],e.current=1,e.size=20,e.total=0,e.req_data={},e.search_dom={disk_id:{placeholder:"请输入云盘ID"},ecs_id:{placeholder:"请输入实例ID"},customer_info:{placeholder:"请输入客户ID/名称"}},e}return Object(o["a"])(a,[{key:"created",value:function(){this.search()}},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.req_data=Object(s["a"])({},e),this.getRecordList()}},{key:"handleSizeChange",value:function(e){this.size=e,this.getRecordList()}},{key:"handleCurrentChange",value:function(e){this.current=e,this.getRecordList()}},{key:"getRecordList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.req_data,e.next=3,_["a"].iops_mbps_record({az_id:this.$store.state.az_id,customer_info:t.customer_info||"",disk_id:t.disk_id||"",ecs_id:t.ecs_id||"",page_index:this.current,page_size:this.size});case 3:a=e.sent,"Success"===a.code&&(this.disk_record=a.data.result||[],this.total=a.data.page_info.count||0);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(d["e"]);h=Object(p["a"])([Object(d["a"])({components:{ActionBlock:b["a"]}})],h);var f=h,m=f,v=a("2877"),y=Object(v["a"])(m,n,r,!1,null,"dcb9eae0",null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-44777d51.1750128822803.js.map