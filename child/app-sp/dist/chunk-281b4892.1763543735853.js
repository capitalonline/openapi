(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-281b4892"],{"039b":function(t,e,a){"use strict";var r=a("81a9"),i=a("bff7");e["a"]={get_snapshot_list(t){return Object(r["a"])(Object(i["b"])("GET","/snapshot/snapshot_list/",t))},get_snapshot_chains_list(t){return Object(r["a"])(Object(i["b"])("GET","/snapshot/snapshot_chains_list/",t))},chains_detail(t){return Object(r["a"])(Object(i["b"])("GET","/snapshot/snapshot_chains_detail/",t))},record(t){return Object(r["a"])(Object(i["b"])("GET","/snapshot/history_record/",t))},get_monitor_id(t){return Object(r["a"])(Object(i["b"])("GET","/snapshot/snapshot_disk_ids/",t))},get_snapshot_info(t){return Object(r["a"])(Object(i["i"])("POST","/snapshot/snapshot_use_monitor",t))}}},1477:function(t,e,a){"use strict";var r=a("81a9"),i=a("bff7");e["a"]={get_host_list(t){return Object(r["a"])(Object(i["d"])("POST","/host/get_host_list/",t))},get_room_list(t){return Object(r["a"])(Object(i["d"])("GET","/host/machine_room_list/",t))},get_status_list(t){return Object(r["a"])(Object(i["d"])("GET","/host/host_status_list/",t))},external_management(t){return Object(r["a"])(Object(i["d"])("GET","/host/external_management/",t))},migrate(t){return Object(r["a"])(Object(i["d"])("POST","/host/migration_operation/",t))},disperse(t){return Object(r["a"])(Object(i["d"])("POST","/host/disperse_operation/",t))},record(t){return Object(r["a"])(Object(i["d"])("POST","/host/host_operation_record/",t))},recommended_host(t){return Object(r["a"])(Object(i["d"])("POST","/host/recommended_host/",t))},host_maintenance(t){return Object(r["a"])(Object(i["d"])("POST","/host/host_maintenance/",t))},finish_maintenance(t){return Object(r["a"])(Object(i["d"])("POST","/host/host_finish_maintenance/",t))},shelves(t){return Object(r["a"])(Object(i["d"])("POST","/host/host_off_shelves/",t))},get_detail_overview(t){return Object(r["a"])(Object(i["d"])("GET","/host/host_main_details/",t))},get_detail_storage(t){return Object(r["a"])(Object(i["d"])("GET","/host/host_disk/",t))},down(t){return Object(r["a"])(Object(i["d"])("GET","/host/host_list_download/",t))},host_operate(t){return Object(r["a"])(Object(i["d"])("POST","/host/operate/",t))},host_import(t){return Object(r["a"])(Object(i["d"])("POST","/host/import/",t))},get_host_attribution(t){return Object(r["a"])(Object(i["d"])("GET","/host/get_host_attribution/",t))},set_host_attribution(t){return Object(r["a"])(Object(i["d"])("POST","/host/set_host_attribution/",t))},get_host_type(t){return Object(r["a"])(Object(i["d"])("GET","/host/get_host_config/",t))},update_attribute(t){return Object(r["a"])(Object(i["d"])("POST","/host/set_host_config/",t))},getCustomerList(t){return Object(r["a"])(Object(i["d"])("POST","/host/get_customer_list/",t))},getFamilyList(t){return Object(r["a"])(Object(i["d"])("POST","/host/get_family_list/",t))},finish_validate(t){return Object(r["a"])(Object(i["d"])("POST","/host/verification_finish/",t))},get_host_recycle_department(t){return Object(r["a"])(Object(i["d"])("GET","/host/get_host_recycle_department/",t))},get_host_list_field(t){return Object(r["a"])(Object(i["d"])("GET","/host/get_host_list_field/",t))},get_task_list(t){return Object(r["a"])(Object(i["d"])("GET","/host/business_test_task/",t))},create_test_task(t){return Object(r["a"])(Object(i["d"])("POST","/host/create_test_task/",t))},get_host_filter_item(t){return Object(r["a"])(Object(i["d"])("POST","/host/get_host_filter_item/",t))},set_remark(t){return Object(r["a"])(Object(i["d"])("POST","/host/set_host_remark/",t))},set_flag(t){return Object(r["a"])(Object(i["d"])("POST","/host/set_host_tag/",t))},update_ecs_info(t){return Object(r["a"])(Object(i["d"])("POST","/ecs/update_ecs_info/",t))},crash_clear(t){return Object(r["a"])(Object(i["b"])("POST","/host/crash_clear/",t))},crash_recover(t){return Object(r["a"])(Object(i["b"])("POST","/host/crash_recover/",t))},set_lock(t){return Object(r["a"])(Object(i["d"])("POST","/host/host_lock/",t))},set_unlock(t){return Object(r["a"])(Object(i["d"])("POST","/host/host_unlock/",t))},set_maintenance(t){return Object(r["a"])(Object(i["d"])("POST","/host/host_maintenance/",t))},get_maintenance_record(t){return Object(r["a"])(Object(i["d"])("GET","/host/host_maintenance_record/",t))},get_lock_record(t){return Object(r["a"])(Object(i["d"])("GET","/host/host_lock_record/",t))},recover_storage_error(t){return Object(r["a"])(Object(i["d"])("POST","/host/recover_storage_error/",t))},agent_update(t){return Object(r["a"])(Object(i["d"])("POST","/host/handle_host_agent_update/",t))},agent_rollback(t){return Object(r["a"])(Object(i["d"])("POST","/host/handle_host_agent_rollback/",t))},set_prepare_host(t){return Object(r["a"])(Object(i["d"])("POST","/host/set_prepare_host/",t))},get_ovs_version(t){return Object(r["a"])(Object(i["d"])("GET","/host/ovs_version_list/",t))},update_host_power_status(t){return Object(r["a"])(Object(i["d"])("POST","/host/update_host_power_status/",t))},update_ecs_status(t){return Object(r["a"])(Object(i["d"])("POST","/host/update_host_ecs_status/",t))}}},"268f":function(t,e,a){"use strict";var r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("el-dialog",{attrs:{title:"操作记录",visible:t.visible,width:"60%","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e},close:t.back}},[e("div",[e("el-dialog",{attrs:{title:"响应信息",visible:t.res_visible,width:"60%","destroy-on-close":!0,"append-to-body":"","custom-class":"response-data"},on:{"update:visible":function(e){t.res_visible=e},close:t.clost_res}},[e("div",[t._v(t._s(t.response))])])],1),e("div",[e("action-block",{attrs:{search_option:["physical","message"].includes(t.type)?{...t.search}:t.search},on:{"fn-search":t.fn_search}}),["physical","message"].includes(t.type)?e("div",{staticClass:"icon m-bottom10"},[e("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[e("el-button",{attrs:{type:"text"},on:{click:t.getOperateRecordList}},[e("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1):t._e(),e("el-table",{staticClass:"record-table",attrs:{data:t.record_list,border:""}},[e("el-table-column",{attrs:{prop:"oper_time",label:"操作时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.oper_time?t.moment(a.row.oper_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),e("el-table-column",{attrs:{prop:"oper_type_display",label:"操作内容"}}),e("el-table-column",{attrs:{prop:"status_display",label:"状态"}}),["message","physical"].includes(t.type)?e("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.response?e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.view(a.row.response)}}},[t._v("查看")]):e("span",[t._v("-")])]}}])}):e("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.result?e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.view(a.row.result)}}},[t._v("查看")]):e("span",[t._v("-")])]}}],null,!1,79404134)}),e("el-table-column",{attrs:{prop:"finish_time",label:"完成时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.finish_time?t.moment(a.row.finish_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),e("el-table-column",{attrs:{prop:"oper_user",label:"nas"===t.type?"操作用户":"用户名"}}),["physical","message"].includes(t.type)?t._e():e("el-table-column",{attrs:{prop:"flag_display",label:"操作标识"}})],1),e("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[20,50,100],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.back}},[t._v("返回")])],1)],1)])],1)},i=[],s=a("9ab4"),n=a("1b40"),o=a("c811"),c=a("d772"),l=a("1477"),h=a("e4d0"),d=a("039b"),p=a("fc43"),u=a("c1df"),_=a.n(u),b=a("8ce4"),g=a("3673");let f=class extends n["e"]{constructor(){super(...arguments),this.state_list=[{type:"",label:"全部"},{type:"doing",label:"执行中"},{type:"success",label:"成功"},{type:"failed",label:"失败"}],this.search={state:{list:this.state_list,placeholder:"请选择状态"},content:{placeholder:"请输入操作内容"}},this.record_list=[],this.current=1,this.size=20,this.total=0,this.search_data={},this.moment=_.a,this.response="",this.res_visible=!1}created(){this.fn_search()}fn_search(t={}){this.current=1,this.search_data=t,this.getOperateRecordList()}async getOperateRecordList(){let t;const{search_data:e}=this;let a="physical"!==this.type?{task_type:e.content,cloud_id:this.record_id}:{content:e.content,cloud_id:this.record_id,cloud_type:"host"},r={status:e.state||"",page_size:this.size,page_index:this.current,...a};if(t="physical"===this.type?await l["a"].record({...r}):"message"===this.type?await h["a"].get_pub_operate_record({os_id:this.record_id,status:e.state||"",content_type:e.content,page_size:this.size,page_index:this.current}):"snapshot"===this.type?await d["a"].record({cloud_id:this.record_id,cloud_type:"snapshot",status:e.state||"",task_type:e.content,page_size:this.size,page_index:this.current}):"nas"===this.type?await p["a"].get_nas_record({...r}):await c["a"].get_operate_record_list({cloud_type:this.type?this.type:"ecs",...r}),"Success"===t.code){var i,s;if(["physical","message"].includes(this.type)){let e=["create_time","content","status_name","response","update_time","op_user"],a=["oper_time","oper_type_display","status_display","response","finish_time","oper_user"];this.record_list=Object(b["b"])(t.data.operation_list,a,e)}else{var n;this.record_list=(null===(n=t.data)||void 0===n?void 0:n.history_record)||[]}this.total=(null===(i=t.data)||void 0===i||null===(s=i.page_info)||void 0===s?void 0:s.count)||0}}handleSizeChange(t){this.size=t,this.getOperateRecordList()}handleCurrentChange(t){this.current=t,this.getOperateRecordList()}view(t){this.response=t,this.res_visible=!0}clost_res(){this.res_visible=!1,this.response=""}back(){}};Object(s["a"])([Object(n["c"])(Boolean)],f.prototype,"visible",void 0),Object(s["a"])([Object(n["c"])(String)],f.prototype,"record_id",void 0),Object(s["a"])([Object(n["c"])(String)],f.prototype,"type",void 0),Object(s["a"])([Object(n["b"])("close")],f.prototype,"back",null),f=Object(s["a"])([Object(n["a"])({components:{ActionBlock:o["a"],SvgIcon:g["a"]}})],f);var m=f,v=m,O=(a("f813"),a("2877")),y=Object(O["a"])(v,r,i,!1,null,null,null);e["a"]=y.exports},"301e":function(t,e,a){},"8ce4":function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"d",(function(){return o}));a("14d9"),a("e9f5"),a("ab43");function r(t,e,a,r,i){let s=[];return t.map(t=>{s.push({[r]:t[e],[i]:t[a]})}),s}function i(t,e,a,r={}){let i=[];return t.map(t=>{let s={};e.map((e,r)=>{s[e]=t[a[r]]}),i.push({...s,...r})}),i}function s(t,e=!1){let a={};for(let r in t){const{billing_scheme_id:i,billing_cycle_id:s,billing_items:n,gic_goods_id:o}=t[r];let c={};for(let t in n){let a={attr_id:n[t].attr_id,name:n[t].name},r={id:n[t].id,key:t};c[t]=e?{...a,...r}:r}a[r]={billing_scheme_id:i,billing_cycle_id:s,billing_items:c,gic_goods_id:e?o:void 0}}return a}function n(t,e){return t.map(t=>t[e])}function o(t){let e="";for(let a in t)t[a]&&(e+=`${a}=${t[a]}&`);return""===e?"":"?"+e.slice(0,e.length-1)}},"90f5":function(t,e,a){"use strict";a("b2de")},"91fb":function(t,e,a){"use strict";a("9482")},"93a6":function(t,e,a){"use strict";var r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[Object.keys(t.data).length>0?e("div",{staticClass:"chart",attrs:{id:t.chart_id}}):e("el-empty",{attrs:{description:"暂无数据"}})],1)},i=[],s=(a("14d9"),a("e9f5"),a("ab43"),a("9ab4")),n=a("1b40"),o=a("22b4"),c=a("1be7"),l=a("c1df"),h=a.n(l),d=a("6d8b"),p=a("9d57"),u=a("fdde"),_=a("7fae"),b=a("4f85"),g=a("1830"),f=function(t){function e(){var a=null!==t&&t.apply(this,arguments)||this;return a.type=e.type,a}return Object(_["a"])(e,t),e.prototype.getInitialData=function(t,e){return Object(g["a"])(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,e,a){var r=this.coordinateSystem;if(r&&r.clampData){var i=r.clampData(t),s=r.dataToPoint(i);if(a)Object(d["k"])(r.getAxes(),(function(t,a){if("category"===t.type&&null!=e){var r=t.getTicksCoords(),n=t.getTickModel().get("alignWithLabel"),o=i[a],c="x1"===e[a]||"y1"===e[a];if(c&&!n&&(o+=1),r.length<2)return;if(2===r.length)return void(s[a]=t.toGlobalCoord(t.getExtent()[c?1:0]));for(var l=void 0,h=void 0,d=1,p=0;p<r.length;p++){var u=r[p].coord,_=p===r.length-1?r[p-1].tickValue+d:r[p].tickValue;if(_===o){h=u;break}if(_<o)l=u;else if(null!=l&&_>o){h=(u+l)/2;break}1===p&&(d=_-r[0].tickValue)}null==h&&(l?l&&(h=r[r.length-1].coord):h=r[0].coord),s[a]=t.toGlobalCoord(h)}}));else{var n=this.getData(),o=n.getLayout("offset"),c=n.getLayout("size"),l=r.getBaseAxis().isHorizontal()?0:1;s[l]+=o+c/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(b["a"]);b["a"].registerClass(f);var m=f,v=a("8918"),O=function(t){function e(){var a=null!==t&&t.apply(this,arguments)||this;return a.type=e.type,a}return Object(_["a"])(e,t),e.prototype.getInitialData=function(){return Object(g["a"])(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},e.prototype.brushSelector=function(t,e,a){return a.rect(e.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Object(v["d"])(m.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(m),y=O,j=a("cbe5"),S=a("2dc5"),w=a("2306"),k=a("deca"),x=a("c7a2"),I=a("4aa2"),T=a("861c"),A=a("7d6c"),C=a("7837"),P=a("88b3"),D=a("b0af"),L=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}return t}(),z=function(t){function e(e){var a=t.call(this,e)||this;return a.type="sausage",a}return Object(_["a"])(e,t),e.prototype.getDefaultShape=function(){return new L},e.prototype.buildPath=function(t,e){var a=e.cx,r=e.cy,i=Math.max(e.r0||0,0),s=Math.max(e.r,0),n=.5*(s-i),o=i+n,c=e.startAngle,l=e.endAngle,h=e.clockwise,d=2*Math.PI,p=h?l-c<d:c-l<d;p||(c=l-(h?d:-d));var u=Math.cos(c),_=Math.sin(c),b=Math.cos(l),g=Math.sin(l);p?(t.moveTo(u*i+a,_*i+r),t.arc(u*o+a,_*o+r,n,-Math.PI+c,c,!h)):t.moveTo(u*s+a,_*s+r),t.arc(a,r,s,c,l,!h),t.arc(b*o+a,g*o+r,n,l-2*Math.PI,l-Math.PI,!h),0!==i&&t.arc(a,r,i,l,c,h)},e}(j["b"]),M=z,E=a("e887"),G=a("5426"),R=a("c775"),F=a("e86a");function V(t,e){e=e||{};var a=e.isRoundCap;return function(e,r,i){var s=r.position;if(!s||s instanceof Array)return Object(F["c"])(e,r,i);var n=t(s),o=null!=r.distance?r.distance:5,c=this.shape,l=c.cx,h=c.cy,d=c.r,p=c.r0,u=(d+p)/2,_=c.startAngle,b=c.endAngle,g=(_+b)/2,f=a?Math.abs(d-p)/2:0,m=Math.cos,v=Math.sin,O=l+d*m(_),y=h+d*v(_),j="left",S="top";switch(n){case"startArc":O=l+(p-o)*m(g),y=h+(p-o)*v(g),j="center",S="top";break;case"insideStartArc":O=l+(p+o)*m(g),y=h+(p+o)*v(g),j="center",S="bottom";break;case"startAngle":O=l+u*m(_)+B(_,o+f,!1),y=h+u*v(_)+H(_,o+f,!1),j="right",S="middle";break;case"insideStartAngle":O=l+u*m(_)+B(_,-o+f,!1),y=h+u*v(_)+H(_,-o+f,!1),j="left",S="middle";break;case"middle":O=l+u*m(g),y=h+u*v(g),j="center",S="middle";break;case"endArc":O=l+(d+o)*m(g),y=h+(d+o)*v(g),j="center",S="bottom";break;case"insideEndArc":O=l+(d-o)*m(g),y=h+(d-o)*v(g),j="center",S="top";break;case"endAngle":O=l+u*m(b)+B(b,o+f,!0),y=h+u*v(b)+H(b,o+f,!0),j="left",S="middle";break;case"insideEndAngle":O=l+u*m(b)+B(b,-o+f,!0),y=h+u*v(b)+H(b,-o+f,!0),j="right",S="middle";break;default:return Object(F["c"])(e,r,i)}return e=e||{},e.x=O,e.y=y,e.align=j,e.verticalAlign=S,e}}function N(t,e,a,r){if(Object(d["y"])(r))t.setTextConfig({rotation:r});else if(Object(d["s"])(e))t.setTextConfig({rotation:0});else{var i,s=t.shape,n=s.clockwise?s.startAngle:s.endAngle,o=s.clockwise?s.endAngle:s.startAngle,c=(n+o)/2,l=a(e);switch(l){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":i=c;break;case"startAngle":case"insideStartAngle":i=n;break;case"endAngle":case"insideEndAngle":i=o;break;default:return void t.setTextConfig({rotation:0})}var h=1.5*Math.PI-i;"middle"===l&&h>Math.PI/2&&h<1.5*Math.PI&&(h-=Math.PI),t.setTextConfig({rotation:h})}}function B(t,e,a){return e*Math.sin(t)*(a?-1:1)}function H(t,e,a){return e*Math.cos(t)*(a?1:-1)}function Y(t,e,a){var r=t.get("borderRadius");if(null==r)return a?{cornerRadius:0}:null;Object(d["s"])(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Object(d["G"])(r,(function(t){return Object(F["g"])(t,i)}))}}var $=Math.max,W=Math.min;function U(t,e){var a=t.getArea&&t.getArea();if(Object(G["a"])(t,"cartesian2d")){var r=t.getBaseAxis();if("category"!==r.type||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(a.x-=i,a.width+=2*i):(a.y-=i,a.height+=2*i)}}return a}var X=function(t){function e(){var a=t.call(this)||this;return a.type=e.type,a._isFirstFrame=!0,a}return Object(_["a"])(e,t),e.prototype.render=function(t,e,a,r){this._model=t,this._removeOnRenderedListener(a),this._updateDrawMode(t);var i=t.get("coordinateSystem");("cartesian2d"===i||"polar"===i)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,e,a):this._renderNormal(t,e,a,r))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,e){this._progressiveEls=[],this._incrementalRenderLarge(t,e)},e.prototype.eachRendered=function(t){Object(w["traverseElements"])(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t,e,a,r){var i,s=this.group,n=t.getData(),o=this._data,c=t.coordinateSystem,l=c.getBaseAxis();"cartesian2d"===c.type?i=l.isHorizontal():"polar"===c.type&&(i="angle"===l.dim);var h=t.isAnimationEnabled()?t:null,d=J(t,c);d&&this._enableRealtimeSort(d,n,a);var p=t.get("clip",!0)||d,u=U(c,n);s.removeClipPath();var _=t.get("roundCap",!0),b=t.get("showBackground",!0),g=t.getModel("backgroundStyle"),f=g.get("borderRadius")||0,m=[],v=this._backgroundEls,O=r&&r.isInitSort,y=r&&"changeAxisOrder"===r.type;function j(t){var e=rt[c.type](n,t),a=_t(c,i,e);return a.useStyle(g.getItemStyle()),"cartesian2d"===c.type?a.setShape("r",f):a.setShape("cornerRadius",f),m[t]=a,a}n.diff(o).add((function(e){var a=n.getItemModel(e),r=rt[c.type](n,e,a);if(b&&j(e),n.hasValue(e)&&at[c.type](r)){var o=!1;p&&(o=q[c.type](u,r));var g=Z[c.type](t,n,e,r,i,h,l.model,!1,_);d&&(g.forceLabelAnimation=!0),nt(g,n,e,a,r,t,i,"polar"===c.type),O?g.attr({shape:r}):d?K(d,h,g,r,e,i,!1,!1):Object(k["a"])(g,{shape:r},t,e),n.setItemGraphicEl(e,g),s.add(g),g.ignore=o}})).update((function(e,a){var r=n.getItemModel(e),S=rt[c.type](n,e,r);if(b){var w=void 0;0===v.length?w=j(a):(w=v[a],w.useStyle(g.getItemStyle()),"cartesian2d"===c.type?w.setShape("r",f):w.setShape("cornerRadius",f),m[e]=w);var x=rt[c.type](n,e),I=ut(i,x,c);Object(k["f"])(w,{shape:I},h,e)}var T=o.getItemGraphicEl(a);if(n.hasValue(e)&&at[c.type](S)){var A=!1;if(p&&(A=q[c.type](u,S),A&&s.remove(T)),T?Object(k["e"])(T):T=Z[c.type](t,n,e,S,i,h,l.model,!!T,_),d&&(T.forceLabelAnimation=!0),y){var P=T.getTextContent();if(P){var D=Object(C["d"])(P);null!=D.prevValue&&(D.prevValue=D.value)}}else nt(T,n,e,r,S,t,i,"polar"===c.type);O?T.attr({shape:S}):d?K(d,h,T,S,e,i,!0,y):Object(k["f"])(T,{shape:S},t,e,null),n.setItemGraphicEl(e,T),T.ignore=A,s.add(T)}else s.remove(T)})).remove((function(e){var a=o.getItemGraphicEl(e);a&&Object(k["d"])(a,t,e)})).execute();var w=this._backgroundGroup||(this._backgroundGroup=new S["a"]);w.removeAll();for(var x=0;x<m.length;++x)w.add(m[x]);s.add(w),this._backgroundEls=m,this._data=n},e.prototype._renderLarge=function(t,e,a){this._clear(),ht(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,e){this._removeBackground(),ht(e,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var e=t.get("clip",!0)&&Object(D["a"])(t.coordinateSystem,!1,t),a=this.group;e?a.setClipPath(e):a.removeClipPath()},e.prototype._enableRealtimeSort=function(t,e,a){var r=this;if(e.count()){var i=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,t,a),this._isFirstFrame=!1;else{var s=function(t){var a=e.getItemGraphicEl(t),r=a&&a.shape;return r&&Math.abs(i.isHorizontal()?r.height:r.width)||0};this._onRendered=function(){r._updateSortWithinSameData(e,s,i,a)},a.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,e,a){var r=[];return t.each(t.mapDimension(e.dim),(function(t,e){var i=a(e);i=null==i?NaN:i,r.push({dataIndex:e,mappedValue:i,ordinalNumber:t})})),r.sort((function(t,e){return e.mappedValue-t.mappedValue})),{ordinalNumbers:Object(d["G"])(r,(function(t){return t.ordinalNumber}))}},e.prototype._isOrderChangedWithinSameData=function(t,e,a){for(var r=a.scale,i=t.mapDimension(a.dim),s=Number.MAX_VALUE,n=0,o=r.getOrdinalMeta().categories.length;n<o;++n){var c=t.rawIndexOf(i,r.getRawOrdinalNumber(n)),l=c<0?Number.MIN_VALUE:e(t.indexOfRawIndex(c));if(l>s)return!0;s=l}return!1},e.prototype._isOrderDifferentInView=function(t,e){for(var a=e.scale,r=a.getExtent(),i=Math.max(0,r[0]),s=Math.min(r[1],a.getOrdinalMeta().categories.length-1);i<=s;++i)if(t.ordinalNumbers[i]!==a.getRawOrdinalNumber(i))return!0},e.prototype._updateSortWithinSameData=function(t,e,a,r){if(this._isOrderChangedWithinSameData(t,e,a)){var i=this._dataSort(t,a,e);this._isOrderDifferentInView(i,a)&&(this._removeOnRenderedListener(r),r.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:i}))}},e.prototype._dispatchInitSort=function(t,e,a){var r=e.baseAxis,i=this._dataSort(t,r,(function(a){return t.get(t.mapDimension(e.otherAxis.dim),a)}));a.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",isInitSort:!0,axisId:r.index,sortInfo:i})},e.prototype.remove=function(t,e){this._clear(this._model),this._removeOnRenderedListener(e)},e.prototype.dispose=function(t,e){this._removeOnRenderedListener(e)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var e=this.group,a=this._data;t&&t.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl((function(e){Object(k["d"])(e,t,Object(T["a"])(e).dataIndex)}))):e.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(E["a"]),q={cartesian2d:function(t,e){var a=e.width<0?-1:1,r=e.height<0?-1:1;a<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=t.x+t.width,s=t.y+t.height,n=$(e.x,t.x),o=W(e.x+e.width,i),c=$(e.y,t.y),l=W(e.y+e.height,s),h=o<n,d=l<c;return e.x=h&&n>i?o:n,e.y=d&&c>s?l:c,e.width=h?0:o-n,e.height=d?0:l-c,a<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),h||d},polar:function(t,e){var a=e.r0<=e.r?1:-1;if(a<0){var r=e.r;e.r=e.r0,e.r0=r}var i=W(e.r,t.r),s=$(e.r0,t.r0);e.r=i,e.r0=s;var n=i-s<0;if(a<0){r=e.r;e.r=e.r0,e.r0=r}return n}},Z={cartesian2d:function(t,e,a,r,i,s,n,o,c){var l=new x["a"]({shape:Object(d["m"])({},r),z2:1});if(l.__dataIndex=a,l.name="item",s){var h=l.shape,p=i?"height":"width";h[p]=0}return l},polar:function(t,e,a,r,i,s,n,o,c){var l=!i&&c?M:I["a"],h=new l({shape:r,z2:1});h.name="item";var d=st(i);if(h.calculateTextPosition=V(d,{isRoundCap:l===M}),s){var p=h.shape,u=i?"r":"endAngle",_={};p[u]=i?r.r0:r.startAngle,_[u]=r[u],(o?k["f"]:k["a"])(h,{shape:_},s)}return h}};function J(t,e){var a=t.get("realtimeSort",!0),r=e.getBaseAxis();if(a&&"category"===r.type&&"cartesian2d"===e.type)return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function K(t,e,a,r,i,s,n,o){var c,l;s?(l={x:r.x,width:r.width},c={y:r.y,height:r.height}):(l={y:r.y,height:r.height},c={x:r.x,width:r.width}),o||(n?k["f"]:k["a"])(a,{shape:c},e,i,null);var h=e?t.baseAxis.model:null;(n?k["f"]:k["a"])(a,{shape:l},h,i)}function Q(t,e){for(var a=0;a<e.length;a++)if(!isFinite(t[e[a]]))return!0;return!1}var tt=["x","y","width","height"],et=["cx","cy","r","startAngle","endAngle"],at={cartesian2d:function(t){return!Q(t,tt)},polar:function(t){return!Q(t,et)}},rt={cartesian2d:function(t,e,a){var r=t.getItemLayout(e),i=a?ot(a,r):0,s=r.width>0?1:-1,n=r.height>0?1:-1;return{x:r.x+s*i/2,y:r.y+n*i/2,width:r.width-s*i,height:r.height-n*i}},polar:function(t,e,a){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function it(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}function st(t){return function(t){var e=t?"Arc":"Angle";return function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}}(t)}function nt(t,e,a,r,i,s,n,o){var c=e.getItemVisual(a,"style");if(o){if(!s.get("roundCap")){var l=t.shape,h=Y(r.getModel("itemStyle"),l,!0);Object(d["m"])(l,h),t.setShape(l)}}else{var p=r.get(["itemStyle","borderRadius"])||0;t.setShape("r",p)}t.useStyle(c);var u=r.getShallow("cursor");u&&t.attr("cursor",u);var _=o?n?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":n?i.height>=0?"bottom":"top":i.width>=0?"right":"left",b=Object(C["c"])(r);Object(C["e"])(t,b,{labelFetcher:s,labelDataIndex:a,defaultText:Object(R["b"])(s.getData(),a),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:_});var g=t.getTextContent();if(o&&g){var f=r.get(["label","position"]);t.textConfig.inside="middle"===f||null,N(t,"outside"===f?_:f,st(n),r.get(["label","rotate"]))}Object(C["f"])(g,b,s.getRawValue(a),(function(t){return Object(R["a"])(e,t)}));var m=r.getModel(["emphasis"]);Object(A["E"])(t,m.get("focus"),m.get("blurScope"),m.get("disabled")),Object(A["D"])(t,r),it(i)&&(t.style.fill="none",t.style.stroke="none",Object(d["k"])(t.states,(function(t){t.style&&(t.style.fill=t.style.stroke="none")})))}function ot(t,e){var a=t.get(["itemStyle","borderColor"]);if(!a||"none"===a)return 0;var r=t.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),s=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,s)}var ct=function(){function t(){}return t}(),lt=function(t){function e(e){var a=t.call(this,e)||this;return a.type="largeBar",a}return Object(_["a"])(e,t),e.prototype.getDefaultShape=function(){return new ct},e.prototype.buildPath=function(t,e){for(var a=e.points,r=this.baseDimIdx,i=1-this.baseDimIdx,s=[],n=[],o=this.barWidth,c=0;c<a.length;c+=3)n[r]=o,n[i]=a[c+2],s[r]=a[c+r],s[i]=a[c+i],t.rect(s[0],s[1],n[0],n[1])},e}(j["b"]);function ht(t,e,a,r){var i=t.getData(),s=i.getLayout("valueAxisHorizontal")?1:0,n=i.getLayout("largeDataIndices"),o=i.getLayout("size"),c=t.getModel("backgroundStyle"),l=i.getLayout("largeBackgroundPoints");if(l){var h=new lt({shape:{points:l},incremental:!!r,silent:!0,z2:0});h.baseDimIdx=s,h.largeDataIndices=n,h.barWidth=o,h.useStyle(c.getItemStyle()),e.add(h),a&&a.push(h)}var d=new lt({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=s,d.largeDataIndices=n,d.barWidth=o,e.add(d),d.useStyle(i.getVisual("style")),d.style.stroke=null,Object(T["a"])(d).seriesIndex=t.seriesIndex,t.get("silent")||(d.on("mousedown",dt),d.on("mousemove",dt)),a&&a.push(d)}var dt=Object(P["c"])((function(t){var e=this,a=pt(e,t.offsetX,t.offsetY);Object(T["a"])(e).dataIndex=a>=0?a:null}),30,!1);function pt(t,e,a){for(var r=t.baseDimIdx,i=1-r,s=t.shape.points,n=t.largeDataIndices,o=[],c=[],l=t.barWidth,h=0,d=s.length/3;h<d;h++){var p=3*h;if(c[r]=l,c[i]=s[p+2],o[r]=s[p+r],o[i]=s[p+i],c[i]<0&&(o[i]+=c[i],c[i]=-c[i]),e>=o[0]&&e<=o[0]+c[0]&&a>=o[1]&&a<=o[1]+c[1])return n[h]}return-1}function ut(t,e,a){if(Object(G["a"])(a,"cartesian2d")){var r=e,i=a.getArea();return{x:t?r.x:i.x,y:t?i.y:r.y,width:t?r.width:i.width,height:t?i.height:r.height}}i=a.getArea();var s=e;return{cx:i.cx,cy:i.cy,r0:t?i.r0:s.r0,r:t?i.r:s.r,startAngle:t?s.startAngle:0,endAngle:t?s.endAngle:2*Math.PI}}function _t(t,e,a){var r="polar"===t.type?I["a"]:x["a"];return new r({shape:ut(e,a,t),silent:!0,z2:0})}var bt=X;function gt(t){t.registerChartView(bt),t.registerSeriesModel(y),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,d["h"](p["b"],"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Object(p["a"])("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Object(u["a"])("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(t,e){var a=t.componentType||"series";e.eachComponent({mainType:a,query:t},(function(e){t.sortInfo&&e.axis.setCategorySortInfo(t.sortInfo)}))}))}var ft=a("3620"),mt=a("9394"),vt=a("2da7"),Ot=a("4b2a"),yt=a("6cb7"),jt=a("b12f"),St=a("07fd"),wt=a("f72b"),kt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return Object(_["a"])(e,t),e.prototype.init=function(e,a,r){t.prototype.init.call(this,e,a,r),this._sourceManager=new wt["a"](this),Object(wt["b"])(this)},e.prototype.mergeOption=function(e,a){t.prototype.mergeOption.call(this,e,a),Object(wt["b"])(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:St["a"]},e}(yt["a"]),xt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return Object(_["a"])(e,t),e.type="dataset",e}(jt["a"]);function It(t){t.registerComponentModel(kt),t.registerComponentView(xt)}var Tt=a("104d"),At=a("edae"),Ct=a("b7d9"),Pt={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Dt=function(){function t(t){var e=this._condVal=Object(d["B"])(t)?new RegExp(t):Object(d["A"])(t)?t:null;if(null==e){var a="";0,Object(At["c"])(a)}}return t.prototype.evaluate=function(t){var e=typeof t;return Object(d["B"])(e)?this._condVal.test(t):!!Object(d["y"])(e)&&this._condVal.test(t+"")},t}(),Lt=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),zt=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},t}(),Mt=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},t}(),Et=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),Gt=function(){function t(){}return t.prototype.evaluate=function(){for(var t=!!this.valueParser,e=this.getValue,a=e(this.valueGetterParam),r=t?this.valueParser(a):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(t?r:a))return!1;return!0},t}();function Rt(t,e){if(!0===t||!1===t){var a=new Lt;return a.value=t,a}var r="";return Bt(t)||Object(At["c"])(r),t.and?Ft("and",t,e):t.or?Ft("or",t,e):t.not?Vt(t,e):Nt(t,e)}function Ft(t,e,a){var r=e[t],i="";Object(d["s"])(r)||Object(At["c"])(i),r.length||Object(At["c"])(i);var s="and"===t?new zt:new Mt;return s.children=Object(d["G"])(r,(function(t){return Rt(t,a)})),s.children.length||Object(At["c"])(i),s}function Vt(t,e){var a=t.not,r="";Bt(a)||Object(At["c"])(r);var i=new Et;return i.child=Rt(a,e),i.child||Object(At["c"])(r),i}function Nt(t,e){for(var a="",r=e.prepareGetValue(t),i=[],s=Object(d["E"])(t),n=t.parser,o=n?Object(Ct["c"])(n):null,c=0;c<s.length;c++){var l=s[c];if("parser"!==l&&!e.valueGetterAttrMap.get(l)){var h=Object(d["p"])(Pt,l)?Pt[l]:l,p=t[l],u=o?o(p):p,_=Object(Ct["b"])(h,u)||"reg"===h&&new Dt(u);_||Object(At["c"])(a),i.push(_)}}i.length||Object(At["c"])(a);var b=new Gt;return b.valueGetterParam=r,b.valueParser=o,b.getValue=e.getValue,b.subCondList=i,b}function Bt(t){return Object(d["z"])(t)&&!Object(d["t"])(t)}var Ht=function(){function t(t,e){this._cond=Rt(t,e)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();function Yt(t,e){return new Ht(t,e)}var $t={type:"echarts:filter",transform:function(t){for(var e,a=t.upstream,r=Yt(t.config,{valueGetterAttrMap:Object(d["f"])({dimension:!0}),prepareGetValue:function(t){var e="",r=t.dimension;Object(d["p"])(t,"dimension")||Object(At["c"])(e);var i=a.getDimensionInfo(r);return i||Object(At["c"])(e),{dimIdx:i.index}},getValue:function(t){return a.retrieveValueFromItem(e,t.dimIdx)}}),i=[],s=0,n=a.count();s<n;s++)e=a.getRawDataItem(s),r.evaluate()&&i.push(e);return{data:i}}},Wt=a("e0d3");var Ut={type:"echarts:sort",transform:function(t){var e=t.upstream,a=t.config,r="",i=Object(Wt["o"])(a);i.length||Object(At["c"])(r);var s=[];Object(d["k"])(i,(function(t){var a=t.dimension,i=t.order,n=t.parser,o=t.incomparable;if(null==a&&Object(At["c"])(r),"asc"!==i&&"desc"!==i&&Object(At["c"])(r),o&&"min"!==o&&"max"!==o){var c="";0,Object(At["c"])(c)}if("asc"!==i&&"desc"!==i){var l="";0,Object(At["c"])(l)}var h=e.getDimensionInfo(a);h||Object(At["c"])(r);var d=n?Object(Ct["c"])(n):null;n&&!d&&Object(At["c"])(r),s.push({dimIdx:h.index,parser:d,comparator:new Ct["a"](i,o)})}));var n=e.sourceFormat;n!==St["c"]&&n!==St["e"]&&Object(At["c"])(r);for(var o=[],c=0,l=e.count();c<l;c++)o.push(e.getRawDataItem(c));return o.sort((function(t,a){for(var r=0;r<s.length;r++){var i=s[r],n=e.retrieveValueFromItem(t,i.dimIdx),o=e.retrieveValueFromItem(a,i.dimIdx);i.parser&&(n=i.parser(n),o=i.parser(o));var c=i.comparator.evaluate(n,o);if(0!==c)return c}return 0})),{data:o}}};function Xt(t){t.registerTransform($t),t.registerTransform(Ut)}var qt=a("f95e");o["a"]([mt["a"],vt["a"],Ot["a"],It,Tt["a"],Xt,gt,qt["a"],ft["a"]]);let Zt=class extends n["e"]{constructor(){super(...arguments),this.option={title:{text:this.title},xAxis:{},yAxis:{type:"value"},grid:{bottom:90},tooltip:{},series:[]}}mounted(){this.setOptions(),window.addEventListener("resize",()=>{this.initChart&&this.initChart.resize()})}watch_data(t){this.setOptions()}async setOptions(){if(!this.data[this.chart_id])return;let t=this.data[this.chart_id].time.map(t=>h.a.utc(t).local().format("MM/DD HH:mm:ss").replace(" ","\n"));this.option={title:{text:this.title},xAxis:{type:"category",data:t,boundaryGap:!1},dataZoom:[{type:"inside",start:50,end:100,filterMode:"filter"},{type:"slider",start:50,end:100,filterMode:"filter"}],grid:{bottom:90},yAxis:{type:"value"},series:[],tooltip:this.data[this.chart_id].tooltip?this.data[this.chart_id].tooltip:{trigger:"axis"}},this.data[this.chart_id].series.map(t=>{this.option.series.push({name:t.name,data:t.data,type:"line",smooth:!0})}),this.$nextTick(()=>{document.getElementById(this.chart_id)&&(this.initChart=c["b"](document.getElementById(this.chart_id)),this.option&&this.initChart&&this.initChart.setOption(this.option))})}};Object(s["a"])([Object(n["c"])(String)],Zt.prototype,"chart_id",void 0),Object(s["a"])([Object(n["c"])({default:()=>{}})],Zt.prototype,"data",void 0),Object(s["a"])([Object(n["c"])(String)],Zt.prototype,"title",void 0),Object(s["a"])([Object(n["f"])("data",{immediate:!0,deep:!0})],Zt.prototype,"watch_data",null),Zt=Object(s["a"])([Object(n["a"])({})],Zt);var Jt=Zt,Kt=Jt,Qt=(a("90f5"),a("2877")),te=Object(Qt["a"])(Kt,r,i,!1,null,"ba4c612a",null);e["a"]=te.exports},9409:function(t,e,a){},9482:function(t,e,a){},b2de:function(t,e,a){},d2d2:function(t,e,a){"use strict";a("301e")},d772:function(t,e,a){"use strict";var r=a("81a9"),i=a("bff7");e["a"]={get_operate_record_list(t){return Object(r["a"])(Object(i["b"])("GET","/ecs/history_record/",t))},get_detail(t){return Object(r["a"])(Object(i["b"])("GET","/ecs/get_ecs_detail/",t))}}},d8ef:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"云盘快照",name:"first"}},["first"===t.activeName?[e("snapshot")]:t._e()],2),e("el-tab-pane",{attrs:{label:"快照链",name:"second"}},["second"===t.activeName?[e("chains")]:t._e()],2),e("el-tab-pane",{attrs:{label:"快照容量",name:"third"}},["third"===t.activeName?[e("monitor")]:t._e()],2)],1)},i=[],s=a("9ab4"),n=a("1b40"),o=a("e137"),c=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("search-bar",{attrs:{search_option:t.search_option,action_icon_option:t.action_btns},on:{"fn-search":t.FnSearch,"fn-icon":t.operateIcon}}),e("el-table",{ref:"chains_table",attrs:{data:t.list}},[t._l(t.column_list,(function(a){return e("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,"max-height":t.tableHeight},scopedSlots:t._u(["snapshot_chains_id"===a.prop?{key:"default",fn:function(a){return[e("div",[e("el-tooltip",{attrs:{content:a.row.snapshot_chains_id,placement:"bottom",effect:"light"}},[e("span",[t._v(t._s(a.row.snapshot_chains_id))])])],1)]}}:"instance_id"===a.prop?{key:"default",fn:function(a){return[a.row.instance_id?[e("div",[e("el-tooltip",{attrs:{placement:"right","popper-class":"tooltip-width",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(a.row.instance_name))]),e("div",{staticClass:"num_message"},[e("pre",[t._v(t._s(a.row.instance_name))])])])],1),e("div",[e("el-tooltip",{attrs:{content:a.row.instance_id,placement:"bottom",effect:"light"}},[e("span",[t._v(t._s(a.row.instance_id))])])],1)]:e("span",[t._v("-")])]}}:"disk_id"===a.prop?{key:"default",fn:function(a){return[e("div",[e("el-tooltip",{attrs:{placement:"right","popper-class":"tooltip-width",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(a.row.disk_name))]),e("div",{staticClass:"num_message"},[e("pre",[t._v(t._s(a.row.disk_name))])])])],1),e("div",[e("el-tooltip",{attrs:{content:a.row.disk_id,placement:"bottom",effect:"light"}},[e("span",[t._v(t._s(a.row.disk_id))])])],1)]}}:"disk_size"===a.prop?{key:"default",fn:function(a){return[e("span",[t._v(t._s("data"===a.row.disk_type?"数据盘":"系统盘")+"/")]),e("span",[t._v(t._s(a.row.disk_size)+"GB")])]}}:"disk_status_cn"===a.prop?{key:"default",fn:function(a){return[e("span",{class:a.row.disk_status},[t._v(t._s(a.row.disk_status_cn))])]}}:"az_name"===a.prop?{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.region_name)+"-"+t._s(a.row.az_name))])]}}:"snapshot_size"===a.prop?{key:"default",fn:function(a){return[e("span",[t._v(t._s(0===Number(a.row.snapshot_size)?"0.00":a.row.snapshot_size)+"GB")])]}}:null],null,!0)})})),e("el-table-column",{attrs:{prop:"operate",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.detail(a.row.snapshot_chains_id)}}},[t._v("详情")])]}}])})],2),e("el-pagination",{attrs:{"current-page":t.pageInfo.page_index,"page-sizes":[20,50,100],"page-size":t.pageInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},l=[],h=(a("14d9"),a("039b")),d=a("c811");let p=class extends n["e"]{constructor(){super(...arguments),this.search_option={type:{placeholder:"请输入",list:[{type:"snapshot_chains_info",label:"快照链名称/ID"},{type:"disk_info",label:"云盘名称/ID"},{type:"instance_info",label:"实例名称/ID"}],type:"composite",width:340}},this.action_btns=["refresh"],this.tableHeight=200,this.diskObj={system:"系统盘",data:"数据盘"},this.column_list=[{prop:"customer_id",label:"客户ID"},{prop:"customer_name",label:"客户名称"},{prop:"snapshot_chains_id",label:"快照链ID"},{prop:"instance_id",label:"实例名称/ID"},{prop:"disk_id",label:"云盘名称/ID"},{prop:"disk_status_cn",label:"云盘状态"},{prop:"disk_size",label:"属性/容量"},{prop:"az_name",label:"可用区"},{prop:"snapshot_number",label:"快照数量"},{prop:"snapshot_size",label:"快照容量"},{prop:"billing_method_display",label:"计费方式"}],this.list=[],this.pageInfo={page_size:20,page_index:1,total:0},this.search_data={},this.timer=null}created(){this.getSnapshotChainsList()}watch_pod(t){t&&this.FnSearch(this.search_data)}FnSearch(t={}){this.FnClearTimer(),this.search_data={...t},this.pageInfo.page_index=1,this.getSnapshotChainsList()}operateIcon(t){this.FnClearTimer(),this.getSnapshotChainsList()}async getSnapshotChainsList(t=!0){t||this.$store.commit("SET_LOADING",!1);let e=await h["a"].get_snapshot_chains_list({pod_id:this.$store.state.pod_id,page_index:this.pageInfo.page_index,page_size:this.pageInfo.page_size,[this.search_data.typesub]:this.search_data.type});"Success"===e.code&&(this.list=e.data.snapshot_list,this.pageInfo.total=e.data.page_info.count),this.FnSetTimer()}FnSetTimer(){this.timer&&this.FnClearTimer(),this.timer=setTimeout(()=>{this.getSnapshotChainsList(!1)},5e3)}FnClearTimer(){this.timer&&clearTimeout(this.timer)}detail(t){this.FnClearTimer(),sessionStorage.setItem("chainId",t),this.$router.push({path:"render_snapshot_list"===this.$route.name?"/render/chain/detail":"/chain/detail",query:{id:t}})}handleSizeChange(t){this.FnClearTimer(),this.pageInfo={...this.pageInfo,page_size:t},this.getSnapshotChainsList()}handleCurrentChange(t){this.FnClearTimer(),this.pageInfo={...this.pageInfo,page_index:t},this.getSnapshotChainsList()}beforeDestroy(){this.FnClearTimer()}};Object(s["a"])([Object(n["f"])("$store.state.pod_id")],p.prototype,"watch_pod",null),p=Object(s["a"])([Object(n["a"])({components:{SearchBar:d["a"]}})],p);var u=p,_=u,b=a("2877"),g=Object(b["a"])(_,c,l,!1,null,null,null),f=g.exports,m=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"snapshot-monitor"},[e("action-block",{attrs:{search_option:t.search_option,isShowBg:!1},on:{"fn-search":t.FnSearch}}),t._m(0),e("time-group",{staticClass:"m-bottom10",attrs:{dis_day:16,type:!0,timeList:t.timeList},on:{"fn-emit":t.getTime}}),e("disk-chart",{attrs:{chart_id:"storage",data:t.chartData,title:"快照容量(GB)"}})],1)},v=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"title m-bottom10"},[e("div",{staticClass:"m-right10"},[t._v("容量监控信息 "),e("span",{staticClass:"error_message"},[t._v("（监控数据每1小时更新一次）")])])])}],O=(a("e9f5"),a("ab43"),a("1f82")),y=a("93a6"),j=a("c1df"),S=a.n(j);let w=class extends n["e"]{constructor(){super(...arguments),this.data=this.info,this.chartData={},this.region_id="",this.regionList=[],this.monitorIds=[],this.search_value={},this.search_option={customer_id:{placeholder:"请输入客户ID"},customer_name:{placeholder:"请输入客户名称"}},this.timeList={"6_hour":{label:"6小时",time:216e5},"12_hour":{label:"12小时",time:432e5},day:{label:"1天",time:864e5},"3_day":{label:"3天",time:2592e5},week:{label:"7天",time:6048e5},"14_day":{label:"14天",time:12096e5}}}created(){this.getMonitorId()}FnSearch(t={}){this.search_value=t,this.getMonitorId()}watch_pod(t){t&&this.getData()}getTime(t){this.data.time=t,this.monitorIds.length>0&&this.getData()}async getMonitorId(){let t=await h["a"].get_monitor_id({pod_id:this.$store.state.pod_id,customer_id:this.search_value.customer_id,customer_name:this.search_value.customer_id});"Success"===t.code&&(this.monitorIds=t.data,this.getData())}async getData(){const{time:t}=this.data;let e=await h["a"].get_snapshot_info({volume_id:this.monitorIds,start_time:S()(t[0]).utc().unix(),end_time:S()(t[1]).utc().unix()});if("Success"===e.code){let t=e.data.map(t=>S.a.unix(t.time_at)),a=e.data.map(t=>t.total_size.toFixed(2));if(0===a.length)return void(this.chartData={});this.chartData={storage:{time:t,unit:"",series:[{name:"容量",data:a}]}}}}};Object(s["a"])([Object(n["c"])({default:()=>({ecs_id:""})})],w.prototype,"info",void 0),Object(s["a"])([Object(n["f"])("$store.state.pod_id")],w.prototype,"watch_pod",null),w=Object(s["a"])([Object(n["a"])({components:{TimeGroup:O["a"],DiskChart:y["a"],ActionBlock:d["a"]}})],w);var k=w,x=k,I=(a("d2d2"),Object(b["a"])(x,m,v,!1,null,"2cdd96c6",null)),T=I.exports;let A=class extends n["e"]{constructor(){super(...arguments),this.activeName=this.$route.params.active?this.$route.params.active:"first"}created(){}handleClick(){}};A=Object(s["a"])([Object(n["a"])({components:{snapshot:o["a"],chains:f,Monitor:T}})],A);var C=A,P=C,D=Object(b["a"])(P,r,i,!1,null,null,null);e["default"]=D.exports},e137:function(t,e,a){"use strict";var r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"ecs-snapshot"},[[e("search-bar",{attrs:{search_option:t.search_option,isShowBg:"list"===t.type,action_icon_option:t.action_btns},on:{"fn-search":t.FnSearch,"fn-icon":t.operateIcon}})],e("el-table",{ref:"snapshot_table",attrs:{data:t.list},on:{"filter-change":t.handleFilter}},[t._l(t.column_list,(function(a){return e("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,"column-key":a.prop,filters:a.column_key?a.filters:null,"filter-multiple":!1},scopedSlots:t._u(["snapshot_id"===a.prop?{key:"default",fn:function(a){return[e("div",[e("el-tooltip",{attrs:{placement:"right","popper-class":"tooltip-width",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(a.row.snapshot_name))]),e("div",{staticClass:"num_message"},[e("pre",[t._v(t._s(a.row.snapshot_name))])])])],1),e("div",[e("el-tooltip",{attrs:{content:a.row.snapshot_id,placement:"bottom",effect:"light"}},[e("span",[t._v(t._s(a.row.snapshot_id))])])],1)]}}:"disk_id"===a.prop?{key:"default",fn:function(a){return[e("div",[e("el-tooltip",{attrs:{placement:"right","popper-class":"tooltip-width",effect:"light"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(a.row.disk_name))]),e("div",[e("pre",{staticClass:"num_message"},[t._v(t._s(a.row.disk_name))])])])],1),e("div",[e("el-tooltip",{attrs:{content:a.row.disk_id,placement:"bottom",effect:"light"}},[e("span",[t._v(t._s(a.row.disk_id))])])],1)]}}:"disk_size"===a.prop?{key:"default",fn:function(a){return[e("span",[t._v(t._s("data"===a.row.disk_type?"数据盘":"系统盘")+"/")]),e("span",[t._v(t._s(a.row.disk_size)+"GB")])]}}:"az_name"===a.prop?{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.region_name)+"-"+t._s(a.row.az_name))])]}}:"snapshot_status_cn"===a.prop?{key:"default",fn:function(a){return[e("span",{class:a.row.snapshot_status},[t._v(t._s(a.row.snapshot_status_cn))])]}}:"disk_status_cn"===a.prop?{key:"default",fn:function(a){return[e("span",{class:a.row.disk_status},[t._v(t._s(a.row.disk_status_cn))])]}}:null],null,!0)})})),e("el-table-column",{attrs:{prop:"operate",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.record(a.row)}}},[t._v("操作记录")])]}}])})],2),e("el-pagination",{attrs:{"current-page":t.pageInfo.page_index,"page-sizes":[20,50,100],"page-size":t.pageInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t.visible?[e("Record",{attrs:{visible:t.visible,record_id:t.multiSelect[0].snapshot_id,type:"snapshot"},on:{close:t.close}})]:t._e()],2)},i=[],s=a("9ab4"),n=a("1b40"),o=a("039b"),c=a("3673"),l=a("268f"),h=a("c811");let d=class extends n["e"]{constructor(){super(...arguments),this.diskTypeList=[{text:"系统盘",value:"system"},{text:"数据盘",value:"data"}],this.search_option="list"===this.type?{type:{placeholder:"请输入",list:[{type:"snapshot_info",label:"快照名称/ID"},{type:"disk_info",label:"云盘名称/ID"}],type:"composite",width:340},customer_id:{placeholder:"请输入客户ID"},customer_name:{placeholder:"请输入客户名称"}}:{type:{placeholder:"请输入",list:[{type:"snapshot_id",label:"快照ID"},{type:"snapshot_name",label:"快照名称"}],type:"composite",width:340}},this.visible=!1,this.operate_type="",this.column_list="list"===this.type?[{prop:"customer_id",label:"客户ID"},{prop:"customer_name",label:"客户名称"},{prop:"disk_id",label:"云盘名称/ID"},{prop:"disk_status_cn",label:"云盘状态"},{prop:"disk_size",label:"属性/容量"},{prop:"az_name",label:"可用区"},{prop:"snapshot_id",label:"快照名称/ID"},{prop:"create_time",label:"创建时间"},{prop:"retention_time",label:"保留时间"},{prop:"snapshot_status_cn",label:"状态"},{prop:"op_source",label:"创建来源"}]:[{prop:"snapshot_id",label:"快照名称/ID"},{prop:"create_time",label:"创建时间"},{prop:"retention_time",label:"保留时间"},{prop:"snapshot_status_cn",label:"状态"}],this.search_data={},this.action_btns=["refresh"],this.diskObj={system:"系统盘",data:"数据盘"},this.operate=[{label:"删除",value:"del"},{label:"回滚云盘",value:"rollback"},{label:"修改快照名称",value:"editName"}],this.timer=null,this.list=[],this.multiSelect=[],this.statusObj={msg:"",status:!0},this.operateType="",this.rollbackCheck=!0,this.filterInfo={},this.pageInfo={page_size:20,page_index:1,total:0}}created(){this.getSnapshotList()}watch_pod(t){t&&this.FnSearch(this.search_data)}record(t){this.multiSelect=[t],this.visible=!0}close(){this.multiSelect=[],this.visible=!1}FnSearch(t={}){this.FnClearTimer(),this.search_data={...t},this.pageInfo.page_index=1,this.getSnapshotList()}async getSnapshotList(t=!0){t||this.$store.commit("SET_LOADING",!1);let e=await o["a"].get_snapshot_list({pod_id:this.$store.state.pod_id,page_index:this.pageInfo.page_index,page_size:this.pageInfo.page_size,customer_id:this.search_data.customer_id,customer_name:this.search_data.customer_name,[this.search_data.typesub]:this.search_data.type,snapshot_chains_id:"list"!==this.type?this.snapshot_chains_id:void 0});"Success"===e.code&&(this.list=e.data.snapshot_list,this.pageInfo.total=e.data.page_info.count),this.FnSetTimer()}FnSetTimer(){this.timer&&this.FnClearTimer(),this.timer=setTimeout(()=>{this.getSnapshotList(!1)},5e3)}FnClearTimer(){this.timer&&clearTimeout(this.timer)}operateIcon(t){this.FnClearTimer(),this.getSnapshotList(!1)}handleFilter(t){this.FnClearTimer(),this.filterInfo={...this.filterInfo,...t},this.getSnapshotList()}handleSizeChange(t){this.FnClearTimer(),this.pageInfo={...this.pageInfo,page_size:t},this.getSnapshotList()}handleCurrentChange(t){this.FnClearTimer(),this.pageInfo={...this.pageInfo,page_index:t},this.getSnapshotList()}beforeDestroy(){this.FnClearTimer()}};Object(s["a"])([Object(n["c"])({default:"list"})],d.prototype,"type",void 0),Object(s["a"])([Object(n["c"])({default:""})],d.prototype,"snapshot_chains_id",void 0),Object(s["a"])([Object(n["f"])("$store.state.pod_id")],d.prototype,"watch_pod",null),d=Object(s["a"])([Object(n["a"])({components:{SvgIcon:c["a"],SearchBar:h["a"],Record:l["a"]}})],d);var p=d,u=p,_=(a("91fb"),a("2877")),b=Object(_["a"])(u,r,i,!1,null,null,null);e["a"]=b.exports},e4d0:function(t,e,a){"use strict";var r=a("81a9"),i=a("bff7");e["a"]={get_pub_mirror_list(t){return Object(r["a"])(Object(i["b"])("GET","/img/get_pub_image_list/",t))},check_name(t){return Object(r["a"])(Object(i["b"])("POST","/img/name_check/",t))},get_mirror_type(t){return Object(r["a"])(Object(i["b"])("GET","/img/image_type/",t))},get_model_image_type(t){return Object(r["a"])(Object(i["b"])("GET","/img/model_image_type/",t))},add_pub_mirror(t){return Object(r["a"])(Object(i["b"])("GET","/img/create_pub_image/",t))},edit_pub_mirror(t){return Object(r["a"])(Object(i["b"])("POST","/img/edit_image/",t))},change_status(t){return Object(r["a"])(Object(i["b"])("POST","/img/alter_image/",t))},del_pub_mirror_az(t){return Object(r["a"])(Object(i["b"])("POST","/img/delete_pub_image/",t))},del_pub_mirror(t){return Object(r["a"])(Object(i["b"])("POST","/img/batch_delete_pub_image/",t))},get_pub_operate_record(t){return Object(r["a"])(Object(i["b"])("POST","/img/pub_image_operation_list/",t))},get_pub_sync_detail(t){return Object(r["a"])(Object(i["b"])("POST","/img/pub_image_info/",t))},sync_mirror(t){return Object(r["a"])(Object(i["b"])("POST","/img/sync_pub_image/",t))},get_private_mirror_list(t){return Object(r["a"])(Object(i["b"])("GET","/img/get_private_image_list/",t))},get_status_list(t){return Object(r["a"])(Object(i["b"])("GET","/img/get_image_status_list/",t))},get_available_az(t){return Object(r["a"])(Object(i["b"])("POST","/img/get_available_az/",t))},get_disk_list(t){return Object(r["a"])(Object(i["b"])("GET","/img/backend_type/",t))},get_product_source(){return Object(r["a"])(Object(i["b"])("GET","/ecs/get_product_source/"))}}},f813:function(t,e,a){"use strict";a("9409")}}]);