(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-84b2a70e"],{"00b4":function(e,t,n){"use strict";n("ac1f");var i=n("23e7"),a=n("da84"),r=n("c65b"),s=n("e330"),o=n("1626"),u=n("861d"),c=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),l=a.Error,d=s(/./.test);i({target:"RegExp",proto:!0,forced:!c},{test:function(e){var t=this.exec;if(!o(t))return d(this,e);var n=r(t,this,e);if(null!==n&&!u(n))throw new l("RegExp exec method returned something other than an Object or null");return!!n}})},"06c5":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3"),n("ac1f"),n("00b4");var i=n("6b75");function a(e,t){if(e){if("string"===typeof e)return Object(i["a"])(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(i["a"])(e,t):void 0}}},"3ad7":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("action-block",{attrs:{search_option:e.search_dom},on:{"fn-search":e.search}}),n("el-table",{ref:"disk_table",attrs:{data:e.disk_list,border:"","row-class-name":e.rowStyle},on:{"selection-change":e.handleSelectionChange,"filter-change":e.filterAttribute,"row-click":e.FnOperRow,"row-contextmenu":e.FnRightClick}},[n("el-table-column",{attrs:{type:"selection"}}),n("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),n("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),n("el-table-column",{attrs:{prop:"disk_id",label:"云盘ID"}}),n("el-table-column",{attrs:{prop:"disk_name",label:"云盘名称"}}),n("el-table-column",{attrs:{prop:"customer_id",label:"云盘状态","filter-multiple":!1,filters:e.disk_state,"column-key":"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:t.row.status},[e._v(e._s(t.row.status_name))])]}}])}),n("el-table-column",{attrs:{prop:"customer_id",label:"IOPS及吞吐","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[e._v("IOPS："+e._s(t.row.disk_iops?""+t.row.disk_iops+t.row.iops_unit:""))]),n("div",[e._v("吞吐量："+e._s(t.row.band_mbps?""+t.row.band_mbps+t.row.mbps_unit:""))])]}}])}),n("el-table-column",{attrs:{prop:"customer_id",label:"地域-可用区","min-width":"110ox"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.region_name)+"  "+e._s(t.row.az_name))])]}}])}),n("el-table-column",{attrs:{prop:"customer_id",label:"属性"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s("data"===t.row.disk_type?"数据盘":"系统盘"))])]}}])}),n("el-table-column",{attrs:{prop:"customer_id",label:"实例ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("pre",[e._v(e._s(t.row.ecs_id?t.row.ecs_id:""))])]}}])}),n("el-table-column",{attrs:{prop:"dev_id",label:"dev_id"}}),n("el-table-column",{attrs:{prop:"dev_name",label:"dev_name"}}),n("el-table-column",{attrs:{prop:"cluster_name",label:"集群名称","min-width":"95px"}}),n("el-table-column",{attrs:{prop:"pool_name",label:"存储池名称"}})],1),n("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e.visible?[n("Iops",{attrs:{visible:e.visible,title:e.oper_label,oper_type:e.oper_type,mount_id:e.mount_id},on:{close:e.close_disk}})]:e._e(),n("right-click",{attrs:{multi_rows:e.mount_id,menus:e.operate_btns,name:e.mount_id.length>0?e.mount_id[0].ecs_name:""},on:{"fn-click":e.infoClick}})],2)},a=[],r=n("1da1"),s=n("5530"),o=n("b85c"),u=n("d4ec"),c=n("bee2"),l=n("262e"),d=n("2caf"),_=(n("96cf"),n("caad"),n("2532"),n("d3b7"),n("ac1f"),n("841c"),n("9ab4")),h=n("1b40"),f=n("c811"),p=n("a03d"),m=n("f33c"),b=n("8ce4"),v=n("bd4d"),g=n("e8c0"),k=function(e){Object(l["a"])(n,e);var t=Object(d["a"])(n);function n(){var e;return Object(u["a"])(this,n),e=t.apply(this,arguments),e.disk_list=[],e.current=1,e.size=20,e.total=0,e.filter_obj=null,e.visible=!1,e.oper_type="",e.oper_label="",e.disk_state=[],e.mount_id=[],e.req_data={},e.auth_list=[],e.search_dom={customer_id:{placeholder:"请输入客户ID"},disk_id:{placeholder:"请输入云盘ID"},ecs_id:{placeholder:"请输入实例ID"}},e.operate_btns=[{label:"设置IOPS",value:"iops",disabled:!1},{label:"设置吞吐量",value:"mbps",disabled:!1}],e.menuConditions={iops:function(){return!e.hasPermission("iops")},mbps:function(){return!e.hasPermission("mbps")}},e}return Object(c["a"])(n,[{key:"watch_multi",value:function(){this.handleMenus()}},{key:"hasPermission",value:function(e){return this.auth_list.includes(e)}},{key:"handleMenus",value:function(){var e,t=Object(o["a"])(this.operate_btns);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.disabled=!!this.menuConditions[n.value]&&this.menuConditions[n.value]()}}catch(i){t.e(i)}finally{t.f()}}},{key:"infoClick",value:function(e){if(!e.disabled)if(this.judge_disk("customer_id",this.mount_id[0].customer_id))if(this.judge_disk("az_name",this.mount_id[0].az_name)){var t=this.mount_id.every((function(e,t,n){return"running"===e.ecs_status&&"running"===e.status||"running"===e.disk_status&&"shutdown"===e.ecs_status&&e.no_charge_shutdown_ecs||"waiting"===e.status}));if(t){var n="iops"===e.value?"IOPS":"吞吐量";this.operate(e.value,n,this.mount_id)}else this.$message.warning("仅支持对实例状态为运行中且云盘状态为使用中，或云盘状态为待挂载的云盘进行批量操作！")}else this.$message.warning("只允许对同一可用区的云盘进行批量操作！");else this.$message.warning("只允许对同一客户的云盘进行批量操作！")}},{key:"FnRightClick",value:function(e,t,n){var i=this.mount_id.some((function(t){return t.ecs_id===e.ecs_id}));i||this.$refs.disk_table.toggleRowSelection(e),Object(g["a"])(e,t,n)}},{key:"FnOperRow",value:function(e){this.$refs.disk_table.toggleRowSelection(e)}},{key:"rowStyle",value:function(e){var t=e.row,n=this.mount_id.some((function(e){return e.disk_id===t.disk_id}));if(n)return"rowStyle"}},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.req_data=Object(s["a"])(Object(s["a"])({},e),this.filter_obj),this.getDataList()}},{key:"created",value:function(){this.auth_list=this.$store.state.auth_info["disk_volume"],this.get_disk_state(),this.search()}},{key:"get_disk_state",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].get_disk_state({});case 2:t=e.sent,"Success"===t.code&&(this.disk_state=Object(b["e"])(t.data,"status_name","status","text","value"));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"judge_disk",value:function(e,t){return this.mount_id.every((function(n,i,a){return n[e]===t}))}},{key:"operate",value:function(e,t,n){this.mount_id=n,this.oper_type=e,this.oper_label=t,this.visible=!0}},{key:"close_disk",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";this.visible=!1,this.mount_id=[],this.oper_type="",this.toggleSelection(),"1"===e&&(this.current=1),this.getDataList()}},{key:"toggleSelection",value:function(){var e=this.$refs.disk_table;e.clearSelection()}},{key:"handleSelectionChange",value:function(e){this.mount_id=e}},{key:"filterAttribute",value:function(e){this.filter_obj=Object(s["a"])(Object(s["a"])({},this.filter_obj),e),this.search(this.req_data)}},{key:"handleSizeChange",value:function(e){this.size=e,this.getDataList()}},{key:"handleCurrentChange",value:function(e){this.current=e,this.getDataList()}},{key:"getDataList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.req_data,e.next=3,m["a"].get_disk_list({az_id:this.$store.state.az_id,disk_id:t.disk_id||"",ecs_id:t.ecs_id||"",status:t.status?t.status[0]:"",customer_id:t.customer_id||"",page_index:this.current,page_size:this.size});case 3:n=e.sent,"Success"===n.code&&(this.disk_list=n.data.result||[],this.total=n.data.page_info.count||0);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(h["e"]);Object(_["a"])([Object(h["f"])("mount_id",{immediate:!0,deep:!0})],k.prototype,"watch_multi",null),k=Object(_["a"])([Object(h["a"])({components:{ActionBlock:f["a"],Iops:p["a"],RightClick:v["a"]}})],k);var y=k,w=y,j=n("2877"),S=Object(j["a"])(w,i,a,!1,null,"6c71c064",null);t["default"]=S.exports},"6b75":function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,"a",(function(){return i}))},a630:function(e,t,n){var i=n("23e7"),a=n("4df4"),r=n("1c7e"),s=!r((function(e){Array.from(e)}));i({target:"Array",stat:!0,forced:s},{from:a})},b85c:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("d9e2");var i=n("06c5");function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Object(i["a"])(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,s=e},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(u)throw s}}}}},e8c0:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("cf88");function a(e,t,n){n.preventDefault(),document.addEventListener("contextmenu",(function(e){var t=e.target;if(t.closest(".el-table")){var n=document.querySelector("#menu");if(n){n.style.display="block";var a=n.offsetHeight,r=n.offsetWidth;console.log("menuHeight",a);var s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,u=e.clientX,c=e.clientY,l=u,d=c;o<u+r&&(l=u-r),s<c+a&&(d=s-a),n.style.left=l-250+"px",n.style.top=d-50+"px",n.style.display="block",n.style.zIndex="1000",document.addEventListener("click",i["a"])}}})),document.addEventListener("contextmenu",i["a"])}}}]);
//# sourceMappingURL=chunk-84b2a70e.1750128822803.js.map