(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-1201fdaa"],{"45ff":function(t,e,s){},5788:function(t,e,s){},"67e2":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("action-block",{attrs:{search_option:t.search_option},on:{"fn-search":t.search}}),s("div",{staticClass:"icon m-bottom10"},[s("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[s("el-button",{attrs:{type:"text",disabled:!t.auth_list.includes("export")},on:{click:t.down}},[s("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1)],1),s("el-table",{staticClass:"event-table",attrs:{data:t.list,border:""},on:{"sort-change":t.FnSortChange,"filter-change":t.filterAttribute}},[s("el-table-column",{attrs:{prop:"os_id",label:"镜像ID"}}),s("el-table-column",{attrs:{prop:"display_name",label:"镜像名称"}}),s("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),s("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),s("el-table-column",{attrs:{prop:"os_type",label:"镜像类型","filter-multiple":!1,"column-key":"os_type",filters:t.mirror_type}}),s("el-table-column",{attrs:{prop:"product_source",label:"产品来源","filter-multiple":!1,"column-key":"product_source",filters:t.source_list}}),s("el-table-column",{attrs:{prop:"init_mirror",label:"初始镜像"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.os_type+" "+e.row.os_version+" "+e.row.os_bit+"位"))])]}}])}),s("el-table-column",{attrs:{prop:"size",label:"规格",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.size)+"GB")])]}}])}),s("el-table-column",{attrs:{prop:"used_size",label:"占用容量(GB)",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.used_size)+"GB")])]}}])}),s("el-table-column",{attrs:{prop:"support_type",label:"计算类型","filter-multiple":!1,"column-key":"support_type",filters:t.compute_type}}),s("el-table-column",{attrs:{prop:"support_gpu_driver",label:"驱动类型","filter-multiple":!1,"column-key":"support_gpu_driver",filters:t.drive_type}}),s("el-table-column",{attrs:{prop:"business_disk_type",label:"盘类型","filter-multiple":!1,"column-key":"business_disk_type",filters:t.disk_type}}),s("el-table-column",{attrs:{prop:"backend_type",label:"存储介质","filter-multiple":!1,"column-key":"backend_type",filters:t.storage_list}}),s("el-table-column",{attrs:{prop:"az",label:"存在可用区数量",width:"120","class-name":"private-mirror-az"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v("共 "),s("span",{staticClass:"num_message"},[t._v(t._s(e.row.az_list?e.row.az_list.length:0))]),t._v(" 个")]),s("span",[t._v(" ( 可用:"),s("span",{staticClass:"num_message"},[t._v(" "+t._s(e.row.az_list?e.row.az_list.filter((function(t){return"running"===t.status})).length:0))]),t._v(" )")])]}}])}),s("el-table-column",{attrs:{prop:"",label:"",type:"expand",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.az_list,(function(e,a){return s("div",{key:a,staticClass:"table-expand"},[s("div",{staticClass:"az-name"},[t._v(t._s(e.az_name))]),s("div",{staticClass:"status",class:e.status},[t._v(t._s(e.status_display))]),s("div",{staticClass:"time"},[t._v(t._s(e.create_time))])])}))}}])}),s("el-table-column",{attrs:{prop:"status_display",label:"状态","filter-multiple":!1,"column-key":"status",filters:t.status_list,width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{class:[e.row.status]},[t._v(t._s(e.row.status_display))])]}}])}),s("el-table-column",{attrs:{prop:"speed",label:"优化加速"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_accelerate?s("span",{staticClass:"running"},[t._v("开启")]):t._e(),e.row.is_accelerate?t._e():s("span",[t._v("-")])]}}])}),s("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"custom",width:"120"}}),s("el-table-column",{attrs:{prop:"update_time",label:"更新时间",sortable:"custom",width:"120"}}),s("el-table-column",{attrs:{prop:"operate",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",disabled:!t.auth_list.includes("record")},on:{click:function(s){return t.record(e.row)}}},[t._v("操作记录")])]}}])})],1),s("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[20,50,100],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t.visible?[s("Record",{attrs:{visible:t.visible,type:"message",record_id:t.oper_info.os_id},on:{"update:visible":function(e){t.visible=e},close:t.close}})]:t._e()],2)},r=[],i=s("5530"),o=s("1da1"),n=s("d4ec"),l=s("bee2"),u=s("262e"),c=s("2caf"),p=(s("96cf"),s("b0c0"),s("ac1f"),s("841c"),s("d81d"),s("99af"),s("fb6a"),s("9ab4")),_=s("1b40"),d=s("c811"),f=s("3673"),m=s("e4d0"),h=s("c1df"),v=s.n(h),b=s("268f"),y=function(t){Object(u["a"])(s,t);var e=Object(c["a"])(s);function s(){var t;return Object(n["a"])(this,s),t=e.apply(this,arguments),t.search_option={customer_info:{placeholder:"请输入客户ID/名称"},image_info:{placeholder:"请输入镜像ID/名称"},time:{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!0,dis_day:1,defaultTime:[]}},t.list=[],t.current=1,t.size=20,t.total=0,t.search_data={},t.auth_list=[],t.mirror_type=[],t.source_list=[],t.compute_type=[{text:"GPU",value:"GPU"},{text:"CPU",value:"CPU"},{text:"CPU/GPU",value:"CPU/GPU"}],t.drive_type=[{text:"DataCenter",value:"DataCenter"},{text:"Geforce",value:"Geforce"},{text:"Enflame",value:"Enflame"}],t.disk_type=[{text:"系统盘",value:"system"},{text:"数据盘",value:"data"}],t.storage_list=[{value:"local",text:"本地盘"},{value:"block",text:"云盘"}],t.status_list=[],t.visible=!1,t.oper_type="",t.support_product_source_type="",t.oper_info={},t.filter_data={},t}return Object(l["a"])(s,[{key:"created",value:function(){this.auth_list=this.$store.state.auth_info[this.$route.name],this.get_mirror_type(),this.get_source_type(),this.get_status_list(),this.search()}},{key:"get_mirror_type",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].get_mirror_type({});case 2:e=t.sent,"Success"===e.code&&(s=[],e.data.type_list.map((function(t){return s.push({text:t,value:t}),t})),this.mirror_type=s);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"get_source_type",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].get_product_source();case 2:e=t.sent,"Success"===e.code&&e.data.map((function(t){s.source_list.push({text:t.value,value:t.value})}));case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"watch_pod",value:function(){this.search(this.search_data)}},{key:"search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.search_data=Object(i["a"])(Object(i["a"])({},t),this.filter_data),this.getMirrorList()}},{key:"get_status_list",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].get_status_list({});case 2:if(e=t.sent,"Success"===e.code){for(a in s=[],e.data)s.push({text:e.data[a],value:a});this.status_list=s}case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getMirrorList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,s,a,r,i,o,n,l,u,c,p,_,d,f,h,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.search_data,s=e.image_info,a=e.customer_info,r=e.time,i=e.os_type,o=e.sort_size,n=e.sort_used_size,l=e.support_gpu_driver,u=e.support_type,e.support_product_source_type,c=e.business_disk_type,p=e.status,_=e.backend_type,d=e.sort_update_time,f=e.sort_create_time,h=e.product_source,t.next=3,m["a"].get_private_mirror_list({image_info:s,customer_info:a,pod_id:this.$store.state.pod_id,start_day:r&&r[0]?v()(r[0]).format("YYYY-MM-DD"):void 0,end_day:r&&r[1]?v()(r[1]).format("YYYY-MM-DD"):void 0,os_type:i?i[0]:void 0,sort_size:o,sort_used_size:n,support_gpu_driver:l?l[0]:void 0,support_type:u?u[0]:void 0,business_disk_type:c?c[0]:void 0,status:p?p[0]:void 0,backend_type:_?_[0]:void 0,product_source:h?h[0]:void 0,sort_update_time:d,sort_create_time:f,page_index:this.current,page_size:this.size});case 3:b=t.sent,"Success"===b.code&&(this.list=b.data.image_list,this.total=b.data.page_info.count);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSizeChange",value:function(t){this.size=t,this.getMirrorList()}},{key:"handleCurrentChange",value:function(t){this.current=t,this.getMirrorList()}},{key:"FnSortChange",value:function(t){this.search_data.sort_size=void 0,this.search_data.sort_update_time=void 0,this.search_data.sort_create_time=void 0,this.search_data.sort_used_size=void 0,this.search_data["sort_".concat(t.prop)]="descending"===t.order?"1":"ascending"===t.order?"0":void 0,this.getMirrorList()}},{key:"filterAttribute",value:function(t){this.filter_data=Object(i["a"])(Object(i["a"])({},this.filter_data),t),this.search(this.search_data)}},{key:"record",value:function(t){this.oper_info=t,this.visible=!0}},{key:"close",value:function(t){this.visible=!1}},{key:"down",value:function(){var t=this.search_data,e=t.image_info,s=t.customer_info,a=t.time,r=t.os_type,i=t.sort_size,o=t.support_gpu_driver,n=t.support_type,l=t.business_disk_type,u=t.status,c=t.backend_type,p=t.sort_update_time,_=t.sort_create_time,d=t.product_source,f={image_info:e,customer_info:s,az_id:"",start_day:a&&a[0]?v()(a[0]).format("YYYY-MM-DD"):void 0,end_day:a&&a[1]?v()(a[1]).format("YYYY-MM-DD"):void 0,os_type:r?r[0]:void 0,sort_size:i,support_gpu_driver:o?o[0]:void 0,support_type:n?n[0]:void 0,product_source:d?d[0]:void 0,business_disk_type:l?l[0]:void 0,status:u?u[0]:void 0,backend_type:c?c[0]:void 0,sort_update_time:p,sort_create_time:_,pod_id:this.$store.state.pod_id},m="";for(var h in f)f[h]&&(m+="".concat(h,"=").concat(f[h],"&"));var b=""===m?"":"?".concat(m.slice(0,m.length-1));window.location.href="/ecs_business/v1/img/private_image_list_download/".concat(b)}}]),s}(_["e"]);Object(p["a"])([Object(_["f"])("$store.state.pod_id")],y.prototype,"watch_pod",null),y=Object(p["a"])([Object(_["a"])({components:{ActionBlock:d["a"],SvgIcon:f["a"],Record:b["a"]}})],y);var g=y,k=g,w=(s("ab2a"),s("f8c9c"),s("2877")),z=Object(w["a"])(k,a,r,!1,null,"b0d2c158",null);e["default"]=z.exports},ab2a:function(t,e,s){"use strict";s("5788")},d81d:function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").map,i=s("1dde"),o=i("map");a({target:"Array",proto:!0,forced:!o},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},f8c9c:function(t,e,s){"use strict";s("45ff")}}]);
//# sourceMappingURL=chunk-1201fdaa.1747715207673.js.map