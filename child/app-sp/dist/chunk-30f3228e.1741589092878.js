(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-30f3228e"],{"039b":function(t,e,n){"use strict";var r=n("81a9"),c=n("bff7");e["a"]={get_snapshot_list:function(t){return Object(r["a"])(Object(c["b"])("GET","/snapshot/snapshot_list/",t))},get_snapshot_chains_list:function(t){return Object(r["a"])(Object(c["b"])("GET","/snapshot/snapshot_chains_list/",t))},chains_detail:function(t){return Object(r["a"])(Object(c["b"])("GET","/snapshot/snapshot_chains_detail/",t))},record:function(t){return Object(r["a"])(Object(c["b"])("GET","/snapshot/history_record/",t))},get_monitor_id:function(t){return Object(r["a"])(Object(c["b"])("GET","/snapshot/snapshot_disk_ids/",t))},get_snapshot_info:function(t){return Object(r["a"])(Object(c["i"])("POST","/snapshot/snapshot_use_monitor",t))}}},1116:function(t,e,n){"use strict";n("cb4f")},1477:function(t,e,n){"use strict";var r=n("81a9"),c=n("bff7");e["a"]={get_host_list:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/get_host_list/",t))},get_room_list:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/machine_room_list/",t))},get_status_list:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/host_status_list/",t))},external_management:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/external_management/",t))},migrate:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/migration_operation/",t))},disperse:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/disperse_operation/",t))},record:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/host_operation_record/",t))},recommended_host:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/recommended_host/",t))},host_maintenance:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/host_maintenance/",t))},finish_maintenance:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/host_finish_maintenance/",t))},shelves:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/host_off_shelves/",t))},get_detail_overview:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/host_main_details/",t))},get_detail_storage:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/host_disk/",t))},down:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/host_list_download/",t))},host_operate:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/operate/",t))},host_import:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/import/",t))},get_host_attribution:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/get_host_attribution/",t))},set_host_attribution:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/set_host_attribution/",t))},get_host_type:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/get_host_config/",t))},update_attribute:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/set_host_config/",t))},getCustomerList:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/get_customer_list/",t))},getFamilyList:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/get_family_list/",t))},finish_validate:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/verification_finish/",t))},get_host_recycle_department:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/get_host_recycle_department/",t))},get_host_list_field:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/get_host_list_field/",t))},get_task_list:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/business_test_task/",t))},create_test_task:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/create_test_task/",t))},get_host_filter_item:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/get_host_filter_item/",t))},set_remark:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/set_host_remark/",t))},set_flag:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/set_host_tag/",t))},update_ecs_info:function(t){return Object(r["a"])(Object(c["d"])("POST","/ecs/update_ecs_info/",t))},crash_clear:function(t){return Object(r["a"])(Object(c["b"])("POST","/host/crash_clear/",t))},crash_recover:function(t){return Object(r["a"])(Object(c["b"])("POST","/host/crash_recover/",t))},set_lock:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/host_lock/",t))},set_unlock:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/host_unlock/",t))},set_maintenance:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/host_maintenance/",t))},get_maintenance_record:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/host_maintenance_record/",t))},get_lock_record:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/host_lock_record/",t))},recover_storage_error:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/recover_storage_error/",t))},agent_update:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/handle_host_agent_update/",t))},agent_rollback:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/handle_host_agent_rollback/",t))},set_prepare_host:function(t){return Object(r["a"])(Object(c["d"])("POST","/host/set_prepare_host/",t))},get_ovs_version:function(t){return Object(r["a"])(Object(c["d"])("GET","/host/ovs_version_list/",t))}}},"268f":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:"操作记录",visible:t.visible,width:"60%","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e},close:t.back}},[n("div",[n("el-dialog",{attrs:{title:"响应信息",visible:t.res_visible,width:"60%","destroy-on-close":!0,"append-to-body":"","custom-class":"response-data"},on:{"update:visible":function(e){t.res_visible=e},close:t.clost_res}},[n("div",[t._v(t._s(t.response))])])],1),n("div",[n("action-block",{attrs:{search_option:["physical","message"].includes(t.type)?Object.assign({},t.search):t.search},on:{"fn-search":t.fn_search}}),["physical","message"].includes(t.type)?n("div",{staticClass:"icon m-bottom10"},[n("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[n("el-button",{attrs:{type:"text"},on:{click:t.getOperateRecordList}},[n("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1):t._e(),n("el-table",{staticClass:"record-table",attrs:{data:t.record_list,border:""}},[n("el-table-column",{attrs:{prop:"oper_time",label:"操作时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.oper_time?t.moment(e.row.oper_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),n("el-table-column",{attrs:{prop:"oper_type_display",label:"操作内容"}}),n("el-table-column",{attrs:{prop:"status_display",label:"状态"}}),["message","physical"].includes(t.type)?n("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.response?n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.view(e.row.response)}}},[t._v("查看")]):n("span",[t._v("-")])]}}])}):n("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.result?n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.view(e.row.result)}}},[t._v("查看")]):n("span",[t._v("-")])]}}],null,!1,79404134)}),n("el-table-column",{attrs:{prop:"finish_time",label:"完成时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.finish_time?t.moment(e.row.finish_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),n("el-table-column",{attrs:{prop:"oper_user",label:"nas"===t.type?"操作用户":"用户名"}}),["physical","message"].includes(t.type)?t._e():n("el-table-column",{attrs:{prop:"flag_display",label:"操作标识"}})],1),n("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[20,50,100],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.back}},[t._v("返回")])],1)],1)])],1)},c=[],a=n("5530"),o=n("1da1"),s=n("d4ec"),i=n("bee2"),u=n("262e"),_=n("2caf"),b=(n("96cf"),n("ac1f"),n("841c"),n("caad"),n("9ab4")),l=n("1b40"),d=n("c811"),p=n("d772"),h=n("1477"),f=n("e4d0"),O=n("039b"),j=n("fc43"),g=n("c1df"),m=n.n(g),v=n("8ce4"),y=n("3673"),T=function(t){Object(u["a"])(n,t);var e=Object(_["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.state_list=[{type:"",label:"全部"},{type:"doing",label:"执行中"},{type:"success",label:"成功"},{type:"failed",label:"失败"}],t.search={state:{list:t.state_list,placeholder:"请选择状态"},content:{placeholder:"请输入操作内容"}},t.record_list=[],t.current=1,t.size=20,t.total=0,t.search_data={},t.moment=m.a,t.response="",t.res_visible=!1,t}return Object(i["a"])(n,[{key:"created",value:function(){this.fn_search()}},{key:"fn_search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.search_data=t,this.getOperateRecordList()}},{key:"getOperateRecordList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,r,c,o,s,i,u,_;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.search_data,r="physical"!==this.type?{task_type:n.content,cloud_id:this.record_id}:{content:n.content,cloud_id:this.record_id,cloud_type:"host"},c=Object(a["a"])({status:n.state||"",page_size:this.size,page_index:this.current},r),"physical"!==this.type){t.next=9;break}return t.next=6,h["a"].record(Object(a["a"])({},c));case 6:e=t.sent,t.next=30;break;case 9:if("message"!==this.type){t.next=15;break}return t.next=12,f["a"].get_pub_operate_record({os_id:this.record_id,status:n.state||"",content_type:n.content,page_size:this.size,page_index:this.current});case 12:e=t.sent,t.next=30;break;case 15:if("snapshot"!==this.type){t.next=21;break}return t.next=18,O["a"].record({cloud_id:this.record_id,cloud_type:"snapshot",status:n.state||"",task_type:n.content,page_size:this.size,page_index:this.current});case 18:e=t.sent,t.next=30;break;case 21:if("nas"!==this.type){t.next=27;break}return t.next=24,j["a"].get_nas_record(Object(a["a"])({},c));case 24:e=t.sent,t.next=30;break;case 27:return t.next=29,p["a"].get_operate_record_list(Object(a["a"])({cloud_type:this.type?this.type:"ecs"},c));case 29:e=t.sent;case 30:"Success"===e.code&&(["physical","message"].includes(this.type)?(u=["create_time","content","status_name","response","update_time","op_user"],_=["oper_time","oper_type_display","status_display","response","finish_time","oper_user"],this.record_list=Object(v["b"])(e.data.operation_list,_,u)):this.record_list=(null===(i=e.data)||void 0===i?void 0:i.history_record)||[],this.total=(null===(o=e.data)||void 0===o||null===(s=o.page_info)||void 0===s?void 0:s.count)||0);case 31:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleSizeChange",value:function(t){this.size=t,this.getOperateRecordList()}},{key:"handleCurrentChange",value:function(t){this.current=t,this.getOperateRecordList()}},{key:"view",value:function(t){this.response=t,this.res_visible=!0}},{key:"clost_res",value:function(){this.res_visible=!1,this.response=""}},{key:"back",value:function(){}}]),n}(l["e"]);Object(b["a"])([Object(l["c"])(Boolean)],T.prototype,"visible",void 0),Object(b["a"])([Object(l["c"])(String)],T.prototype,"record_id",void 0),Object(b["a"])([Object(l["c"])(String)],T.prototype,"type",void 0),Object(b["a"])([Object(l["b"])("close")],T.prototype,"back",null),T=Object(b["a"])([Object(l["a"])({components:{ActionBlock:d["a"],SvgIcon:y["a"]}})],T);var k=T,S=k,P=(n("1116"),n("2877")),E=Object(P["a"])(S,r,c,!1,null,null,null);e["a"]=E.exports},"8ce4":function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return u}));var r=n("5530"),c=n("ade3");n("d81d"),n("b0c0"),n("99af"),n("fb6a");function a(t,e,n,r,a){var o=[];return t.map((function(t){var s;o.push((s={},Object(c["a"])(s,r,t[e]),Object(c["a"])(s,a,t[n]),s))})),o}function o(t,e,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=[];return t.map((function(t){var o={};e.map((function(e,r){o[e]=t[n[r]]})),a.push(Object(r["a"])(Object(r["a"])({},o),c))})),a}function s(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};for(var c in t){var a=t[c],o=a.billing_scheme_id,s=a.billing_cycle_id,i=a.billing_items,u=a.gic_goods_id,_={};for(var b in i){var l={attr_id:i[b].attr_id,name:i[b].name},d={id:i[b].id,key:b};_[b]=e?Object(r["a"])(Object(r["a"])({},l),d):d}n[c]={billing_scheme_id:o,billing_cycle_id:s,billing_items:_,gic_goods_id:e?u:void 0}}return n}function i(t,e){return t.map((function(t){return t[e]}))}function u(t){var e="";for(var n in t)t[n]&&(e+="".concat(n,"=").concat(t[n],"&"));return""===e?"":"?".concat(e.slice(0,e.length-1))}},"99af":function(t,e,n){"use strict";var r=n("23e7"),c=n("da84"),a=n("d039"),o=n("e8b5"),s=n("861d"),i=n("7b0b"),u=n("07fa"),_=n("8418"),b=n("65f0"),l=n("1dde"),d=n("b622"),p=n("2d00"),h=d("isConcatSpreadable"),f=9007199254740991,O="Maximum allowed index exceeded",j=c.TypeError,g=p>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),m=l("concat"),v=function(t){if(!s(t))return!1;var e=t[h];return void 0!==e?!!e:o(t)},y=!g||!m;r({target:"Array",proto:!0,forced:y},{concat:function(t){var e,n,r,c,a,o=i(this),s=b(o,0),l=0;for(e=-1,r=arguments.length;e<r;e++)if(a=-1===e?o:arguments[e],v(a)){if(c=u(a),l+c>f)throw j(O);for(n=0;n<c;n++,l++)n in a&&_(s,l,a[n])}else{if(l>=f)throw j(O);_(s,l++,a)}return s.length=l,s}})},cb4f:function(t,e,n){},d772:function(t,e,n){"use strict";var r=n("81a9"),c=n("bff7");e["a"]={get_operate_record_list:function(t){return Object(r["a"])(Object(c["b"])("GET","/ecs/history_record/",t))},get_detail:function(t){return Object(r["a"])(Object(c["b"])("GET","/ecs/get_ecs_detail/",t))}}},e4d0:function(t,e,n){"use strict";var r=n("81a9"),c=n("bff7");e["a"]={get_pub_mirror_list:function(t){return Object(r["a"])(Object(c["b"])("GET","/img/get_pub_image_list/",t))},check_name:function(t){return Object(r["a"])(Object(c["b"])("POST","/img/name_check/",t))},get_mirror_type:function(t){return Object(r["a"])(Object(c["b"])("GET","/img/image_type/",t))},get_model_image_type:function(t){return Object(r["a"])(Object(c["b"])("GET","/img/model_image_type/",t))},add_pub_mirror:function(t){return Object(r["a"])(Object(c["b"])("GET","/img/create_pub_image/",t))},edit_pub_mirror:function(t){return Object(r["a"])(Object(c["b"])("POST","/img/edit_image/",t))},change_status:function(t){return Object(r["a"])(Object(c["b"])("POST","/img/alter_image/",t))},del_pub_mirror_az:function(t){return Object(r["a"])(Object(c["b"])("POST","/img/delete_pub_image/",t))},del_pub_mirror:function(t){return Object(r["a"])(Object(c["b"])("POST","/img/batch_delete_pub_image/",t))},get_pub_operate_record:function(t){return Object(r["a"])(Object(c["b"])("POST","/img/pub_image_operation_list/",t))},get_pub_sync_detail:function(t){return Object(r["a"])(Object(c["b"])("POST","/img/pub_image_info/",t))},sync_mirror:function(t){return Object(r["a"])(Object(c["b"])("POST","/img/sync_pub_image/",t))},get_private_mirror_list:function(t){return Object(r["a"])(Object(c["b"])("GET","/img/get_private_image_list/",t))},get_status_list:function(t){return Object(r["a"])(Object(c["b"])("GET","/img/get_image_status_list/",t))},get_available_az:function(t){return Object(r["a"])(Object(c["b"])("POST","/img/get_available_az/",t))},get_disk_list:function(t){return Object(r["a"])(Object(c["b"])("GET","/img/backend_type/",t))},get_product_source:function(){return Object(r["a"])(Object(c["b"])("GET","/ecs/get_product_source/"))}}},fb6a:function(t,e,n){"use strict";var r=n("23e7"),c=n("da84"),a=n("e8b5"),o=n("68ee"),s=n("861d"),i=n("23cb"),u=n("07fa"),_=n("fc6a"),b=n("8418"),l=n("b622"),d=n("1dde"),p=n("f36a"),h=d("slice"),f=l("species"),O=c.Array,j=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var n,r,c,l=_(this),d=u(l),h=i(t,d),g=i(void 0===e?d:e,d);if(a(l)&&(n=l.constructor,o(n)&&(n===O||a(n.prototype))?n=void 0:s(n)&&(n=n[f],null===n&&(n=void 0)),n===O||void 0===n))return p(l,h,g);for(r=new(void 0===n?O:n)(j(g-h,0)),c=0;h<g;h++,c++)h in l&&b(r,c,l[h]);return r.length=c,r}})}}]);
//# sourceMappingURL=chunk-30f3228e.1741589092878.js.map