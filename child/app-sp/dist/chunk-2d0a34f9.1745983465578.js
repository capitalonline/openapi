(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-2d0a34f9"],{"0245":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("action-block",{attrs:{search_option:e.search_option},on:{"fn-search":e.search}}),a("el-table",{staticClass:"event-table",attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{prop:"operation_type",label:"操作类型"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.operation_type,(function(n){return a("span",[n.type===t.row.operation_type?a("span",[e._v(" "+e._s(n.label)+" ")]):e._e()])}))}}])}),a("el-table-column",{attrs:{prop:"cloud_type_display",label:"操作对象类型"}}),a("el-table-column",{attrs:{prop:"cloud_name",label:"对象名称"}}),a("el-table-column",{attrs:{prop:"cloud_id",label:"对象ID"}}),a("el-table-column",{attrs:{prop:"content",label:"操作内容"}}),a("el-table-column",{attrs:{prop:"status",label:"操作结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.status},["failed"===t.row.status?a("span",[e._v("失败")]):e._e(),"success"===t.row.status||"finish"===t.row.status?a("span",[e._v("成功")]):e._e()])]}}])}),a("el-table-column",{attrs:{prop:"response",label:"失败原因"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.response?a("span",[e._v(e._s(t.row.response))]):a("span",[e._v("--")])]}}])}),a("el-table-column",{attrs:{prop:"create_time",label:"操作时间"}}),a("el-table-column",{attrs:{prop:"op_user",label:"操作人"}})],1),a("el-pagination",{attrs:{"current-page":e.page_info.page_index,"page-sizes":e.page_info.page_sizes,"page-size":e.page_info.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.page_info.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.page_info,"page_index",t)},"update:current-page":function(t){return e.$set(e.page_info,"page_index",t)}}})],1)},o=[],r=a("5530"),i=a("2909"),s=a("1da1"),l=a("d4ec"),p=a("bee2"),c=a("262e"),_=a("2caf"),u=(a("96cf"),a("d3b7"),a("159b"),a("99af"),a("9ab4")),d=a("1b40"),g=a("c811"),h=a("a1b1"),f=a("c1df"),b=a.n(f),y=a("9074"),m=a("8ce4"),v=function(e){Object(c["a"])(a,e);var t=Object(_["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.operation_type=[{type:"create",label:"创建"},{type:"change",label:"变更"},{type:"delete",label:"删除"}],e.cloud_type=[{type:"host",label:"宿主机"},{type:"ecs",label:"云主机"},{type:"image",label:"镜像"},{type:"disk",label:"云盘"},{type:"pool",label:"块存储"},{type:"troubleshoot",label:"故障处理任务"}],e.search_option={operation_type:{placeholder:"请选择操作类型",list:e.operation_type},cloud_type:{placeholder:"请选择操作对象",list:e.cloud_type},az_id:{placeholder:"请选择可用区",list:[]},cloud_id:{placeholder:"请输入操作对象ID"},op_user:{placeholder:"请输入操作人"},create_time:{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!0,dis_day:1,defaultTime:[]}},e.page_info={page_sizes:[20,50,100],page_size:20,page_index:1,total:0},e.list=[],e.search_data={},e.current=1,e}return Object(p["a"])(a,[{key:"created",value:function(){this.getLogList(),this.get_az_list()}},{key:"get_az_list",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.search_option.az_id.list=[],e.next=3,y["a"].get_region_az_list({});case 3:t=e.sent,"Success"===t.code&&t.data.forEach((function(e){e.region_list.forEach((function(e){a.search_option.az_id.list=[].concat(Object(i["a"])(a.search_option.az_id.list),Object(i["a"])(Object(m["e"])(e.az_list,"az_name","az_id","label","type")))}))}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSizeChange",value:function(e){this.page_info.page_size=e,this.page_info.page_index=1,this.getLogList()}},{key:"handleCurrentChange",value:function(e){this.page_info.page_index=e,this.getLogList()}},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.search_data={operation_type:e.operation_type,cloud_type:e.cloud_type,cloud_id:e.cloud_id,op_user:e.op_user,az_id:e.az_id,create_time_start:e.create_time&&e.create_time[0]?b()(e.create_time[0]).local().format("YYYY-MM-DDTHH:mm:ss[Z]"):void 0,create_time_end:e.create_time&&e.create_time[1]?b()(e.create_time[1]).local().format("YYYY-MM-DDTHH:mm:ss[Z]"):void 0},this.current=1,this.getLogList()}},{key:"getLogList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].get_log_list(Object(r["a"])({page_index:this.page_info.page_index,page_size:this.page_info.page_size},this.search_data));case 2:t=e.sent,"Success"===t.code?(this.list=t.data.operation_log_list,this.page_info.total=t.data.page_info.count):this.$message.error(t.message);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),a}(d["e"]);v=Object(u["a"])([Object(d["a"])({components:{ActionBlock:g["a"]}})],v);var z=v,w=z,k=a("2877"),j=Object(k["a"])(w,n,o,!1,null,"010d642e",null);t["default"]=j.exports}}]);
//# sourceMappingURL=chunk-2d0a34f9.1745983465578.js.map