{"version":3,"sources":["webpack://AppSp/./src/views/repairEvent/repairEventList.vue?c1a7","webpack://AppSp/./src/views/repairEvent/repairEventList.vue?2d5d","webpack://AppSp/./src/views/repairEvent/repairEventList.vue?a4f0","webpack://AppSp/./src/views/repairEvent/repairEventList.vue?ccda","webpack://AppSp/./src/views/repairEvent/repairEventList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","style","attrs","search","on","fn_search","staticClass","_v","ref","event_list","filterAttribute","rowClick","scopedSlots","_u","key","fn","scope","staticStyle","$event","getUnderlyingTasksInfo","row","task_id","maintask","status","step2_mainTaskStatus","step1_status","step2_noFaild","main_list","maintaskList","tableWidth_1","step","waclosed","globalContext","is_closed","JSON","stringify","_e","subtasks_step2","length","model","value","callback","$$v","$set","expression","class","expanded","isExpanded","$index","_s","errorMsg","truncateText","toggleExpand","tableWidth_2","waclosed_2","Object","keys","callbackContent","tableWidth_3","waclosed_3","parameters","step2_repair","setReTasks","step2_status","step2_doing","step2_progress","_l","subtaskCnName","info","resources","need_repair","step3_repair","setTasksStatus","step3_str","error_type_list","error_type","detail","slice","create_time","moment","format","end_time","ignore","event_id","current","size","total","handleSizeChange","handleCurrentChange","staticRenderFns","List","cloud_id","placeholder","width","customer_id","time","type","clearable","defaultTime","Date","event_num","finish_num","finished_percent","fail_num","error_percent","err","min_date","search_data","event_detail","sort_prop_name","sort_value","filter_obj","subtasks","re_parameters","step2_str","clear","filter_info","scrollPosition","getFilterList","service","get_filter_item","filed_names","res","code","i","data","push","text","get_error_task_list","loading","$store","commit","get_repair_event_list","page_index","page_size","az_id","task_type","customer_name","undefined","start_time","task_list","map","e","assign","isExpand","page_info","count","$message","error","msg","index","lines","linesArray","split","truncatedText","join","cur","obj","retry_task","success","message","getUnderlyingTasks","maintask_record","process","isCheck","is_doing","is_failed","subtask","getResourceStatusInfo","FnClearTimer","fail_subtasks","item","subtaskName","Promise","all","getResourceStatus","getTasksStatus","then","taskList","resource_detail","list","resource_type","re_status","re_status_list","repairResources","filter","resource_id","expect_status","repair_resource","repair_list","after_status","after_status_display","status_display","repair_detail","is_need_repair","forEach","resource","failedSubExecFlag","subtaskId","global_context","FnSetTimer","setInterval","clearInterval","$refs","toggleRowExpansion","clearTask","Vue","Component","components","ActionBlock","Clipboard","JsonViews","component"],"mappings":"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","file":"chunk-425796ed.1750128822803.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repairEventList.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('action-block',{style:({'display': 'flex', 'flex-wrap': 'nowrap','overflow-x': 'auto','min-width':'1000px'}),attrs:{\"search_option\":_vm.search},on:{\"fn-search\":_vm.fn_search}})],1),_c('div',{staticClass:\"prompt_message\"},[_vm._v(\"重试：支持对失败状态的任务进行重试；忽略：支持对任务进行忽略，忽略的任务不展示\")]),_c('el-table',{ref:\"evenTable\",staticClass:\"event-table\",attrs:{\"data\":_vm.event_list,\"border\":\"\"},on:{\"filter-change\":_vm.filterAttribute,\"expand-change\":_vm.rowClick}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticStyle:{\"overflow\":\"hidden\",\"padding\":\"0 0 24px\"}},[_c('ul',[_c('li',[_c('h1',[_vm._v(\"step1：\"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.getUnderlyingTasksInfo(scope.row.task_id)}}},[_vm._v(\"检查底层任务状态\")])],1)]),(((_vm.maintask.status == 'failed' || _vm.step2_mainTaskStatus) && _vm.step1_status) && !_vm.step2_noFaild && _vm.main_list)?_c('li',[_c('h1',[_vm._v(\"step2：底层任务修复\")]),_c('div',{staticClass:\"m-top10 m-bottom10\"},[_c('b',[_vm._v(\"主任务：\")])]),_c('el-table',{staticStyle:{\"width\":\"99%\"},attrs:{\"data\":_vm.maintaskList,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"taskId\",\"width\":\"260\",\"label\":\"主任务Id\"}}),_c('el-table-column',{attrs:{\"prop\":\"execEndTime\",\"width\":\"230\",\"label\":\"上一次执行结束时间\"}}),_c('el-table-column',{attrs:{\"label\":\"当前错误参数显示\",\"width\":_vm.tableWidth_1},scopedSlots:_vm._u([{key:\"default\",fn:function(step){return [_c('div',{on:{\"click\":function($event){return _vm.waclosed()}}},[_c('json-views',{attrs:{\"data\":step.row.globalContext,\"closed\":_vm.is_closed}}),(step.row.globalContext)?_c('Clipboard',{attrs:{\"content\":JSON.stringify(step.row.globalContext)}}):_vm._e()],1)]}}],null,true)})],1),_c('div',{staticClass:\"m-top10 m-bottom10\"},[_c('b',[_vm._v(\"子任务列表：\")])]),(_vm.subtasks_step2.length > 0)?_c('el-table',{staticStyle:{\"width\":\"99%\"},attrs:{\"data\":_vm.subtasks_step2,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"width\":\"55\"},scopedSlots:_vm._u([{key:\"default\",fn:function(step){return [(step.row.status == 'failed')?_c('el-checkbox',{model:{value:(step.row.isCheck),callback:function ($$v) {_vm.$set(step.row, \"isCheck\", $$v)},expression:\"step.row.isCheck\"}}):_vm._e()]}}],null,true)}),_c('el-table-column',{attrs:{\"prop\":\"subtaskId\",\"label\":\"子任务Id\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"width\":\"80\",\"label\":\"状态\"}}),_c('el-table-column',{attrs:{\"prop\":\"errorMsg\",\"label\":\"失败原因\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"text-container\"},[_c('div',{ref:\"textContent\",staticClass:\"text-content\",class:{ expanded: _vm.isExpanded[scope.$index] }},[(_vm.isExpanded[scope.$index])?_c('div',[_vm._v(_vm._s(scope.row.errorMsg))]):_c('div',[_vm._v(_vm._s(_vm.truncateText(scope.row.errorMsg, 3)))])]),(scope.row.errorMsg )?_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.toggleExpand(scope.$index)}}},[_c('div',{staticClass:\"button-container\"},[_c('i',{class:_vm.isExpanded[scope.$index] ? 'el-icon-arrow-up': 'el-icon-arrow-down'})])]):_vm._e()],1)]}}],null,true)}),_c('el-table-column',{attrs:{\"prop\":\"executorName\",\"label\":\"执行服务\"}}),_c('el-table-column',{attrs:{\"prop\":\"subtaskName\",\"label\":\"子任务名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"execTime\",\"label\":\"执行时间\"}}),_c('el-table-column',{attrs:{\"label\":\"回调参数\",\"width\":_vm.tableWidth_2},scopedSlots:_vm._u([{key:\"default\",fn:function(step){return [_c('div',{on:{\"click\":function($event){return _vm.waclosed_2()}}},[(Object.keys(step.row.callbackContent).length >0)?_c('json-views',{attrs:{\"data\":step.row.callbackContent,\"closed\":_vm.is_closed}}):_c('span',[_vm._v(\"-\")])],1)]}}],null,true)}),_c('el-table-column',{attrs:{\"label\":\"当前错误参数显示\",\"width\":_vm.tableWidth_3},scopedSlots:_vm._u([{key:\"default\",fn:function(step){return [_c('div',{on:{\"click\":function($event){return _vm.waclosed_3()}}},[_c('json-views',{attrs:{\"data\":step.row.parameters,\"closed\":_vm.is_closed},on:{\"click\":_vm.waclosed}})],1),(step.row.parameters)?_c('Clipboard',{attrs:{\"content\":JSON.stringify(step.row.parameters)}}):_vm._e()]}}],null,true)})],1):_vm._e(),_c('el-button',{staticClass:\"m-top10 m-bottom10\",attrs:{\"type\":\"primary\",\"disabled\":_vm.step2_repair},on:{\"click\":function($event){return _vm.setReTasks(scope.row.task_id)}}},[_vm._v(\"底层任务修复执行\")]),(_vm.step2_status && !_vm.step2_mainTaskStatus)?_c('div',{staticStyle:{\"width\":\"25%\"}},[_c('el-progress',{attrs:{\"percentage\":0}}),_c('span',{staticClass:\"step-result\"},[_vm._v(_vm._s(_vm.step2_doing))])],1):_vm._e(),(_vm.step2_status && _vm.step2_mainTaskStatus)?_c('div',{staticStyle:{\"width\":\"25%\"}},[_c('el-progress',{attrs:{\"percentage\":_vm.step2_progress}}),(_vm.step2_progress !==100)?_c('span',{staticClass:\"step-result\"},[_vm._v(_vm._s(_vm.step2_doing))]):_vm._e(),_c('br'),_vm._l((_vm.subtasks),function(status){return _c('span',[(status.status == 'doing' && _vm.step2_progress !== 100 )?_c('span',[_vm._v(\" \"+_vm._s(status.subtaskCnName))]):_vm._e()])})],2):_vm._e(),(_vm.step2_progress === 100 && _vm.step2_mainTaskStatus)?_c('div',{staticClass:\"step-result\"},[_vm._v(\"执行结果： \"),(_vm.maintask.status == 'failed')?_c('span',[_vm._v(\"任务失败 \"),_vm._l((_vm.filter_info),function(info){return _c('div',[_c('span',[_vm._v(_vm._s(info.subtaskCnName))]),_c('br'),_c('span',[_vm._v(_vm._s(info.errorMsg))]),_c('br'),_c('span',{staticClass:\"error\"},[_vm._v(\"底层任务修复失败，请联系相关研发处理\")])])})],2):_c('span',[_vm._v(\"任务成功\")])]):_vm._e()],1):(_vm.step2_noFaild)?_c('span',[_c('li',[_c('h1',[_vm._v(\"step2：底层任务修复\")]),_c('span',{staticClass:\"step-result\"},[_vm._v(\"底层任务无需修复\")])])]):_vm._e(),(_vm.step1_status && _vm.main_list )?_c('li',[_c('h1',[_vm._v(\"step3：修复业务层\")]),_c('el-table',{staticClass:\"event-table\",staticStyle:{\"width\":\"99%\"},attrs:{\"data\":_vm.resources,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"resource_id\",\"label\":\"资源id\"}}),_c('el-table-column',{attrs:{\"prop\":\"resource_type\",\"label\":\"资源类型\"}}),_c('el-table-column',{attrs:{\"prop\":\"need_repair\",\"label\":\"是否需要修复\"},scopedSlots:_vm._u([{key:\"default\",fn:function(step){return [_vm._v(\" \"+_vm._s(step.row.need_repair ? '是' : '否')+\" \")]}}],null,true)}),_c('el-table-column',{attrs:{\"prop\":\"status_display\",\"label\":\"初始状态\"}}),_c('el-table-column',{attrs:{\"prop\":\"expect_status_display\",\"label\":\"期望状态\"}}),_c('el-table-column',{attrs:{\"prop\":\"after_status_display\",\"label\":\"修复后状态\"}})],1),_c('el-button',{staticClass:\"m-top10 m-bottom10\",attrs:{\"type\":\"primary\",\"disabled\":_vm.step3_repair},on:{\"click\":function($event){return _vm.setTasksStatus(scope.row.task_id)}}},[_vm._v(\"修复业务层执行\")]),(Object.keys(_vm.step3_str).length> 0)?_c('div',{staticClass:\"step-result\"},[_vm._v(\"执行结果： \"),_vm._l((_vm.step3_str),function(value,key){return _c('div',[_vm._v(\" \"+_vm._s(key)+\":\"+_vm._s(value)+\" \"),_c('br')])})],2):_vm._e()],1):_vm._e()])])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"task_id\",\"label\":\"任务ID\"}}),_c('el-table-column',{attrs:{\"prop\":\"task_type\",\"label\":\"任务名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"cloud_id\",\"label\":\"资源ID\"}}),_c('el-table-column',{attrs:{\"prop\":\"customer_id\",\"label\":\"客户ID\"}}),_c('el-table-column',{attrs:{\"prop\":\"customer_name\",\"label\":\"客户名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"az_name\",\"label\":\"可用区\"}}),_c('el-table-column',{attrs:{\"prop\":\"task_state\",\"label\":\"任务状态\"}}),_c('el-table-column',{attrs:{\"prop\":\"error_type\",\"label\":\"失败类型\",\"filter-multiple\":false,\"column-key\":\"error_type\",\"filters\":_vm.error_type_list},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.error_type))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"subtask_name\",\"label\":\"当前执行流程\"}}),_c('el-table-column',{attrs:{\"prop\":\"detail\",\"label\":\"失败原因\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{attrs:{\"content\":scope.row.detail,\"popper-class\":\"tooltip-width\",\"placement\":\"bottom\",\"effect\":\"light\"}},[_c('span',[_vm._v(_vm._s(scope.row.detail.length>20 ? ((scope.row.detail.slice(0,21)) + \"...\") : scope.row.detail))])])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"create_time\",\"label\":\"创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.create_time ? _vm.moment(scope.row.create_time).format(\"YYYY-MM-DD HH:mm:ss\") : '--'))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"end_time\",\"label\":\"完成时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.end_time ? _vm.moment(scope.row.end_time).format(\"YYYY-MM-DD HH:mm:ss\") : '--'))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.ignore(scope.row.task_id,scope.row.event_id)}}},[_vm._v(\"忽略\")])]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.current,\"page-sizes\":[20, 50, 100],\"page-size\":_vm.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue,Watch } from 'vue-property-decorator';\nimport ActionBlock from \"../../components/search/actionBlock.vue\";\nimport service from '../../https/event/list';\nimport EcsService from '../../https/instance/create'\nimport {trans} from '../../utils/transIndex';\nimport moment from 'moment';\nimport Clipboard from \"@/components/clipboard.vue\";\nimport JsonViews  from 'vue-json-views'\n\n@Component({\n  components:{\n    ActionBlock,\n    Clipboard,\n    JsonViews\n  }\n})\nexport default class List extends Vue {\n  $router;\n  $message;\n  $store;\n  private search:any = {\n    // az_id:  {placeholder:'请选择可用区',list:[]},\n    cloud_id:  {placeholder:'请输入资源ID',width: 120},\n    task_id: {placeholder:'请输入任务ID',width: 120},\n    // task_type: {placeholder:'请输入任务名称'},\n    customer_id: {placeholder:'请输入客户ID',width: 118},\n    // customer_name: {placeholder:'请输入客户名称'},\n    time:{\n      type:'datetimerange',\n      placeholder:['开始时间','结束时间'],\n      clearable:false,\n      width:360,\n      defaultTime:[moment(new Date()).format(\"YYYY-MM-DD 00:00:00\"),moment(new Date()).format(\"YYYY-MM-DD HH:mm:ss\")]\n    },\n  };\n\n  private event_num:number = 0;\n  private finish_num:number = 0;\n  private finished_percent:string = '0.00%';\n  private fail_num:number = 0;\n  private error_percent:string = '0.00%';\n  private err:string = 'err'\n  private current:number = 1\n  private size:number = 20\n  private total:number = 0\n  private moment =moment\n  private tableWidth_1: string = '200'\n  private tableWidth_2: string = '200'\n  private tableWidth_3: string = '200'\n  private event_list:any=[]\n  private min_date:any = \"\"\n  private search_data:any = {};\n  private event_detail: boolean = false;\n  private sort_prop_name:string='';\n  private sort_value:string=''\n  private error_type_list=[];\n  private filter_obj={}\n  private step1_status:boolean = false\n  private maintask:any = {}\n  private maintaskList:any = []\n  private subtasks:any = []\n  private subtasks_step2:any = []\n  private resources:any = []\n  private re_parameters:any = ''\n  private step3_str:any = {}\n  private step2_str:string = ''\n  private step2_progress:number = 0\n  private step2_status:boolean = false\n  private clear = null;\n  private step2_mainTaskStatus:boolean = false\n  private step2_repair:boolean = false\n  private step3_repair:boolean = false\n  private filter_info = []\n  private scrollPosition:number = 0\n  private isExpanded :any = []\n  private step2_noFaild:boolean = false\n  private main_list:boolean = false\n  private is_closed:boolean = true\n  private step2_doing:string =''\n\n  created() {\n    // this.get_az_list();\n    this.getFilterList()\n    this.fn_search()\n  }\n\n  private waclosed(){\n    this.tableWidth_1 = this.tableWidth_1 === '200' ? '450' : '200'; // 根据需要调整宽度值\n  }\n  private waclosed_2(){\n    this.tableWidth_2 = this.tableWidth_2 === '200' ? '450' : '200'; // 根据需要调整宽度值\n  }\n  private waclosed_3(){\n    this.tableWidth_3 = this.tableWidth_3 === '200' ? '450' : '200'; // 根据需要调整宽度值\n  }\n\n  // private async get_az_list(){\n  //   //this.search.az_id.list=[]\n  // let res:any=await EcsService.get_region_az_list({})\n  //     if(res.code===\"Success\"){\n  //         res.data.forEach(item=>{\n  //             item.region_list.forEach(inn=>{\n  //             //this.search.az_id.list=[...this.search.az_id.list,...trans(inn.az_list,'az_name','az_id','label','type')]\n  //             })\n  //         })\n  //     }\n  // }\n  private async getFilterList(){\n    let res:any=await service.get_filter_item({\n      filed_names:['error_type']\n    })\n    if(res.code==='Success'){\n      for(let i in res.data.error_type){\n        this.error_type_list.push({text:res.data.error_type[i],value:i})\n      }\n    }\n  }\n  private fn_search(data:any={}){\n    this.current = 1;\n    this.search_data = {...data,...this.filter_obj}\n    this.get_error_task_list()\n  }\n  private async get_error_task_list(loading:boolean = true) {\n    if (!loading) {\n      this.$store.commit('SET_LOADING', false);\n    }\n    const {search_data:data}=this\n    const res:any = await service.get_repair_event_list({\n      page_index:this.current,\n      page_size:this.size,\n      az_id:data.az_id || \"\",\n      cloud_id:data.cloud_id || \"\",\n      task_type:data.task_type || \"\",\n      task_id:data.task_id || \"\",\n      customer_id:data.customer_id || \"\",\n      customer_name:data.customer_name || \"\",\n      error_type:data.error_type ? data.error_type[0] : undefined,\n      start_time:data.time ? moment(data.time[0]).format('YYYY-MM-DD HH:mm:ss') : moment(new Date()).format(\"YYYY-MM-DD 00:00:00\"),\n      end_time:data.time ? moment(data.time[1]).format('YYYY-MM-DD HH:mm:ss') : moment(new Date()).format(\"YYYY-MM-DD HH:mm:ss\"),\n    })\n    if(res.code===\"Success\"){\n      this.event_list = res.data?.task_list || []\n      this.event_list = this.event_list.map(e => {\n        return Object.assign({}, e, {isExpand: false})\n      })\n\n\n      this.total = res.data?.page_info?.count || 0\n    }else{\n        this.$message.error(res.msg || '操作错误')\n      }\n  }\n  private handleSizeChange(size){\n    this.size = size\n    this.get_error_task_list()\n  }\n  private toggleExpand(index) {\n    this.$set(this.isExpanded, index, !this.isExpanded[index]);\n  }\n  private truncateText(text, lines) {\n    if (!text) return '';\n\n    const linesArray = text.split('\\n');\n    const truncatedText = linesArray.slice(0, lines).join('\\n');\n    return truncatedText + (linesArray.length > lines ? '...' : '');\n  }\n  private calculateLines(errorMsg) {\n    return errorMsg ? errorMsg.split('\\r\\n').length : 0;\n  }\n  private handleCurrentChange(cur){\n    this.current = cur\n    this.get_error_task_list()\n  }\n  private filterAttribute(obj:any){\n    this.filter_obj = {...this.filter_obj,...obj};\n    this.fn_search(this.search_data)\n  }\n  private async retry(task_id,event_id) {\n    let res:any = await service.retry_task({\n      task_id,\n      event_id\n    })\n    if(res.code==='Success'){\n      this.$message.success(res.message);\n      this.get_error_task_list()\n    }\n  }\n  private async ignore(task_id) {\n    let res:any = await service.ignore({\n      task_id,\n    })\n    if(res.code==='Success'){\n      this.$message.success(res.message);\n      this.get_error_task_list()\n    }\n  }\n  private async getUnderlyingTasksInfo (task_id,loading:boolean = true,status:boolean = false) {\n    if (!loading) {\n      this.$store.commit('SET_LOADING', false);\n      // this.step2_mainTaskStatus = status\n    }\n    let res:any = await service.getUnderlyingTasks({\n      task_id\n    })\n    this.step1_status = true\n    if(res.code==='Success'){\n      if( res.data.maintask_record !== undefined && res.data.maintask_record !== null &&  Object.keys(res.data.maintask_record).length === 0){\n        this.main_list = false\n        this.$message.error('主任务不存在');\n      } else {\n        this.main_list = true\n        this.maintask = res.data.maintask\n        this.maintaskList = [res.data.maintask]\n        this.subtasks = res.data.subtasks\n        this.step2_progress = res.data.process\n        this.step2_mainTaskStatus = status\n        this.subtasks_step2 = res.data.subtasks.map(e => {\n          return Object.assign({}, e, {\n            re_parameters: '',\n            isCheck: e.status === 'failed'\n          })\n        })\n        if(!this.step2_mainTaskStatus && this.subtasks_step2.length> 0 ) {\n          this.step2_noFaild = true;\n          this.step2_repair = true;\n          this.step3_repair = false;\n          let is_doing = false;\n          let is_failed = false;\n          for (let subtask of this.subtasks_step2 ) {\n            if ( subtask.status ==='doing' ||  subtask.status ==='waiting') {\n              is_doing = true;\n            }\n            if (this.maintask.status === 'failed' || subtask.status === 'failed'  ) {\n              is_failed = true;\n            }\n          }\n          if(is_failed){\n            this.step2_noFaild = false;\n            this.step3_repair = true;\n            this.step2_repair = false;\n          }\n          if(is_doing ){\n            this.step2_noFaild = false;\n            this.step3_repair = true;\n            this.step2_repair = true;\n          }\n        } else {\n          this.step3_repair = true;\n          this.step2_repair = true;\n          this.step2_noFaild = false;\n          let is_doing = false;\n          let is_failed = false;\n          for (let subtask of this.subtasks_step2) {\n            if ( subtask.status ==='doing' ||  subtask.status ==='waiting' ||  subtask.status ==='retry_init'  ) {\n              is_doing = true;\n            }\n            if (this.maintask.status === 'failed' || subtask.status === 'failed'  ) {\n              is_failed = true;\n            }\n          }\n          if(is_failed){\n            this.step3_repair = true;\n            this.step2_repair = false;\n          }\n          if(is_doing || this.step2_progress!== 100){\n            this.step3_repair = true;\n            this.step2_repair = true;\n          }\n          if(!is_failed && !is_doing){\n            this.step3_repair = false;\n            this.step2_repair = true;\n          }\n        }\n      }\n    }\n    this.getResourceStatusInfo(task_id,loading)\n    if(this.maintask.status !== 'doing'){\n      if (this.clear) {\n        this.FnClearTimer();\n      }\n    }\n    if(this.step2_mainTaskStatus && this.maintask.status == 'failed'){\n      this.filter_info = res.data.fail_subtasks.map(item =>{\n        return {subtaskName: item.subtaskName , errorMsg:item.errorMsg}\n      })\n    } else if(this.step2_mainTaskStatus && this.maintask.status == 'success'){\n      this.step3_repair = false;\n    }\n    // this.calculateLines();\n  }\n  // 获取任务资源类型的状态列表\n  private async getResourceStatusInfo (task_id,loading:boolean = true) {\n    if (!loading) {\n      this.$store.commit('SET_LOADING', false);\n    }\n    if (!loading) {\n      await Promise.all([\n        service.getResourceStatus(),\n        service.getTasksStatus({task_id})\n      ]).then(([res, taskList]) => {\n        if (res.code === 'Success' && taskList.code === 'Success') {\n          if (taskList.data.resource_detail) {\n            this.resources = Object.keys(taskList.data.resource_detail).map((key) => {\n              const e = taskList.data.resource_detail[key];\n              const list = res.data[e.resource_type];\n              return Object.assign({}, e, {\n                re_status: list[0].status,\n                re_status_list: list,\n              });\n            });\n          } else {\n            this.step3_repair = true\n            if(this.maintask.status === 'success' && this.step3_repair){\n              this.$message.success('任务修复成功');\n              this.get_error_task_list(false)\n            }\n          }\n        }\n      });\n    } else {\n      let res = await service.getResourceStatus();\n      let taskList = await service.getTasksStatus({ task_id });\n\n      if (res.code === 'Success' && taskList.code === 'Success') {\n        if (taskList.data.resource_detail) {\n          this.resources = Object.keys(taskList.data.resource_detail).map((key) => {\n            const e = taskList.data.resource_detail[key];\n            const list = res.data[e.resource_type];\n            return Object.assign({}, e, {\n              re_status: list[0].status,\n              re_status_list: list,\n            });\n          });\n          } else {\n          this.step3_repair = true\n        }\n        }\n      }\n    // let res:any = await service.getResourceStatus()\n    // let taskList:any = await service.getTasksStatus({\n    //   task_id\n    // })\n    // if(res.code==='Success' && taskList.code === 'Success'){\n    //   this.resources = taskList.data.resource_detail.map(e => {\n    //     const list = res.data[e.resource_type]\n    //     return Object.assign({}, e,{\n    //       re_status: list[0].status,\n    //       re_status_list: list\n    //     })\n    //   })\n    // }\n  }\n  // step3的执行\n  private async setTasksStatus (task_id) {\n    let repairResources:any = this.resources.filter((e) => e.need_repair).map(e => {\n        return {\n          resource_id: e.resource_id,\n          resource_type: e.resource_type,\n          expect_status: e.re_status,\n        }\n    })\n    let res:any = await service.setTasksStatus({\n      task_id: task_id,\n      repair_resource: repairResources\n    })\n    if(res.code==='Success'){\n      const data = res.data.repair_list\n      this.resources = this.resources.map(e => {\n        return Object.assign({}, e, {\n          after_status: data[e.resource_id].status,\n          after_status_display: data[e.resource_id].status_display\n        })\n      })\n      this.step3_str=res.data.repair_detail\n      this.getResourceStatusInfo(task_id,false)\n      let is_need_repair = false;\n      this.resources.forEach((resource) => {\n        if (resource.need_repair === true) {\n          is_need_repair = true;\n        }\n      });\n      this.step3_repair = !is_need_repair;\n\n      if( this.step3_repair){\n        this.get_error_task_list(false)\n        this.$message.success('任务修复成功');\n      }\n    }\n  }\n  // step2的执行\n  private async setReTasks (task_id) {\n    this.step2_doing = '任务正在修复，请耐心等待：'\n    this.step2_repair = true\n    this.step2_status = true\n    this.$store.commit('SET_LOADING', false);\n    let subtasks:any = this.subtasks_step2.filter(e => e.status === 'failed').map(e => {\n      return {\n        failedSubExecFlag: e.isCheck ? 1 : 0,\n        subtaskId: e.subtaskId,\n        parameters: e.re_parameters\n      }\n    })\n    let res:any = await service.setReTasks({\n      task_id: task_id,\n      global_context: this.re_parameters !== '' ? this.re_parameters : undefined,\n      subtasks: subtasks\n    })\n    if(res.code==='Success'){\n      this.step2_str = res.message\n      // this.$message.success(res.message);\n      // this.step2_str = res.data.result_str\n      this.FnSetTimer(task_id);\n    } else {\n      this.step2_repair = false\n    }\n  }\n\n  private FnSetTimer(task_id) {\n    if (this.clear) {\n      this.FnClearTimer();\n    }\n    this.clear = setInterval(()=>{\n      this.step2_str = ''\n      this.getUnderlyingTasksInfo(task_id, false,true);\n    },5000);\n  }\n  private FnClearTimer() {\n    if (this.clear) {\n      clearInterval(this.clear);\n    }\n  }\n\n  private rowClick (row) {\n    this.event_list.forEach(e => {\n      if (row.task_id !== e.task_id) {\n        (this.$refs['evenTable'] as any).toggleRowExpansion(e, false)\n        // this.$refs.evenTable.toggleRowExpansion(e, false)\n        e.isExpand = false\n      } else {\n        if (row.isExpand) {\n          e.isExpand = false\n        } else {\n          e.isExpand = true\n        }\n        (this.$refs['evenTable'] as any).toggleRowExpansion(e, e.isExpand)\n      }\n    })\n    this.clearTask()\n  }\n  private clearTask () {\n    this.step1_status = false\n    this.step2_noFaild =false\n    this.maintask = {}\n    this.maintaskList = []\n    this.subtasks = []\n    this.subtasks_step2 = []\n    this.resources = []\n    this.re_parameters = ''\n    this.step3_str = {}\n    this.step2_str = ''\n    this.step2_status = false\n    this.main_list = false\n    this.filter_info = []\n    this.step2_doing = ''\n  }\n\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repairEventList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repairEventList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./repairEventList.vue?vue&type=template&id=bb412982&\"\nimport script from \"./repairEventList.vue?vue&type=script&lang=ts&\"\nexport * from \"./repairEventList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./repairEventList.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}