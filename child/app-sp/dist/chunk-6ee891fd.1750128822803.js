(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-6ee891fd"],{1184:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-button",{staticClass:"add-btn",attrs:{type:"text"},on:{click:e.FnAddDepen}},[s("i",{staticClass:"el-icon-plus"}),e._v(" 添加 ")]),e._l(e.dependent_params,(function(t,a){return s("div",{key:a+"--",staticClass:"add-box"},[s("div",{staticClass:"m-right10"},[s("el-input",{attrs:{type:"text"},on:{blur:e.FnEmit},model:{value:t.key,callback:function(s){e.$set(t,"key",s)},expression:"item.key"}})],1),"key"!==e.type?s("div",[s("el-select",{on:{change:function(s){return e.FnChangeDep(t)}},model:{value:t.type,callback:function(s){e.$set(t,"type",s)},expression:"item.type"}},e._l(e.dependent_type,(function(t,n){return s("el-option",{key:n+"-"+a,attrs:{label:t.label,value:n},on:{change:e.FnEmit}})})),1),"object"!==t.type||e.second?e._e():s("el-button",{staticClass:"m-left10",attrs:{type:"text"},on:{click:function(s){return e.FnAddChild(t)}}},[e._v(e._s(t.second_key)+" 详情")])],1):e._e(),s("div",["number"===t.type?s("el-input-number",{staticClass:"m-left10",attrs:{min:0,max:1e4},on:{blur:e.FnEmit},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"item.value"}}):e._e(),"string"===t.type?s("div",{staticClass:"short-input m-left10"},[s("el-input",{on:{blur:e.FnEmit},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"item.value"}})],1):e._e()],1),s("div",{staticClass:"btn-box"},[s("el-button",{attrs:{type:"text"},on:{click:function(t){return e.FnDel(a)}}},[s("i",{staticClass:"el-icon-remove-outline"})])],1)])}))],2)},n=[],i=s("d4ec"),l=s("bee2"),c=s("262e"),o=s("2caf"),u=(s("a434"),s("9ab4")),r=s("1b40"),_=function(e){Object(c["a"])(s,e);var t=Object(o["a"])(s);function s(){var e;return Object(i["a"])(this,s),e=t.apply(this,arguments),e.dependent_params=[],e.dependent_type={number:{label:"数值",value:0},string:{label:"字符串",value:""},object:{label:"字典",value:{}},list:{label:"列表",value:[]}},e.child_dialog=!1,e.default_params={value:{}},e.default_params_child=[],e}return Object(l["a"])(s,[{key:"FnAddDepen",value:function(){this.dependent_params.push({key:"",second_key:"",type:"",value:""})}},{key:"FnChangeDep",value:function(e){e.value=this.dependent_type[e.type].value}},{key:"FnAddChild",value:function(e){return e}},{key:"FnEmit",value:function(){return this.dependent_params}},{key:"FnDel",value:function(e){this.dependent_params.splice(e,1),this.FnEmit()}},{key:"FnWatchRel",value:function(e){this.dependent_params=e,this.FnEmit()}},{key:"mounted",value:function(){this.dependent_params=this.params,this.FnEmit()}}]),s}(r["e"]);Object(u["a"])([Object(r["c"])({default:""})],_.prototype,"params",void 0),Object(u["a"])([Object(r["c"])({default:!1})],_.prototype,"second",void 0),Object(u["a"])([Object(r["c"])({default:""})],_.prototype,"type",void 0),Object(u["a"])([Object(r["b"])("fn-child")],_.prototype,"FnAddChild",null),Object(u["a"])([Object(r["b"])("fn-change")],_.prototype,"FnEmit",null),Object(u["a"])([Object(r["f"])("params")],_.prototype,"FnWatchRel",null),_=Object(u["a"])([r["a"]],_);var d=_,f=d,b=(s("938a"),s("61c1"),s("2877")),p=Object(b["a"])(f,a,n,!1,null,"0d3d7a3a",null);t["a"]=p.exports},"5b46":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Item",{attrs:{params:e.params,child:e.default_params},on:{"fn-change":e.FnEmit,"fn-child":e.FnAddChild}}),s("el-dialog",{attrs:{visible:e.child_dialog,title:e.default_params.key,"close-on-click-modal":!1,width:"660px","append-to-body":""},on:{"update:visible":function(t){e.child_dialog=t}}},[s("div",{staticClass:"key-box"},[s("div",{staticClass:"m-right10"},[e._v(e._s(e.default_params.key+"."))]),s("div",[s("el-input",{model:{value:e.default_params.second_key,callback:function(t){e.$set(e.default_params,"second_key",t)},expression:"default_params.second_key"}})],1)]),s("Item",{attrs:{params:e.default_params_child,second:!0},on:{"fn-change":e.FnGetChild}}),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.FnConfirmAddChild}},[e._v("确 定")]),s("el-button",{on:{click:function(t){e.child_dialog=!1}}},[e._v("取 消")])],1)],1)],1)},n=[],i=s("d4ec"),l=s("bee2"),c=s("262e"),o=s("2caf"),u=s("9ab4"),r=s("1b40"),_=s("1184"),d=function(e){Object(c["a"])(s,e);var t=Object(o["a"])(s);function s(){var e;return Object(i["a"])(this,s),e=t.apply(this,arguments),e.default_params={value:[]},e.default_params_child=[],e.child_dialog=!1,e}return Object(l["a"])(s,[{key:"FnEmit",value:function(e){return e}},{key:"FnAddChild",value:function(e){this.default_params=e,this.default_params_child=e.value instanceof Array?e.value:[],this.child_dialog=!0}},{key:"FnGetChild",value:function(e){this.default_params_child=e}},{key:"FnConfirmAddChild",value:function(){this.default_params.value=this.default_params_child,this.child_dialog=!1}}]),s}(r["e"]);Object(u["a"])([Object(r["c"])({default:""})],d.prototype,"params",void 0),Object(u["a"])([Object(r["b"])("fn-change")],d.prototype,"FnEmit",null),d=Object(u["a"])([Object(r["a"])({components:{Item:_["a"]}})],d);var f=d,b=f,p=(s("8b9a"),s("2877")),h=Object(p["a"])(b,a,n,!1,null,"23ca5e23",null);t["a"]=h.exports},"61c1":function(e,t,s){"use strict";s("e6f6")},"7dbf":function(e,t,s){"use strict";s("f48f")},"8b9a":function(e,t,s){"use strict";s("f88d")},"8e80":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("action-block",{attrs:{search_option:e.search_con,create_btn:"新建子任务配置",disabled:!1},on:{"fn-search":e.FnGetList,"fn-create":e.FnShowCreate}}),s("el-table",{ref:"table",attrs:{data:e.task_list,border:"","row-class-name":e.rowStyle},on:{"selection-change":e.handleSelectionChange,"row-click":e.FnOperRow,"row-contextmenu":e.FnRightClick}},[s("el-table-column",{attrs:{type:"selection"}}),s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form",{attrs:{"label-position":"left"}},[s("el-form-item",{attrs:{label:"依赖参数"}},[s("span",[e._v(e._s(t.row.dependent_params))])]),s("el-form-item",{attrs:{label:"执行对象"}},[s("span",[e._v(e._s(t.row.executor))])]),s("el-form-item",{attrs:{label:"执行地址"}},[s("span",[e._v(e._s(t.row.executor_path))])]),s("el-form-item",{attrs:{label:"检查URL"}},[s("span",[e._v(e._s(t.row.check_url))])]),s("el-form-item",{attrs:{label:"回退URL"}},[s("span",[e._v(e._s(t.row.callback_url))])])],1)]}}])}),s("el-table-column",{attrs:{prop:"id",label:"ID"}}),s("el-table-column",{attrs:{prop:"subtask_name",label:"名称"}}),s("el-table-column",{attrs:{prop:"is_series",label:"重复配置"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[e._v(e._s(t.row.is_series))]),t.row.is_series?s("div",[e._v(e._s(t.row.serial_set_key))]):e._e()]}}])}),s("el-table-column",{attrs:{prop:"priority",label:"优先级"}}),s("el-table-column",{attrs:{prop:"retry",label:"重试次数"}}),s("el-table-column",{attrs:{prop:"timeout",label:"超时时间"}}),s("el-table-column",{attrs:{prop:"is_period",label:"周期性任务"}}),s("el-table-column",{attrs:{prop:"is_async",label:"异步任务"}}),s("el-table-column",{attrs:{prop:"timeout",label:"检查时间间隔"}}),s("el-table-column",{attrs:{prop:"is_valid",label:"is_valid"}})],1),s("el-pagination",{attrs:{"current-page":e.page_info.page_index,"page-sizes":e.page_info.page_sizes,"page-size":e.page_info.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.page_info.total},on:{"size-change":function(t){return e.FnGetList()},"current-change":function(t){return e.FnGetList()},"update:currentPage":function(t){return e.$set(e.page_info,"page_index",t)},"update:current-page":function(t){return e.$set(e.page_info,"page_index",t)},"update:pageSize":function(t){return e.$set(e.page_info,"page_size",t)},"update:page-size":function(t){return e.$set(e.page_info,"page_size",t)}}}),s("el-dialog",{attrs:{title:e.dialog_title,visible:e.create_dialog,width:"60%"},on:{"update:visible":function(t){e.create_dialog=t},close:e.FnClose}},[s("div",[s("label-block",{attrs:{label:"子任务名称"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-input",{attrs:{type:"text"},model:{value:e.sub_config.subtask_name,callback:function(t){e.$set(e.sub_config,"subtask_name",t)},expression:"sub_config.subtask_name"}})]},proxy:!0}])}),s("label-block",{staticClass:"switch-box",attrs:{label:"可重复配置"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-switch",{attrs:{"active-color":"#455cc6","inactive-color":"#ccc"},model:{value:e.sub_config.is_series,callback:function(t){e.$set(e.sub_config,"is_series",t)},expression:"sub_config.is_series"}}),e.sub_config.is_series?s("label-block",{attrs:{label:"重复配置主参数"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-input",{attrs:{type:"text"},model:{value:e.sub_config.serial_set_key,callback:function(t){e.$set(e.sub_config,"serial_set_key",t)},expression:"sub_config.serial_set_key"}})]},proxy:!0}],null,!1,2914736650)}):e._e(),e.sub_config.is_series?s("label-block",{attrs:{label:"重复配置子参数"},scopedSlots:e._u([{key:"default",fn:function(){return[s("params",{attrs:{params:e.FnHandleParam(e.default_serial_set_sub_params)},on:{"fn-change":e.FnGetSerial}})]},proxy:!0}],null,!1,1059413572)}):e._e()]},proxy:!0}])}),s("label-block",{attrs:{label:"子任务依赖参数"},scopedSlots:e._u([{key:"default",fn:function(){return[s("params",{attrs:{params:e.FnHandleParam(e.default_dependent_params)},on:{"fn-change":e.FnGetDep}})]},proxy:!0}])}),s("label-block",{attrs:{label:"子任务优先级"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-input-number",{attrs:{min:1,max:10},model:{value:e.sub_config.priority,callback:function(t){e.$set(e.sub_config,"priority",t)},expression:"sub_config.priority"}})]},proxy:!0}])}),s("label-block",{attrs:{label:"子任务重试次数"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-input-number",{attrs:{min:1,max:10},model:{value:e.sub_config.retry,callback:function(t){e.$set(e.sub_config,"retry",t)},expression:"sub_config.retry"}}),e._v(" 次 ")]},proxy:!0}])}),s("label-block",{attrs:{label:"子任务超时时间"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-input-number",{attrs:{min:1,max:86400},model:{value:e.sub_config.timeout,callback:function(t){e.$set(e.sub_config,"timeout",t)},expression:"sub_config.timeout"}}),e._v(" 秒 ")]},proxy:!0}])}),s("label-block",{staticClass:"switch-box",attrs:{label:"周期性任务"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-switch",{attrs:{"active-color":"#455cc6","inactive-color":"#ccc"},model:{value:e.sub_config.is_period,callback:function(t){e.$set(e.sub_config,"is_period",t)},expression:"sub_config.is_period"}})]},proxy:!0}])}),s("label-block",{staticClass:"switch-box",attrs:{label:"异步任务"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-switch",{attrs:{"active-color":"#455cc6","inactive-color":"#ccc"},model:{value:e.sub_config.is_async,callback:function(t){e.$set(e.sub_config,"is_async",t)},expression:"sub_config.is_async"}})]},proxy:!0}])}),s("label-block",{attrs:{label:"检查时间间隔"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-input-number",{attrs:{min:1,max:600},model:{value:e.sub_config.check_interval,callback:function(t){e.$set(e.sub_config,"check_interval",t)},expression:"sub_config.check_interval"}}),e._v(" 秒 ")]},proxy:!0}])}),s("label-block",{staticClass:"switch-box",attrs:{label:"资源调度"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-switch",{attrs:{"active-color":"#455cc6","inactive-color":"#ccc"},model:{value:e.sub_config.need_schedule,callback:function(t){e.$set(e.sub_config,"need_schedule",t)},expression:"sub_config.need_schedule"}}),e.sub_config.need_schedule?s("label-block",{attrs:{label:"调度参数"},scopedSlots:e._u([{key:"default",fn:function(){return[s("Item",{attrs:{params:e.default_schedule_output_params,type:"key"},on:{"fn-change":e.FnGetSchedule}})]},proxy:!0}],null,!1,3332012638)}):e._e()]},proxy:!0}])}),s("label-block",{attrs:{label:"子任务执行对象"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-select",{model:{value:e.sub_config.executor,callback:function(t){e.$set(e.sub_config,"executor",t)},expression:"sub_config.executor"}},e._l(e.executor_list,(function(e){return s("el-option",{key:e,attrs:{value:e,label:e}})})),1)]},proxy:!0}])}),s("label-block",{attrs:{label:"子任务执行地址"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-input",{attrs:{type:"text"},model:{value:e.sub_config.executor_path,callback:function(t){e.$set(e.sub_config,"executor_path",t)},expression:"sub_config.executor_path"}})]},proxy:!0}])}),s("label-block",{attrs:{label:"子任务检查URL"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-input",{attrs:{type:"text"},model:{value:e.sub_config.check_url,callback:function(t){e.$set(e.sub_config,"check_url",t)},expression:"sub_config.check_url"}})]},proxy:!0}])}),s("label-block",{attrs:{label:"子任务回退URL"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-input",{attrs:{type:"text"},model:{value:e.sub_config.callback_url,callback:function(t){e.$set(e.sub_config,"callback_url",t)},expression:"sub_config.callback_url"}})]},proxy:!0}])}),e.default_id?s("label-block",{staticClass:"switch-box",attrs:{label:"有效"},scopedSlots:e._u([{key:"default",fn:function(){return[s("el-switch",{attrs:{"active-color":"#455cc6","inactive-color":"#ccc"},model:{value:e.sub_config.is_valid,callback:function(t){e.$set(e.sub_config,"is_valid",t)},expression:"sub_config.is_valid"}})]},proxy:!0}],null,!1,2954258269)}):e._e()],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.FnConfirm}},[e._v("确 定")]),s("el-button",{on:{click:e.FnClose}},[e._v("取 消")])],1)]),1===e.multi_rows.length?s("right-click",{attrs:{multi_rows:e.multi_rows,menus:e.menus,name:e.multi_rows.length>0?e.multi_rows[0].subtask_name:""},on:{"fn-click":e.infoClick}}):e._e()],1)},n=[],i=s("1da1"),l=s("53ca"),c=s("d4ec"),o=s("bee2"),u=s("262e"),r=s("2caf"),_=(s("96cf"),s("d81d"),s("ac1f"),s("1276"),s("d3b7"),s("b64b"),s("159b"),s("e9c4"),s("a9e3"),s("a15b"),s("b0c0"),s("9ab4")),d=s("1b40"),f=s("c811"),b=s("98c9"),p=s("5b46"),h=s("1184"),m=s("bcc9"),g=s("e8c0"),k=s("bd4d"),y=s("cf88"),v=function(e){Object(u["a"])(s,e);var t=Object(r["a"])(s);function s(){var e;return Object(c["a"])(this,s),e=t.apply(this,arguments),e.search_con={id:{placeholder:"请输入任务ID"},subtask_name:{placeholder:"请输入任务名称"},executor:{placeholder:"请选择子任务执行对象",list:[]}},e.create_dialog=!1,e.dialog_title="",e.task_list=[],e.operate_auth=[],e.default_id="",e.default_dependent_params={},e.default_serial_set_sub_params={},e.default_schedule_output_params=[],e.executor_list=["kvm_sec_controller","kvm_ecs_controller","kvm_ebs_controller","kvm_images_controller","kvm_test_controller","kvm_nas_controller"],e.sub_config={subtask_name:"",subtask_type:"",dependent_params:[],priority:1,retry:1,timeout:60,is_series:!1,serial_set_key:"",serial_set_sub_params:[],is_period:!0,is_async:!0,check_interval:60,executor:"",executor_path:"",executor_path_body:[],check_url:"",callback_url:"",is_valid:!0,need_schedule:!1,schedule_output_params:[]},e.page_info={page_sizes:[20,50,100],page_size:20,page_index:1,total:0},e.multi_rows=[],e.menus=[{label:"编辑",value:"edit",single:!0,disabled:!1},{label:"删除",value:"delete",single:!0,disabled:!1}],e}return Object(o["a"])(s,[{key:"FnShowCreate",value:function(){this.create_dialog=!0,this.dialog_title="新建子任务配置"}},{key:"FnShowUpdate",value:function(e){this.create_dialog=!0,this.dialog_title="更新子任务配置",this.default_id=e.id,this.sub_config.subtask_name=e.subtask_name,this.sub_config.is_series=Boolean(e.is_series),this.sub_config.serial_set_key=e.serial_set_key,this.sub_config.dependent_params=[],this.sub_config.serial_set_sub_params=[],this.default_serial_set_sub_params={};var t=JSON.parse(e.dependent_params);this.default_dependent_params={};var s=[];for(var a in t)this.sub_config.serial_set_key===a&&this.sub_config.is_series?s=t[a]:this.default_dependent_params[a]=t[a];for(var n in s)this.default_serial_set_sub_params[n]=s[n];this.sub_config.priority=e.priority,this.sub_config.retry=e.retry,this.sub_config.timeout=e.timeout,this.sub_config.is_period=Boolean(e.is_period),this.sub_config.is_async=Boolean(e.is_async),this.sub_config.check_interval=e.check_interval,this.sub_config.executor=e.executor,this.sub_config.executor_path=e.executor_path,this.sub_config.executor_path_body=[],this.sub_config.check_url=e.check_url,this.sub_config.callback_url=e.callback_url,this.sub_config.is_valid=Boolean(e.is_valid),this.sub_config.need_schedule=Boolean(e.need_schedule),this.default_schedule_output_params=e.schedule_output_params.split(",").map((function(e){return{key:e}}))}},{key:"handleSelectionChange",value:function(e){this.multi_rows=e}},{key:"infoClick",value:function(e){e.label;var t=e.value;"edit"===t?this.FnShowUpdate(this.multi_rows[0]):this.FnShowDel(this.multi_rows[0].id,this.multi_rows[0].subtask_name),Object(y["a"])()}},{key:"FnOperRow",value:function(e){this.$refs.table.toggleRowSelection(e)}},{key:"rowStyle",value:function(e){var t=e.row,s=this.multi_rows.some((function(e){return e.id===t.id}));if(s)return"rowStyle"}},{key:"FnRightClick",value:function(e,t,s){console.log(s);var a=this.multi_rows.some((function(t){return t.id===e.id}));a||this.$refs.table.toggleRowSelection(e),Object(g["a"])(e,t,s)}},{key:"FnHandleParam",value:function(e){var t="",s=[];for(var a in e){e[a]instanceof Array?t="list":e[a]instanceof Object&&Object.keys(e[a]).length>0?(t=Object(l["a"])(e[a]),e[a]=this.FnHandleParam(e[a])):t=Object(l["a"])(e[a]);var n="",i="";a.indexOf(".")>0?(n=a.split(".")[0],i=a.split(".")[1]):n=a,s.push({key:n,second_key:i,type:t,value:e[a]})}return s}},{key:"FnGetDep",value:function(e){this.sub_config.dependent_params=e}},{key:"FnGetSerial",value:function(e){this.sub_config.serial_set_sub_params=e}},{key:"FnGetExec",value:function(e){this.sub_config.executor_path_body=e}},{key:"FnGetSchedule",value:function(e){this.sub_config.schedule_output_params=e}},{key:"FnClose",value:function(){this.create_dialog=!1,this.default_id="",this.sub_config.subtask_type="",this.sub_config.subtask_name="",this.sub_config.dependent_params=[],this.default_dependent_params={},this.sub_config.priority=1,this.sub_config.retry=1,this.sub_config.timeout=60,this.sub_config.is_series=!1,this.sub_config.serial_set_key="",this.sub_config.serial_set_sub_params=[],this.default_serial_set_sub_params={},this.sub_config.is_period=!0,this.sub_config.is_async=!0,this.sub_config.check_interval=60,this.sub_config.executor="",this.sub_config.executor_path="",this.sub_config.executor_path_body=[],this.sub_config.check_url="",this.sub_config.callback_url=""}},{key:"FnGetList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s,a,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},s={},t.id&&(s.id=t.id),t.subtask_type&&(s.subtask_type=t.subtask_type),t.subtask_name&&(s.subtask_name=t.subtask_name),t.executor&&(s.executor=t.executor),s.page_number=this.page_info.page_index,s.page_size=this.page_info.page_size,e.next=10,m["a"].get_subtask_list(s);case 10:a=e.sent,"Success"===a.code&&(this.task_list=a.data.subtask_info,this.page_info.total=a.data.total);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnConfirm",value:function(){var e={},t=[];if(this.sub_config.dependent_params.forEach((function(t){if("object"===t.type){var s="";s=t.second_key?t.key+".".concat(t.second_key):t.key,e[s]={},t.value instanceof Array&&t.value.forEach((function(t){e[s][t.key]=t.value}))}else e[t.key]=t.value})),this.sub_config.is_series){var s={};this.sub_config.serial_set_sub_params.forEach((function(e){s[e.key]=e.value})),this.sub_config.serial_set_key&&(e[this.sub_config.serial_set_key]=s)}this.sub_config.need_schedule&&(t=this.sub_config.schedule_output_params.map((function(e){return e.key})));var a={subtask_name:this.sub_config.subtask_name,dependent_params:JSON.stringify(e),priority:this.sub_config.priority,retry:this.sub_config.retry,timeout:this.sub_config.timeout,is_series:Number(this.sub_config.is_series),serial_set_key:this.sub_config.serial_set_key,is_period:Number(this.sub_config.is_period),is_async:Number(this.sub_config.is_async),check_interval:this.sub_config.check_interval,executor:this.sub_config.executor,executor_path:this.sub_config.executor_path,check_url:this.sub_config.check_url,callback_url:this.sub_config.callback_url,is_valid:Number(this.sub_config.is_valid),need_schedule:Number(this.sub_config.need_schedule),schedule_output_params:t.join()};this.default_id?this.FnUpdate(a):this.FnCreate(a)}},{key:"FnCreate",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].add_subtask(t);case 2:s=e.sent,"Success"===s.code&&(this.FnClose(),this.$message.success(s.msg||"成功新建子任务配置！"),this.FnGetList());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnUpdate",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].update_subtask(Object.assign({},t,{id:this.default_id}));case 2:s=e.sent,"Success"===s.code&&(this.FnClose(),this.$message.success(s.msg||"成功新建子任务配置！"),this.FnGetList());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"FnShowDel",value:function(e,t){var s=this;this.$confirm("确认删除子任务配置 -- ".concat(t),"删除提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then((function(){s.default_id=e,s.FnDel()})).catch()}},{key:"FnDel",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].delete_subtask({id:this.default_id});case 2:t=e.sent,"Success"===t.code&&(this.$message.success(t.msg||"成功删除子项目配置！"),this.FnGetList());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){this.operate_auth=this.$store.state.auth_info[this.$route.name],this.search_con.executor.list=this.executor_list.map((function(e){return{label:e,type:e}})),this.FnGetList()}}]),s}(d["e"]);v=Object(_["a"])([Object(d["a"])({components:{LabelBlock:b["a"],ActionBlock:f["a"],Params:p["a"],Item:h["a"],RightClick:k["a"]}})],v);var x=v,w=x,F=(s("7dbf"),s("2877")),j=Object(F["a"])(w,a,n,!1,null,"381b2ef2",null);t["default"]=j.exports},"938a":function(e,t,s){"use strict";s("ba52")},a15b:function(e,t,s){"use strict";var a=s("23e7"),n=s("e330"),i=s("44ad"),l=s("fc6a"),c=s("a640"),o=n([].join),u=i!=Object,r=c("join",",");a({target:"Array",proto:!0,forced:u||!r},{join:function(e){return o(l(this),void 0===e?",":e)}})},ba52:function(e,t,s){},e6f6:function(e,t,s){},e8c0:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s("cf88");function n(e,t,s){s.preventDefault(),document.addEventListener("contextmenu",(function(e){var t=e.target;if(t.closest(".el-table")){var s=document.querySelector("#menu");if(s){s.style.display="block";var n=s.offsetHeight,i=s.offsetWidth;console.log("menuHeight",n);var l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=e.clientX,u=e.clientY,r=o,_=u;c<o+i&&(r=o-i),l<u+n&&(_=l-n),s.style.left=r-250+"px",s.style.top=_-50+"px",s.style.display="block",s.style.zIndex="1000",document.addEventListener("click",a["a"])}}})),document.addEventListener("contextmenu",a["a"])}},f48f:function(e,t,s){},f88d:function(e,t,s){}}]);
//# sourceMappingURL=chunk-6ee891fd.1750128822803.js.map