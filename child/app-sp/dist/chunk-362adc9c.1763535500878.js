(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-362adc9c"],{"1e42":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"复制",placement:"bottom"}},[e("el-button",{attrs:{type:"text"},on:{click:t.copyText}},[e("svg-icon",{attrs:{icon:"copy"}})],1)],1)},i=[],o=s("9ab4"),n=s("1b40"),l=s("3673");let c=class extends n["e"]{copyText(){this.$copyText(this.content).then(()=>{this.$message.success({message:"复制成功"})}).catch(()=>{this.$message.error({message:"复制失败"})})}};Object(o["a"])([Object(n["c"])({default:""})],c.prototype,"content",void 0),c=Object(o["a"])([Object(n["a"])({components:{SvgIcon:l["a"]}})],c);var r=c,u=r,d=(s("22c9"),s("2877")),p=Object(d["a"])(u,a,i,!1,null,"23bfc843",null);e["a"]=p.exports},2203:function(t,e,s){},"22c9":function(t,e,s){"use strict";s("79c1")},"5aae":function(t,e,s){},"72e4":function(t,e,s){"use strict";s("5aae")},"79c1":function(t,e,s){},ab43:function(t,e,s){"use strict";var a=s("23e7"),i=s("c65b"),o=s("59ed"),n=s("825a"),l=s("46c4"),c=s("c5cc"),r=s("9bdd"),u=s("2a62"),d=s("2baa"),p=s("f99f"),h=s("c430"),_=!h&&!d("map",(function(){})),b=!h&&!_&&p("map",TypeError),m=h||_||b,f=c((function(){var t=this.iterator,e=n(i(this.next,t)),s=this.done=!!e.done;if(!s)return r(t,this.mapper,[e.value,this.counter++],!0)}));a({target:"Iterator",proto:!0,real:!0,forced:m},{map:function(t){n(this);try{o(t)}catch(e){u(this,"throw",e)}return b?i(b,this,t):new f(l(this),{mapper:t})}})},ca27:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("action-block",{attrs:{search_option:t.search_option},on:{"fn-search":t.search}}),e("div",{staticClass:"icon m-bottom10"},[e("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[e("el-button",{attrs:{type:"text"},on:{click:t.refresh}},[e("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1),e("el-table",{attrs:{data:t.list,border:""}},[e("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),e("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),e("el-table-column",{attrs:{prop:"nas_id",label:"文件系统ID/名称",width:"160px"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",[e("el-tooltip",{attrs:{content:s.row.nas_id,placement:"bottom",effect:"light"}},[e("span",{staticClass:"id-cell clickble",on:{click:function(e){return t.detail(s.row.nas_id)}}},[t._v(t._s(s.row.nas_id))])]),s.row.nas_id?e("Clipboard",{attrs:{content:s.row.nas_id}}):t._e()],1),e("div",[t._v(t._s(s.row.nas_name))])]}}])}),e("el-table-column",{attrs:{prop:"nas_type",label:"NAS类型"}}),e("el-table-column",{attrs:{prop:"protocol_type",label:"协议类型",width:"70"}}),e("el-table-column",{attrs:{prop:"az_name",label:"地域-可用区"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",[t._v(t._s(`${s.row.region_name}-${s.row.az_name}`))])]}}])}),e("el-table-column",{attrs:{prop:"vpc_id",label:"VPC",width:"140"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"not-clickable"},[t._v(t._s(s.row.vpc_id))]),e("div",[t._v(t._s(s.row.vpc_name))])]}}])}),e("el-table-column",{attrs:{prop:"subnet_id",label:"子网",width:"140"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"not-clickable"},[t._v(t._s(s.row.subnet_id))]),e("div",[t._v(t._s(s.row.subnet_name))])]}}])}),e("el-table-column",{attrs:{prop:"mount_path",label:"挂载地址",width:"160"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-tooltip",{attrs:{content:s.row.mount_path,placement:"bottom",effect:"light"}},[e("span",{staticClass:"id-cell"},[t._v(t._s(s.row.mount_path))])]),e("Clipboard",{attrs:{content:s.row.mount_path}})]}}])}),e("el-table-column",{attrs:{prop:"use_total_size",label:"使用量/总容量",width:"140"}}),e("el-table-column",{attrs:{prop:"used_percent",label:"空间使用率",width:"80"}}),e("el-table-column",{attrs:{prop:"billing_method",label:"计费方式",width:"80"}}),e("el-table-column",{attrs:{prop:"status_ch",label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",{class:s.row.status},[t._v(t._s(s.row.status_cn))])]}}])}),e("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"90"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",[t._v(t._s(s.row.create_time?t.moment(s.row.create_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),e("el-table-column",{attrs:{prop:"operate",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.view(s.row)}}},[t._v("查看不可用原因")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[20,50,100],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t.visible?[e("el-dialog",{attrs:{title:"查看文件系统不可用原因",visible:t.visible,width:"30%","close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(e){t.visible=e}}},[e("span",[t._v(t._s(t.reason))]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.visible=!1}}},[t._v("确 定")])],1)])]:t._e()],2)},i=[],o=(s("e9f5"),s("ab43"),s("9ab4")),n=s("1b40"),l=s("c811"),c=s("3673"),r=s("fc43"),u=s("c1df"),d=s.n(u),p=s("1e42");let h=class extends n["e"]{constructor(){super(...arguments),this.moment=d.a,this.units=["B","KB","MB","GB","TB","PB","EB","ZB"],this.search_option={customer:{placeholder:"请输入后查询",list:[{type:"customer_id",label:"客户ID"},{type:"customer_name",label:"客户名称"}],type:"composite",width:340},nas:{placeholder:"请输入后查询",list:[{type:"nas_id",label:"文件系统ID"},{type:"nas_name",label:"文件系统名称"}],type:"composite",width:340}},this.list=[],this.current=1,this.size=20,this.total=0,this.search_data={},this.auth_list=[],this.operateInfo={},this.clear=null,this.visible=!1,this.reason="",this.feeInfo={0:"按需计费",1:"包年包月",2:"按次计费"}}created(){this.auth_list=this.$store.state.auth_info[this.$route.name],this.search()}watch_pod(){this.search(this.search_data)}async getNasList(t=!0){let e=this.search_data.customersub?this.search_data.customersub:"customer_id",s=this.search_data.nassub?this.search_data.nassub:"nas_id",a=await r["a"].get_not_use_list({[e]:this.search_data.customer,[s]:this.search_data.nas,pod_id:this.$store.state.pod_id,page_index:this.current,page_size:this.size});"Success"===a.code&&(this.list=a.data.data,this.total=a.data.total_num,this.getFileUse(!1))}async getFileUse(t=!0){t||this.$store.commit("SET_LOADING",!1);let e=await r["a"].get_file_use({region_id:this.list[0].region_id,volume_ids:this.list.map(t=>t.nas_id)});"Success"===e.code&&this.list.map(t=>{let s=this.computeUnit(e.data[t.nas_id]&&e.data[t.nas_id].used?e.data[t.nas_id].used:0),a=this.computeUnit(e.data[t.nas_id]&&e.data[t.nas_id].total?e.data[t.nas_id].total:0),i=e.data[t.nas_id]&&e.data[t.nas_id].used&&e.data[t.nas_id].total?(100*Number(e.data[t.nas_id].used/e.data[t.nas_id].total)).toFixed(2):0;this.$set(t,"used_percent",i+"%"),this.$set(t,"use_total_size",`${s} / ${a}`)})}search(t={}){this.current=1,this.search_data={...t},this.getNasList()}refresh(){this.getNasList()}handleSizeChange(t){this.size=t,this.getNasList()}handleCurrentChange(t){this.current=t,this.getNasList()}computeUnit(t,e=0){return t>=1024?this.computeUnit(t/1024,++e):t.toFixed(2)+this.units[e]}view(t){this.visible=!0,this.reason=t.reason}};Object(o["a"])([Object(n["f"])("$store.state.pod_id")],h.prototype,"watch_pod",null),h=Object(o["a"])([Object(n["a"])({components:{ActionBlock:l["a"],SvgIcon:c["a"],Clipboard:p["a"]}})],h);var _=h,b=_,m=(s("72e4"),s("cab9"),s("2877")),f=Object(m["a"])(b,a,i,!1,null,"25632348",null);e["default"]=f.exports},cab9:function(t,e,s){"use strict";s("2203")}}]);
//# sourceMappingURL=chunk-362adc9c.1763535500878.js.map