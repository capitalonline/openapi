{"version":3,"sources":["webpack://AppSp/./src/views/vmOp2/storage/volume.vue","webpack://AppSp/./src/views/vmOp2/storage/volume.vue?6eb3","webpack://AppSp/./src/views/vmOp2/storage/volume.vue?e42d","webpack://AppSp/./src/views/vmOp2/storage/volume.vue?b43a","webpack://AppSp/./node_modules/core-js/modules/es.iterator.some.js","webpack://AppSp/./src/utils/vmOp2/rightClick.ts"],"names":["render","_vm","this","_c","_self","_setupProxy","attrs","search_dom","on","search","ref","disk_list","rowStyle","handleSelectionChange","filterAttribute","FnOperRow","FnRightClick","disk_state","scopedSlots","_u","key","fn","scope","class","row","status","_v","_s","status_name","disk_iops","iops_unit","band_mbps","mbps_unit","region_name","az_name","disk_type","ecs_id","current","size","total","handleSizeChange","handleCurrentChange","visible","oper_label","oper_type","mount_id","close_disk","_e","operate_btns","length","ecs_name","infoClick","staticRenderFns","DiskVolume","Vue","constructor","filter_obj","req_data","auth_list","customer_id","placeholder","disk_id","label","value","disabled","menuConditions","iops","hasPermission","mbps","watch_multi","handleMenus","includes","item","judge_disk","$message","warning","flag","every","index","arr","ecs_status","disk_status","no_charge_shutdown_ecs","title","operate","column","event","isSelected","some","$refs","disk_table","toggleRowSelection","rightClick","data","getDataList","created","$store","state","auth_info","get_disk_state","res","Service","code","trans","val","type","obj","toggleSelection","table","clearSelection","cur","get_disk_list","az_id","page_index","page_size","result","page_info","count","__decorate","Watch","immediate","deep","Component","components","ActionBlock","Iops","RightClick","component","$","call","iterate","aCallable","anObject","getIteratorDirect","iteratorClose","iteratorHelperWithoutClosingOnEarlyError","someWithoutClosingOnEarlyError","TypeError","target","proto","real","forced","predicate","error","record","counter","stop","IS_RECORD","INTERRUPTED","stopped","preventDefault","document","addEventListener","closest","menu","querySelector","style","display","menuHeight","offsetHeight","menuWidth","offsetWidth","console","log","pageHeight","window","innerHeight","documentElement","clientHeight","body","pageWidth","innerWidth","clientWidth","mouseX","clientX","mouseY","clientY","posX","posY","left","top","zIndex","hideMenu"],"mappings":"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","file":"chunk-45345322.1751615839339.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',[_c('action-block',{attrs:{\"search_option\":_vm.search_dom},on:{\"fn-search\":_vm.search}}),_c('el-table',{ref:\"disk_table\",attrs:{\"data\":_vm.disk_list,\"border\":\"\",\"row-class-name\":_vm.rowStyle},on:{\"selection-change\":_vm.handleSelectionChange,\"filter-change\":_vm.filterAttribute,\"row-click\":_vm.FnOperRow,\"row-contextmenu\":_vm.FnRightClick}},[_c('el-table-column',{attrs:{\"type\":\"selection\"}}),_c('el-table-column',{attrs:{\"prop\":\"customer_id\",\"label\":\"客户ID\"}}),_c('el-table-column',{attrs:{\"prop\":\"customer_name\",\"label\":\"客户名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"disk_id\",\"label\":\"云盘ID\"}}),_c('el-table-column',{attrs:{\"prop\":\"disk_name\",\"label\":\"云盘名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"customer_id\",\"label\":\"云盘状态\",\"filter-multiple\":false,\"filters\":_vm.disk_state,\"column-key\":\"status\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{class:scope.row.status},[_vm._v(_vm._s(scope.row.status_name))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"customer_id\",\"label\":\"IOPS及吞吐\",\"min-width\":\"110px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(\"IOPS：\"+_vm._s(scope.row.disk_iops ? `${scope.row.disk_iops}${scope.row.iops_unit}` : ''))]),_c('div',[_vm._v(\"吞吐量：\"+_vm._s(scope.row.band_mbps ? `${scope.row.band_mbps}${scope.row.mbps_unit}` : ''))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"customer_id\",\"label\":\"地域-可用区\",\"min-width\":\"110ox\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.region_name)+\"  \"+_vm._s(scope.row.az_name))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"customer_id\",\"label\":\"属性\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.disk_type===\"data\" ? `数据盘` : '系统盘'))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"customer_id\",\"label\":\"实例ID\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('pre',[_vm._v(_vm._s(scope.row.ecs_id ? scope.row.ecs_id : ''))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"dev_id\",\"label\":\"dev_id\"}}),_c('el-table-column',{attrs:{\"prop\":\"dev_name\",\"label\":\"dev_name\"}}),_c('el-table-column',{attrs:{\"prop\":\"cluster_name\",\"label\":\"集群名称\",\"min-width\":\"95px\"}}),_c('el-table-column',{attrs:{\"prop\":\"pool_name\",\"label\":\"存储池名称\"}})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.current,\"page-sizes\":[20, 50, 100],\"page-size\":_vm.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),(_vm.visible)?[_c('Iops',{attrs:{\"visible\":_vm.visible,\"title\":_vm.oper_label,\"oper_type\":_vm.oper_type,\"mount_id\":_vm.mount_id},on:{\"close\":_vm.close_disk}})]:_vm._e(),_c('right-click',{attrs:{\"multi_rows\":_vm.mount_id,\"menus\":_vm.operate_btns,\"name\":_vm.mount_id.length>0 ? _vm.mount_id[0].ecs_name: ''},on:{\"fn-click\":_vm.infoClick}})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nimport {Component, Vue, Watch} from \"vue-property-decorator\";\r\nimport ActionBlock from '@/components/search/actionBlock.vue';\r\nimport Iops from \"@/views/disk/iopsMbps.vue\";\r\nimport {Table} from \"element-ui\";\r\nimport Service from \"@/https/disk/list\";\r\nimport {trans} from \"@/utils/transIndex\";\r\nimport RightClick from \"@/views/vmOp2/component/right-click.vue\";\r\nimport {rightClick} from \"@/utils/vmOp2/rightClick\";\r\n@Component({\r\n  components: {\r\n    ActionBlock,\r\n    Iops,\r\n    RightClick\r\n  }\r\n})\r\nexport default class DiskVolume extends Vue{\r\n  private disk_list:any=[]\r\n  private current:number = 1;\r\n  private size:number=20;\r\n  private total:number = 0;\r\n  private filter_obj = null\r\n  private visible:boolean = false\r\n  private oper_type:string=\"\";\r\n  private oper_label:string=\"\";\r\n  private disk_state:any = [];\r\n  private mount_id:any=[]\r\n  private req_data:any={}\r\n  private auth_list:any=[]\r\n  private search_dom = {\r\n    customer_id:{placeholder:'请输入客户ID'},\r\n    disk_id:{placeholder:'请输入云盘ID'},\r\n    ecs_id:{placeholder:'请输入实例ID'}\r\n  }\r\n  private operate_btns:any=[\r\n    {label:'设置IOPS',value:'iops',disabled:false},\r\n    {label:'设置吞吐量',value:'mbps',disabled:false},\r\n  ]\r\n  @Watch('mount_id',{immediate:true,deep:true})\r\n  private watch_multi(){\r\n    this.handleMenus()\r\n  }\r\n  //校验按钮权限\r\n  private hasPermission(value: string) {\r\n    return this.auth_list.includes(value);\r\n  }\r\n  //将按钮的value 映射到一个返回布尔值的函数，来判断菜单项是否应该被禁用\r\n  private menuConditions: { [key: string]: () => boolean } = {\r\n    'iops': () => !this.hasPermission('iops'),\r\n    'mbps': () => !this.hasPermission('mbps')\r\n  }\r\n  //遍历菜单根据映射来判断是否禁用\r\n  private handleMenus() {\r\n    for (const item of this.operate_btns) {\r\n      item.disabled = this.menuConditions[item.value] ? this.menuConditions[item.value]() : false;\r\n    }\r\n  }\r\n  //按钮执行的方法\r\n  private infoClick(item) {\r\n    if(item.disabled){\r\n      return\r\n    }\r\n    if (!this.judge_disk('customer_id', this.mount_id[0].customer_id)) {\r\n      this.$message.warning('只允许对同一客户的云盘进行批量操作！')\r\n      return;\r\n    }\r\n    if (!this.judge_disk('az_name', this.mount_id[0].az_name)) {\r\n      this.$message.warning('只允许对同一可用区的云盘进行批量操作！')\r\n      return;\r\n    }\r\n    const flag: boolean = this.mount_id.every((item, index, arr) => {\r\n      return (item.ecs_status === \"running\" && item.status === \"running\") || (item.disk_status === \"running\" && item.ecs_status === \"shutdown\" && item.no_charge_shutdown_ecs) || item.status === \"waiting\"\r\n    })\r\n    if (!flag) {\r\n      this.$message.warning('仅支持对实例状态为运行中且云盘状态为使用中，或云盘状态为待挂载的云盘进行批量操作！')\r\n      return;\r\n    }\r\n    let title = item.value === 'iops' ? 'IOPS' : '吞吐量'\r\n    this.operate(item.value, title, this.mount_id)\r\n\r\n  }\r\n  //右键弹出操作\r\n  FnRightClick(row,column,event){\r\n    //判断当前行是否被选中，没选中时需选中并弹出菜单\r\n    const isSelected = this.mount_id.some(item => item.ecs_id === row.ecs_id);\r\n    if (!isSelected) {\r\n      (this.$refs.disk_table as any).toggleRowSelection(row)\r\n    }\r\n    rightClick(row,column,event)\r\n  }\r\n  //改变点击行得选中状态\r\n  private FnOperRow(row){\r\n    (this.$refs.disk_table as any).toggleRowSelection(row)\r\n  }\r\n  //改变选中行的背景颜色\r\n  rowStyle({row}) {\r\n    const isSelected = this.mount_id.some(item => item.disk_id === row.disk_id);\r\n    if (isSelected) {\r\n      return 'rowStyle'\r\n    }\r\n  }\r\n  private search(data:any={}){\r\n    this.current = 1;\r\n    this.req_data = {...data,...this.filter_obj};\r\n    this.getDataList()\r\n  }\r\n  created(){\r\n    this.auth_list=this.$store.state.auth_info['disk_volume']\r\n    this.get_disk_state()\r\n    this.search()\r\n  }\r\n  //获取云盘状态列表\r\n  private async get_disk_state(){\r\n    let res:any = await Service.get_disk_state({})\r\n    if(res.code===\"Success\"){\r\n      this.disk_state = trans(res.data,'status_name','status','text','value')\r\n    }\r\n  }\r\n  //判断已选择云盘是否符合操作要求\r\n  private judge_disk(label:string,val:any){\r\n    return this.mount_id.every((item,index,arr)=>{\r\n      return item[label] ===val\r\n    })\r\n  }\r\n  private operate(type,title,obj:any){\r\n    this.mount_id = obj\r\n    this.oper_type = type\r\n    this.oper_label = title\r\n    this.visible = true;\r\n  }\r\n  private close_disk(val:string='1'){\r\n    this.visible = false\r\n    this.mount_id=[]\r\n    this.oper_type = ''\r\n    this.toggleSelection()\r\n    if(val==='1'){\r\n      this.current =1;\r\n    }\r\n    this.getDataList()\r\n  }\r\n  private toggleSelection() {\r\n    const table = this.$refs.disk_table as Table\r\n    table.clearSelection()\r\n  }\r\n  private handleSelectionChange(data){\r\n    this.mount_id = data\r\n  }\r\n  private filterAttribute(obj:any){\r\n    this.filter_obj = {...this.filter_obj,...obj}\r\n    this.search(this.req_data)\r\n  }\r\n  private handleSizeChange(size){\r\n    this.size = size\r\n    this.getDataList()\r\n  }\r\n  private handleCurrentChange(cur){\r\n    this.current = cur\r\n    this.getDataList()\r\n  }\r\n  private async getDataList(){\r\n    const {req_data}=this\r\n    let res:any = await Service.get_disk_list({\r\n      az_id:this.$store.state.az_id,\r\n      disk_id:req_data.disk_id || '',\r\n      ecs_id:req_data.ecs_id || '',\r\n      status:req_data.status ? req_data.status[0] : '',\r\n      customer_id:req_data.customer_id || '',\r\n      page_index:this.current,\r\n      page_size:this.size,\r\n    })\r\n    if(res.code===\"Success\"){\r\n      this.disk_list = res.data.result || []\r\n      this.total = res.data.page_info.count || 0;\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./volume.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./volume.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./volume.vue?vue&type=template&id=6c71c064&scoped=true\"\nimport script from \"./volume.vue?vue&type=script&lang=ts\"\nexport * from \"./volume.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c71c064\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar someWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('some', TypeError);\n\n// `Iterator.prototype.some` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.some\n$({ target: 'Iterator', proto: true, real: true, forced: someWithoutClosingOnEarlyError }, {\n  some: function some(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (someWithoutClosingOnEarlyError) return call(someWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop();\n    }, { IS_RECORD: true, INTERRUPTED: true }).stopped;\n  }\n});\n","import {hideMenu} from \"@/utils/vmOp2/hideMenu\";\r\n\r\nexport function rightClick(row, column, event) {\r\n  // 阻止浏览器默认右键菜单弹出\r\n  event.preventDefault();\r\n  // 获取菜单元素\r\n  document.addEventListener('contextmenu', (event) => {\r\n    const target = event.target as HTMLElement;\r\n  if (target.closest('.el-table')) {\r\n    let menu = document.querySelector(\"#menu\") as HTMLElement;\r\n    if (menu) {\r\n      menu.style.display = 'block';\r\n      // 计算菜单的高度和宽度\r\n      let menuHeight = menu.offsetHeight;\r\n      let menuWidth = menu.offsetWidth;\r\n      console.log('menuHeight', menuHeight)\r\n\r\n      // 获取当前页面的高度和宽度\r\n      let pageHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\r\n      let pageWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\r\n\r\n\r\n      // 获取鼠标的位置\r\n      let mouseX = event.clientX;\r\n      let mouseY = event.clientY;\r\n\r\n      //定义菜单出现的位置变量\r\n      let posX = mouseX\r\n      let posY = mouseY\r\n      // 检查是否会溢出屏幕右侧，如果是，则将菜单镜像到左侧\r\n      if (pageWidth < mouseX + menuWidth) {\r\n        posX = mouseX - menuWidth;\r\n      }\r\n\r\n      // 检查是否会溢出屏幕底部，如果是，则整体向上移动菜单\r\n      if (pageHeight < mouseY + menuHeight) {\r\n        posY = pageHeight - menuHeight\r\n      }\r\n\r\n      // 设置菜单的位置\r\n      menu.style.left = posX - 250 + \"px\";\r\n      menu.style.top = posY - 50 + \"px\";\r\n      menu.style.display = \"block\";\r\n      menu.style.zIndex = '1000';\r\n      //监听点击事件，点击时隐藏右键菜单\r\n      document.addEventListener('click', hideMenu);\r\n    }\r\n  }\r\n  })\r\n  document.addEventListener('contextmenu', hideMenu);\r\n}\r\n"],"sourceRoot":""}