(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-0e7d7ee8"],{"06c5":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3"),n("ac1f"),n("00b4");var a=n("6b75");function i(e,t){if(e){if("string"===typeof e)return Object(a["a"])(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(a["a"])(e,t):void 0}}},"1a23":function(e,t,n){},"1c59":function(e,t,n){"use strict";var a=n("6d61"),i=n("6566");a("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("6b75");function i(e){if(Array.isArray(e))return Object(a["a"])(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=n("06c5");n("d9e2");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return i(e)||r(e)||Object(s["a"])(e)||o()}},4470:function(e,t,n){},"46bf":function(e,t,n){},4780:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return l}));Math.floor(1e6*(9*Math.random()+1)),Math.floor(1e6*(9*Math.random()+1)),Math.floor(1e6*(9*Math.random()+1)),Math.floor(1e6*(9*Math.random()+1)),Math.floor(1e6*(9*Math.random()+1)),Math.floor(1e6*(9*Math.random()+1)),Math.floor(1e6*(9*Math.random()+1)),Math.floor(1e6*(9*Math.random()+1)),Math.floor(1e6*(9*Math.random()+1));var a=[{id:">=",title:">="},{id:"<=",title:"<="},{id:">",title:">"},{id:"<",title:"<"}],i=[{id:"1",title:"1分钟一个周期"},{id:"15",title:"15分钟一个周期"},{id:"30",title:"30分钟一个周期"},{id:"60",title:"60分钟一个周期"}],r=[{id:"1",title:"持续1个周期"},{id:"3",title:"持续3个周期"},{id:"5",title:"持续5个周期"},{id:"10",title:"持续10个周期"},{id:"15",title:"持续15个周期"},{id:"30",title:"持续30个周期"}],s=[{id:"2",title:"严重"},{id:"1",title:"告警"},{id:"0",title:"普通"}],o=[{id:"email",name:"邮箱"},{id:"phone",name:"短信"}],c=[{id:"abnormal_event",title:"异常事件"}],l=[{id:"900",title:"15分钟"},{id:"1800",title:"30分钟"},{id:"3600",title:"60分钟"},{id:"10800",title:"3小时"},{id:"21600",title:"6小时"},{id:"43200",title:"12小时"},{id:"86400",title:"24小时"}]},"4ca5":function(e,t,n){"use strict";n("764b")},"4d16":function(e,t,n){},"4fad":function(e,t,n){var a=n("d039"),i=n("861d"),r=n("c6b6"),s=n("d86b"),o=Object.isExtensible,c=a((function(){o(1)}));e.exports=c||s?function(e){return!!i(e)&&((!s||"ArrayBuffer"!=r(e))&&(!o||o(e)))}:o},"57e0":function(e,t,n){},6062:function(e,t,n){n("1c59")},6566:function(e,t,n){"use strict";var a=n("9bf2").f,i=n("7c73"),r=n("e2cc"),s=n("0366"),o=n("19aa"),c=n("2266"),l=n("7dd0"),u=n("2626"),d=n("83ab"),f=n("f183").fastKey,_=n("69f3"),m=_.set,p=_.getterFor;e.exports={getConstructor:function(e,t,n,l){var u=e((function(e,a){o(e,_),m(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=a&&c(a,e[l],{that:e,AS_ENTRIES:n})})),_=u.prototype,h=p(t),g=function(e,t,n){var a,i,r=h(e),s=b(e,t);return s?s.value=n:(r.last=s={index:i=f(t,!0),key:t,value:n,previous:a=r.last,next:void 0,removed:!1},r.first||(r.first=s),a&&(a.next=s),d?r.size++:e.size++,"F"!==i&&(r.index[i]=s)),e},b=function(e,t){var n,a=h(e),i=f(t);if("F"!==i)return a.index[i];for(n=a.first;n;n=n.next)if(n.key==t)return n};return r(_,{clear:function(){var e=this,t=h(e),n=t.index,a=t.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete n[a.index],a=a.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,n=h(t),a=b(t,e);if(a){var i=a.next,r=a.previous;delete n.index[a.index],a.removed=!0,r&&(r.next=i),i&&(i.previous=r),n.first==a&&(n.first=i),n.last==a&&(n.last=r),d?n.size--:t.size--}return!!a},forEach:function(e){var t,n=h(this),a=s(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:n.first){a(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!b(this,e)}}),r(_,n?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),d&&a(_,"size",{get:function(){return h(this).size}}),u},setStrong:function(e,t,n){var a=t+" Iterator",i=p(t),r=p(a);l(e,t,(function(e,t){m(this,{type:a,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},"6b75":function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.d(t,"a",(function(){return a}))},"6d61":function(e,t,n){"use strict";var a=n("23e7"),i=n("da84"),r=n("e330"),s=n("94ca"),o=n("6eeb"),c=n("f183"),l=n("2266"),u=n("19aa"),d=n("1626"),f=n("861d"),_=n("d039"),m=n("1c7e"),p=n("d44e"),h=n("7156");e.exports=function(e,t,n){var g=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),v=g?"set":"add",y=i[e],k=y&&y.prototype,w=y,O={},j=function(e){var t=r(k[e]);o(k,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(b&&!f(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return b&&!f(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(b&&!f(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})},z=s(e,!d(y)||!(b||k.forEach&&!_((function(){(new y).entries().next()}))));if(z)w=n.getConstructor(t,e,g,v),c.enable();else if(s(e,!0)){var x=new w,S=x[v](b?{}:-0,1)!=x,C=_((function(){x.has(1)})),R=m((function(e){new y(e)})),E=!b&&_((function(){var e=new y,t=5;while(t--)e[v](t,t);return!e.has(-0)}));R||(w=t((function(e,t){u(e,k);var n=h(new y,e,w);return void 0!=t&&l(t,n[v],{that:n,AS_ENTRIES:g}),n})),w.prototype=k,k.constructor=w),(C||E)&&(j("delete"),j("has"),g&&j("get")),(E||S)&&j(v),b&&k.clear&&delete k.clear}return O[e]=w,a({global:!0,forced:w!=y},O),p(w,e),b||n.setStrong(w,e,g),w}},7493:function(e,t,n){"use strict";n("1a23")},"764b":function(e,t,n){},"79dc":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:"报警策略详情",visible:e.detail_visible,width:"800px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.detail_visible=t},close:e.back}},[n("div",[n("div",{staticClass:"m-bottom10"},[n("span",[e._v("策略名称：")]),n("span",[e._v(e._s(this.rows[0].name))])]),e._l(e.list,(function(t){return n("div",{key:t.id,staticClass:"m-bottom10"},[n("p",{staticClass:"m-bottom10"},[e._v(e._s(t.id))]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:t.rule_list,"max-height":"350",border:""}},[n("el-table-column",{attrs:{prop:"name",label:"规则名称"}}),n("el-table-column",{attrs:{prop:"desc",label:"规则描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",e._l(t.row.desc,(function(t){return n("div",{key:t},[e._v(e._s(t))])})),0)]}}],null,!0)}),n("el-table-column",{attrs:{prop:"notie",label:"通知方式"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.notice,(function(t,a){return n("div",{key:a},[e._v(e._s(t))])}))}}],null,!0)})],1)],1)})),n("div",{staticClass:"back"},[n("el-button",{on:{click:function(t){return e.back("0")}}},[e._v("返回")])],1)],2)])],1)},i=[],r=n("2909"),s=n("1da1"),o=n("d4ec"),c=n("bee2"),l=n("262e"),u=n("2caf"),d=(n("96cf"),n("d81d"),n("99af"),n("d3b7"),n("159b"),n("a4d3"),n("e01a"),n("b0c0"),n("25f0"),n("4de4"),n("a15b"),n("9ab4")),f=n("1b40"),_=n("4780"),m=n("2966"),p=n("8ce4"),h=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.list=[],e.index_list=[],e.loading=!0,e.event_name=[],e}return Object(c["a"])(n,[{key:"created",value:function(){this.getEventList()}},{key:"getEventList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].get_event_list({type:"all"});case 2:t=e.sent,"Success"===t.code&&(n=["event_name_zh","event_id"],a=["title","id"],t.data.map((function(e){i.event_name=[].concat(Object(r["a"])(i.event_name),Object(r["a"])(e.list))})),this.event_name=Object(p["b"])(this.event_name,a,n),this.get_index_list());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_index_list",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].get_index_list({type:"all"});case 2:t=e.sent,"Success"===t.code&&(t.data&&t.data.forEach((function(e){var t=[];e.metric_infos.forEach((function(e){t.push({value:e.metric,label:e.metric,unit:e.unit,description:e.description})})),n.index_list.push({value:e.name,label:e.name,children:t})})),this.get_list());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_list",value:function(){var e=this;1===this.rows.length&&this.rows[0].rules.forEach((function(t){var n=[];t.ruleRecords.forEach((function(e){n.push({range:e.metricCondition,num:e.metricValue,cycle_num:e.metricPeriodNum.toString(),alram_type:"event"===e.alarmType?"":e.level.toString(),notice:"event"===e.alarmType?[]:e.alarmMethod,metricUnit:e.metricUnit})}));var a={id:t.id,name:t.name,desc:"event"===t.ruleRecords[0].alarmType?["".concat(e.trans_arr(t.ruleRecords[0].level.toString(),_["a"])," | ").concat(e.trans_arr(t.ruleRecords[0].eventId,e.event_name))]:n.map((function(n){return"".concat(e.getDescription(t.ruleRecords[0].metricID)," ").concat(n.range," ").concat(n.num).concat(n.metricUnit," ").concat(e.trans_arr(n.alram_type,_["a"])," 持续").concat(n.cycle_num,"次就报警")})),notice:"event"===t.ruleRecords[0].alarmType?[e.getNotice(t.ruleRecords[0].alarmMethod)]:n.map((function(t){return e.getNotice(t.notice)}))},i=e.list.filter((function(e){return e.id===t.productType}));i.length>0?e.list.map((function(e){return e.id===t.productType&&(e.rule_list=[].concat(Object(r["a"])(e.rule_list),[a])),e})):e.list.push({id:t.productType,name:t.productType,rule_list:[a]})})),this.loading=!1}},{key:"getDescription",value:function(e){var t="";return this.index_list.forEach((function(n){n.children.forEach((function(n){n.value===e&&(t=n.description)}))})),t}},{key:"getNotice",value:function(e){var t={email:"邮件",phone:"短信"},n=e.map((function(e){return t[e]}));return n.join(" | ")}},{key:"trans_arr",value:function(e,t){if("string"===typeof e){var n=t.filter((function(t){return t.id===e}));return n[0].title}var a=[];return t.map((function(t){e.indexOf(t.id)>-1&&a.push(t.title)})),a}},{key:"back",value:function(e){this.detail_visible=!1}}]),n}(f["e"]);Object(d["a"])([Object(f["d"])("visible")],h.prototype,"detail_visible",void 0),Object(d["a"])([Object(f["c"])({default:function(){return[]}})],h.prototype,"rows",void 0),Object(d["a"])([Object(f["b"])("close")],h.prototype,"back",null),h=Object(d["a"])([Object(f["a"])({})],h);var g=h,b=g,v=(n("9d8e"),n("2877")),y=Object(v["a"])(b,a,i,!1,null,"1f4562d7",null);t["a"]=y.exports},"843f":function(e,t,n){},"85d0":function(e,t,n){"use strict";n("46bf")},"8a9f":function(e,t,n){"use strict";n("843f")},9074:function(e,t,n){"use strict";var a=n("81a9"),i=n("bff7");t["a"]={get_customer_name:function(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/get_customer_name/",e))},get_region_az_list:function(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/region_az_info/",e))},get_net_list:function(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/net_info/",e))},get_all_cpu_ram:function(){return Object(a["a"])(Object(i["b"])("GET","/ecs/ram_cpu_list/"))},get_category_list:function(e){return Object(a["a"])(Object(i["b"])("GET","/ecs/ecs_category_list/",e))},ecs_family_info:function(e){return Object(a["a"])(Object(i["b"])("GET","/ecs/ecs_family_info/",e))},get_os_list:function(e){return Object(a["a"])(Object(i["b"])("POST","/img/image_info/",e))},get_price:function(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/get_price/",e))},create_instance:function(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/create_ecs/",e))},get_ecs_limit:function(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/get_ecs_limit/",e))},get_ram_cpu_price_list:function(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/ecs_spec_attach_price/",e))},difference_price:function(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/ecs_difference_price/",e))},change_configure_limit:function(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/change_configure_limit/",e))}}},"9b34":function(e,t,n){},"9d8e":function(e,t,n){"use strict";n("9b34")},a630:function(e,t,n){var a=n("23e7"),i=n("4df4"),r=n("1c7e"),s=!r((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:s},{from:i})},bb2f:function(e,t,n){var a=n("d039");e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bc94:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("action-block",{attrs:{search_option:e.search},on:{"fn-search":e.fn_search},scopedSlots:e._u([{key:"default",fn:function(){return[n("el-button",{attrs:{type:"primary",disabled:!e.auth_list.includes("alarm_strategy_create")},on:{click:e.create}},[e._v("创建策略")])]},proxy:!0}])}),n("el-table",{ref:"strategy_table",attrs:{data:e.list,border:"","row-class-name":e.rowStyle},on:{"selection-change":e.handleSelectionChange,"row-click":e.FnOperRow,"row-contextmenu":e.FnRightClick}},[n("el-table-column",{attrs:{type:"selection"}}),n("el-table-column",{attrs:{prop:"id",label:"策略名称/ID",width:"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name)+" / "+e._s(t.row.id))])]}}])}),n("el-table-column",{attrs:{prop:"instances",label:"被应用过的产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"used-products"},[t.row.instances&&t.row.instances.length>2?n("span",{staticClass:"app"},[e._v(" "+e._s(t.row.instances?t.row.instances.length>2?t.row.instances[0].instance_name+";"+t.row.instances[1].instance_name+";...":t.row.instances.join(";"):"--"))]):n("span",[e._v(e._s(t.row.instances_name.join(";")))]),t.row.instances?n("i",{staticClass:"el-icon-document",on:{click:function(n){return e.go_detail(t.row)}}}):e._e()])]}}])}),n("el-table-column",{attrs:{prop:"enable",label:"策略状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.enable?"已启用":"未启用"))])]}}])}),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.createTime?e.moment(t.row.createTime).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),n("el-table-column",{attrs:{prop:"updateTime",label:"修改时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.updateTime?e.moment(t.row.updateTime).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[2,20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e.drawer?[n("ApplyStrategy",{attrs:{drawer:e.drawer,list:e.strategy_rows,enable:e.enable},on:{"update:drawer":function(t){e.drawer=t},close:e.close_apply}})]:e._e(),e.del_visible?[n("common-del",{attrs:{visible:e.del_visible,title:"删除策略",rows:e.strategy_rows},on:{"update:visible":function(t){e.del_visible=t},close:e.close_apply}})]:e._e(),e.detail_visible?[n("apply-detail",{attrs:{visible:e.detail_visible,rows:e.strategy_rows},on:{"update:visible":function(t){e.detail_visible=t},close:e.close_apply}})]:e._e(),e.strategy_detail?[n("Detail",{attrs:{visible:e.strategy_detail,rows:e.strategy_rows},on:{"update:visible":function(t){e.strategy_detail=t},close:e.close_apply}})]:e._e(),n("right-click",{attrs:{multi_rows:e.strategy_rows,menus:e.menus,name:e.strategy_rows.length>0?e.strategy_rows[0].name:""},on:{"fn-click":e.handle}})],2)},i=[],r=n("1da1"),s=n("d4ec"),o=n("bee2"),c=n("262e"),l=n("2caf"),u=(n("96cf"),n("ac1f"),n("841c"),n("d3b7"),n("159b"),n("caad"),n("2532"),n("b0c0"),n("d81d"),n("a15b"),n("9ab4")),d=n("1b40"),f=n("c811"),_=n("d179"),m=n("79dc"),p=n("2966"),h=n("7afc"),g=n("e785"),b=n("c1df"),v=n.n(b),y=n("e8c0"),k=n("bd4d"),w=n("cf88"),O=function(e){Object(c["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.search={name:{placeholder:"请输入策略名称"}},e.list=[],e.drawer=!1,e.search_data={},e.current=1,e.size=20,e.total=0,e.moment=v.a,e.del_visible=!1,e.detail_visible=!1,e.strategy_detail=!1,e.strategy_rows=[],e.enable=!0,e.auth_list=[],e.menus=[{label:"修改",value:"edit",single:!0,disabled:!1},{label:"详情",value:"detail",single:!0,disabled:!1},{label:"应用",value:"apply",disabled:!1},{label:"停用",value:"stop",disabled:!1},{label:"删除",value:"delete",disabled:!1}],e}return Object(o["a"])(n,[{key:"created",value:function(){this.fn_search(),this.auth_list=this.$store.state.auth_info["alarm_strategy"]}},{key:"watch_multi",value:function(e){e.length>0&&this.handleMenus()}},{key:"watch_drawer",value:function(e){this.clear_info(e)}},{key:"watch_del_visible",value:function(e){this.clear_info(e)}},{key:"watch_strategy_detail",value:function(e){this.clear_info(e)}},{key:"handleMenus",value:function(){var e=this;this.menus.forEach((function(t){t.disabled=e.judge(t.value),"apply"===t.value&&(t.label=e.strategy_rows.length>=1?"应用":e.strategy_rows[0].enable?"应用详情":"应用")}))}},{key:"judge",value:function(e){var t=!1;switch(e){case"edit":case"delete":t=this.strategy_rows.every((function(e){return e.enable}))||!this.auth_list.includes(e);break;case"stop":t=!this.strategy_rows.every((function(e){return e.enable}))||!this.auth_list.includes(e);break;case"detail":case"apply":t=!this.auth_list.includes(e);break;default:return console.warn("Unknown value passed to judge: ".concat(e)),!1}return t}},{key:"handle",value:function(e){var t=this,n=(e.label,e.value),a=1===this.strategy_rows.length,i=a?this.strategy_rows[0]:null,r={edit:function(){return t.edit(i.id)},detail:function(){return t.detail(i)},apply:function(){return t.apply(!0,i)},stop:function(){return t.apply(!1,i)},delete:function(){return t.del(i)}},s={apply:function(){return t.apply(!0,"")},stop:function(){return t.apply(!1,"")},delete:function(){return t.del(!1)}};a?r[n]&&r[n]():s[n]&&s[n](),Object(w["a"])()}},{key:"FnOperRow",value:function(e){this.$refs.strategy_table.toggleRowSelection(e)}},{key:"rowStyle",value:function(e){var t=e.row,n=this.strategy_rows.some((function(e){return e.id===t.id}));if(n)return"rowStyle"}},{key:"FnRightClick",value:function(e,t,n){var a=this.strategy_rows.some((function(t){return t.id===e.id}));a||this.$refs.strategy_table.toggleRowSelection(e),Object(y["a"])(e,t,n)}},{key:"clear_info",value:function(e){e||(this.strategy_rows=[],this.toggleSelection())}},{key:"toggleSelection",value:function(){var e=this.$refs.strategy_table;e.clearSelection()}},{key:"fn_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.search_data=e,this.getStrategyList()}},{key:"getStrategyList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.search_data.name,e.next=3,p["a"].get_strategy_list({name:t,page:this.current,pageSize:this.size});case 3:n=e.sent,"Success"===n.code&&(this.list=n.data.datas||[],this.list.map((function(e){return e=Object.assign(e,{instances_name:e.instances.map((function(e){return e.instance_name}))}),e})),this.total=n.data.total||0);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSizeChange",value:function(e){this.size=e,this.getStrategyList()}},{key:"handleCurrentChange",value:function(e){this.current=e,this.getStrategyList()}},{key:"handleSelectionChange",value:function(e){this.strategy_rows=e}},{key:"create",value:function(){this.$router.push("/alarm_strategy/create")}},{key:"go_detail",value:function(e){this.strategy_rows=[e],this.detail_visible=!0}},{key:"edit",value:function(e){this.$router.push({path:"/alarm_strategy/create",query:{id:e}})}},{key:"detail",value:function(e){this.strategy_rows=[e],this.strategy_detail=!0}},{key:"del",value:function(e){e||0!==this.strategy_rows.length?this.strategy_rows.every((function(e){return!e.enable}))?(e&&(this.strategy_rows=[e]),this.del_visible=!0):this.$message.warning("已启用的策略不能被删除！"):this.$message.warning("请先勾选策略！")}},{key:"stop",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.strategy_rows.map((function(e){var n=e.az,a=e.callbackURL,i=e.contactGroupIDs,r=e.customerID,s=e.customer_name,o=e.regions,c=e.silentPeriod,l=e.effectStartTime,u=e.effectEndTime,d=e.enable,f=e.id,_=e.name,m={az:n,callbackURL:a,contactGroupIDs:i,customerID:r,customer_name:s,regions:o,silentPeriod:c,effectStartTime:l,effectEndTime:u,enable:!d,id:f,name:_};return t.push(m),e})),e.next=4,p["a"].apply_strategy({data:t});case 4:n=e.sent,"Success"===n.code&&(this.$message.warning("停用策略任务下发成功！"),this.strategy_rows=[],this.getStrategyList());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"apply",value:function(e,t){var n=this;if(t&&(this.strategy_rows=[t]),t||0!==this.strategy_rows.length)if(t||this.strategy_rows.every((function(t){return t.enable===!e})))if(e)this.drawer=!0,this.enable=e;else{var a=this.strategy_rows.map((function(e){return e.name})),i=this.$createElement;this.$msgbox({title:"提示",message:i("p",null,[i("span",null,"确定停用 "),i("i",{style:"color: #455cc6"},"".concat(a.join(","))),i("span",null,"  这些策略吗, 是否继续?")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",iconClass:"el-icon-warning"}).then((function(){n.stop()})).catch((function(){n.$message({type:"info",message:"已取消停用"}),n.strategy_rows=[],n.toggleSelection()}))}else this.$message.warning("只允许对".concat(e?"未应用":"已应用","的策略执行批量操作！"));else this.$message.warning("请先勾选策略！")}},{key:"close_apply",value:function(e){this.strategy_rows=[],"1"===e&&this.getStrategyList()}}]),n}(d["e"]);Object(u["a"])([Object(d["f"])("strategy_rows",{immediate:!0,deep:!0})],O.prototype,"watch_multi",null),Object(u["a"])([Object(d["f"])("drawer")],O.prototype,"watch_drawer",null),Object(u["a"])([Object(d["f"])("del_visible")],O.prototype,"watch_del_visible",null),Object(u["a"])([Object(d["f"])("strategy_detail")],O.prototype,"watch_strategy_detail",null),O=Object(u["a"])([Object(d["a"])({components:{RightClick:k["a"],ActionBlock:f["a"],ApplyStrategy:_["a"],CommonDel:h["a"],ApplyDetail:g["a"],Detail:m["a"]}})],O);var j=O,z=j,x=(n("d577"),n("2877")),S=Object(x["a"])(z,a,i,!1,null,"054d0329",null);t["default"]=S.exports},d179:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-drawer",{attrs:{title:"应用策略",visible:e.drawer_sync,wrapperClosable:!1,size:"40%"},on:{"update:visible":function(t){e.drawer_sync=t}}},[n("div",{staticClass:"drawer"},[n("el-form",{ref:"form",staticClass:"demo-dynamic",attrs:{model:e.form_data,"label-width":"150px"}},[n("el-form-item",{attrs:{prop:"customer_id",label:"客户ID",rules:[{required:!1,trigger:"blur",validator:e.validate_customer}]}},[n("el-input",{model:{value:e.form_data.customer_id,callback:function(t){e.$set(e.form_data,"customer_id",t)},expression:"form_data.customer_id"}})],1),n("el-form-item",{attrs:{prop:"customer_name",label:"客户名称"}},[n("div",[e._v(e._s(e.form_data.customer_name))])]),n("Region",{attrs:{region_id:e.region_az_id,customerId:e.form_data.customer_id,customerName:e.form_data.customer_name},on:{get_area_id:e.get_area_id}}),n("el-form-item",{attrs:{prop:"cycle",label:"通道沉默周期:"}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("span",[e._v("通道沉默周期:")]),n("el-tooltip",{attrs:{placement:"bottom",effect:"light",content:"报警发生后未恢复正常，间隔多久重复发送一次报警通知"}},[n("i",{staticClass:"el-icon-question"})])],1),n("el-select",{attrs:{placeholder:"请选择通道沉默周期"},model:{value:e.form_data.cycle,callback:function(t){e.$set(e.form_data,"cycle",t)},expression:"form_data.cycle"}},e._l(e.cycle_list,(function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),n("el-form-item",{attrs:{prop:"time",label:"生效时间:"}},[n("div",{staticClass:"time"},[n("el-time-select",{attrs:{clearable:!1,editable:!1,"picker-options":{format:"HH:mm",start:"00:00",step:"01:00",end:"23:00"},placeholder:"开始时间"},model:{value:e.form_data.start_time,callback:function(t){e.$set(e.form_data,"start_time",t)},expression:"form_data.start_time"}}),e._v(" 至  "),n("el-time-select",{attrs:{clearable:!1,editable:!1,"picker-options":{format:"HH:mm",start:"00:59",step:"01:00",end:"23:59"},placeholder:"结束时间"},model:{value:e.form_data.end_time,callback:function(t){e.$set(e.form_data,"end_time",t)},expression:"form_data.end_time"}})],1)]),n("el-form-item",{attrs:{prop:"address",label:"报警回调:"}},[n("el-input",{attrs:{placeholder:"请输入报警回调地址"},model:{value:e.form_data.address,callback:function(t){e.$set(e.form_data,"address",t)},expression:"form_data.address"}})],1),n("el-form-item",{attrs:{prop:"notice_user",label:"通知对象:",rules:[{required:!0,message:"请选择通知对象",trigger:"blur"}]}},[n("div",{staticClass:"notice-user"},[n("el-select",{attrs:{multiple:"","multiple-limit":"7",placeholder:"请选择通知对象",filterable:"","filter-method":e.getContactGroupList,"popper-class":"noticer","collapse-tags":""},on:{"visible-change":e.changeGroup},model:{value:e.form_data.notice_user,callback:function(t){e.$set(e.form_data,"notice_user",t)},expression:"form_data.notice_user"}},e._l(e.contact_group_list,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)])],1),n("div",{staticClass:"foot-btn"},[this.list[0].enable?e._e():n("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认应用")]),n("el-button",{on:{click:function(t){return e.close("0")}}},[e._v(e._s(this.list[0].enable?"返回":"取消"))])],1)],1)])},i=[],r=n("5530"),s=n("1da1"),o=n("d4ec"),c=n("bee2"),l=n("262e"),u=n("2caf"),d=(n("96cf"),n("d3b7"),n("25f0"),n("d9e2"),n("d81d"),n("b0c0"),n("9ab4")),f=n("1b40"),_=n("9074"),m=n("2966"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"apply"},[n("el-form",{ref:"form",staticClass:"demo-dynamic",attrs:{model:e.form_data,"label-width":"150px"}},[n("el-form-item",{attrs:{prop:"regions",label:"地域："}},[n("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click","popper-class":"popper"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",[e.area_list.length>0?n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:function(t){return e.handleCheckAllChange(t,"area_list")}},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]):e._e(),e._l(e.area_list,(function(t){return n("div",{key:t.region_group_id},[n("el-divider",{staticClass:"divider",attrs:{"content-position":"left"}},[e._v(e._s(t.region_group_name))]),n("el-checkbox",{staticClass:"group-all",attrs:{indeterminate:t.isIndeterminate_group},on:{change:function(n){return e.handleCheckGroupChange(n,t.region_group_id,"area_list")}},model:{value:t.check,callback:function(n){e.$set(t,"check",n)},expression:"item.check"}},[e._v("全选")]),n("el-checkbox-group",{staticClass:"group",model:{value:e.form_data.regions,callback:function(t){e.$set(e.form_data,"regions",t)},expression:"form_data.regions"}},e._l(t.region_list,(function(t){return n("el-checkbox",{key:t.region_id,attrs:{label:t.region_id}},[e._v(e._s(t.region_name))])})),1)],1)})),0===e.area_list.length?n("div",{staticClass:"no-data"},[e._v("暂无数据")]):e._e()],2),n("el-select",{ref:"region-select",staticClass:"region",attrs:{slot:"reference",multiple:"","allow-create":"","popper-class":"select-area"},slot:"reference",model:{value:e.sel_region,callback:function(t){e.sel_region=t},expression:"sel_region"}})],1)],1),n("el-form-item",{attrs:{prop:"az",label:"可用区:"}},[n("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click","popper-class":"popper"},model:{value:e.az_visible,callback:function(t){e.az_visible=t},expression:"az_visible"}},[n("div",[e.az_list.length>0?n("el-checkbox",{attrs:{indeterminate:e.az_isIndeterminate},on:{change:function(t){return e.handleCheckAllChange(t,"az_list")}},model:{value:e.az_checkAll,callback:function(t){e.az_checkAll=t},expression:"az_checkAll"}},[e._v("全选")]):e._e(),e._l(e.az_list,(function(t){return n("div",{key:t.region_group_id},[n("el-divider",{staticClass:"divider",attrs:{"content-position":"left"}},[e._v(e._s(t.region_group_name))]),n("el-checkbox",{staticClass:"group-all",attrs:{indeterminate:t.isIndeterminate_group},on:{change:function(n){return e.handleCheckGroupChange(n,t.region_group_id,"az_list")}},model:{value:t.check,callback:function(n){e.$set(t,"check",n)},expression:"item.check"}},[e._v("全选")]),n("el-checkbox-group",{staticClass:"group",model:{value:e.form_data.az,callback:function(t){e.$set(e.form_data,"az",t)},expression:"form_data.az"}},e._l(t.region_list,(function(t){return n("el-checkbox",{key:t.region_id,attrs:{label:t.region_id}},[e._v(e._s(t.region_name))])})),1)],1)})),0===e.az_list.length?n("div",{staticClass:"no-data"},[e._v("暂无数据")]):e._e()],2),n("el-select",{ref:"region-select",staticClass:"region",attrs:{slot:"reference",multiple:"","allow-create":"","popper-class":"select-area"},slot:"reference",model:{value:e.sel_az,callback:function(t){e.sel_az=t},expression:"sel_az"}})],1)],1)],1)],1)},h=[],g=n("2909"),b=(n("caad"),n("2532"),n("4de4"),n("99af"),n("6062"),n("3ca3"),n("ddb0"),n("8ce4")),v=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.visible=!1,e.az_visible=!1,e.sel_region=[],e.sel_az=[],e.area_list=[],e.az_list=[],e.checkAll=!1,e.isIndeterminate=!1,e.az_checkAll=!1,e.az_isIndeterminate=!1,e.form_data=e.region_id,e}return Object(c["a"])(n,[{key:"created",value:function(){this.FnGetRegionAz()}},{key:"FnGetRegionAz",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_["a"].get_region_az_list({customer_id:this.customerId});case 2:t=e.sent,"Success"===t.code&&(this.area_list=t.data.map((function(e){return e=Object.assign(e,{},{check:!1,isIndeterminate_group:!1}),e})),this.watch_regions(this.form_data.regions));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setRegionCheckState",value:function(e,t){var n=this,a=[];e.map((function(e){var i=[];e.region_list.map((function(e){n.form_data[t].includes(e.region_id)&&(i.push(e.region_id),"regions"===t&&a.push({region_group_id:e.region_id,region_group_name:e.region_name,region_list:Object(b["e"])(e.az_list,"az_name","az_id","region_name","region_id"),check:!1,isIndeterminate_group:!1}))}));var r=i.length===e.region_list.length,s=0!==i.length&&i.length!==e.region_list.length;e.check=r,e.isIndeterminate_group=s})),"regions"===t&&(this.az_list=a);var i="az"===t?"az_checkAll":"checkAll",r="az"===t?"az_isIndeterminate":"isIndeterminate";this.judge(e,r,i)}},{key:"watch_customerName",value:function(e){e.length>0&&this.FnGetRegionAz()}},{key:"watch_az_len",value:function(e,t){this.watch_az(this.form_data.az)}},{key:"watch_regions",value:function(e){0===e.length&&(this.form_data.az=[]),this.setRegionCheckState(this.area_list,"regions"),this.sel_region=this.trans(this.area_list,"regions"),this.get_area_id("region")}},{key:"watch_az",value:function(e){this.setRegionCheckState(this.az_list,"az"),this.sel_az=this.trans(this.az_list,"az"),this.get_area_id("az")}},{key:"judge",value:function(e,t,n){e.every((function(e){return e.check}))?(this[t]=!1,this[n]=!0):e.every((function(e){return!e.isIndeterminate_group&&!e.check}))?(this[t]=!1,this[n]=!1):(this[t]=!0,this[n]=!1)}},{key:"get_area_id",value:function(e){var t=this,n=[];if(this.area_list.map((function(e){e.region_list.map((function(e){e.az_list.map((function(e){n.push(e.az_id)}))}))})),this.area_list.every((function(e){return!e.check&&!e.isIndeterminate_group})))return{regions:this.getAllIds("area_list"),az:n};var a=[];return this.area_list.map((function(e){e.region_list.map((function(e){if(t.form_data.regions.includes(e.region_id)){var n=e.az_list.map((function(e){return e.az_id})),i=t.form_data.az.filter((function(e){return n.includes(e)}));a=0===i.length?[].concat(Object(g["a"])(a),Object(g["a"])(n)):[].concat(Object(g["a"])(a),Object(g["a"])(i))}}))})),{regions:this.form_data.regions,az:a}}},{key:"getAllIds",value:function(e){var t=[];return this[e].map((function(e){e.region_list.map((function(e){t.push(e.region_id)}))})),t}},{key:"handleCheckAllChange",value:function(e,t){var n="az_list"===t?"az":"regions";this.form_data[n]=e?this.getAllIds(t):[]}},{key:"handleCheckGroupChange",value:function(e,t,n){var a=this,i="az_list"===n?"az":"regions";this[n].map((function(n){if(n.region_group_id===t){var r=n.region_list.map((function(e){return e.region_id}));a.form_data[i]=e?Object(g["a"])(new Set([].concat(Object(g["a"])(a.form_data[i]),Object(g["a"])(r)))):a.form_data[i].filter((function(e){return!r.includes(e)}))}}))}},{key:"trans",value:function(e,t){var n=this,a=[];return e.map((function(e){e.region_list.map((function(e){n.form_data[t].includes(e.region_id)&&a.push(e.region_name)}))})),a}}]),n}(f["e"]);Object(d["a"])([Object(f["c"])({default:function(){}})],v.prototype,"region_id",void 0),Object(d["a"])([Object(f["c"])(String)],v.prototype,"customerId",void 0),Object(d["a"])([Object(f["c"])(String)],v.prototype,"customerName",void 0),Object(d["a"])([Object(f["f"])("customerName")],v.prototype,"watch_customerName",null),Object(d["a"])([Object(f["f"])("az_list.length")],v.prototype,"watch_az_len",null),Object(d["a"])([Object(f["f"])("form_data.regions")],v.prototype,"watch_regions",null),Object(d["a"])([Object(f["f"])("form_data.az")],v.prototype,"watch_az",null),Object(d["a"])([Object(f["b"])("get_area_id")],v.prototype,"get_area_id",null),v=Object(d["a"])([Object(f["a"])({})],v);var y=v,k=y,w=(n("d3cd"),n("85d0"),n("2877")),O=Object(w["a"])(k,p,h,!1,null,"d711fb06",null),j=O.exports,z=n("4780"),x=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.form_data=1===e.list.length?{customer_id:e.list[0].customerID.length>6?e.list[0].customerID:"",customer_name:e.list[0].customer_name,area:e.list[0].regions?e.list[0].regions:[],az:e.list[0].az?e.list[0].az:[],cycle:0===e.list[0].silentPeriod?"86400":e.list[0].silentPeriod.toString(),address:e.list[0].callbackURL,start_time:""===e.list[0].effectStartTime?"00:00":e.list[0].effectStartTime,end_time:""===e.list[0].effectEndTime?"23:59":e.list[0].effectEndTime,notice_user:e.list[0].contactGroupIDs?e.list[0].contactGroupIDs:[]}:{customer_id:"",customer_name:"",area:[],az:[],cycle:"86400",address:"",start_time:"00:00",end_time:"23:59",notice_user:[]},e.area_list=[],e.az_list=[],e.contact_group_list=[],e.cycle_list=z["c"],e.region_az_id={regions:e.form_data.area,az:e.form_data.az},e.validate_customer=function(e,t,n){return t.length>6||0===t.length?n():n(new Error("请输入正确的客户ID"))},e}return Object(c["a"])(n,[{key:"created",value:function(){this.getContactGroupList("")}},{key:"valid",value:function(e){var t=this;this.$nextTick((function(){var n=t.$refs[e];n&&n.validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}},{key:"changeGroup",value:function(e){e||this.getContactGroupList("")}},{key:"getContactGroupList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",e.next=3,m["a"].get_contact_group_list({name:t});case 3:n=e.sent,"Success"===n.code&&(this.contact_group_list=n.data.datas);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"watch_customer_id",value:function(e){var t=this,n=this.$refs.form;n&&n.validateField(["customer_id"],(function(n){n||""===e?t.form_data.customer_name="":t.get_customer_name()}))}},{key:"watch_notice_user",value:function(e){this.valid("form")}},{key:"get_customer_name",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_["a"].get_customer_name({customer_id:this.form_data.customer_id});case 2:t=e.sent,"Success"==t.code&&(this.form_data=Object(r["a"])(Object(r["a"])({},this.form_data),{},{customer_name:t.data.customer_name}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_area_list",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_["a"].get_region_az_list({customer_id:this.form_data.customer_id});case 2:t=e.sent,"Success"==t.code&&(this.area_list=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_area_id",value:function(e){this.form_data.area=e.regions,this.form_data.az=e.az}},{key:"Watch_az_list",value:function(e,t){0===e&&t>0&&(this.region_az_id={regions:[],az:[]})}},{key:"get_all_ids",value:function(e){var t=[];return e.map((function(e){e.region_list.map((function(e){t.push(e.region_id)}))})),t}},{key:"get_all_az_id",value:function(){var e=[];return this.area_list.map((function(t){t.region_list.map((function(t){t.az_list.map((function(t){return e.push(t.az_id)}))}))})),e}},{key:"confirm",value:function(){var e=this,t=this.form_data,n=t.customer_id,a=t.area,i=t.az,r=t.cycle,o=t.address,c=t.start_time,l=t.end_time,u=t.notice_user,d=t.customer_name,f=this.$refs.form;f.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(s){var f,_;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!s){t.next=7;break}return f=[],e.list.map((function(t){var s={az:0===a.length?e.get_all_az_id():0===i.length?e.get_all_ids(e.az_list):i,callbackURL:o,contactGroupIDs:u,customerID:n,customerName:d,regions:0===a.length?e.get_all_ids(e.area_list):a,silentPeriod:parseInt(r),effectStartTime:c,effectEndTime:l,enable:e.enable,id:t.id,name:t.name};return f.push(s),t})),t.next=5,m["a"].apply_strategy({data:f});case 5:_=t.sent,"Success"===_.code&&(e.$message.success("应用策略任务下发成功！"),e.close("1"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"close",value:function(e){this.drawer_sync=!1}}]),n}(f["e"]);Object(d["a"])([Object(f["d"])("drawer")],x.prototype,"drawer_sync",void 0),Object(d["a"])([Object(f["c"])({default:function(){}})],x.prototype,"list",void 0),Object(d["a"])([Object(f["c"])(Boolean)],x.prototype,"enable",void 0),Object(d["a"])([Object(f["f"])("form_data.customer_id")],x.prototype,"watch_customer_id",null),Object(d["a"])([Object(f["f"])("form_data.notice_user")],x.prototype,"watch_notice_user",null),Object(d["a"])([Object(f["f"])("az_list.length",{immediate:!0})],x.prototype,"Watch_az_list",null),Object(d["a"])([Object(f["b"])("close")],x.prototype,"close",null),x=Object(d["a"])([Object(f["a"])({components:{Region:j}})],x);var S=x,C=S,R=(n("f502"),n("4ca5"),Object(w["a"])(C,a,i,!1,null,null,null));t["a"]=R.exports},d3cd:function(e,t,n){"use strict";n("4d16")},d577:function(e,t,n){"use strict";n("57e0")},d86b:function(e,t,n){var a=n("d039");e.exports=a((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},e785:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"应用产品详情",visible:e.detail_visible,width:"600px","custom-class":"del","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.detail_visible=t},close:e.cancel}},[n("el-table",{attrs:{data:e.list,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"应用产品"}}),n("el-table-column",{attrs:{prop:"az",label:"应用地域及可用区"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.az,(function(t,a){return n("span",{key:a},[e._v(e._s(a)+e._s(e.get_az_len(a)===t.length?";":"-可用区"+t.join("、")))])}))}}])})],1)],1)},i=[],r=n("2909"),s=n("1da1"),o=n("d4ec"),c=n("bee2"),l=n("262e"),u=n("2caf"),d=(n("96cf"),n("d81d"),n("d3b7"),n("159b"),n("caad"),n("2532"),n("99af"),n("9ab4")),f=n("1b40"),_=n("9074"),m=function(e){Object(l["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.current=1,e.size=10,e.total=0,e.list=[],e.region_az_list=[],e}return Object(c["a"])(n,[{key:"created",value:function(){this.get_region_az()}},{key:"get_region_az",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_["a"].get_region_az_list({});case 2:t=e.sent,"Success"===t.code&&(this.region_az_list=t.data,n=this.get_all_az(),this.rows[0].instances.map((function(e){a.list.push({name:e.instance_name,az:n})})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_all_az",value:function(){var e=this,t={};return this.region_az_list.forEach((function(n){n.region_list.forEach((function(n){n.az_list.forEach((function(a){e.rows[0].az&&e.rows[0].az.includes(a.az_id)&&(t[n.region_name]=t[n.region_name]?[].concat(Object(r["a"])(t[n.region_name]),[a.az_name]):[a.az_name])}))}))})),t}},{key:"get_az_len",value:function(e){var t=0;return this.region_az_list.forEach((function(n){n.region_list.forEach((function(n){n.region_name===e&&(t=n.az_list.length)}))})),t}},{key:"cancel",value:function(e){this.detail_visible=!1}}]),n}(f["e"]);Object(d["a"])([Object(f["d"])("visible")],m.prototype,"detail_visible",void 0),Object(d["a"])([Object(f["c"])({default:function(){return[]}})],m.prototype,"rows",void 0),Object(d["a"])([Object(f["b"])("close")],m.prototype,"cancel",null),m=Object(d["a"])([Object(f["a"])({})],m);var p=m,h=p,g=(n("7493"),n("8a9f"),n("2877")),b=Object(g["a"])(h,a,i,!1,null,"b469770a",null);t["a"]=b.exports},e8c0:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("cf88");function i(e,t,n){n.preventDefault(),document.addEventListener("contextmenu",(function(e){var t=e.target;if(t.closest(".el-table")){var n=document.querySelector("#menu");if(n){n.style.display="block";var i=n.offsetHeight,r=n.offsetWidth;console.log("menuHeight",i);var s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=e.clientX,l=e.clientY,u=c,d=l;o<c+r&&(u=c-r),s<l+i&&(d=s-i),n.style.left=u-250+"px",n.style.top=d-50+"px",n.style.display="block",n.style.zIndex="1000",document.addEventListener("click",a["a"])}}})),document.addEventListener("contextmenu",a["a"])}},f183:function(e,t,n){var a=n("23e7"),i=n("e330"),r=n("d012"),s=n("861d"),o=n("1a2d"),c=n("9bf2").f,l=n("241c"),u=n("057f"),d=n("4fad"),f=n("90e3"),_=n("bb2f"),m=!1,p=f("meta"),h=0,g=function(e){c(e,p,{value:{objectID:"O"+h++,weakData:{}}})},b=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,p)){if(!d(e))return"F";if(!t)return"E";g(e)}return e[p].objectID},v=function(e,t){if(!o(e,p)){if(!d(e))return!0;if(!t)return!1;g(e)}return e[p].weakData},y=function(e){return _&&m&&d(e)&&!o(e,p)&&g(e),e},k=function(){w.enable=function(){},m=!0;var e=l.f,t=i([].splice),n={};n[p]=1,e(n).length&&(l.f=function(n){for(var a=e(n),i=0,r=a.length;i<r;i++)if(a[i]===p){t(a,i,1);break}return a},a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},w=e.exports={enable:k,fastKey:b,getWeakData:v,onFreeze:y};r[p]=!0},f502:function(e,t,n){"use strict";n("4470")}}]);
//# sourceMappingURL=chunk-0e7d7ee8.1747715207673.js.map