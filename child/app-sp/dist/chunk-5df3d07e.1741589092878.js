(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-5df3d07e"],{"00b4":function(e,t,a){"use strict";a("ac1f");var r=a("23e7"),s=a("da84"),i=a("c65b"),o=a("e330"),n=a("1626"),c=a("861d"),l=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),_=s.Error,u=o(/./.test);r({target:"RegExp",proto:!0,forced:!l},{test:function(e){var t=this.exec;if(!n(t))return u(this,e);var a=i(t,this,e);if(null!==a&&!c(a))throw new _("RegExp exec method returned something other than an Object or null");return!!a}})},"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3"),a("ac1f"),a("00b4");var r=a("6b75");function s(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r["a"])(e,t):void 0}}},"100b":function(e,t,a){"use strict";a("1284")},1027:function(e,t,a){},1284:function(e,t,a){},"1e42":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"复制",placement:"bottom"}},[a("el-button",{attrs:{type:"text"},on:{click:e.copyText}},[a("svg-icon",{attrs:{icon:"copy"}})],1)],1)},s=[],i=a("d4ec"),o=a("bee2"),n=a("262e"),c=a("2caf"),l=a("9ab4"),_=a("1b40"),u=a("3673"),d=function(e){Object(n["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(i["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a,[{key:"copyText",value:function(){var e=this;this.$copyText(this.content).then((function(){e.$message.success({message:"复制成功"})})).catch((function(){e.$message.error({message:"复制失败"})}))}}]),a}(_["e"]);Object(l["a"])([Object(_["c"])({default:""})],d.prototype,"content",void 0),d=Object(l["a"])([Object(_["a"])({components:{SvgIcon:u["a"]}})],d);var p=d,f=p,m=(a("97a7"),a("2877")),b=Object(m["a"])(f,r,s,!1,null,"23bfc843",null);t["a"]=b.exports},"1f00":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"制作公共镜像",visible:e.visible_sync,width:"500px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t}}},[a("el-form",{ref:"form_ecs",attrs:{model:e.form_data,"label-position":"left","label-width":"100px","label-suffix":":"}},[a("el-form-item",{staticClass:"content",attrs:{label:"实例名称/ID"}},[a("span",[e._v(e._s(e.form_data.ecs))])]),a("el-form-item",{staticClass:"content",attrs:{label:"客户名称/ID"}},[a("span",[e._v(e._s(e.form_data.customer))])]),a("el-form-item",{staticClass:"content",attrs:{label:"可用区"}},[a("span",[e._v(e._s(e.form_data.az))])]),a("el-form-item",{staticClass:"content",attrs:{label:"实例规格"}},[a("span",[e._v(e._s(e.form_data.spec))])]),a("el-form-item",{staticClass:"content",attrs:{label:"系统盘"}},[a("span",[e._v(e._s(e.form_data.system_disk))])]),a("el-form-item",{staticClass:"content",attrs:{label:"镜像"}},[a("span",[e._v(e._s(e.form_data.mirror))])]),a("el-form-item",{attrs:{label:"镜像名称",prop:"name",rules:[{required:!0,message:"请输入镜像名称",trigger:"blur"}]}},[a("el-input",{model:{value:e.form_data.name,callback:function(t){e.$set(e.form_data,"name",t)},expression:" form_data.name"}})],1),a("el-form-item",{staticClass:"test",attrs:{label:"测试账户ID",prop:"test_id",rules:[{required:!0,trigger:"blur",validator:e.validate_account}]}},[a("div",{staticClass:"test"},[a("customer-input",{on:{FnCustomer:e.FnCustomer}})],1),a("el-tooltip",{attrs:{content:"请选择测试账户ID，待镜像制作完成进行测试",placement:"right",effect:"light"}},[a("el-button",{staticClass:"m-left10",attrs:{type:"text"}},[a("svg-icon",{attrs:{icon:"info"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},s=[],i=a("1da1"),o=a("d4ec"),n=a("bee2"),c=a("262e"),l=a("2caf"),_=(a("96cf"),a("99af"),a("d9e2"),a("b0c0"),a("9ab4")),u=a("1b40"),d=a("3673"),p=a("e527"),f=a("bad9"),m=function(e){Object(c["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.form_data={ecs:"".concat(e.ecs_info.ecs_name," / ").concat(e.ecs_info.ecs_id),customer:"".concat(e.ecs_info.customer_name," / ").concat(e.ecs_info.customer_id),az:e.ecs_info.az_name,spec:e.ecs_info.is_gpu?"".concat(e.ecs_info.cpu_size,"vCPU").concat(e.ecs_info.ram_size,"GiB  ").concat(e.ecs_info.gpu_size,"*").concat(e.ecs_info.gpu_show_type):"".concat(e.ecs_info.cpu_size,"vCPU").concat(e.ecs_info.ram_size,"GiB"),system_disk:e.new?"".concat(e.ecs_info.disk_info.system.system_disk_type," ").concat(e.ecs_info.disk_info.system.disk_size,"GB"):"".concat(e.ecs_info.system_disk_type," ").concat(e.ecs_info.system_disk_size,"GB"),mirror:e.ecs_info.os_name,name:"",test_id:""},e}return Object(n["a"])(a,[{key:"FnCustomer",value:function(e){this.form_data.test_id=e}},{key:"validate_account",value:function(e,t,a){return 0===t.length?a(new Error("请选择测试账户ID")):a()}},{key:"confirm",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.$refs.form_ecs,t.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,p["a"].add_common_mirror({display_name:a.form_data.name,az_id:a.ecs_info.az_id,ecs_id:a.ecs_info.ecs_id,customer_id:a.ecs_info.customer_id,customer_ids:a.form_data.test_id});case 3:r=e.sent,"Success"===r.code&&a.$message.success(r.message),a.visible_sync=!1;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(){this.visible_sync=!1}}]),a}(u["e"]);Object(_["a"])([Object(u["d"])("visible")],m.prototype,"visible_sync",void 0),Object(_["a"])([Object(u["c"])({default:function(){}})],m.prototype,"ecs_info",void 0),Object(_["a"])([Object(u["c"])({default:!1})],m.prototype,"new",void 0),m=Object(_["a"])([Object(u["a"])({components:{SvgIcon:d["a"],CustomerInput:f["a"]}})],m);var b=m,v=b,h=(a("e52b"),a("2877")),y=Object(h["a"])(v,r,s,!1,null,"22e3d05c",null);t["a"]=y.exports},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("6b75");function s(e){if(Array.isArray(e))return Object(r["a"])(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var o=a("06c5");a("d9e2");function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return s(e)||i(e)||Object(o["a"])(e)||n()}},"408a":function(e,t,a){var r=a("e330");e.exports=r(1..valueOf)},5049:function(e,t,a){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var r=a("e330"),s=a("1d80"),i=a("577e"),o=a("5899"),n=r("".replace),c="["+o+"]",l=RegExp("^"+c+c+"*"),_=RegExp(c+c+"*$"),u=function(e){return function(t){var a=i(s(t));return 1&e&&(a=n(a,l,"")),2&e&&(a=n(a,_,"")),a}};e.exports={start:u(1),end:u(2),trim:u(3)}},"67ed":function(e,t,a){"use strict";a("c58b")},"6b75":function(e,t,a){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,"a",(function(){return r}))},7141:function(e,t,a){},"73b5":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.oper_info.os_id?"编辑镜像":"新增镜像",visible:e.visible_sync,width:"800px","destroy-on-close":!0,"close-on-click-modal":!1,"custom-class":"add-common"},on:{"update:visible":function(t){e.visible_sync=t},close:e.cancel}},[a("el-form",{ref:"mirror_form",staticClass:"demo-ruleForm",attrs:{model:e.form_data,rules:e.rules,"label-width":"170px","label-position":"left","label-suffix":":"}},[e.oper_info.os_id?a("el-form-item",{attrs:{label:"镜像ID",prop:"id"}},[a("span",[e._v(e._s(e.form_data.id))])]):e._e(),a("el-form-item",{attrs:{label:"镜像名称",prop:"display_name"}},[a("el-input",{attrs:{type:"textarea",autosize:"",resize:"none",maxlength:128,"show-word-limit":""},model:{value:e.form_data.display_name,callback:function(t){e.$set(e.form_data,"display_name",t)},expression:"form_data.display_name"}})],1),a("el-form-item",{attrs:{label:"英文名称",prop:"display_name_en"}},[a("el-input",{attrs:{type:"textarea",autosize:"",resize:"none",maxlength:128,"show-word-limit":""},model:{value:e.form_data.display_name_en,callback:function(t){e.$set(e.form_data,"display_name_en",t)},expression:"form_data.display_name_en"}})],1),"model_mirror_list"===e.$route.name?a("el-form-item",{attrs:{label:"模型镜像类型",prop:"model_image_type"}},[a("el-select",{model:{value:e.form_data.model_image_type,callback:function(t){e.$set(e.form_data,"model_image_type",t)},expression:"form_data.model_image_type"}},e._l(e.model_type_list,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"操作系统类型",prop:"os_type"}},[a("el-select",{model:{value:e.form_data.os_type,callback:function(t){e.$set(e.form_data,"os_type",t)},expression:"form_data.os_type"}},e._l(e.mirror_type_list,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"版本",prop:"os_version"}},[a("el-input",{attrs:{type:"textarea",autosize:"",resize:"none",maxlength:36,"show-word-limit":""},model:{value:e.form_data.os_version,callback:function(t){e.$set(e.form_data,"os_version",t)},expression:"form_data.os_version"}})],1),a("el-form-item",{attrs:{label:"系统架构",prop:"os_bit"}},[a("el-select",{model:{value:e.form_data.os_bit,callback:function(t){e.$set(e.form_data,"os_bit",t)},expression:"form_data.os_bit"}},e._l(e.bit_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"属性",prop:"props"}},[a("span",[e._v("公共镜像")])]),a("el-form-item",{attrs:{label:"客户ID",prop:"customer_ids"}},[a("customer-input",{attrs:{customers:e.customer_list,list:e.oper_info.customer_list},on:{FnCustomer:e.FnCustomer}})],1),a("el-form-item",{attrs:{label:"镜像大小",prop:"size"}},[[a("el-input-number",{attrs:{min:"Windows"===e.form_data.os_type?40:20},model:{value:e.form_data.size,callback:function(t){e.$set(e.form_data,"size",t)},expression:"form_data.size"}}),e._v(" GB ")]],2),a("el-form-item",{attrs:{label:"内核版本",prop:"core_version"}},[a("el-input",{attrs:{type:"textarea",autosize:"",resize:"none",maxlength:36,"show-word-limit":""},model:{value:e.form_data.core_version,callback:function(t){e.$set(e.form_data,"core_version",t)},expression:"form_data.core_version"}})],1),a("el-form-item",{attrs:{label:"可用区",prop:"az_id"}},[e.oper_info.os_id?a("span",e._l(e.oper_info.az_list,(function(t){return a("span",{key:t.az_id,staticClass:"az"},[e._v(e._s(t.az_name)+e._s(e.oper_info.az_list.length>0?";":""))])})),0):a("el-select",{model:{value:e.form_data.az_id,callback:function(t){e.$set(e.form_data,"az_id",t)},expression:"form_data.az_id"}},e._l(e.az_list,(function(e){return a("el-option",{key:e.az_id,attrs:{label:e.az_name,value:e.az_id}})})),1)],1),a("el-form-item",{attrs:{label:"产品来源",prop:"source_type"}},[a("el-select",{model:{value:e.form_data.product_source,callback:function(t){e.$set(e.form_data,"product_source",t)},expression:"form_data.product_source"}},e._l(e.product_source_type_list,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"存储类型",prop:"backend_type"}},[a("el-select",{model:{value:e.form_data.backend_type,callback:function(t){e.$set(e.form_data,"backend_type",t)},expression:"form_data.backend_type"}},e._l(e.storage_type_list,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"镜像类型",prop:"support_type"}},[a("el-select",{class:{compute:!e.oper_info.os_id},attrs:{disabled:"iso"===e.form_data.os_file_type},model:{value:e.form_data.support_type,callback:function(t){e.$set(e.form_data,"support_type",t)},expression:"form_data.support_type"}},e._l(e.compute_type_list,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),"GPU"===e.form_data.support_type?a("el-form-item",{attrs:{label:"驱动类型",prop:"support_gpu_driver"}},[a("el-select",{model:{value:e.form_data.support_gpu_driver,callback:function(t){e.$set(e.form_data,"support_gpu_driver",t)},expression:"form_data.support_gpu_driver"}},e._l(e.drive_type_list,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),"GPU"===e.form_data.support_type?a("el-form-item",{attrs:{label:"驱动版本",prop:"driver_version"}},[a("el-input",{attrs:{maxlength:128,"show-word-limit":""},model:{value:e.form_data.driver_version,callback:function(t){e.$set(e.form_data,"driver_version",t)},expression:"form_data.driver_version"}})],1):e._e(),"GPU"===e.form_data.support_type?a("el-form-item",{attrs:{label:"CUDA版本",prop:"cuda_version"}},[a("el-input",{attrs:{maxlength:128,"show-word-limit":""},model:{value:e.form_data.cuda_version,callback:function(t){e.$set(e.form_data,"cuda_version",t)},expression:"form_data.cuda_version"}})],1):e._e(),"GPU"===e.form_data.support_type?a("el-form-item",{attrs:{label:"其他软件",prop:"other_software"}},[a("el-input",{attrs:{maxlength:128,"show-word-limit":""},model:{value:e.form_data.other_software,callback:function(t){e.$set(e.form_data,"other_software",t)},expression:"form_data.other_software"}})],1):e._e(),a("el-form-item",{attrs:{label:"镜像文件类型",prop:"os_file_type"}},[a("el-select",{model:{value:e.form_data.os_file_type,callback:function(t){e.$set(e.form_data,"os_file_type",t)},expression:"form_data.os_file_type"}},e._l(e.file_type_list,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"MD5",prop:"path_md5"}},[a("el-input",{attrs:{type:"textarea",autosize:"",maxlength:32,"show-word-limit":"",resize:"none"},model:{value:e.form_data.path_md5,callback:function(t){e.$set(e.form_data,"path_md5",t)},expression:"form_data.path_md5"}})],1),e.oper_info.os_id?e._e():a("el-form-item",{attrs:{label:"镜像在对象存储文件名",prop:"oss_file_name"}},[a("el-input",{attrs:{type:"textarea",autosize:"",maxlength:128,"show-word-limit":"",resize:"none"},model:{value:e.form_data.oss_file_name,callback:function(t){e.$set(e.form_data,"oss_file_name",t)},expression:"form_data.oss_file_name"}})],1),a("el-form-item",{attrs:{label:"官方维护",prop:"validity"}},[a("el-radio-group",{model:{value:e.form_data.validity,callback:function(t){e.$set(e.form_data,"validity",t)},expression:"form_data.validity"}},[a("el-radio",{attrs:{label:"1"}},[e._v("长期")]),a("el-radio",{attrs:{label:"0"}},[e._v("有限 "),"0"===e.form_data.validity?a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.form_data.vali_time,callback:function(t){e.$set(e.form_data,"vali_time",t)},expression:"form_data.vali_time"}}):e._e()],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},s=[],i=a("1da1"),o=a("d4ec"),n=a("bee2"),c=a("262e"),l=a("2caf"),_=(a("96cf"),a("b0c0"),a("d9e2"),a("a15b"),a("ac1f"),a("1276"),a("9ab4")),u=a("1b40"),d=a("3673"),p=a("e4d0"),f=a("bad9"),m=function(e){Object(c["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.mirror_type_list=[],e.bit_list=[{id:64,name:"64位"},{id:32,name:"32位"}],e.az_list=[],e.storage_type_list=[],e.product_source_type_list=[],e.compute_type_list=[{value:"GPU",label:"GPU"},{value:"CPU/GPU",label:"基础镜像"}],e.model_type_list=[],e.drive_type_list=["Datacenter","Geforce","Enflame","GRID"],e.file_type_list=["qcow2","iso"],e.query_url="",e.os_file=[],e.customer_list=e.oper_info.os_id?e.oper_info.white_customer_list:[],e.form_data={id:e.oper_info.os_id,display_name:e.oper_info.display_name?e.oper_info.display_name:"",os_type:e.oper_info.os_type?e.oper_info.os_type:"",os_version:e.oper_info.os_version?e.oper_info.os_version:"",os_bit:e.oper_info.os_bit?e.oper_info.os_bit:e.bit_list[0].id,customer_ids:"",size:e.oper_info.os_id?e.oper_info.size:20,az_id:e.oper_info.az_list?e.oper_info.az_list[0]:"",backend_type:e.oper_info.backend_type?e.oper_info.backend_type:"",support_type:e.oper_info.support_type&&"GPU"!==e.oper_info.support_type?e.compute_type_list[1].value:e.compute_type_list[0].value,product_source:"",support_gpu_driver:e.oper_info.support_gpu_driver?e.oper_info.support_gpu_driver:e.drive_type_list[0],os_file_type:e.oper_info.os_file_type?e.oper_info.os_file_type:e.file_type_list[0],path_md5:e.oper_info.path_md5?e.oper_info.path_md5:"",upload_time:e.oper_info.os_id?e.oper_info.upload_time:new Date,oss_file_name:"",core_version:e.oper_info.kernel_version?e.oper_info.kernel_version:"",driver_version:e.oper_info.driver_version?e.oper_info.driver_version:"",cuda_version:e.oper_info.cuda_version?e.oper_info.cuda_version:"",other_software:e.oper_info.other_software?e.oper_info.other_software:"",validity:e.oper_info.os_id&&"长期"!==e.oper_info.maintenance_expiration_date?"0":"1",vali_time:"长期"===e.oper_info.maintenance_expiration_date||isNaN(new Date(e.oper_info.maintenance_expiration_date).getTime())?"":e.oper_info.maintenance_expiration_date,display_name_en:e.oper_info.display_name_en?e.oper_info.display_name_en:"",model_image_type:e.oper_info.model_image_type?e.oper_info.model_image_type:""},e.rules={display_name:[{required:!0,validator:e.validate_name,trigger:"change"}],os_type:[{required:!0,message:"请选择镜像类型",trigger:"change"}],os_version:[{required:!0,message:"请输入版本",trigger:"change"}],os_bit:[{required:!0,message:"请选择位数",trigger:"change"}],az_id:[{required:!0,message:"请选择可用区",trigger:"change"}],backend_type:[{required:!0,message:"请选择存储类型",trigger:"change"}],support_type:[{required:!0,message:"请选择计算类型",trigger:"change"}],product_source:[{required:!0,message:"请选择产品来源",trigger:"change"}],os_file_type:[{required:!0,message:"请选择镜像文件类型",trigger:"change"}],path_md5:[{required:!0,validator:e.path_md5_check,trigger:"change"}],oss_file_name:[{required:!0,message:"请输入镜像在对象存储文件名",trigger:"change"}],driver_version:[{required:!0,message:"请输入驱动版本",trigger:"change"}],cuda_version:[{required:!0,message:"请输入CUDA版本",trigger:"change"}],validity:[{required:!0,validator:e.validateTime,trigger:"change"}],other_software:[{required:!0,message:"请输入其他软件",trigger:"change"}],core_version:[{required:!0,message:"请输入内核版本",trigger:"change"}],display_name_en:[{required:!0,validator:e.validate_name_en,trigger:"change"}],model_image_type:[{required:!0,message:"请选择模型镜像类型",trigger:"change"}]},e}return Object(n["a"])(a,[{key:"created",value:function(){this.get_mirror_type(),this.get_disk_list(),this.get_product_source(),"model_mirror_list"===this.$route.name&&this.get_model_image_list()}},{key:"path_md5_check",value:function(e,t,a){return t?t.length<32?a(new Error("请输入32位MD5值")):a():a(new Error("请输入MD5"))}},{key:"validateTime",value:function(e,t,a){if("0"===t)return this.form_data.vali_time?a():a(new Error("请选择维护有效期"));a()}},{key:"validate_name",value:function(e,t,a){return t?this.form_data.display_name.length>128?a(new Error("镜像名称长度最多128个字符")):void p["a"].check_name({os_id:this.oper_info.os_id?this.oper_info.os_id:"",display_name:t}).then((function(e){return"Success"===e.code?e.data.usable?a():a("镜像名称重复,请重新输入"):a("镜像名称长度最多128个字符")})).catch((function(e){return a("镜像名称长度最多128个字符")})):a(new Error("请输入镜像名称"))}},{key:"validate_name_en",value:function(e,t,a){return t?this.form_data.display_name_en.length>128?a(new Error("镜像名称长度最多128个字符")):void p["a"].check_name({os_id:this.oper_info.os_id?this.oper_info.os_id:"",display_name_en:t}).then((function(e){return"Success"===e.code?e.data.usable_en?a():a("镜像名称重复,请重新输入"):a("镜像名称长度最多128个字符")})).catch((function(e){return a("镜像名称长度最多128个字符")})):a(new Error("请输入英文名称"))}},{key:"FnDisable",value:function(e){return e>new Date}},{key:"get_product_source",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get_product_source();case 2:t=e.sent,"Success"===t.code?(this.product_source_type_list=t.data,this.form_data.product_source=this.oper_info.product_source?this.oper_info.product_source:this.product_source_type_list[0].value):this.$message.error(t.message);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_disk_list",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get_disk_list({});case 2:if(t=e.sent,"Success"===t.code){for(a in t.data)this.storage_type_list.push({id:a,name:t.data[a]}),this.oper_info.os_id&&this.form_data.backend_type===t.data[a]&&(this.form_data.backend_type=a);this.oper_info.os_id||(this.form_data.backend_type=this.storage_type_list[0].id)}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"watch_backend_type",value:function(){this.oper_info.os_id||(this.form_data.az_id="",this.get_available_az())}},{key:"get_available_az",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get_available_az({backend_type:this.form_data.backend_type,employee_no:this.$store.state.employee_no,user_name:this.$store.state.login_name});case 2:t=e.sent,"Success"===t.code&&(this.az_list=t.data,this.form_data.az_id=this.az_list[0].az_id);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_mirror_type",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get_mirror_type({});case 2:t=e.sent,"Success"===t.code&&(this.mirror_type_list=t.data.type_list,this.oper_info.os_id||(this.form_data.os_type=this.mirror_type_list[0]));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_model_image_list",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get_model_image_type({});case 2:t=e.sent,"Success"===t.code&&(this.model_type_list=t.data.type_list,this.oper_info.os_id||(this.form_data.model_image_type=this.model_type_list[0]));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"before_upload",value:function(e){}},{key:"FnSuccess",value:function(e,t,a){}},{key:"watch_os_type",value:function(e){this.form_data.size="Windows"===e?Math.max(this.form_data.size,40):Math.max(this.form_data.size,20)}},{key:"watch_os_file_type",value:function(e){"iso"===e&&(this.form_data.support_type="基础镜像")}},{key:"FnCustomer",value:function(e){this.form_data.customer_ids=e?e.join(","):""}},{key:"confirm",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s,o,n,c,l,_,u,d,f,m,b,v,h,y,g,k,O,w,j,x,z,C=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.$refs.mirror_form,a=this.form_data,r=a.product_source,s=a.display_name,o=a.os_type,n=a.os_version,c=a.os_bit,l=a.size,_=a.customer_ids,u=a.az_id,d=a.backend_type,f=a.support_type,m=a.support_gpu_driver,b=a.oss_file_name,v=a.os_file_type,h=a.path_md5,a.upload_time,y=a.core_version,g=a.driver_version,k=a.cuda_version,O=a.other_software,w=a.validity,j=a.vali_time,x=a.display_name_en,z=a.model_image_type,t.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}if(!C.oper_info.os_id){e.next=8;break}return e.next=4,p["a"].edit_pub_mirror({os_id:C.oper_info.os_id,display_name:s,customer_ids:""===_?[]:_.split(","),backend_type:d,support_type:f,product_source:r,support_gpu_driver:"GPU"===f?m:void 0,os_file_type:v,path_md5:h,size:l,kernel_version:y,driver_version:"GPU"===f?g:void 0,cuda_version:"GPU"===f?k:void 0,other_software:"GPU"===f?O:void 0,maintenance_expiration_date:"1"===w?"LongTerm":j,display_name_en:x,os_type:o,os_version:n,os_bit:c,model_image_type:"model_mirror_list"===C.$route.name?z:void 0});case 4:a=e.sent,"Success"===a.code&&C.$message.success(a.message),e.next=12;break;case 8:return e.next=10,p["a"].add_pub_mirror({display_name:s,os_type:o,os_version:n,os_bit:c,customer_ids:_,az_id:u,size:l,backend_type:d,support_type:f,product_source:r,support_gpu_driver:"GPU"===f?m:void 0,os_file_type:v,path_md5:h,oss_file_name:b,kernel_version:y,driver_version:"GPU"===f?g:void 0,cuda_version:"GPU"===f?k:void 0,other_software:"GPU"===f?O:void 0,maintenance_expiration_date:"1"===w?"LongTerm":j,display_name_en:x,model_image_type:"model_mirror_list"===C.$route.name?z:void 0});case 10:i=e.sent,"Success"===i.code&&C.$message.success(i.message);case 12:C.visible_sync=!1;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(){var e=this.$refs.mirror_form;e.resetFields(),this.visible_sync=!1}}]),a}(u["e"]);Object(_["a"])([Object(u["c"])({default:function(){}})],m.prototype,"oper_info",void 0),Object(_["a"])([Object(u["d"])("visible")],m.prototype,"visible_sync",void 0),Object(_["a"])([Object(u["f"])("form_data.backend_type")],m.prototype,"watch_backend_type",null),Object(_["a"])([Object(u["f"])("form_data.os_type")],m.prototype,"watch_os_type",null),Object(_["a"])([Object(u["f"])("form_data.os_file_type")],m.prototype,"watch_os_file_type",null),m=Object(_["a"])([Object(u["a"])({components:{SvgIcon:d["a"],CustomerInput:f["a"]}})],m);var b=m,v=b,h=(a("b34e"),a("c7b0"),a("2877")),y=Object(h["a"])(v,r,s,!1,null,"d385b45c",null);t["a"]=y.exports},9017:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"删除镜像",visible:e.visible_sync,width:"1000px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t}}},[a("div",["del_az"===e.type?a("div",{staticClass:"title"},[e._v("您将删除"),a("span",{staticClass:"num_message"},[e._v("1")]),e._v("个镜像： "),a("span",{staticClass:"num_message"},[e._v(e._s(e.rows[0].azName))]),e._v("下的镜像"),a("span",{staticClass:"num_message"},[e._v(e._s(e.rows[0].display_name)+"镜像")])]):e._e(),a("el-alert",{attrs:{title:e.alert_msg,type:"warning",center:"",closable:!1}}),"del"===e.type?a("el-table",{attrs:{data:e.rows,border:"","max-height":"300"}},[a("el-table-column",{attrs:{prop:"os_id",label:"镜像名称/ID",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.display_name))]),a("div",[e._v(e._s(t.row.os_id))])]}}],null,!1,1536022648)}),a("el-table-column",{attrs:{prop:"os_type",label:"镜像类型"}}),a("el-table-column",{attrs:{prop:"az",label:"可用区"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.az_list,(function(r){return a("span",{key:r.az_id},[e._v(e._s(r.az_name)+e._s(t.row.az_list.length>0?";":"")+" ")])}))}}],null,!1,2363480231)}),a("el-table-column",{attrs:{prop:"status_display",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:[t.row.status]},[e._v(e._s(t.row.status_display))])]}}],null,!1,3954708699)})],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)])],1)},s=[],i=a("1da1"),o=a("d4ec"),n=a("bee2"),c=a("262e"),l=a("2caf"),_=(a("96cf"),a("9ab4")),u=a("1b40"),d=a("e4d0"),p=function(e){Object(c["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.alert_msg="del"===e.type?"将删除该镜像在全部可用区的文件。镜像删除后，客户将无法使用该镜像进行创建实例与重装操作系统操作，确定要执行删除操作吗？":"镜像删除后，客户将无法在删除可用区使用该镜像进行创建实例与重装操作系统操作，确定要执行删除操作吗？",e}return Object(n["a"])(a,[{key:"created",value:function(){}},{key:"confirm",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("del"!==this.type){e.next=6;break}return e.next=3,d["a"].del_pub_mirror({os_ids:[this.rows[0].os_id]});case 3:t=e.sent,e.next=9;break;case 6:return e.next=8,d["a"].del_pub_mirror_az({os_id:this.rows[0].os_id,az_ids:[this.rows[0].azId]});case 8:t=e.sent;case 9:"Success"===t.code&&this.$message.success(t.message),this.visible_sync=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(){this.visible_sync=!1}}]),a}(u["e"]);Object(_["a"])([Object(u["d"])("visible")],p.prototype,"visible_sync",void 0),Object(_["a"])([Object(u["c"])({default:function(){}})],p.prototype,"rows",void 0),Object(_["a"])([Object(u["c"])()],p.prototype,"type",void 0),p=Object(_["a"])([u["a"]],p);var f=p,m=f,b=(a("cb24"),a("2877")),v=Object(b["a"])(m,r,s,!1,null,"4668d41a",null);t["a"]=v.exports},"97a7":function(e,t,a){"use strict";a("cb76")},"97c8":function(e,t,a){},a15b:function(e,t,a){"use strict";var r=a("23e7"),s=a("e330"),i=a("44ad"),o=a("fc6a"),n=a("a640"),c=s([].join),l=i!=Object,_=n("join",",");r({target:"Array",proto:!0,forced:l||!_},{join:function(e){return c(o(this),void 0===e?",":e)}})},a630:function(e,t,a){var r=a("23e7"),s=a("4df4"),i=a("1c7e"),o=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:o},{from:s})},a9e3:function(e,t,a){"use strict";var r=a("83ab"),s=a("da84"),i=a("e330"),o=a("94ca"),n=a("6eeb"),c=a("1a2d"),l=a("7156"),_=a("3a9b"),u=a("d9b5"),d=a("c04e"),p=a("d039"),f=a("241c").f,m=a("06cf").f,b=a("9bf2").f,v=a("408a"),h=a("58a8").trim,y="Number",g=s[y],k=g.prototype,O=s.TypeError,w=i("".slice),j=i("".charCodeAt),x=function(e){var t=d(e,"number");return"bigint"==typeof t?t:z(t)},z=function(e){var t,a,r,s,i,o,n,c,l=d(e,"number");if(u(l))throw O("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=h(l),t=j(l,0),43===t||45===t){if(a=j(l,2),88===a||120===a)return NaN}else if(48===t){switch(j(l,1)){case 66:case 98:r=2,s=49;break;case 79:case 111:r=8,s=55;break;default:return+l}for(i=w(l,2),o=i.length,n=0;n<o;n++)if(c=j(i,n),c<48||c>s)return NaN;return parseInt(i,r)}return+l};if(o(y,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var C,S=function(e){var t=arguments.length<1?0:g(x(e)),a=this;return _(k,a)&&p((function(){v(a)}))?l(Object(t),a,S):t},$=r?f(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),R=0;$.length>R;R++)c(g,C=$[R])&&!c(S,C)&&b(S,C,m(g,C));S.prototype=k,k.constructor=S,n(s,y,S)}},b34e:function(e,t,a){"use strict";a("e521")},b74c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("action-block",{attrs:{search_option:e.search_option},on:{"fn-search":e.search},scopedSlots:e._u([{key:"default",fn:function(){return[a("el-button",{attrs:{type:"primary",disabled:!e.auth_list.includes("add_mirror")},on:{click:e.add}},[e._v("新增镜像")])]},proxy:!0}])}),a("div",{staticClass:"icon m-bottom10"},[a("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{type:"text",disabled:!e.auth_list.includes("export")},on:{click:e.down}},[a("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1),a("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[a("el-button",{attrs:{type:"text"},on:{click:e.refresh}},[a("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1),a("el-table",{staticClass:"event-table",attrs:{data:e.list,border:"","cell-style":e.setCellStyle},on:{"sort-change":e.FnSortChange,"filter-change":e.filterAttribute}},[a("el-table-column",{attrs:{prop:"os_id",label:"镜像ID"}}),a("el-table-column",{attrs:{prop:"display_name",label:"镜像名称"}}),"model_mirror_list"===e.$route.name?a("el-table-column",{attrs:{prop:"model_image_type",label:"模型镜像类型"}}):e._e(),a("el-table-column",{attrs:{prop:"os_type",label:"操作系统类型","filter-multiple":!1,"column-key":"os_type",filters:e.mirror_type,"min-width":"120px"}}),a("el-table-column",{attrs:{prop:"os_bit",label:"系统架构"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.os_bit)+"位")])]}}])}),a("el-table-column",{attrs:{prop:"kernel_version",label:"内核版本"}}),a("el-table-column",{attrs:{prop:"os_file_type",label:"镜像文件类型"}}),a("el-table-column",{attrs:{prop:"size",label:"镜像大小",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.size)+"GB")])]}}])}),a("el-table-column",{attrs:{prop:"image_type",label:"镜像类型","filter-multiple":!1,"column-key":"support_type",filters:e.compute_type}}),a("el-table-column",{attrs:{prop:"support_gpu_driver",label:"驱动类型","filter-multiple":!1,"column-key":"support_gpu_driver",filters:e.drive_type},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""!==t.row.support_gpu_driver?t.row.support_gpu_driver:"-"))])]}}])}),a("el-table-column",{attrs:{prop:"driver_version",label:"驱动版本"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""!==t.row.driver_version?t.row.driver_version:"-"))])]}}])}),a("el-table-column",{attrs:{prop:"cuda_version",label:"CUDA版本"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""!==t.row.cuda_version?t.row.cuda_version:"-"))])]}}])}),a("el-table-column",{attrs:{prop:"other_software",label:"其他软件"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""!==t.row.other_software?t.row.other_software:"-"))])]}}])}),a("el-table-column",{attrs:{prop:"product_source",label:"产品来源","filter-multiple":!1,"column-key":"product_source",filters:e.source_type}}),a("el-table-column",{attrs:{prop:"backend_type",label:"存储类型"}}),a("el-table-column",{attrs:{prop:"customer",label:"客户权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.white_customer_list&&t.row.white_customer_list.length>0?t.row.white_customer_list.join(","):"全部客户"))])]}}])}),a("el-table-column",{attrs:{prop:"path_name",label:"路径",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:t.row.path_name,placement:"bottom",effect:"light"}},[a("span",{staticClass:"id-cell"},[e._v(e._s(t.row.path_name))])]),t.row.path_name?a("Clipboard",{attrs:{content:t.row.path_name}}):e._e()]}}])}),a("el-table-column",{attrs:{prop:"az",label:"可用区",width:"120","class-name":"mirror-az"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("共 "),a("span",{staticClass:"num_message"},[e._v(e._s(t.row.az_list.length))]),e._v(" 个")]),a("span",[e._v(" ( 可用:"),a("span",{staticClass:"num_message"},[e._v(" "+e._s(t.row.az_list.filter((function(e){return"running"===e.status})).length))]),e._v(" )")])]}}])}),a("el-table-column",{attrs:{prop:"",label:"",type:"expand",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.az_list,(function(r,s){return a("div",{key:s,staticClass:"table-expand"},[a("div",{staticClass:"az-name"},[a("span",[e._v(e._s(r.az_name))]),r.pod_name_list.length>0?a("span",[e._v(" ( ")]):e._e(),e._l(r.pod_name_list.slice(0,2),(function(t,s){return a("span",{key:t},[e._v(e._s(t)+e._s(s===r.pod_name_list.length-1?"":","))])})),r.pod_name_list.length>2?a("span",[e._v(" ...")]):e._e(),r.pod_name_list.length>0?a("span",[e._v(")")]):e._e()],2),a("div",{staticClass:"status",class:r.status},[e._v(e._s(r.status_display))]),a("div",{staticClass:"time"},[e._v(e._s(r.create_time))]),a("div",{staticClass:"perch"}),a("el-button",{staticClass:"operate",attrs:{type:"text",disabled:!["running","blocking","create_fail"].includes(r.status)||!e.auth_list.includes("del_mirror")},on:{click:function(a){return e.del_az(Object.assign({},t.row,{azId:r.az_id,azName:r.az_name}))}}},[e._v("删除")])],1)}))}}])}),a("el-table-column",{attrs:{prop:"status_display",label:"状态","filter-multiple":!1,"column-key":"status",filters:e.status_list,width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:[t.row.status]},[e._v(e._s(t.row.status_display))])]}}])}),a("el-table-column",{attrs:{prop:"maintenance_expiration_date",label:"官方维护"}}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"custom",width:"120"}}),a("el-table-column",{attrs:{prop:"update_time",label:"更新时间",width:"120"}}),a("el-table-column",{attrs:{prop:"operate",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(e.operateBtns,(function(r){return[r.list.includes(t.row.status)&&e.auth_list.includes(r.authLabel)?a("el-button",{key:r.label,attrs:{type:"text",disabled:!r.list.includes(t.row.status)||!e.auth_list.includes(r.authLabel)},on:{click:function(a){return e.handle(t.row,r.fun)}}},[e._v(e._s(r.label))]):a("el-tooltip",{key:r.label,attrs:{content:r.msg,effect:"light"}},[a("el-button",{staticClass:"not-clickable",attrs:{type:"text"}},[e._v(e._s(r.label))])],1)]})),a("el-button",{attrs:{type:"text",disabled:!e.auth_list.includes("record")},on:{click:function(a){return e.record(t.row)}}},[e._v("操作记录")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e.visible&&["add","edit"].includes(e.oper_type)?[a("add-common",{attrs:{visible:e.visible,oper_info:e.oper_info},on:{"update:visible":function(t){e.visible=t}}})]:e._e(),e.visible&&["sync"].includes(e.oper_type)?[a("sync-mirror",{attrs:{visible:e.visible,os_id:e.oper_info.os_id},on:{"update:visible":function(t){e.visible=t}}})]:e._e(),e.visible&&["change"].includes(e.oper_type)?[a("change-status",{attrs:{visible:e.visible,oper_info:e.oper_info},on:{"update:visible":function(t){e.visible=t}}})]:e._e(),e.visible&&["del"].includes(e.oper_type)?[a("del-mirror",{attrs:{visible:e.visible,rows:[e.oper_info],type:e.oper_type},on:{"update:visible":function(t){e.visible=t}}})]:e._e(),e.visible&&["del_az"].includes(e.oper_type)?[a("del-mirror",{attrs:{visible:e.visible,rows:[e.oper_info],type:e.oper_type},on:{"update:visible":function(t){e.visible=t}}})]:e._e(),e.visible&&["record"].includes(e.oper_type)?[a("Record",{attrs:{visible:e.visible,type:"message",record_id:e.oper_info.os_id},on:{"update:visible":function(t){e.visible=t},close:e.close}})]:e._e()],2)},s=[],i=a("5530"),o=a("1da1"),n=a("d4ec"),c=a("bee2"),l=a("262e"),_=a("2caf"),u=(a("96cf"),a("4de4"),a("d3b7"),a("ac1f"),a("841c"),a("d81d"),a("b0c0"),a("9ab4")),d=a("1b40"),p=a("c811"),f=a("3673"),m=a("e4d0"),b=a("73b5"),v=a("cdbb"),h=a("ec8a"),y=a("1f00"),g=a("268f"),k=a("9017"),O=a("c1df"),w=a.n(O),j=a("8ce4"),x=a("1e42"),z=function(e){Object(l["a"])(a,e);var t=Object(_["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.search_option={os_id:{placeholder:"请输入镜像ID"},display_name:{placeholder:"请输入镜像名称"},time:{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!0,dis_day:1,defaultTime:[]}},e.list=[],e.current=1,e.size=20,e.total=0,e.search_data={},e.auth_list=[],e.mirror_type=[],e.filter_data={},e.compute_type=[{text:"GPU",value:"GPU"},{text:"基础镜像",value:"CPU"}],e.drive_type=[{text:"DataCenter",value:"DataCenter"},{text:"Geforce",value:"Geforce"},{text:"Enflame",value:"Enflame"},{text:"GRID",value:"GRID"}],e.source_type=[],e.status_list=[],e.visible=!0,e.oper_type="",e.oper_info={},e}return Object(c["a"])(a,[{key:"operateBtns",get:function(){var e=[{label:"编辑",authLabel:"edit_mirror",fun:"edit",list:["running","blocking"],msg:"仅支持可用或者停用状态的镜像操作"},{label:"删除",authLabel:"del_mirror",fun:"del",list:["running","blocking","create_fail"],msg:"仅支持可用,停用或者创建失败状态的镜像操作"},{label:"状态变更",authLabel:"change_status",fun:"changeStatus",list:["running","blocking"],msg:"仅支持可用或者停用状态的镜像操作"},{label:"同步",authLabel:"sync_mirror",fun:"FnSync",list:["running"],msg:"仅支持可用状态的镜像操作"}];return this.$store.state.is_special_user?e.filter((function(e){return"同步"!==e.label})):e}},{key:"created",value:function(){this.auth_list=this.$store.state.auth_info["mirror_list"],this.get_mirror_type(),this.get_source_type(),this.get_status_list(),this.search()}},{key:"watch_visible",value:function(e){e||(this.oper_info={},this.getMirrorList())}},{key:"watch_pod",value:function(){this.search(this.search_data)}},{key:"handle",value:function(e,t){this[t](e)}},{key:"get_mirror_type",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].get_mirror_type({});case 2:t=e.sent,"Success"===t.code&&t.data.type_list.map((function(e){a.mirror_type.push({text:e,value:e})}));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_source_type",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].get_product_source();case 2:t=e.sent,"Success"===t.code&&t.data.map((function(e){a.source_type.push({text:e.value,value:e.value})}));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_status_list",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].get_status_list({});case 2:if(t=e.sent,"Success"===t.code){for(r in a=[],t.data)a.push({text:t.data[r],value:r});this.status_list=a}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.current=1,this.search_data=Object(i["a"])(Object(i["a"])({},e),this.filter_data),this.getMirrorList()}},{key:"refresh",value:function(){this.getMirrorList()}},{key:"getMirrorList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s,i,o,n,c,l,_,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.search_data,a=t.os_id,r=t.display_name,s=t.time,i=t.os_type,o=t.sort_size,n=t.support_gpu_driver,c=t.sort_create_time,t.support_type,l=t.status,_=t.product_source,e.next=3,m["a"].get_pub_mirror_list({pod_id:this.$store.state.pod_id,image_id:a,image_name:r,start_day:s&&s[0]?w()(s[0]).format("YYYY-MM-DD"):void 0,end_day:s&&s[1]?w()(s[1]).format("YYYY-MM-DD"):void 0,os_type:i?i[0]:void 0,sort_size:o,support_gpu_driver:n?n[0]:void 0,product_source:_?_[0]:void 0,status:l?l[0]:void 0,sort_create_time:c,page_index:this.current,page_size:this.size,model_image:"model_mirror_list"===this.$route.name?1:void 0});case 3:u=e.sent,"Success"===u.code&&(this.list=u.data.image_list,this.total=u.data.page_info.count);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleSizeChange",value:function(e){this.size=e,this.getMirrorList()}},{key:"handleCurrentChange",value:function(e){this.current=e,this.getMirrorList()}},{key:"setCellStyle",value:function(e,t,a,r){if(5==r)return{color:"red"}}},{key:"FnSortChange",value:function(e){this.search_data.sort_size=void 0,this.search_data.sort_create_time=void 0,this.search_data["sort_".concat(e.prop)]="descending"===e.order?"1":"ascending"===e.order?"0":void 0,this.getMirrorList()}},{key:"filterAttribute",value:function(e){this.filter_data=Object(i["a"])(Object(i["a"])({},this.filter_data),e),this.search(this.search_data)}},{key:"add",value:function(){this.visible=!0,this.oper_type="add"}},{key:"edit",value:function(e){this.visible=!0,this.oper_type="edit",this.oper_info=e}},{key:"del",value:function(e){this.visible=!0,this.oper_type="del",this.oper_info=e}},{key:"del_az",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.visible=!0,this.oper_type="del_az",this.oper_info=t;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"changeStatus",value:function(e){this.visible=!0,this.oper_type="change",this.oper_info=e}},{key:"FnSync",value:function(e){this.visible=!0,this.oper_type="sync",this.oper_info=e}},{key:"record",value:function(e){this.visible=!0,this.oper_type="record",this.oper_info=e}},{key:"down",value:function(){var e=this.search_data,t=e.os_id,a=e.display_name,r=e.product_server_id,s=e.time,i=e.os_type,o=e.support_gpu_driver,n=e.support_type,c=e.status,l=e.product_source,_=Object(j["d"])({image_id:t,image_name:a,product_server_id:r,start_day:s&&s[0]?w()(s[0]).format("YYYY-MM-DD"):void 0,end_day:s&&s[1]?w()(s[1]).format("YYYY-MM-DD"):void 0,os_type:i?i[0]:void 0,support_gpu_driver:o?o[0]:void 0,product_source:l?l[0]:void 0,support_type:n?n[0]:void 0,status:c?c[0]:void 0,pod_id:this.$store.state.pod_id});window.location.href="/ecs_business/v1/img/pub_image_list_download/".concat(_)}},{key:"operate",value:function(e){}},{key:"close",value:function(e){this.visible=!1}}]),a}(d["e"]);Object(u["a"])([Object(d["f"])("visible")],z.prototype,"watch_visible",null),Object(u["a"])([Object(d["f"])("$store.state.pod_id")],z.prototype,"watch_pod",null),z=Object(u["a"])([Object(d["a"])({components:{ActionBlock:p["a"],SvgIcon:f["a"],AddCommon:b["a"],SyncMirror:v["a"],ChangeStatus:h["a"],AddCommonMirror:y["a"],Record:g["a"],DelMirror:k["a"],Clipboard:x["a"]}})],z);var C=z,S=C,$=(a("100b"),a("fcc9"),a("2877")),R=Object($["a"])(S,r,s,!1,null,"42e79aa2",null);t["default"]=R.exports},bad9:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer"},[a("el-select",{attrs:{multiple:"",placeholder:"输入关键字可进行搜索",filterable:"",remote:"","remote-method":e.getCustomerList},on:{"visible-change":e.changeCustomer},model:{value:e.customer_id,callback:function(t){e.customer_id=t},expression:"customer_id"}},e._l(e.customerList,(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.id+"("+t.name+")"}},[e._v(e._s(t.id+"("+t.name+")"))])})),1)],1)},s=[],i=a("1da1"),o=a("2909"),n=a("d4ec"),c=a("bee2"),l=a("262e"),_=a("2caf"),u=(a("96cf"),a("d81d"),a("9ab4")),d=a("1b40"),p=a("1477"),f=function(e){Object(l["a"])(a,e);var t=Object(_["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.customer_id=[],e.customerList=[],e.flag=!0,e}return Object(c["a"])(a,[{key:"created",value:function(){this.customerList=Object(o["a"])(this.list),this.customer_id=this.customers,this.getDefaultCustomerList()}},{key:"changeCustomer",value:function(e){e&&(this.customerList=[])}},{key:"getDefaultCustomerList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.list.length>0)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p["a"].getCustomerList({host_ids:this.rows.map((function(e){return e.host_id})),customer_ids:Array.isArray(this.customer_id)?this.customer_id:[]});case 4:t=e.sent,"Success"==t.code&&(this.customerList=t.data.customer_list);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCustomerList",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:"",a=s.length>1&&void 0!==s[1]&&s[1],t||a){e.next=4;break}return e.abrupt("return");case 4:return e.next=7,p["a"].getCustomerList({host_ids:this.rows.map((function(e){return e.host_id})),customer_id:t});case 7:r=e.sent,"Success"==r.code&&(this.customerList=r.data.customer_list);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"watch_customer_id",value:function(){this.FnCustomer()}},{key:"FnCustomer",value:function(){return this.customer_id}}]),a}(d["e"]);Object(u["a"])([Object(d["c"])({default:function(){return[]}})],f.prototype,"customers",void 0),Object(u["a"])([Object(d["c"])({default:function(){return[]}})],f.prototype,"rows",void 0),Object(u["a"])([Object(d["c"])({default:function(){return[]}})],f.prototype,"list",void 0),Object(u["a"])([Object(d["f"])("customer_id",{immediate:!0,deep:!0})],f.prototype,"watch_customer_id",null),Object(u["a"])([Object(d["b"])("FnCustomer")],f.prototype,"FnCustomer",null),f=Object(u["a"])([Object(d["a"])({})],f);var m=f,b=m,v=(a("ecd5"),a("2877")),h=Object(v["a"])(b,r,s,!1,null,null,null);t["a"]=h.exports},c58b:function(e,t,a){},c7b0:function(e,t,a){"use strict";a("1027")},cb24:function(e,t,a){"use strict";a("e165")},cb76:function(e,t,a){},cdbb:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"同步镜像",visible:e.visible_sync,width:"800px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t},close:e.cancel}},[a("el-card",{staticClass:"card-box"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v("镜像信息")]),a("el-row",{attrs:{gutter:24}},e._l(e.info,(function(t){return a("el-col",{key:t.id,attrs:{span:12}},[a("span",{staticClass:"label"},[e._v(e._s(t.label)+": ")]),a("span",{staticClass:"value"},[e._v(e._s(t.value))])])})),1)],1),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v("镜像同步位置")]),a("div",{staticClass:"card"},e._l(e.list,(function(t,r){return a("el-card",{key:t.id,staticClass:"sync"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v(e._s(t.name))]),a("el-checkbox-group",{model:{value:t.checkList,callback:function(a){e.$set(t,"checkList",a)},expression:"item.checkList"}},e._l(t.data,(function(t){return"not_available_az_list"!==t.label?a("el-checkbox",{key:t.az_id,attrs:{label:t.az_id,disabled:"current_az_list"===t.label}},[e._v(e._s(t.az_name))]):e._e()})),1),a("el-divider"),t.len>0?a("div",{staticClass:"m-bottom10"},[e._v("不支持可用区")]):e._e(),e._l(t.data,(function(t){return"not_available_az_list"===t.label?a("div",{key:t},[e._v(e._s(t.az_name))]):e._e()}))],2)})),1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},s=[],i=a("2909"),o=a("ade3"),n=a("5530"),c=a("1da1"),l=a("d4ec"),_=a("bee2"),u=a("262e"),d=a("2caf"),p=(a("96cf"),a("b0c0"),a("99af"),a("d81d"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("9ab4")),f=a("1b40"),m=a("e4d0"),b=function(e){Object(u["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.info={name:{label:"镜像名称",value:"1"},id:{label:"镜像ID",value:"2"},system:{label:"操作系统",value:"3"},size:{label:"规格",value:"4"},type:{label:"类型",value:"5"}},e.az_info={},e.list=[],e.current_az_list=[{az_id:"16e6e380-729d-11ec-b62a-1e00e202ff80",az_name:"大别山A",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091019",region_group_name:"中国大陆"}],e.available_az_list=[{az_id:"a18d6c6a-9619-418a-8526-2878f2653d5f",az_name:"北京A",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091019",region_group_name:"中国大陆"},{az_id:"a18d6c6a-9619-418a-8526-2878f2653d52",az_name:"北京A2",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091011",region_group_name:"中国大陆"},{az_id:"a18d6c6a-9619-418a-8526-2878f2653d51",az_name:"北京A1",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091019",region_group_name:"中国大陆"},{az_id:"a18d6c6a-9619-418a-8526-2878f2653d53",az_name:"北京A3",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091019",region_group_name:"中国大陆"},{az_id:"f9755192-b89d-11eb-b74e-1e00e202ff80",az_name:"圣保罗A",region_group_id:"498cc42c-b89d-11eb-b74e-1e00e202ff80",region_group_name:"南美地区"}],e.not_available_az_list=[{az_id:"a18d6c6a-9619-418a-8526-2878f2653d5f",az_name:"北京A",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091019",region_group_name:"中国大陆"}],e}return Object(_["a"])(a,[{key:"created",value:function(){this.get_pub_sync_detail()}},{key:"get_pub_sync_detail",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s,i,c,l,_,u,d,p,f,b,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},e.next=3,m["a"].get_pub_sync_detail({os_id:this.os_id});case 3:if(a=e.sent,"Success"===a.code){for(d in this.info.name.value=a.data.display_name,this.info.id.value=a.data.os_id,this.info.system.value="".concat(a.data.os_type," ").concat(a.data.os_version," ").concat(a.data.os_bit," 位"),this.info.size.value=a.data.size?a.data.size+"GB":"",this.info.type.value="public"===a.data.template_type?"公共镜像":"私有镜像",r=a.data,s=r.current_az_list,i=r.available_az_list,c=r.not_available_az_list,l=s.map((function(e){return e.az_id})),_={current_az_list:s,available_az_list:i.filter((function(e){return!l.includes(e.az_id)})),not_available_az_list:c},u=function(e){_[e].map((function(a){t[a.region_group_name]=Object(n["a"])(Object(n["a"])({},t[a.region_group_name]),{},Object(o["a"])({},a.az_id,Object(n["a"])(Object(n["a"])({},a),{},{label:e})))}))},_)u(d);for(f in p=[],t){for(v in b=[],t[f])b.push(t[f][v]);p.push({name:f,data:b,checkList:[],len:b.filter((function(e){return"not_available_az_list"===e.label})).length,id:1e3*Math.random()})}this.list=p}case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"confirm",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],this.list.map((function(e){t=[].concat(Object(i["a"])(t),Object(i["a"])(e.checkList))})),!(t.length<1)){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,m["a"].sync_mirror({os_id:this.os_id,az_ids:t});case 6:a=e.sent,"Success"===a.code&&this.$message.success(a.message),this.visible_sync=!1;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cancel",value:function(){this.visible_sync=!1}}]),a}(f["e"]);Object(p["a"])([Object(f["d"])("visible")],b.prototype,"visible_sync",void 0),Object(p["a"])([Object(f["c"])({default:""})],b.prototype,"os_id",void 0),b=Object(p["a"])([Object(f["a"])({components:{}})],b);var v=b,h=v,y=(a("67ed"),a("2877")),g=Object(y["a"])(h,r,s,!1,null,"651a7a20",null);t["a"]=g.exports},d81d:function(e,t,a){"use strict";var r=a("23e7"),s=a("b727").map,i=a("1dde"),o=i("map");r({target:"Array",proto:!0,forced:!o},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},e165:function(e,t,a){},e521:function(e,t,a){},e527:function(e,t,a){"use strict";var r=a("81a9"),s=a("bff7"),i=a("4328"),o=a.n(i);t["a"]={get_instance_list:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/ecs_list/",e))},operate_instance:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/operate/",e))},delete_instance:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/delete/",e))},recover_instance:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/recover/",e))},destroy_instance:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/destroy/",e))},get_status_list:function(){return Object(r["a"])(Object(s["b"])("GET","/ecs/ecs_status_list/"))},get_family_data:function(){return Object(r["a"])(Object(s["b"])("GET","/ecs/get_family_data/"))},reset_password:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/ecs_reset_password/",e))},update_spec:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/ecs_change_configure/",e))},update_system:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/ecs_change_system/",e))},get_usage_ip:function(e){return Object(r["a"])(Object(s["b"])("GET","/ecs/get_deleted_ecs_ip/",e))},get_vnc_url:function(e){return Object(r["a"])(Object(s["b"])("GET","/ecs/vnc_info/",e))},start_charge:function(e){return Object(r["a"])(Object(s["b"])("POST","/resource/start_charge/",e))},change_config_price:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/change_config_price/",e))},change_system_price:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/change_system_price/",e))},each_resource_price:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/each_resource_price/",e))},add_common_mirror:function(e){return Object(r["a"])(Object(s["b"])("POST","/img/create_pub_image_by_ecs/",e))},set_net:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/ecs_set_base_nic/",e))},get_default_dns:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/az_default_dns/",e))},mount_gpu_card:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/instance_gpu_card/",e))},update_gpu_status:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/update_gpu_status/",e))},export_list:function(e){return Object(r["a"])({method:"GET",url:"/ecs_business/v1/ecs/ecs_list_download/",params:e,paramsSerializer:function(e){return o.a.stringify(e)},responseType:"blob"})},get_tag_list:function(){return Object(r["a"])(Object(s["b"])("GET","/ecs/get_tag_list/"))},get_rescue_image_list:function(e){return Object(r["a"])(Object(s["b"])("GET","/ecs/get_rescue_image_list/",e))},enter_rescue:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/enter_rescue/",e))},exit_rescue:function(e){return Object(r["a"])(Object(s["b"])("POST","/ecs/exit_rescue/",e))}}},e52b:function(e,t,a){"use strict";a("7141")},ec8a:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"状态变更",visible:e.visible_sync,width:"600px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t},close:e.cancel}},[a("el-form",{ref:"form_status",attrs:{model:e.form_data,"label-position":"left","label-width":"100px","label-suffix":":"}},[a("el-form-item",{attrs:{label:"镜像id"}},[a("span",[e._v(e._s(e.form_data.id))])]),a("el-form-item",{attrs:{label:"镜像名称"}},[a("span",[e._v(e._s(e.form_data.name))])]),a("el-form-item",{attrs:{label:"状态",prop:"status",rules:{required:!0,message:"请选择变更状态",trigger:"blur"}}},[a("el-radio-group",{model:{value:e.form_data.status,callback:function(t){e.$set(e.form_data,"status",t)},expression:"form_data.status"}},[a("el-radio",{attrs:{label:1}},[e._v("可用")]),a("el-radio",{attrs:{label:0}},[e._v("停用")])],1)],1),a("el-form-item",{attrs:{label:"说明",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",autosize:"",maxlength:256,"show-word-limit":"",resize:"none"},model:{value:e.form_data.remark,callback:function(t){e.$set(e.form_data,"remark",t)},expression:" form_data.remark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},s=[],i=a("1da1"),o=a("d4ec"),n=a("bee2"),c=a("262e"),l=a("2caf"),_=(a("96cf"),a("a9e3"),a("9ab4")),u=a("1b40"),d=a("e4d0"),p=function(e){Object(c["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.form_data={id:e.oper_info.os_id,name:e.oper_info.display_name,status:"running"===e.oper_info.status?1:0,remark:""},e}return Object(n["a"])(a,[{key:"confirm",value:function(){var e=this,t=this.$refs.form_status,a=this.form_data,r=a.id,s=a.status,o=a.remark;"running"===this.oper_info.status&&1===Number(this.form_data.status)||"blocking"===this.oper_info.status&&0===Number(this.form_data.status)||t.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return t.next=3,d["a"].change_status({os_id:r,is_running:Number(s),context:o});case 3:i=t.sent,"Success"===i.code&&e.$message.success(i.message),e.visible_sync=!1;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"cancel",value:function(){var e=this.$refs.form_status;e.resetFields(),this.visible_sync=!1}}]),a}(u["e"]);Object(_["a"])([Object(u["d"])("visible")],p.prototype,"visible_sync",void 0),Object(_["a"])([Object(u["c"])({default:function(){}})],p.prototype,"oper_info",void 0),p=Object(_["a"])([Object(u["a"])({components:{}})],p);var f=p,m=f,b=(a("f2e8"),a("2877")),v=Object(b["a"])(m,r,s,!1,null,"c960e760",null);t["a"]=v.exports},ecd5:function(e,t,a){"use strict";a("5049")},f2e8:function(e,t,a){"use strict";a("f58f")},f58f:function(e,t,a){},fcc9:function(e,t,a){"use strict";a("97c8")}}]);
//# sourceMappingURL=chunk-5df3d07e.1741589092878.js.map