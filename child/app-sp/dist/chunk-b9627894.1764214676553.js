(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-b9627894"],{"0298":function(e,t,s){},"039b":function(e,t,s){"use strict";var a=s("81a9"),i=s("bff7");t["a"]={get_snapshot_list(e){return Object(a["a"])(Object(i["b"])("GET","/snapshot/snapshot_list/",e))},get_snapshot_chains_list(e){return Object(a["a"])(Object(i["b"])("GET","/snapshot/snapshot_chains_list/",e))},chains_detail(e){return Object(a["a"])(Object(i["b"])("GET","/snapshot/snapshot_chains_detail/",e))},record(e){return Object(a["a"])(Object(i["b"])("GET","/snapshot/history_record/",e))},get_monitor_id(e){return Object(a["a"])(Object(i["b"])("GET","/snapshot/snapshot_disk_ids/",e))},get_snapshot_info(e){return Object(a["a"])(Object(i["i"])("POST","/snapshot/snapshot_use_monitor",e))}}},"0d11":function(e,t,s){},1060:function(e,t,s){},1477:function(e,t,s){"use strict";var a=s("81a9"),i=s("bff7");t["a"]={get_host_list(e){return Object(a["a"])(Object(i["d"])("POST","/host/get_host_list/",e))},get_room_list(e){return Object(a["a"])(Object(i["d"])("GET","/host/machine_room_list/",e))},get_status_list(e){return Object(a["a"])(Object(i["d"])("GET","/host/host_status_list/",e))},external_management(e){return Object(a["a"])(Object(i["d"])("GET","/host/external_management/",e))},migrate(e){return Object(a["a"])(Object(i["d"])("POST","/host/migration_operation/",e))},disperse(e){return Object(a["a"])(Object(i["d"])("POST","/host/disperse_operation/",e))},record(e){return Object(a["a"])(Object(i["d"])("POST","/host/host_operation_record/",e))},recommended_host(e){return Object(a["a"])(Object(i["d"])("POST","/host/recommended_host/",e))},host_maintenance(e){return Object(a["a"])(Object(i["d"])("POST","/host/host_maintenance/",e))},finish_maintenance(e){return Object(a["a"])(Object(i["d"])("POST","/host/host_finish_maintenance/",e))},shelves(e){return Object(a["a"])(Object(i["d"])("POST","/host/host_off_shelves/",e))},get_detail_overview(e){return Object(a["a"])(Object(i["d"])("GET","/host/host_main_details/",e))},get_detail_storage(e){return Object(a["a"])(Object(i["d"])("GET","/host/host_disk/",e))},down(e){return Object(a["a"])(Object(i["d"])("GET","/host/host_list_download/",e))},host_operate(e){return Object(a["a"])(Object(i["d"])("POST","/host/operate/",e))},host_import(e){return Object(a["a"])(Object(i["d"])("POST","/host/import/",e))},get_host_attribution(e){return Object(a["a"])(Object(i["d"])("GET","/host/get_host_attribution/",e))},set_host_attribution(e){return Object(a["a"])(Object(i["d"])("POST","/host/set_host_attribution/",e))},get_host_type(e){return Object(a["a"])(Object(i["d"])("GET","/host/get_host_config/",e))},update_attribute(e){return Object(a["a"])(Object(i["d"])("POST","/host/set_host_config/",e))},getCustomerList(e){return Object(a["a"])(Object(i["d"])("POST","/host/get_customer_list/",e))},getFamilyList(e){return Object(a["a"])(Object(i["d"])("POST","/host/get_family_list/",e))},finish_validate(e){return Object(a["a"])(Object(i["d"])("POST","/host/verification_finish/",e))},get_host_recycle_department(e){return Object(a["a"])(Object(i["d"])("GET","/host/get_host_recycle_department/",e))},get_host_list_field(e){return Object(a["a"])(Object(i["d"])("GET","/host/get_host_list_field/",e))},get_task_list(e){return Object(a["a"])(Object(i["d"])("GET","/host/business_test_task/",e))},create_test_task(e){return Object(a["a"])(Object(i["d"])("POST","/host/create_test_task/",e))},get_host_filter_item(e){return Object(a["a"])(Object(i["d"])("POST","/host/get_host_filter_item/",e))},set_remark(e){return Object(a["a"])(Object(i["d"])("POST","/host/set_host_remark/",e))},set_flag(e){return Object(a["a"])(Object(i["d"])("POST","/host/set_host_tag/",e))},update_ecs_info(e){return Object(a["a"])(Object(i["d"])("POST","/ecs/update_ecs_info/",e))},crash_clear(e){return Object(a["a"])(Object(i["b"])("POST","/host/crash_clear/",e))},crash_recover(e){return Object(a["a"])(Object(i["b"])("POST","/host/crash_recover/",e))},set_lock(e){return Object(a["a"])(Object(i["d"])("POST","/host/host_lock/",e))},set_unlock(e){return Object(a["a"])(Object(i["d"])("POST","/host/host_unlock/",e))},set_maintenance(e){return Object(a["a"])(Object(i["d"])("POST","/host/host_maintenance/",e))},get_maintenance_record(e){return Object(a["a"])(Object(i["d"])("GET","/host/host_maintenance_record/",e))},get_lock_record(e){return Object(a["a"])(Object(i["d"])("GET","/host/host_lock_record/",e))},recover_storage_error(e){return Object(a["a"])(Object(i["d"])("POST","/host/recover_storage_error/",e))},agent_update(e){return Object(a["a"])(Object(i["d"])("POST","/host/handle_host_agent_update/",e))},agent_rollback(e){return Object(a["a"])(Object(i["d"])("POST","/host/handle_host_agent_rollback/",e))},set_prepare_host(e){return Object(a["a"])(Object(i["d"])("POST","/host/set_prepare_host/",e))},get_ovs_version(e){return Object(a["a"])(Object(i["d"])("GET","/host/ovs_version_list/",e))}}},"1e42":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"复制",placement:"bottom"}},[t("el-button",{attrs:{type:"text"},on:{click:e.copyText}},[t("svg-icon",{attrs:{icon:"copy"}})],1)],1)},i=[],r=s("9ab4"),o=s("1b40"),l=s("3673");let n=class extends o["e"]{copyText(){this.$copyText(this.content).then(()=>{this.$message.success({message:"复制成功"})}).catch(()=>{this.$message.error({message:"复制失败"})})}};Object(r["a"])([Object(o["c"])({default:""})],n.prototype,"content",void 0),n=Object(r["a"])([Object(o["a"])({components:{SvgIcon:l["a"]}})],n);var _=n,c=_,d=(s("22c9"),s("2877")),u=Object(d["a"])(c,a,i,!1,null,"23bfc843",null);t["a"]=u.exports},"1f00":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-dialog",{attrs:{title:"制作公共镜像",visible:e.visible_sync,width:"500px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t}}},[t("el-form",{ref:"form_ecs",attrs:{model:e.form_data,"label-position":"left","label-width":"100px","label-suffix":":"}},[t("el-form-item",{staticClass:"content",attrs:{label:"实例名称/ID"}},[t("span",[e._v(e._s(e.form_data.ecs))])]),t("el-form-item",{staticClass:"content",attrs:{label:"客户名称/ID"}},[t("span",[e._v(e._s(e.form_data.customer))])]),t("el-form-item",{staticClass:"content",attrs:{label:"可用区"}},[t("span",[e._v(e._s(e.form_data.az))])]),t("el-form-item",{staticClass:"content",attrs:{label:"实例规格"}},[t("span",[e._v(e._s(e.form_data.spec))])]),t("el-form-item",{staticClass:"content",attrs:{label:"系统盘"}},[t("span",[e._v(e._s(e.form_data.system_disk))])]),t("el-form-item",{staticClass:"content",attrs:{label:"镜像"}},[t("span",[e._v(e._s(e.form_data.mirror))])]),t("el-form-item",{attrs:{label:"镜像名称",prop:"name",rules:[{required:!0,message:"请输入镜像名称",trigger:"blur"}]}},[t("el-input",{model:{value:e.form_data.name,callback:function(t){e.$set(e.form_data,"name",t)},expression:" form_data.name"}})],1),t("el-form-item",{staticClass:"test",attrs:{label:"测试账户ID",prop:"test_id",rules:[{required:!0,trigger:"blur",validator:e.validate_account}]}},[t("div",{staticClass:"test"},[t("customer-input",{on:{FnCustomer:e.FnCustomer}})],1),t("el-tooltip",{attrs:{content:"请选择测试账户ID，待镜像制作完成进行测试",placement:"right",effect:"light"}},[t("el-button",{staticClass:"m-left10",attrs:{type:"text"}},[t("svg-icon",{attrs:{icon:"info"}})],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")]),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},i=[],r=(s("d9e2"),s("9ab4")),o=s("1b40"),l=s("3673"),n=s("e527"),_=s("bad9");let c=class extends o["e"]{constructor(){super(...arguments),this.form_data={ecs:`${this.ecs_info.ecs_name} / ${this.ecs_info.ecs_id}`,customer:`${this.ecs_info.customer_name} / ${this.ecs_info.customer_id}`,az:this.ecs_info.az_name,spec:this.ecs_info.is_gpu?`${this.ecs_info.cpu_size}vCPU${this.ecs_info.ram_size}GiB  ${this.ecs_info.gpu_size}*${this.ecs_info.gpu_show_type}`:`${this.ecs_info.cpu_size}vCPU${this.ecs_info.ram_size}GiB`,system_disk:this.new?`${this.ecs_info.disk_info.system.system_disk_type} ${this.ecs_info.disk_info.system.disk_size}GB`:`${this.ecs_info.system_disk_type} ${this.ecs_info.system_disk_size}GB`,mirror:this.ecs_info.os_name,name:"",test_id:""}}FnCustomer(e){this.form_data.test_id=e}validate_account(e,t,s){return 0===t.length?s(new Error("请选择测试账户ID")):s()}async confirm(){let e=this.$refs.form_ecs;e.validate(async e=>{if(e){let e=await n["a"].add_common_mirror({display_name:this.form_data.name,az_id:this.ecs_info.az_id,ecs_id:this.ecs_info.ecs_id,customer_id:this.ecs_info.customer_id,customer_ids:this.form_data.test_id});"Success"===e.code&&this.$message.success(e.message),this.visible_sync=!1}})}cancel(){this.visible_sync=!1}};Object(r["a"])([Object(o["d"])("visible")],c.prototype,"visible_sync",void 0),Object(r["a"])([Object(o["c"])({default:()=>{}})],c.prototype,"ecs_info",void 0),Object(r["a"])([Object(o["c"])({default:!1})],c.prototype,"new",void 0),c=Object(r["a"])([Object(o["a"])({components:{SvgIcon:l["a"],CustomerInput:_["a"]}})],c);var d=c,u=d,p=(s("f6ea"),s("2877")),m=Object(p["a"])(u,a,i,!1,null,"22e3d05c",null);t["a"]=m.exports},"205d":function(e,t,s){},"22c9":function(e,t,s){"use strict";s("79c1")},"268f":function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("el-dialog",{attrs:{title:"操作记录",visible:e.visible,width:"60%","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t},close:e.back}},[t("div",[t("el-dialog",{attrs:{title:"响应信息",visible:e.res_visible,width:"60%","destroy-on-close":!0,"append-to-body":"","custom-class":"response-data"},on:{"update:visible":function(t){e.res_visible=t},close:e.clost_res}},[t("div",[e._v(e._s(e.response))])])],1),t("div",[t("action-block",{attrs:{search_option:["physical","message"].includes(e.type)?{...e.search}:e.search},on:{"fn-search":e.fn_search}}),["physical","message"].includes(e.type)?t("div",{staticClass:"icon m-bottom10"},[t("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[t("el-button",{attrs:{type:"text"},on:{click:e.getOperateRecordList}},[t("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1):e._e(),t("el-table",{staticClass:"record-table",attrs:{data:e.record_list,border:""}},[t("el-table-column",{attrs:{prop:"oper_time",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.oper_time?e.moment(s.row.oper_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),t("el-table-column",{attrs:{prop:"oper_type_display",label:"操作内容"}}),t("el-table-column",{attrs:{prop:"status_display",label:"状态"}}),["message","physical"].includes(e.type)?t("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.response?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.view(s.row.response)}}},[e._v("查看")]):t("span",[e._v("-")])]}}])}):t("el-table-column",{attrs:{prop:"response",label:"响应信息"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.result?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.view(s.row.result)}}},[e._v("查看")]):t("span",[e._v("-")])]}}],null,!1,79404134)}),t("el-table-column",{attrs:{prop:"finish_time",label:"完成时间"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.finish_time?e.moment(s.row.finish_time).format("YYYY-MM-DD HH:mm:ss"):""))])]}}])}),t("el-table-column",{attrs:{prop:"oper_user",label:"nas"===e.type?"操作用户":"用户名"}}),["physical","message"].includes(e.type)?e._e():t("el-table-column",{attrs:{prop:"flag_display",label:"操作标识"}})],1),t("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.back}},[e._v("返回")])],1)],1)])],1)},i=[],r=s("9ab4"),o=s("1b40"),l=s("c811"),n=s("d772"),_=s("1477"),c=s("e4d0"),d=s("039b"),u=s("fc43"),p=s("c1df"),m=s.n(p),b=s("8ce4"),h=s("3673");let f=class extends o["e"]{constructor(){super(...arguments),this.state_list=[{type:"",label:"全部"},{type:"doing",label:"执行中"},{type:"success",label:"成功"},{type:"failed",label:"失败"}],this.search={state:{list:this.state_list,placeholder:"请选择状态"},content:{placeholder:"请输入操作内容"}},this.record_list=[],this.current=1,this.size=20,this.total=0,this.search_data={},this.moment=m.a,this.response="",this.res_visible=!1}created(){this.fn_search()}fn_search(e={}){this.current=1,this.search_data=e,this.getOperateRecordList()}async getOperateRecordList(){let e;const{search_data:t}=this;let s="physical"!==this.type?{task_type:t.content,cloud_id:this.record_id}:{content:t.content,cloud_id:this.record_id,cloud_type:"host"},a={status:t.state||"",page_size:this.size,page_index:this.current,...s};if(e="physical"===this.type?await _["a"].record({...a}):"message"===this.type?await c["a"].get_pub_operate_record({os_id:this.record_id,status:t.state||"",content_type:t.content,page_size:this.size,page_index:this.current}):"snapshot"===this.type?await d["a"].record({cloud_id:this.record_id,cloud_type:"snapshot",status:t.state||"",task_type:t.content,page_size:this.size,page_index:this.current}):"nas"===this.type?await u["a"].get_nas_record({...a}):await n["a"].get_operate_record_list({cloud_type:this.type?this.type:"ecs",...a}),"Success"===e.code){var i,r;if(["physical","message"].includes(this.type)){let t=["create_time","content","status_name","response","update_time","op_user"],s=["oper_time","oper_type_display","status_display","response","finish_time","oper_user"];this.record_list=Object(b["b"])(e.data.operation_list,s,t)}else{var o;this.record_list=(null===(o=e.data)||void 0===o?void 0:o.history_record)||[]}this.total=(null===(i=e.data)||void 0===i||null===(r=i.page_info)||void 0===r?void 0:r.count)||0}}handleSizeChange(e){this.size=e,this.getOperateRecordList()}handleCurrentChange(e){this.current=e,this.getOperateRecordList()}view(e){this.response=e,this.res_visible=!0}clost_res(){this.res_visible=!1,this.response=""}back(){}};Object(r["a"])([Object(o["c"])(Boolean)],f.prototype,"visible",void 0),Object(r["a"])([Object(o["c"])(String)],f.prototype,"record_id",void 0),Object(r["a"])([Object(o["c"])(String)],f.prototype,"type",void 0),Object(r["a"])([Object(o["b"])("close")],f.prototype,"back",null),f=Object(r["a"])([Object(o["a"])({components:{ActionBlock:l["a"],SvgIcon:h["a"]}})],f);var g=f,v=g,y=(s("f813"),s("2877")),O=Object(y["a"])(v,a,i,!1,null,null,null);t["a"]=O.exports},"2bf0":function(e,t,s){"use strict";s.r(t);s("e9f5"),s("910d");var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("action-block",{attrs:{search_option:e.search_option},on:{"fn-search":e.search},scopedSlots:e._u([{key:"default",fn:function(){return[t("el-button",{attrs:{type:"primary",disabled:!e.auth_list.includes("add_mirror")},on:{click:e.add}},[e._v("新增镜像")])]},proxy:!0}])}),t("div",{staticClass:"icon m-bottom10"},[t("el-tooltip",{attrs:{content:"导出",placement:"bottom",effect:"light"}},[t("el-button",{attrs:{type:"text",disabled:!e.auth_list.includes("export")},on:{click:e.down}},[t("svg-icon",{staticClass:"export",attrs:{icon:"export"}})],1)],1),t("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[t("el-button",{attrs:{type:"text"},on:{click:e.refresh}},[t("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1),t("el-table",{ref:"table",staticClass:"event-table",attrs:{data:e.list,border:"","cell-style":e.setCellStyle,"row-class-name":e.rowStyle},on:{"sort-change":e.FnSortChange,"filter-change":e.filterAttribute,"selection-change":e.handleSelectionChange,"row-click":e.FnOperRow,"row-contextmenu":e.FnRightClick}},[t("el-table-column",{attrs:{type:"selection",width:"40"}}),t("el-table-column",{attrs:{prop:"os_id",label:"镜像ID"}}),t("el-table-column",{attrs:{prop:"display_name",label:"镜像名称"}}),t("el-table-column",{attrs:{prop:"model_image_type",label:"模型镜像类型"}}),t("el-table-column",{attrs:{prop:"os_type",label:"操作系统类型","filter-multiple":!1,"column-key":"os_type",filters:e.mirror_type,"min-width":"120px"}}),t("el-table-column",{attrs:{prop:"os_bit",label:"系统架构"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.os_bit)+"位")])]}}])}),t("el-table-column",{attrs:{prop:"kernel_version",label:"内核版本"}}),t("el-table-column",{attrs:{prop:"os_file_type",label:"镜像文件类型"}}),t("el-table-column",{attrs:{prop:"size",label:"镜像大小",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.size)+"GB")])]}}])}),t("el-table-column",{attrs:{prop:"image_type",label:"镜像类型","filter-multiple":!1,"column-key":"support_type",filters:e.compute_type}}),t("el-table-column",{attrs:{prop:"support_gpu_driver",label:"驱动类型","filter-multiple":!1,"column-key":"support_gpu_driver",filters:e.drive_type},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(""!==s.row.support_gpu_driver?s.row.support_gpu_driver:"-"))])]}}])}),t("el-table-column",{attrs:{prop:"driver_version",label:"驱动版本"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(""!==s.row.driver_version?s.row.driver_version:"-"))])]}}])}),t("el-table-column",{attrs:{prop:"cuda_version",label:"CUDA版本"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(""!==s.row.cuda_version?s.row.cuda_version:"-"))])]}}])}),t("el-table-column",{attrs:{prop:"other_software",label:"其他软件"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(""!==s.row.other_software?s.row.other_software:"-"))])]}}])}),t("el-table-column",{attrs:{prop:"product_source",label:"产品来源","filter-multiple":!1,"column-key":"product_source",filters:e.source_type}}),t("el-table-column",{attrs:{prop:"backend_type",label:"存储类型"}}),t("el-table-column",{attrs:{prop:"customer",label:"客户权限"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(s.row.white_customer_list&&s.row.white_customer_list.length>0?s.row.white_customer_list.join(","):"全部客户"))])]}}])}),t("el-table-column",{attrs:{prop:"path_name",label:"路径",width:"140"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tooltip",{attrs:{content:s.row.path_name,placement:"bottom",effect:"light"}},[t("span",{staticClass:"id-cell"},[e._v(e._s(s.row.path_name))])]),s.row.path_name?t("Clipboard",{attrs:{content:s.row.path_name}}):e._e()]}}])}),t("el-table-column",{attrs:{prop:"az",label:"可用区",width:"120","class-name":"mirror-az"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v("共 "),t("span",{staticClass:"num_message"},[e._v(e._s(s.row.az_list.length))]),e._v(" 个")]),t("span",[e._v(" ( 可用:"),t("span",{staticClass:"num_message"},[e._v(" "+e._s(s.row.az_list.filter(e=>"running"===e.status).length))]),e._v(" )")])]}}])}),t("el-table-column",{attrs:{prop:"",label:"",type:"expand",width:"50"},scopedSlots:e._u([{key:"default",fn:function(s){return e._l(s.row.az_list,(function(a,i){return t("div",{key:i,staticClass:"table-expand"},[t("div",{staticClass:"az-name"},[t("span",[e._v(e._s(a.az_name))]),a.pod_name_list.length>0?t("span",[e._v(" ( ")]):e._e(),e._l(a.pod_name_list.slice(0,2),(function(s,i){return t("span",{key:s},[e._v(e._s(s)+e._s(i===a.pod_name_list.length-1?"":","))])})),a.pod_name_list.length>2?t("span",[e._v(" ...")]):e._e(),a.pod_name_list.length>0?t("span",[e._v(")")]):e._e()],2),t("div",{staticClass:"status",class:a.status},[e._v(e._s(a.status_display))]),t("div",{staticClass:"time"},[e._v(e._s(a.create_time))]),t("div",{staticClass:"perch"}),t("el-button",{staticClass:"operate",attrs:{type:"text",disabled:!["running","blocking","create_fail"].includes(a.status)||!e.auth_list.includes("del_mirror")},on:{click:function(t){return e.del_az({...s.row,azId:a.az_id,azName:a.az_name})}}},[e._v("删除")])],1)}))}}])}),t("el-table-column",{attrs:{prop:"status_display",label:"状态","filter-multiple":!1,"column-key":"status",filters:e.status_list,width:"120"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",{class:[s.row.status]},[e._v(e._s(s.row.status_display))])]}}])}),t("el-table-column",{attrs:{prop:"maintenance_expiration_date",label:"官方维护"}}),t("el-table-column",{attrs:{prop:"create_time",label:"创建时间",sortable:"custom",width:"120"}}),t("el-table-column",{attrs:{prop:"update_time",label:"更新时间",width:"120"}})],1),t("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e.visible&&["add","edit"].includes(e.oper_type)?[t("add-common",{attrs:{visible:e.visible,oper_info:e.oper_info},on:{"update:visible":function(t){e.visible=t}}})]:e._e(),e.visible&&["sync"].includes(e.oper_type)?[t("sync-mirror",{attrs:{visible:e.visible,os_id:e.oper_info.os_id},on:{"update:visible":function(t){e.visible=t}}})]:e._e(),e.visible&&["change"].includes(e.oper_type)?[t("change-status",{attrs:{visible:e.visible,oper_info:e.oper_info},on:{"update:visible":function(t){e.visible=t}}})]:e._e(),e.visible&&["del"].includes(e.oper_type)?[t("del-mirror",{attrs:{visible:e.visible,rows:[e.oper_info],type:e.oper_type},on:{"update:visible":function(t){e.visible=t}}})]:e._e(),e.visible&&["del_az"].includes(e.oper_type)?[t("del-mirror",{attrs:{visible:e.visible,rows:[e.oper_info],type:e.oper_type},on:{"update:visible":function(t){e.visible=t}}})]:e._e(),e.visible&&["record"].includes(e.oper_type)?[t("Record",{attrs:{visible:e.visible,type:"message",record_id:e.oper_info.os_id},on:{"update:visible":function(t){e.visible=t},close:e.close}})]:e._e(),1===e.multiple_selection.length?t("span",[t("right-click",{attrs:{multi_rows:e.multiple_selection,menus:e.menus,name:e.multiple_selection.length>0?e.multiple_selection[0].display_name:"",error_msg:e.error_msg},on:{"fn-click":e.infoClick}})],1):e._e()],2)},i=[],r=(s("14d9"),s("ab43"),s("a732"),s("9ab4")),o=s("1b40"),l=s("c811"),n=s("3673"),_=s("e4d0"),c=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-dialog",{attrs:{title:e.oper_info.os_id?"编辑镜像":"新增镜像",visible:e.visible_sync,width:"800px","destroy-on-close":!0,"close-on-click-modal":!1,"custom-class":"add-common"},on:{"update:visible":function(t){e.visible_sync=t},close:e.cancel}},[t("el-form",{ref:"mirror_form",staticClass:"demo-ruleForm",attrs:{model:e.form_data,rules:e.rules,"label-width":"170px","label-position":"left","label-suffix":":"}},[e.oper_info.os_id?t("el-form-item",{attrs:{label:"镜像ID",prop:"id"}},[t("span",[e._v(e._s(e.form_data.id))])]):e._e(),t("el-form-item",{attrs:{label:"镜像名称",prop:"display_name"}},[t("el-input",{attrs:{type:"textarea",autosize:"",resize:"none",maxlength:128,"show-word-limit":""},model:{value:e.form_data.display_name,callback:function(t){e.$set(e.form_data,"display_name",t)},expression:"form_data.display_name"}})],1),t("el-form-item",{attrs:{label:"英文名称",prop:"display_name_en"}},[t("el-input",{attrs:{type:"textarea",autosize:"",resize:"none",maxlength:128,"show-word-limit":""},model:{value:e.form_data.display_name_en,callback:function(t){e.$set(e.form_data,"display_name_en",t)},expression:"form_data.display_name_en"}})],1),t("el-form-item",{attrs:{label:"模型镜像类型",prop:"model_image_type"}},[t("el-select",{model:{value:e.form_data.model_image_type,callback:function(t){e.$set(e.form_data,"model_image_type",t)},expression:"form_data.model_image_type"}},e._l(e.model_image_type_list,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"操作系统类型",prop:"os_type"}},[t("el-select",{model:{value:e.form_data.os_type,callback:function(t){e.$set(e.form_data,"os_type",t)},expression:"form_data.os_type"}},e._l(e.mirror_type_list,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"版本",prop:"os_version"}},[t("el-input",{attrs:{type:"textarea",autosize:"",resize:"none",maxlength:36,"show-word-limit":""},model:{value:e.form_data.os_version,callback:function(t){e.$set(e.form_data,"os_version",t)},expression:"form_data.os_version"}})],1),t("el-form-item",{attrs:{label:"系统架构",prop:"os_bit"}},[t("el-select",{model:{value:e.form_data.os_bit,callback:function(t){e.$set(e.form_data,"os_bit",t)},expression:"form_data.os_bit"}},e._l(e.bit_list,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"属性",prop:"props"}},[t("span",[e._v("公共镜像")])]),t("el-form-item",{attrs:{label:"客户ID",prop:"customer_ids"}},[t("customer-input",{attrs:{customers:e.customer_list,list:e.oper_info.customer_list},on:{FnCustomer:e.FnCustomer}})],1),t("el-form-item",{attrs:{label:"镜像大小",prop:"size"}},[[t("el-input-number",{attrs:{min:"Windows"===e.form_data.os_type?40:20},model:{value:e.form_data.size,callback:function(t){e.$set(e.form_data,"size",t)},expression:"form_data.size"}}),e._v(" GB ")]],2),t("el-form-item",{attrs:{label:"内核版本",prop:"core_version"}},[t("el-input",{attrs:{type:"textarea",autosize:"",resize:"none",maxlength:36,"show-word-limit":""},model:{value:e.form_data.core_version,callback:function(t){e.$set(e.form_data,"core_version",t)},expression:"form_data.core_version"}})],1),t("el-form-item",{attrs:{label:"可用区",prop:"az_id"}},[e.oper_info.os_id?t("span",e._l(e.oper_info.az_list,(function(s){return t("span",{key:s.az_id,staticClass:"az"},[e._v(e._s(s.az_name)+e._s(e.oper_info.az_list.length>0?";":""))])})),0):t("el-select",{model:{value:e.form_data.az_id,callback:function(t){e.$set(e.form_data,"az_id",t)},expression:"form_data.az_id"}},e._l(e.az_list,(function(e){return t("el-option",{key:e.az_id,attrs:{label:e.az_name,value:e.az_id}})})),1)],1),t("el-form-item",{attrs:{label:"产品来源",prop:"source_type"}},[t("el-select",{model:{value:e.form_data.product_source,callback:function(t){e.$set(e.form_data,"product_source",t)},expression:"form_data.product_source"}},e._l(e.product_source_type_list,(function(e){return t("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"存储类型",prop:"backend_type"}},[t("el-select",{model:{value:e.form_data.backend_type,callback:function(t){e.$set(e.form_data,"backend_type",t)},expression:"form_data.backend_type"}},e._l(e.storage_type_list,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"镜像类型",prop:"support_type"}},[t("el-select",{class:{compute:!e.oper_info.os_id},attrs:{disabled:"iso"===e.form_data.os_file_type},model:{value:e.form_data.support_type,callback:function(t){e.$set(e.form_data,"support_type",t)},expression:"form_data.support_type"}},e._l(e.compute_type_list,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),"GPU"===e.form_data.support_type?t("el-form-item",{attrs:{label:"驱动类型",prop:"support_gpu_driver"}},[t("el-select",{model:{value:e.form_data.support_gpu_driver,callback:function(t){e.$set(e.form_data,"support_gpu_driver",t)},expression:"form_data.support_gpu_driver"}},e._l(e.drive_type_list,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),"GPU"===e.form_data.support_type?t("el-form-item",{attrs:{label:"驱动版本",prop:"driver_version"}},[t("el-input",{attrs:{maxlength:128,"show-word-limit":""},model:{value:e.form_data.driver_version,callback:function(t){e.$set(e.form_data,"driver_version",t)},expression:"form_data.driver_version"}})],1):e._e(),"GPU"===e.form_data.support_type?t("el-form-item",{attrs:{label:"CUDA版本",prop:"cuda_version"}},[t("el-input",{attrs:{maxlength:128,"show-word-limit":""},model:{value:e.form_data.cuda_version,callback:function(t){e.$set(e.form_data,"cuda_version",t)},expression:"form_data.cuda_version"}})],1):e._e(),"GPU"===e.form_data.support_type?t("el-form-item",{attrs:{label:"其他软件",prop:"other_software"}},[t("el-input",{attrs:{maxlength:128,"show-word-limit":""},model:{value:e.form_data.other_software,callback:function(t){e.$set(e.form_data,"other_software",t)},expression:"form_data.other_software"}})],1):e._e(),t("el-form-item",{attrs:{label:"镜像文件类型",prop:"os_file_type"}},[t("el-select",{model:{value:e.form_data.os_file_type,callback:function(t){e.$set(e.form_data,"os_file_type",t)},expression:"form_data.os_file_type"}},e._l(e.file_type_list,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"MD5",prop:"path_md5"}},[t("el-input",{attrs:{type:"textarea",autosize:"",maxlength:32,"show-word-limit":"",resize:"none"},model:{value:e.form_data.path_md5,callback:function(t){e.$set(e.form_data,"path_md5",t)},expression:"form_data.path_md5"}})],1),e.oper_info.os_id?e._e():t("el-form-item",{attrs:{label:"镜像在对象存储文件名",prop:"oss_file_name"}},[t("el-input",{attrs:{type:"textarea",autosize:"",maxlength:128,"show-word-limit":"",resize:"none"},model:{value:e.form_data.oss_file_name,callback:function(t){e.$set(e.form_data,"oss_file_name",t)},expression:"form_data.oss_file_name"}})],1),t("el-form-item",{attrs:{label:"官方维护",prop:"validity"}},[t("el-radio-group",{model:{value:e.form_data.validity,callback:function(t){e.$set(e.form_data,"validity",t)},expression:"form_data.validity"}},[t("el-radio",{attrs:{label:"1"}},[e._v("长期")]),t("el-radio",{attrs:{label:"0"}},[e._v("有限 "),"0"===e.form_data.validity?t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:e.form_data.vali_time,callback:function(t){e.$set(e.form_data,"vali_time",t)},expression:"form_data.vali_time"}}):e._e()],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")]),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},d=[],u=(s("d9e2"),s("bad9"));let p=class extends o["e"]{constructor(){super(...arguments),this.model_image_type_list=[],this.mirror_type_list=[],this.bit_list=[{id:64,name:"64位"},{id:32,name:"32位"}],this.az_list=[],this.storage_type_list=[],this.product_source_type_list=[],this.compute_type_list=[{value:"GPU",label:"GPU"},{value:"CPU/GPU",label:"基础镜像"}],this.drive_type_list=["Datacenter","Geforce","Enflame","GRID"],this.file_type_list=["qcow2","iso"],this.query_url="",this.os_file=[],this.customer_list=this.oper_info.os_id?this.oper_info.white_customer_list:[],this.form_data={id:this.oper_info.os_id,display_name:this.oper_info.display_name?this.oper_info.display_name:"",os_type:this.oper_info.os_type?this.oper_info.os_type:"",model_image_type:this.oper_info.model_image_type?this.oper_info.model_image_type:"",os_version:this.oper_info.os_version?this.oper_info.os_version:"",os_bit:this.oper_info.os_bit?this.oper_info.os_bit:this.bit_list[0].id,customer_ids:"",size:this.oper_info.os_id?this.oper_info.size:20,az_id:this.oper_info.az_list?this.oper_info.az_list[0]:"",backend_type:this.oper_info.backend_type?this.oper_info.backend_type:"",support_type:this.oper_info.support_type&&"GPU"!==this.oper_info.support_type?this.compute_type_list[1].value:this.compute_type_list[0].value,product_source:"",support_gpu_driver:this.oper_info.support_gpu_driver?this.oper_info.support_gpu_driver:this.drive_type_list[0],os_file_type:this.oper_info.os_file_type?this.oper_info.os_file_type:this.file_type_list[0],path_md5:this.oper_info.path_md5?this.oper_info.path_md5:"",upload_time:this.oper_info.os_id?this.oper_info.upload_time:new Date,oss_file_name:"",core_version:this.oper_info.kernel_version?this.oper_info.kernel_version:"",driver_version:this.oper_info.driver_version?this.oper_info.driver_version:"",cuda_version:this.oper_info.cuda_version?this.oper_info.cuda_version:"",other_software:this.oper_info.other_software?this.oper_info.other_software:"",validity:this.oper_info.os_id&&"长期"!==this.oper_info.maintenance_expiration_date?"0":"1",vali_time:"长期"===this.oper_info.maintenance_expiration_date||isNaN(new Date(this.oper_info.maintenance_expiration_date).getTime())?"":this.oper_info.maintenance_expiration_date,display_name_en:this.oper_info.display_name_en?this.oper_info.display_name_en:""},this.rules={display_name:[{required:!0,validator:this.validate_name,trigger:"change"}],os_type:[{required:!0,message:"请选择镜像类型",trigger:"change"}],model_image_type:[{required:!0,message:"请选择模型镜像类型",trigger:"change"}],os_version:[{required:!0,message:"请输入版本",trigger:"change"}],os_bit:[{required:!0,message:"请选择位数",trigger:"change"}],az_id:[{required:!0,message:"请选择可用区",trigger:"change"}],backend_type:[{required:!0,message:"请选择存储类型",trigger:"change"}],support_type:[{required:!0,message:"请选择计算类型",trigger:"change"}],product_source:[{required:!0,message:"请选择产品来源",trigger:"change"}],os_file_type:[{required:!0,message:"请选择镜像文件类型",trigger:"change"}],path_md5:[{required:!0,validator:this.path_md5_check,trigger:"change"}],oss_file_name:[{required:!0,message:"请输入镜像在对象存储文件名",trigger:"change"}],driver_version:[{required:!0,message:"请输入驱动版本",trigger:"change"}],cuda_version:[{required:!0,message:"请输入CUDA版本",trigger:"change"}],validity:[{required:!0,validator:this.validateTime,trigger:"change"}],other_software:[{required:!0,message:"请输入其他软件",trigger:"change"}],core_version:[{required:!0,message:"请输入内核版本",trigger:"change"}],display_name_en:[{required:!0,validator:this.validate_name_en,trigger:"change"}]}}created(){this.get_model_image_type(),this.get_mirror_type(),this.get_disk_list(),this.get_product_source()}path_md5_check(e,t,s){return t?t.length<32?s(new Error("请输入32位MD5值")):s():s(new Error("请输入MD5"))}validateTime(e,t,s){if("0"===t)return this.form_data.vali_time?s():s(new Error("请选择维护有效期"));s()}validate_name(e,t,s){return t?this.form_data.display_name.length>128?s(new Error("镜像名称长度最多128个字符")):void _["a"].check_name({os_id:this.oper_info.os_id?this.oper_info.os_id:"",display_name:t}).then(e=>"Success"===e.code?e.data.usable?s():s("镜像名称重复,请重新输入"):s("镜像名称长度最多128个字符")).catch(e=>s("镜像名称长度最多128个字符")):s(new Error("请输入镜像名称"))}validate_name_en(e,t,s){return t?this.form_data.display_name_en.length>128?s(new Error("镜像名称长度最多128个字符")):void _["a"].check_name({os_id:this.oper_info.os_id?this.oper_info.os_id:"",display_name_en:t}).then(e=>"Success"===e.code?e.data.usable_en?s():s("镜像名称重复,请重新输入"):s("镜像名称长度最多128个字符")).catch(e=>s("镜像名称长度最多128个字符")):s(new Error("请输入英文名称"))}FnDisable(e){return e>new Date}async get_product_source(){let e=await _["a"].get_product_source();"Success"===e.code?(this.product_source_type_list=e.data,this.form_data.product_source=this.oper_info.product_source?this.oper_info.product_source:this.product_source_type_list[0].value):this.$message.error(e.message)}async get_disk_list(){let e=await _["a"].get_disk_list({});if("Success"===e.code){for(let t in e.data)this.storage_type_list.push({id:t,name:e.data[t]}),this.oper_info.os_id&&this.form_data.backend_type===e.data[t]&&(this.form_data.backend_type=t);this.oper_info.os_id||(this.form_data.backend_type=this.storage_type_list[0].id)}}watch_backend_type(){this.oper_info.os_id||(this.form_data.az_id="",this.get_available_az())}async get_available_az(){let e=await _["a"].get_available_az({backend_type:this.form_data.backend_type,employee_no:this.$store.state.employee_no,user_name:this.$store.state.login_name});"Success"===e.code&&(this.az_list=e.data,this.form_data.az_id=this.az_list[0].az_id)}async get_mirror_type(){let e=await _["a"].get_mirror_type({});"Success"===e.code&&(this.mirror_type_list=e.data.type_list,this.oper_info.os_id||(this.form_data.os_type=this.mirror_type_list[0]))}async get_model_image_type(){let e=await _["a"].get_model_image_type({});"Success"===e.code&&(this.model_image_type_list=e.data.type_list,this.oper_info.os_id||(this.form_data.model_image_type=this.model_image_type_list[0]))}before_upload(e){}FnSuccess(e,t,s){}watch_os_type(e){this.form_data.size="Windows"===e?Math.max(this.form_data.size,40):Math.max(this.form_data.size,20)}watch_os_file_type(e){"iso"===e&&(this.form_data.support_type="基础镜像")}FnCustomer(e){this.form_data.customer_ids=e?e.join(","):""}async confirm(){const e=this.$refs.mirror_form,{product_source:t,display_name:s,os_type:a,os_version:i,os_bit:r,size:o,customer_ids:l,az_id:n,backend_type:c,model_image_type:d,support_type:u,support_gpu_driver:p,oss_file_name:m,os_file_type:b,path_md5:h,upload_time:f,core_version:g,driver_version:v,cuda_version:y,other_software:O,validity:j,vali_time:w,display_name_en:k}=this.form_data;e.validate(async e=>{if(e){if(this.oper_info.os_id){let e=await _["a"].edit_pub_mirror({os_id:this.oper_info.os_id,display_name:s,customer_ids:""===l?[]:l.split(","),backend_type:c,support_type:u,product_source:t,support_gpu_driver:"GPU"===u?p:void 0,os_file_type:b,path_md5:h,size:o,kernel_version:g,driver_version:"GPU"===u?v:void 0,cuda_version:"GPU"===u?y:void 0,other_software:"GPU"===u?O:void 0,maintenance_expiration_date:"1"===j?"LongTerm":w,display_name_en:k,os_type:a,os_version:i,os_bit:r,model_image_type:d});"Success"===e.code&&this.$message.success(e.message)}else{let e=await _["a"].add_pub_mirror({display_name:s,os_type:a,os_version:i,os_bit:r,customer_ids:l,az_id:n,size:o,backend_type:c,support_type:u,product_source:t,support_gpu_driver:"GPU"===u?p:void 0,os_file_type:b,path_md5:h,oss_file_name:m,kernel_version:g,driver_version:"GPU"===u?v:void 0,cuda_version:"GPU"===u?y:void 0,other_software:"GPU"===u?O:void 0,maintenance_expiration_date:"1"===j?"LongTerm":w,display_name_en:k,model_image_type:d});"Success"===e.code&&this.$message.success(e.message)}this.visible_sync=!1}})}cancel(){const e=this.$refs.mirror_form;e.resetFields(),this.visible_sync=!1}};Object(r["a"])([Object(o["c"])({default:()=>{}})],p.prototype,"oper_info",void 0),Object(r["a"])([Object(o["d"])("visible")],p.prototype,"visible_sync",void 0),Object(r["a"])([Object(o["f"])("form_data.backend_type")],p.prototype,"watch_backend_type",null),Object(r["a"])([Object(o["f"])("form_data.os_type")],p.prototype,"watch_os_type",null),Object(r["a"])([Object(o["f"])("form_data.os_file_type")],p.prototype,"watch_os_file_type",null),p=Object(r["a"])([Object(o["a"])({components:{SvgIcon:n["a"],CustomerInput:u["a"]}})],p);var m=p,b=m,h=(s("c2cd"),s("5b0b"),s("2877")),f=Object(h["a"])(b,c,d,!1,null,"3a45b1f4",null),g=f.exports,v=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-dialog",{attrs:{title:"同步镜像",visible:e.visible_sync,width:"800px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t},close:e.cancel}},[t("el-card",{staticClass:"card-box"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v("镜像信息")]),t("el-row",{attrs:{gutter:24}},e._l(e.info,(function(s){return t("el-col",{key:s.id,attrs:{span:12}},[t("span",{staticClass:"label"},[e._v(e._s(s.label)+": ")]),t("span",{staticClass:"value"},[e._v(e._s(s.value))])])})),1)],1),t("el-card",[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v("镜像同步位置")]),t("div",{staticClass:"card"},e._l(e.list,(function(s,a){return t("el-card",{key:s.id,staticClass:"sync"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v(e._s(s.name))]),t("el-checkbox-group",{model:{value:s.checkList,callback:function(t){e.$set(s,"checkList",t)},expression:"item.checkList"}},e._l(s.data,(function(s){return"not_available_az_list"!==s.label?t("el-checkbox",{key:s.az_id,attrs:{label:s.az_id,disabled:"current_az_list"===s.label}},[e._v(e._s(s.az_name))]):e._e()})),1),t("el-divider"),s.len>0?t("div",{staticClass:"m-bottom10"},[e._v("不支持可用区")]):e._e(),e._l(s.data,(function(s){return"not_available_az_list"===s.label?t("div",{key:s},[e._v(e._s(s.az_name))]):e._e()}))],2)})),1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")]),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},y=[];let O=class extends o["e"]{constructor(){super(...arguments),this.info={name:{label:"镜像名称",value:"1"},id:{label:"镜像ID",value:"2"},system:{label:"操作系统",value:"3"},size:{label:"规格",value:"4"},type:{label:"类型",value:"5"}},this.az_info={},this.list=[],this.current_az_list=[{az_id:"16e6e380-729d-11ec-b62a-1e00e202ff80",az_name:"大别山A",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091019",region_group_name:"中国大陆"}],this.available_az_list=[{az_id:"a18d6c6a-9619-418a-8526-2878f2653d5f",az_name:"北京A",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091019",region_group_name:"中国大陆"},{az_id:"a18d6c6a-9619-418a-8526-2878f2653d52",az_name:"北京A2",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091011",region_group_name:"中国大陆"},{az_id:"a18d6c6a-9619-418a-8526-2878f2653d51",az_name:"北京A1",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091019",region_group_name:"中国大陆"},{az_id:"a18d6c6a-9619-418a-8526-2878f2653d53",az_name:"北京A3",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091019",region_group_name:"中国大陆"},{az_id:"f9755192-b89d-11eb-b74e-1e00e202ff80",az_name:"圣保罗A",region_group_id:"498cc42c-b89d-11eb-b74e-1e00e202ff80",region_group_name:"南美地区"}],this.not_available_az_list=[{az_id:"a18d6c6a-9619-418a-8526-2878f2653d5f",az_name:"北京A",region_group_id:"408fd19e-fa78-11e6-bd9a-30b49e091019",region_group_name:"中国大陆"}]}created(){this.get_pub_sync_detail()}async get_pub_sync_detail(){let e={},t=await _["a"].get_pub_sync_detail({os_id:this.os_id});if("Success"===t.code){this.info.name.value=t.data.display_name,this.info.id.value=t.data.os_id,this.info.system.value=`${t.data.os_type} ${t.data.os_version} ${t.data.os_bit} 位`,this.info.size.value=t.data.size?t.data.size+"GB":"",this.info.type.value="public"===t.data.template_type?"公共镜像":"私有镜像";const{current_az_list:s,available_az_list:a,not_available_az_list:i}=t.data;let r=s.map(e=>e.az_id),o={current_az_list:s,available_az_list:a.filter(e=>!r.includes(e.az_id)),not_available_az_list:i};for(let t in o)o[t].map(s=>{e[s.region_group_name]={...e[s.region_group_name],[s.az_id]:{...s,label:t}}});let l=[];for(let t in e){let s=[];for(let a in e[t])s.push(e[t][a]);l.push({name:t,data:s,checkList:[],len:s.filter(e=>"not_available_az_list"===e.label).length,id:1e3*Math.random()})}this.list=l}}async confirm(){let e=[];if(this.list.map(t=>{e=[...e,...t.checkList]}),e.length<1)return!1;let t=await _["a"].sync_mirror({os_id:this.os_id,az_ids:e});"Success"===t.code&&this.$message.success(t.message),this.visible_sync=!1}cancel(){this.visible_sync=!1}};Object(r["a"])([Object(o["d"])("visible")],O.prototype,"visible_sync",void 0),Object(r["a"])([Object(o["c"])({default:""})],O.prototype,"os_id",void 0),O=Object(r["a"])([Object(o["a"])({components:{}})],O);var j=O,w=j,k=(s("ceb7"),Object(h["a"])(w,v,y,!1,null,"6c09b8e6",null)),z=k.exports,x=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-dialog",{attrs:{title:"状态变更",visible:e.visible_sync,width:"600px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t},close:e.cancel}},[t("el-form",{ref:"form_status",attrs:{model:e.form_data,"label-position":"left","label-width":"100px","label-suffix":":"}},[t("el-form-item",{attrs:{label:"镜像id"}},[t("span",[e._v(e._s(e.form_data.id))])]),t("el-form-item",{attrs:{label:"镜像名称"}},[t("span",[e._v(e._s(e.form_data.name))])]),t("el-form-item",{attrs:{label:"状态",prop:"status",rules:{required:!0,message:"请选择变更状态",trigger:"blur"}}},[t("el-radio-group",{model:{value:e.form_data.status,callback:function(t){e.$set(e.form_data,"status",t)},expression:"form_data.status"}},[t("el-radio",{attrs:{label:1}},[e._v("可用")]),t("el-radio",{attrs:{label:0}},[e._v("停用")])],1)],1),t("el-form-item",{attrs:{label:"说明",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",autosize:"",maxlength:256,"show-word-limit":"",resize:"none"},model:{value:e.form_data.remark,callback:function(t){e.$set(e.form_data,"remark",t)},expression:" form_data.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")]),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)},S=[];let C=class extends o["e"]{constructor(){super(...arguments),this.form_data={id:this.oper_info.os_id,name:this.oper_info.display_name,status:"running"===this.oper_info.status?1:0,remark:""}}confirm(){const e=this.$refs.form_status,{id:t,status:s,remark:a}=this.form_data;"running"===this.oper_info.status&&1===Number(this.form_data.status)||"blocking"===this.oper_info.status&&0===Number(this.form_data.status)||e.validate(async e=>{if(e){let e=await _["a"].change_status({os_id:t,is_running:Number(s),context:a});"Success"===e.code&&this.$message.success(e.message),this.visible_sync=!1}})}cancel(){const e=this.$refs.form_status;e.resetFields(),this.visible_sync=!1}};Object(r["a"])([Object(o["d"])("visible")],C.prototype,"visible_sync",void 0),Object(r["a"])([Object(o["c"])({default:()=>{}})],C.prototype,"oper_info",void 0),C=Object(r["a"])([Object(o["a"])({components:{}})],C);var T=C,P=T,$=(s("ee87"),Object(h["a"])(P,x,S,!1,null,"09940e52",null)),G=$.exports,E=s("1f00"),D=s("268f"),L=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("el-dialog",{attrs:{title:"删除镜像",visible:e.visible_sync,width:"1000px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t}}},[t("div",["del_az"===e.type?t("div",{staticClass:"title"},[e._v("您将删除"),t("span",{staticClass:"num_message"},[e._v("1")]),e._v("个镜像： "),t("span",{staticClass:"num_message"},[e._v(e._s(e.rows[0].azName))]),e._v("下的镜像"),t("span",{staticClass:"num_message"},[e._v(e._s(e.rows[0].display_name)+"镜像")])]):e._e(),t("el-alert",{attrs:{title:e.alert_msg,type:"warning",center:"",closable:!1}}),"del"===e.type?t("el-table",{attrs:{data:e.rows,border:"","max-height":"300"}},[t("el-table-column",{attrs:{prop:"os_id",label:"镜像名称/ID",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",[e._v(e._s(s.row.display_name))]),t("div",[e._v(e._s(s.row.os_id))])]}}],null,!1,1536022648)}),t("el-table-column",{attrs:{prop:"os_type",label:"镜像类型"}}),t("el-table-column",{attrs:{prop:"az",label:"可用区"},scopedSlots:e._u([{key:"default",fn:function(s){return e._l(s.row.az_list,(function(a){return t("span",{key:a.az_id},[e._v(e._s(a.az_name)+e._s(s.row.az_list.length>0?";":"")+" ")])}))}}],null,!1,2363480231)}),t("el-table-column",{attrs:{prop:"status_display",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",{class:[s.row.status]},[e._v(e._s(s.row.status_display))])]}}],null,!1,3954708699)})],1):e._e()],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),t("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)])],1)},M=[];let F=class extends o["e"]{constructor(){super(...arguments),this.alert_msg="del"===this.type?"将删除该镜像在全部可用区的文件。镜像删除后，客户将无法使用该镜像进行创建实例与重装操作系统操作，确定要执行删除操作吗？":"镜像删除后，客户将无法在删除可用区使用该镜像进行创建实例与重装操作系统操作，确定要执行删除操作吗？"}created(){}async confirm(){let e;e="del"===this.type?await _["a"].del_pub_mirror({os_ids:[this.rows[0].os_id]}):await _["a"].del_pub_mirror_az({os_id:this.rows[0].os_id,az_ids:[this.rows[0].azId]}),"Success"===e.code&&this.$message.success(e.message),this.visible_sync=!1}cancel(){this.visible_sync=!1}};Object(r["a"])([Object(o["d"])("visible")],F.prototype,"visible_sync",void 0),Object(r["a"])([Object(o["c"])({default:()=>{}})],F.prototype,"rows",void 0),Object(r["a"])([Object(o["c"])()],F.prototype,"type",void 0),F=Object(r["a"])([o["a"]],F);var I=F,U=I,Y=(s("3201"),Object(h["a"])(U,L,M,!1,null,"743c0794",null)),q=Y.exports,R=s("c1df"),A=s.n(R),B=s("8ce4"),H=s("1e42"),N=s("bd4d"),W=s("e8c0"),J=s("cf88");let X=class extends o["e"]{constructor(){super(...arguments),this.search_option={os_id:{placeholder:"请输入镜像ID"},display_name:{placeholder:"请输入镜像名称"},time:{placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!0,dis_day:1,defaultTime:[]}},this.list=[],this.current=1,this.size=20,this.total=0,this.search_data={},this.auth_list=[],this.mirror_type=[],this.filter_data={},this.multiple_selection=[],this.compute_type=[{text:"GPU",value:"GPU"},{text:"基础镜像",value:"CPU"}],this.drive_type=[{text:"DataCenter",value:"DataCenter"},{text:"Geforce",value:"Geforce"},{text:"Enflame",value:"Enflame"},{text:"GRID",value:"GRID"}],this.source_type=[],this.status_list=[],this.visible=!0,this.oper_type="",this.oper_info={},this.menus=[{label:"编辑",value:"edit",single:!0,disabled:!1,authLabel:"edit_mirror",fun:"edit",status:["running","blocking"]},{label:"删除",value:"del",single:!0,disabled:!1,authLabel:"del_mirror",fun:"del",status:["running","blocking","create_fail"]},{label:"状态变更",value:"changeStatus",single:!0,disabled:!1,authLabel:"change_status",fun:"changeStatus",status:["running","blocking"]},{label:"同步",value:"FnSync",single:!0,disabled:!1,authLabel:"sync_mirror",fun:"FnSync",status:["running"]},{label:"操作记录",value:"record",single:!0,disabled:!1,authLabel:"record"}],this.error_msg={edit:"仅支持可用或者停用状态的镜像操作",del:"仅支持可用",changeStatus:"仅支持可用或者停用状态的镜像操作",FnSync:"仅支持可用状态的镜像操作"}}get operateBtns(){const e=[{label:"编辑",authLabel:"edit_mirror",fun:"edit",list:["running","blocking"],msg:"仅支持可用或者停用状态的镜像操作"},{label:"删除",authLabel:"del_mirror",fun:"del",list:["running","blocking","create_fail"],msg:"仅支持可用,停用或者创建失败状态的镜像操作"},{label:"状态变更",authLabel:"change_status",fun:"changeStatus",list:["running","blocking"],msg:"仅支持可用或者停用状态的镜像操作"},{label:"同步",authLabel:"sync_mirror",fun:"FnSync",list:["running"],msg:"仅支持可用状态的镜像操作"}];return this.$store.state.is_special_user?e.filter(e=>"同步"!==e.label):e}created(){this.auth_list=this.$store.state.auth_info["mirror_list"],this.get_mirror_type(),this.get_source_type(),this.get_status_list(),this.search()}watch_visible(e){e||(this.oper_info={},this.getMirrorList())}watch_pod(){this.search(this.search_data)}watch_multi(){this.handleMenus()}isButtonDisabled(e,t,s){return!!(t&&e&&e.status&&e.authLabel)&&(!e.status.includes(t.status)||!s.includes(e.authLabel))}handleMenus(){for(const e of this.menus)e.disabled=this.isButtonDisabled(e,this.multiple_selection[0],this.auth_list)}FnRightClick(e,t,s){const a=this.multiple_selection.some(t=>t.os_id===e.os_id);a||this.$refs.table.toggleRowSelection(e),Object(W["a"])(e,t,s)}FnOperRow(e){this.$refs.table.toggleRowSelection(e)}rowStyle({row:e}){const t=this.multiple_selection.some(t=>t.os_id===e.os_id);if(t)return"rowStyle"}infoClick(e){this[e.value](this.multiple_selection[0]),Object(J["a"])()}handle(e,t){this[t](e)}handleSelectionChange(e){this.multiple_selection=e}async get_mirror_type(){let e=await _["a"].get_mirror_type({});"Success"===e.code&&e.data.type_list.map(e=>{this.mirror_type.push({text:e,value:e})})}async get_source_type(){let e=await _["a"].get_product_source();"Success"===e.code&&e.data.map(e=>{this.source_type.push({text:e.value,value:e.value})})}async get_status_list(){let e=await _["a"].get_status_list({});if("Success"===e.code){let t=[];for(let s in e.data)t.push({text:e.data[s],value:s});this.status_list=t}}search(e={}){this.current=1,this.search_data={...e,...this.filter_data},this.getMirrorList()}refresh(){this.getMirrorList()}async getMirrorList(){const{os_id:e,display_name:t,time:s,os_type:a,sort_size:i,support_gpu_driver:r,sort_create_time:o,support_type:l,status:n,product_source:c}=this.search_data;let d=await _["a"].get_pub_mirror_list({az_id:this.$store.state.az_id,image_id:e,image_name:t,start_day:s&&s[0]?A()(s[0]).format("YYYY-MM-DD"):void 0,end_day:s&&s[1]?A()(s[1]).format("YYYY-MM-DD"):void 0,os_type:a?a[0]:void 0,sort_size:i,support_gpu_driver:r?r[0]:void 0,product_source:c?c[0]:void 0,status:n?n[0]:void 0,sort_create_time:o,page_index:this.current,page_size:this.size,model_image:1});"Success"===d.code&&(this.list=d.data.image_list,this.total=d.data.page_info.count)}handleSizeChange(e){this.size=e,this.getMirrorList()}handleCurrentChange(e){this.current=e,this.getMirrorList()}setCellStyle(e,t,s,a){if(5==a)return{color:"red"}}FnSortChange(e){this.search_data.sort_size=void 0,this.search_data.sort_create_time=void 0,this.search_data["sort_"+e.prop]="descending"===e.order?"1":"ascending"===e.order?"0":void 0,this.getMirrorList()}filterAttribute(e){this.filter_data={...this.filter_data,...e},this.search(this.search_data)}add(){this.visible=!0,this.oper_type="add"}edit(e){this.visible=!0,this.oper_type="edit",this.oper_info=e}del(e){this.visible=!0,this.oper_type="del",this.oper_info=e}async del_az(e){this.visible=!0,this.oper_type="del_az",this.oper_info=e}changeStatus(e){this.visible=!0,this.oper_type="change",this.oper_info=e}FnSync(e){this.visible=!0,this.oper_type="sync",this.oper_info=e}record(e){this.visible=!0,this.oper_type="record",this.oper_info=e}down(){const{os_id:e,display_name:t,product_server_id:s,time:a,os_type:i,support_gpu_driver:r,support_type:o,status:l,product_source:n}=this.search_data;let _=Object(B["d"])({image_id:e,image_name:t,product_server_id:s,start_day:a&&a[0]?A()(a[0]).format("YYYY-MM-DD"):void 0,end_day:a&&a[1]?A()(a[1]).format("YYYY-MM-DD"):void 0,os_type:i?i[0]:void 0,support_gpu_driver:r?r[0]:void 0,product_source:n?n[0]:void 0,support_type:o?o[0]:void 0,status:l?l[0]:void 0,az_id:this.$store.state.az_id});window.location.href="/ecs_business/v1/img/pub_image_list_download/"+_}operate(e){}close(e){this.visible=!1}};Object(r["a"])([Object(o["f"])("visible")],X.prototype,"watch_visible",null),Object(r["a"])([Object(o["f"])("$store.state.az_id")],X.prototype,"watch_pod",null),Object(r["a"])([Object(o["f"])("multiple_selection",{deep:!0})],X.prototype,"watch_multi",null),X=Object(r["a"])([Object(o["a"])({components:{ActionBlock:l["a"],SvgIcon:n["a"],AddCommon:g,SyncMirror:z,ChangeStatus:G,AddCommonMirror:E["a"],Record:D["a"],DelMirror:q,Clipboard:H["a"],RightClick:N["a"]}})],X);var K=X,Q=K,V=(s("d38c"),s("62f7"),Object(h["a"])(Q,a,i,!1,null,"7521be0c",null));t["default"]=V.exports},3201:function(e,t,s){"use strict";s("1060")},"5b0b":function(e,t,s){"use strict";s("c77b")},"62df":function(e,t,s){},"62f7":function(e,t,s){"use strict";s("0298")},"79c1":function(e,t,s){},"7f6e":function(e,t,s){},"8ce4":function(e,t,s){"use strict";s.d(t,"e",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"d",(function(){return l}));s("14d9"),s("e9f5"),s("ab43");function a(e,t,s,a,i){let r=[];return e.map(e=>{r.push({[a]:e[t],[i]:e[s]})}),r}function i(e,t,s,a={}){let i=[];return e.map(e=>{let r={};t.map((t,a)=>{r[t]=e[s[a]]}),i.push({...r,...a})}),i}function r(e,t=!1){let s={};for(let a in e){const{billing_scheme_id:i,billing_cycle_id:r,billing_items:o,gic_goods_id:l}=e[a];let n={};for(let e in o){let s={attr_id:o[e].attr_id,name:o[e].name},a={id:o[e].id,key:e};n[e]=t?{...s,...a}:a}s[a]={billing_scheme_id:i,billing_cycle_id:r,billing_items:n,gic_goods_id:t?l:void 0}}return s}function o(e,t){return e.map(e=>e[t])}function l(e){let t="";for(let s in e)e[s]&&(t+=`${s}=${e[s]}&`);return""===t?"":"?"+t.slice(0,t.length-1)}},"8ee3":function(e,t,s){},9409:function(e,t,s){},a732:function(e,t,s){"use strict";var a=s("23e7"),i=s("c65b"),r=s("2266"),o=s("59ed"),l=s("825a"),n=s("46c4"),_=s("2a62"),c=s("f99f"),d=c("some",TypeError);a({target:"Iterator",proto:!0,real:!0,forced:d},{some:function(e){l(this);try{o(e)}catch(a){_(this,"throw",a)}if(d)return i(d,this,e);var t=n(this),s=0;return r(t,(function(t,a){if(e(t,s++))return a()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},bad9:function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"customer"},[t("el-select",{attrs:{multiple:"",placeholder:"输入关键字可进行搜索",filterable:"",remote:"","remote-method":e.getCustomerList},on:{"visible-change":e.changeCustomer},model:{value:e.customer_id,callback:function(t){e.customer_id=t},expression:"customer_id"}},e._l(e.customerList,(function(s){return t("el-option",{key:s.id,attrs:{value:s.id,label:`${s.id}(${s.name})`}},[e._v(e._s(`${s.id}(${s.name})`))])})),1)],1)},i=[],r=(s("e9f5"),s("ab43"),s("9ab4")),o=s("1b40"),l=s("1477");let n=class extends o["e"]{constructor(){super(...arguments),this.customer_id=[],this.customerList=[],this.flag=!0}created(){this.customerList=[...this.list],this.customer_id=this.customers,this.getDefaultCustomerList()}changeCustomer(e){e&&(this.customerList=[])}async getDefaultCustomerList(){if(this.list.length>0)return;let e=await l["a"].getCustomerList({host_ids:this.rows.map(e=>e.host_id),customer_ids:Array.isArray(this.customer_id)?this.customer_id:[]});"Success"==e.code&&(this.customerList=e.data.customer_list)}async getCustomerList(e="",t=!1){if(!e&&!t)return;let s=await l["a"].getCustomerList({host_ids:this.rows.map(e=>e.host_id),customer_id:e});"Success"==s.code&&(this.customerList=s.data.customer_list)}watch_customer_id(){this.FnCustomer()}FnCustomer(){return this.customer_id}};Object(r["a"])([Object(o["c"])({default:()=>[]})],n.prototype,"customers",void 0),Object(r["a"])([Object(o["c"])({default:()=>[]})],n.prototype,"rows",void 0),Object(r["a"])([Object(o["c"])({default:()=>[]})],n.prototype,"list",void 0),Object(r["a"])([Object(o["f"])("customer_id",{immediate:!0,deep:!0})],n.prototype,"watch_customer_id",null),Object(r["a"])([Object(o["b"])("FnCustomer")],n.prototype,"FnCustomer",null),n=Object(r["a"])([Object(o["a"])({})],n);var _=n,c=_,d=(s("fb2b"),s("2877")),u=Object(d["a"])(c,a,i,!1,null,null,null);t["a"]=u.exports},c2cd:function(e,t,s){"use strict";s("f1ac")},c77b:function(e,t,s){},ceb7:function(e,t,s){"use strict";s("7f6e")},d38c:function(e,t,s){"use strict";s("205d")},d772:function(e,t,s){"use strict";var a=s("81a9"),i=s("bff7");t["a"]={get_operate_record_list(e){return Object(a["a"])(Object(i["b"])("GET","/ecs/history_record/",e))},get_detail(e){return Object(a["a"])(Object(i["b"])("GET","/ecs/get_ecs_detail/",e))}}},e4d0:function(e,t,s){"use strict";var a=s("81a9"),i=s("bff7");t["a"]={get_pub_mirror_list(e){return Object(a["a"])(Object(i["b"])("GET","/img/get_pub_image_list/",e))},check_name(e){return Object(a["a"])(Object(i["b"])("POST","/img/name_check/",e))},get_mirror_type(e){return Object(a["a"])(Object(i["b"])("GET","/img/image_type/",e))},get_model_image_type(e){return Object(a["a"])(Object(i["b"])("GET","/img/model_image_type/",e))},add_pub_mirror(e){return Object(a["a"])(Object(i["b"])("GET","/img/create_pub_image/",e))},edit_pub_mirror(e){return Object(a["a"])(Object(i["b"])("POST","/img/edit_image/",e))},change_status(e){return Object(a["a"])(Object(i["b"])("POST","/img/alter_image/",e))},del_pub_mirror_az(e){return Object(a["a"])(Object(i["b"])("POST","/img/delete_pub_image/",e))},del_pub_mirror(e){return Object(a["a"])(Object(i["b"])("POST","/img/batch_delete_pub_image/",e))},get_pub_operate_record(e){return Object(a["a"])(Object(i["b"])("POST","/img/pub_image_operation_list/",e))},get_pub_sync_detail(e){return Object(a["a"])(Object(i["b"])("POST","/img/pub_image_info/",e))},sync_mirror(e){return Object(a["a"])(Object(i["b"])("POST","/img/sync_pub_image/",e))},get_private_mirror_list(e){return Object(a["a"])(Object(i["b"])("GET","/img/get_private_image_list/",e))},get_status_list(e){return Object(a["a"])(Object(i["b"])("GET","/img/get_image_status_list/",e))},get_available_az(e){return Object(a["a"])(Object(i["b"])("POST","/img/get_available_az/",e))},get_disk_list(e){return Object(a["a"])(Object(i["b"])("GET","/img/backend_type/",e))},get_product_source(){return Object(a["a"])(Object(i["b"])("GET","/ecs/get_product_source/"))}}},e527:function(e,t,s){"use strict";var a=s("81a9"),i=s("bff7"),r=s("4328"),o=s.n(r);t["a"]={get_instance_list(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/ecs_list/",e))},operate_instance(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/operate/",e))},delete_instance(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/delete/",e))},recover_instance(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/recover/",e))},destroy_instance(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/destroy/",e))},get_status_list(){return Object(a["a"])(Object(i["b"])("GET","/ecs/ecs_status_list/"))},get_family_data(){return Object(a["a"])(Object(i["b"])("GET","/ecs/get_family_data/"))},reset_password(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/ecs_reset_password/",e))},update_spec(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/ecs_change_configure/",e))},update_system(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/ecs_change_system/",e))},get_usage_ip(e){return Object(a["a"])(Object(i["b"])("GET","/ecs/get_deleted_ecs_ip/",e))},get_vnc_url(e){return Object(a["a"])(Object(i["b"])("GET","/ecs/vnc_info/",e))},start_charge(e){return Object(a["a"])(Object(i["b"])("POST","/resource/start_charge/",e))},change_config_price(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/change_config_price/",e))},change_system_price(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/change_system_price/",e))},each_resource_price(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/each_resource_price/",e))},add_common_mirror(e){return Object(a["a"])(Object(i["b"])("POST","/img/create_pub_image_by_ecs/",e))},set_net(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/ecs_set_base_nic/",e))},get_default_dns(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/az_default_dns/",e))},mount_gpu_card(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/instance_gpu_card/",e))},update_gpu_status(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/update_gpu_status/",e))},export_list(e){return Object(a["a"])({method:"GET",url:"/ecs_business/v1/ecs/ecs_list_download/",params:e,paramsSerializer:e=>o.a.stringify(e),responseType:"blob"})},get_tag_list(){return Object(a["a"])(Object(i["b"])("GET","/ecs/get_tag_list/"))},get_rescue_image_list(e){return Object(a["a"])(Object(i["b"])("GET","/ecs/get_rescue_image_list/",e))},enter_rescue(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/enter_rescue/",e))},exit_rescue(e){return Object(a["a"])(Object(i["b"])("POST","/ecs/exit_rescue/",e))}}},e8c0:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s("cf88");function i(e,t,s){s.preventDefault(),document.addEventListener("contextmenu",e=>{const t=e.target;if(t.closest(".el-table")){let t=document.querySelector("#menu");if(t){t.style.display="block";let s=t.offsetHeight,i=t.offsetWidth;console.log("menuHeight",s);let r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=e.clientX,n=e.clientY,_=l,c=n;o<l+i&&(_=l-i),r<n+s&&(c=r-s),t.style.left=_-250+"px",t.style.top=c-50+"px",t.style.display="block",t.style.zIndex="1000",document.addEventListener("click",a["a"])}}}),document.addEventListener("contextmenu",a["a"])}},ee87:function(e,t,s){"use strict";s("0d11")},f1ac:function(e,t,s){},f6ea:function(e,t,s){"use strict";s("62df")},f813:function(e,t,s){"use strict";s("9409")},fb2b:function(e,t,s){"use strict";s("8ee3")}}]);
//# sourceMappingURL=chunk-b9627894.1764214676553.js.map