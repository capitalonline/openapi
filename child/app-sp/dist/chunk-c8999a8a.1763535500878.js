(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-c8999a8a"],{"057a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("action-block",{attrs:{search_option:t.search_option},on:{"fn-search":t.search}}),e("div",{staticClass:"icon m-bottom10"},[e("el-tooltip",{attrs:{content:"刷新",placement:"bottom",effect:"light"}},[e("el-button",{attrs:{type:"text"},on:{click:t.refresh}},[e("svg-icon",{staticClass:"refresh",attrs:{icon:"refresh"}})],1)],1)],1),e("el-table",{attrs:{data:t.list,border:""}},[e("el-table-column",{attrs:{prop:"transfer_vm_id",label:"虚拟机ID"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",[e("el-tooltip",{attrs:{content:s.row.transfer_vm_id,placement:"bottom",effect:"light"}},[e("span",{staticClass:"id-cell num_message"},[t._v(t._s(s.row.transfer_vm_id))])]),s.row.transfer_vm_id?e("Clipboard",{attrs:{content:s.row.transfer_vm_id}}):t._e()],1)]}}])}),e("el-table-column",{attrs:{prop:"nas_id",label:"文件系统ID"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",[e("el-tooltip",{attrs:{content:s.row.nas_id,placement:"bottom",effect:"light"}},[e("span",{staticClass:"id-cell num_message"},[t._v(t._s(s.row.nas_id))])]),s.row.nas_id?e("Clipboard",{attrs:{content:s.row.nas_id}}):t._e()],1)]}}])}),e("el-table-column",{attrs:{prop:"transfer_vm_host_name",label:"宿主机名称"}}),e("el-table-column",{attrs:{prop:"status_cn",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",{class:s.row.status},[t._v(t._s(s.row.status_cn))])]}}])}),e("el-table-column",{attrs:{prop:"vpc_id",label:"VPC ID/名称"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"not-clickable"},[t._v(t._s(s.row.vpc_id))]),e("div",[t._v(t._s(s.row.vpc_name))])]}}])}),e("el-table-column",{attrs:{prop:"subnet_id",label:"子网ID/子网名称"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"not-clickable"},[t._v(t._s(s.row.subnet_id))]),e("div",[t._v(t._s(s.row.subnet_name))])]}}])}),e("el-table-column",{attrs:{prop:"transfer_vm_vpc_ip",label:"VPC IP/存储网IP"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",[t._v("VPC IP:"+t._s(s.row.transfer_vm_vpc_ip))]),e("div",[t._v("存储网IP:"+t._s(s.row.transfer_vm_storage_ip))])]}}])}),e("el-table-column",{attrs:{prop:"transfer_vm_conf_cpu",label:"CPU"}}),e("el-table-column",{attrs:{prop:"transfer_vm_conf_mem",label:"内存"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",[t._v(t._s(s.row.transfer_vm_conf_mem)+"GB")])]}}])}),e("el-table-column",{attrs:{prop:"transfer_vm_os_type",label:"操作系统"}}),e("el-table-column",{attrs:{prop:"transfer_vm_image",label:"镜像名称"}}),e("el-table-column",{attrs:{prop:"operate",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{type:"text",disabled:!t.auth_list.includes("vnc")},on:{click:function(e){return t.FnVnc(s.row.transfer_vm_id)}}},[t._v("远程连接")]),e("el-button",{attrs:{type:"text",disabled:!t.auth_list.includes("monitor")},on:{click:function(e){return t.FnToMonitor(s.row)}}},[t._v("监控")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[20,50,100],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},n=[],o=(s("14d9"),s("9ab4")),r=s("1b40"),i=s("c811"),c=s("3673"),l=s("fc43"),_=s("1e42");let p=class extends r["e"]{constructor(){super(...arguments),this.search_option={transfer_vm_id:{placeholder:"请输入虚拟机ID"},nas_id:{placeholder:"请输入文件系统ID"},vpc_name:{placeholder:"请输入VPC名称"},vpc_ip:{placeholder:"请输入VPC  IP地址"},transfer_vm_storage_ip:{placeholder:"请输入存储网IP地址"}},this.list=[],this.current=1,this.size=20,this.total=0,this.search_data={},this.auth_list=[],this.operateInfo={},this.visible=!1}created(){this.auth_list=this.$store.state.auth_info[this.$route.name],this.search()}watch_visible(t){t||this.getVmList()}watch_pod(){this.search(this.search_data)}async getVmList(){let t=await l["a"].get_vm_list({...this.search_data,pod_id:this.$store.state.pod_id,page_index:this.current,page_size:this.size});"Success"===t.code&&(this.list=t.data.transfer_list,this.total=t.data.page.count)}search(t={}){this.current=1,this.search_data={...t},this.getVmList()}refresh(){this.getVmList()}handleSizeChange(t){this.size=t,this.getVmList()}handleCurrentChange(t){this.current=t,this.getVmList()}async FnVnc(t){let e=await l["a"].get_vnc({pod_id:this.$store.state.pod_id});if("Success"===e.code){let s=`${e.data.compute_domain}/vnc_lite.html?op-token=${this.$store.state.token}?path=/?id=${t}`;window.open(s)}}FnToMonitor(t){sessionStorage.setItem("vm_monitor",JSON.stringify({...t,hostId:t.transfer_vm_id,ip:t.transfer_vm_storage_ip,instanceType:"vm",os:"linux",region_id:t.region_id,replica:t.az_id,id:t.transfer_vm_id})),this.$router.push("/instance/monitor/"+t.transfer_vm_id)}};Object(o["a"])([Object(r["f"])("visible")],p.prototype,"watch_visible",null),Object(o["a"])([Object(r["f"])("$store.state.pod_id")],p.prototype,"watch_pod",null),p=Object(o["a"])([Object(r["a"])({components:{ActionBlock:i["a"],SvgIcon:c["a"],Clipboard:_["a"]}})],p);var u=p,d=u,f=(s("d664"),s("f5ef"),s("2877")),h=Object(f["a"])(d,a,n,!1,null,"c980c9a8",null);e["default"]=h.exports},"1e42":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:"复制",placement:"bottom"}},[e("el-button",{attrs:{type:"text"},on:{click:t.copyText}},[e("svg-icon",{attrs:{icon:"copy"}})],1)],1)},n=[],o=s("9ab4"),r=s("1b40"),i=s("3673");let c=class extends r["e"]{copyText(){this.$copyText(this.content).then(()=>{this.$message.success({message:"复制成功"})}).catch(()=>{this.$message.error({message:"复制失败"})})}};Object(o["a"])([Object(r["c"])({default:""})],c.prototype,"content",void 0),c=Object(o["a"])([Object(r["a"])({components:{SvgIcon:i["a"]}})],c);var l=c,_=l,p=(s("22c9"),s("2877")),u=Object(p["a"])(_,a,n,!1,null,"23bfc843",null);e["a"]=u.exports},"22c9":function(t,e,s){"use strict";s("79c1")},"3c8f":function(t,e,s){},"54b9":function(t,e,s){},"79c1":function(t,e,s){},d664:function(t,e,s){"use strict";s("54b9")},f5ef:function(t,e,s){"use strict";s("3c8f")}}]);
//# sourceMappingURL=chunk-c8999a8a.1763535500878.js.map