(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-b25837a4"],{1058:function(t,e,a){},"29f3":function(t,e,a){},3085:function(t,e,a){},"4a57":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chains-detail"},[a("back-header",{attrs:{title:t.title,back_url:"/snapshot"}}),a("el-card",[a("el-descriptions",{attrs:{title:"基本信息",column:2}},t._l(t.configInfo,(function(e,s){return a("el-descriptions-item",{key:s,attrs:{label:e.label}},[t._v(t._s(e.value))])})),1),a("el-divider"),a("list-table",{attrs:{id:t.$route.query.id,type:"detail",snapshot_chains_id:t.$route.query.id}})],1)],1)},n=[],i=a("1da1"),o=a("d4ec"),r=a("bee2"),l=a("262e"),c=a("2caf"),p=(a("96cf"),a("99af"),a("9ab4")),u=a("1b40"),d=a("039b"),h=a("e137"),_=a("ed46"),f=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.title="",t.configInfo={customer_id:{label:"客户ID",value:""},az_name:{label:"可用区",value:""},customer_name:{label:"客户名称",value:""},disk_id:{label:"源云盘ID",value:""},snapshot_chains_id:{label:"快照链ID",value:""},disk_size:{label:"源云盘容量",value:""},snapshot_size:{label:"快照容量",value:""},disk_type:{label:"源云盘属性",value:""}},t.form={update_snapshot_name:""},t}return Object(r["a"])(a,[{key:"created",value:function(){this.title="快照链：".concat(this.$route.query.id),console.log("###",this.$route.query.id),this.detail()}},{key:"detail",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].chains_detail({snapshot_chains_id:this.$route.query.id});case 2:if(e=t.sent,"Success"===e.code)for(s in a={system:"系统盘",data:"数据盘"},this.configInfo)this.configInfo[s].value="disk_type"===s?a[e.data[s]]:"az_name"===s?"".concat(e.data.region_name,"-").concat(e.data.az_name):"disk_size"===s||"snapshot_size"===s?e.data[s]+"GB":e.data[s];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(u["e"]);Object(p["a"])([Object(u["d"])("visible")],f.prototype,"visibleSync",void 0),Object(p["a"])([Object(u["c"])({default:function(){}})],f.prototype,"info",void 0),f=Object(p["a"])([Object(u["a"])({components:{ListTable:h["a"],BackHeader:_["a"]}})],f);var b=f,v=b,m=(a("f947"),a("d832"),a("2877")),y=Object(m["a"])(v,s,n,!1,null,"09c347cb",null);e["default"]=y.exports},bd09:function(t,e,a){"use strict";a("29f3")},c73d:function(t,e,a){},cf0b:function(t,e,a){"use strict";a("3085")},d81d:function(t,e,a){"use strict";var s=a("23e7"),n=a("b727").map,i=a("1dde"),o=i("map");s({target:"Array",proto:!0,forced:!o},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},d832:function(t,e,a){"use strict";a("c73d")},e137:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ecs-snapshot"},[[a("search-bar",{attrs:{search_option:t.search_option,isShowBg:"list"===t.type,action_icon_option:t.action_btns},on:{"fn-search":t.FnSearch,"fn-icon":t.operateIcon}})],a("el-table",{ref:"snapshot_table",attrs:{data:t.list},on:{"filter-change":t.handleFilter}},[t._l(t.column_list,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label,"column-key":e.prop,filters:e.column_key?e.filters:null,"filter-multiple":!1},scopedSlots:t._u(["snapshot_id"===e.prop?{key:"default",fn:function(e){return[a("div",[a("el-tooltip",{attrs:{placement:"right","popper-class":"tooltip-width",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.row.snapshot_name))]),a("div",{staticClass:"num_message"},[a("pre",[t._v(t._s(e.row.snapshot_name))])])])],1),a("div",[a("el-tooltip",{attrs:{content:e.row.snapshot_id,placement:"bottom",effect:"light"}},[a("span",[t._v(t._s(e.row.snapshot_id))])])],1)]}}:"disk_id"===e.prop?{key:"default",fn:function(e){return[a("div",[a("el-tooltip",{attrs:{placement:"right","popper-class":"tooltip-width",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.row.disk_name))]),a("div",[a("pre",{staticClass:"num_message"},[t._v(t._s(e.row.disk_name))])])])],1),a("div",[a("el-tooltip",{attrs:{content:e.row.disk_id,placement:"bottom",effect:"light"}},[a("span",[t._v(t._s(e.row.disk_id))])])],1)]}}:"disk_size"===e.prop?{key:"default",fn:function(e){return[a("span",[t._v(t._s("data"===e.row.disk_type?"数据盘":"系统盘")+"/")]),a("span",[t._v(t._s(e.row.disk_size)+"GB")])]}}:"az_name"===e.prop?{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.region_name)+"-"+t._s(e.row.az_name))])]}}:"snapshot_status_cn"===e.prop?{key:"default",fn:function(e){return[a("span",{class:e.row.snapshot_status},[t._v(t._s(e.row.snapshot_status_cn))])]}}:"disk_status_cn"===e.prop?{key:"default",fn:function(e){return[a("span",{class:e.row.disk_status},[t._v(t._s(e.row.disk_status_cn))])]}}:null],null,!0)})})),a("el-table-column",{attrs:{prop:"operate",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.record(e.row)}}},[t._v("操作记录")])]}}])})],2),a("el-pagination",{attrs:{"current-page":t.pageInfo.page_index,"page-sizes":[20,50,100],"page-size":t.pageInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t.visible?[a("Record",{attrs:{visible:t.visible,record_id:t.multiSelect[0].snapshot_id,type:"snapshot"},on:{close:t.close}})]:t._e()],2)},n=[],i=a("ade3"),o=a("1da1"),r=a("5530"),l=a("d4ec"),c=a("bee2"),p=a("262e"),u=a("2caf"),d=(a("96cf"),a("9ab4")),h=a("1b40"),_=a("039b"),f=a("3673"),b=a("268f"),v=a("c811"),m=function(t){Object(p["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(l["a"])(this,a),t=e.apply(this,arguments),t.diskTypeList=[{text:"系统盘",value:"system"},{text:"数据盘",value:"data"}],t.search_option="list"===t.type?{type:{placeholder:"请输入",list:[{type:"snapshot_info",label:"快照名称/ID"},{type:"disk_info",label:"云盘名称/ID"}],type:"composite",width:340},customer_id:{placeholder:"请输入客户ID"},customer_name:{placeholder:"请输入客户名称"}}:{type:{placeholder:"请输入",list:[{type:"snapshot_id",label:"快照ID"},{type:"snapshot_name",label:"快照名称"}],type:"composite",width:340}},t.visible=!1,t.operate_type="",t.column_list="list"===t.type?[{prop:"customer_id",label:"客户ID"},{prop:"customer_name",label:"客户名称"},{prop:"disk_id",label:"云盘名称/ID"},{prop:"disk_status_cn",label:"云盘状态"},{prop:"disk_size",label:"属性/容量"},{prop:"az_name",label:"可用区"},{prop:"snapshot_id",label:"快照名称/ID"},{prop:"create_time",label:"创建时间"},{prop:"retention_time",label:"保留时间"},{prop:"snapshot_status_cn",label:"状态"},{prop:"op_source",label:"创建来源"}]:[{prop:"snapshot_id",label:"快照名称/ID"},{prop:"create_time",label:"创建时间"},{prop:"retention_time",label:"保留时间"},{prop:"snapshot_status_cn",label:"状态"}],t.search_data={},t.action_btns=["refresh"],t.diskObj={system:"系统盘",data:"数据盘"},t.operate=[{label:"删除",value:"del"},{label:"回滚云盘",value:"rollback"},{label:"修改快照名称",value:"editName"}],t.timer=null,t.list=[],t.multiSelect=[],t.statusObj={msg:"",status:!0},t.operateType="",t.rollbackCheck=!0,t.filterInfo={},t.pageInfo={page_size:20,page_index:1,total:0},t}return Object(c["a"])(a,[{key:"created",value:function(){this.getSnapshotList()}},{key:"watch_pod",value:function(t){t&&this.FnSearch(this.search_data)}},{key:"record",value:function(t){this.multiSelect=[t],this.visible=!0}},{key:"close",value:function(){this.multiSelect=[],this.visible=!1}},{key:"FnSearch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("data",t),this.FnClearTimer(),this.search_data=Object(r["a"])({},t),this.pageInfo.page_index=1,this.getSnapshotList()}},{key:"getSnapshotList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=!(n.length>0&&void 0!==n[0])||n[0],a||this.$store.commit("SET_LOADING",!1),t.next=4,_["a"].get_snapshot_list((e={pod_id:this.$store.state.pod_id,page_index:this.pageInfo.page_index,page_size:this.pageInfo.page_size,customer_id:this.search_data.customer_id,customer_name:this.search_data.customer_name},Object(i["a"])(e,this.search_data.typesub,this.search_data.type),Object(i["a"])(e,"snapshot_chains_id","list"!==this.type?this.snapshot_chains_id:void 0),e));case 4:s=t.sent,"Success"===s.code&&(this.list=s.data.snapshot_list,this.pageInfo.total=s.data.page_info.count),this.FnSetTimer();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"FnSetTimer",value:function(){var t=this;this.timer&&this.FnClearTimer(),this.timer=setTimeout((function(){t.getSnapshotList(!1)}),5e3)}},{key:"FnClearTimer",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"operateIcon",value:function(t){this.FnClearTimer(),this.getSnapshotList(!1)}},{key:"handleFilter",value:function(t){this.FnClearTimer(),this.filterInfo=Object(r["a"])(Object(r["a"])({},this.filterInfo),t),console.log("filterInfo",this.filterInfo),this.getSnapshotList()}},{key:"handleSizeChange",value:function(t){this.FnClearTimer(),this.pageInfo=Object(r["a"])(Object(r["a"])({},this.pageInfo),{},{page_size:t}),this.getSnapshotList()}},{key:"handleCurrentChange",value:function(t){this.FnClearTimer(),this.pageInfo=Object(r["a"])(Object(r["a"])({},this.pageInfo),{},{page_index:t}),this.getSnapshotList()}},{key:"beforeDestroy",value:function(){this.FnClearTimer()}}]),a}(h["e"]);Object(d["a"])([Object(h["c"])({default:"list"})],m.prototype,"type",void 0),Object(d["a"])([Object(h["c"])({default:""})],m.prototype,"snapshot_chains_id",void 0),Object(d["a"])([Object(h["f"])("$store.state.pod_id")],m.prototype,"watch_pod",null),m=Object(d["a"])([Object(h["a"])({components:{SvgIcon:f["a"],SearchBar:v["a"],Record:b["a"]}})],m);var y=m,g=y,k=(a("cf0b"),a("2877")),j=Object(k["a"])(g,s,n,!1,null,null,null);e["a"]=j.exports},ed46:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box"},[a("div",[a("span",[t._v(t._s(t.title))]),t._t("left")],2),a("div",[t._t("default"),t.no_back?t._e():a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.FnBack}},[t._v("返回")])],2)]),a("div",{staticClass:"perch"})])},n=[],i=a("d4ec"),o=a("bee2"),r=a("262e"),l=a("2caf"),c=a("9ab4"),p=a("1b40"),u=function(t){Object(r["a"])(a,t);var e=Object(l["a"])(a);function a(){return Object(i["a"])(this,a),e.apply(this,arguments)}return Object(o["a"])(a,[{key:"FnBack",value:function(){this.back_url?this.$router.push(this.back_url):this.$router.go(-1)}}]),a}(p["e"]);Object(c["a"])([Object(p["c"])({default:""})],u.prototype,"title",void 0),Object(c["a"])([Object(p["c"])({default:""})],u.prototype,"back_url",void 0),Object(c["a"])([Object(p["c"])({default:!1})],u.prototype,"no_back",void 0),u=Object(c["a"])([p["a"]],u);var d=u,h=d,_=(a("bd09"),a("2877")),f=Object(_["a"])(h,s,n,!1,null,"bdf5ebe2",null);e["a"]=f.exports},f947:function(t,e,a){"use strict";a("1058")}}]);
//# sourceMappingURL=chunk-b25837a4.1741589092878.js.map