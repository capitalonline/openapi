(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-38a8822c"],{"07ac":function(e,t,a){var i=a("23e7"),n=a("6f53").values;i({target:"Object",stat:!0},{values:function(e){return n(e)}})},2483:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("Monitor"),e._l(e.overview_info,(function(t){return a("el-card",{key:t.name,staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[e._v(e._s(t.name))]),a("span",{staticClass:"all"},[a("span",{staticClass:"num_message"},[e._v(e._s(t.all))]),e._v(" 台")])]),a("div",{staticClass:"content"},e._l(t.info,(function(t,i){return a("div",{key:i},[a("p",{staticClass:"m-bottom10",class:i},[e._v(e._s(t.value))]),a("p",[e._v(e._s(t.label))])])})),0)])}))],2)},n=[],s=a("1da1"),r=a("d4ec"),c=a("bee2"),o=a("262e"),l=a("2caf"),u=(a("96cf"),a("9ab4")),_=a("1b40"),p=a("81a9"),d=a("bff7"),f={get_host_overview:function(e){return Object(p["a"])(Object(d["b"])("POST","/host/get_host_overview/",e))},get_ecs_overview:function(e){return Object(p["a"])(Object(d["b"])("POST","/ecs/get_ecs_overview/",e))},get_host_type:function(e){return Object(p["a"])(Object(d["b"])("GET","/host/host_product_list/",e))},get_cpu_percent:function(e){return Object(p["a"])(Object(d["f"])("GET","/cpu_group_info",e))},get_ram_percent:function(e){return Object(p["a"])(Object(d["f"])("GET","/memory_group_info",e))},get_gpu_percent:function(e){return Object(p["a"])(Object(d["f"])("GET","/gpu_group_info",e))}},h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-bottom20"},[a("div",{staticClass:"monitor"},[a("el-select",{attrs:{placeholder:"请选择物理机产品类型名称",multiple:!0},on:{change:e.changeProductType},model:{value:e.productList,callback:function(t){e.productList=t},expression:"productList"}},e._l(e.hostTypes,(function(e){return a("el-option",{key:e.host_product_id,attrs:{value:e.host_product_id,label:e.name}})})),1),a("span",{staticClass:"m-left10 m-right10"},[e._v("物理机总台数:"),a("span",{staticClass:"num_message"},[e._v(" "+e._s(Object.keys(e.physicalInfo).length)+" ")]),e._v("台")]),a("time-group",{attrs:{dis_day:366,timeList:e.timeList},on:{"fn-emit":e.FnGetTimer}})],1),a("div",{staticClass:"chart-box"},[a("line-echart",{staticClass:"item",attrs:{chart_id:"cpu_chart",data:e.cpu_used}}),a("line-echart",{staticClass:"item",attrs:{chart_id:"ram_chart",data:e.memory_used}})],1),a("div",{staticClass:"chart-box"},[a("line-echart",{staticClass:"item",attrs:{chart_id:"graphics_card",data:e.graphics_card_used}}),a("line-echart",{staticClass:"item",attrs:{chart_id:"graphics_ram",data:e.graphics_ram_used}})],1)])},b=[],m=a("2909"),v=a("5530"),g=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("d81d"),a("b64b"),a("07ac"),a("a15b"),a("3ca3"),a("ddb0"),a("159b"),a("1f82")),y=a("ff48"),j=a("c1df"),O=a.n(j),T=function(e){Object(o["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.hostTypes=[],e.default_date_timer=[],e.productList=[],e.physicalInfo=[],e.timeList={day:{label:"最近1天",time:864e5},week:{label:"最近7天",time:6048e5},"30_day":{label:"最近30天",time:2592e6},"90_day":{label:"最近90天",time:7776e6}},e.cpu_used={title:"CPU使用率",unit:"",xTime:[],yValue:[],resize:0},e.memory_used={title:"内存使用率",unit:"",xTime:[],yValue:[],resize:0},e.graphics_card_used={title:"显卡使用率",unit:"",xTime:[],yValue:[],resize:0},e.graphics_ram_used={title:"显存使用率",unit:"",xTime:[],yValue:[],resize:0},e}return Object(c["a"])(a,[{key:"created",value:function(){this.getHostTypes()}},{key:"watch_pod",value:function(e){e&&this.getHostTypes()}},{key:"getHostTypes",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.get_host_type({pod_id:this.$store.state.pod_id});case 2:t=e.sent,"Success"===t.code&&(this.hostTypes=t.data.host_product_list);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"FnGetTimer",value:function(e){this.default_date_timer=e,this.init()}},{key:"changeProductType",value:function(){var e=this;this.physicalInfo={};var t=this.hostTypes.filter((function(t){return e.productList.includes(t.host_product_id)}));t.map((function(t){t.host_infos.map((function(t){e.physicalInfo[t.host_name]={hostIp:t.host_ip,region:t.region_id,az:t.az_id}}))})),this.init()}},{key:"init",value:function(){var e=this;if(0!==Object.keys(this.physicalInfo).length){var t=Object.values(this.physicalInfo),a={hostIds:Object.keys(this.physicalInfo).join("|"),hostIps:t.map((function(e){return e.hostIp})).join("|"),region:t[0].region,replica:t[0].az,start:O.a.utc(this.default_date_timer[0]).format("YYYY-MM-DD HH:mm:ss"),end:O.a.utc(this.default_date_timer[1]).format("YYYY-MM-DD HH:mm:ss")};Promise.all([f.get_cpu_percent(Object(v["a"])({},a)),f.get_ram_percent(Object(v["a"])({},a)),f.get_gpu_percent(Object(v["a"])(Object(v["a"])({},a),{},{queryType:"memory"})),f.get_gpu_percent(Object(v["a"])(Object(v["a"])({},a),{},{queryType:"gpu"}))]).then((function(t){console.log("res",t);var a={0:"cpu_used",1:"memory_used",2:"graphics_ram_used",3:"graphics_card_used"},i={sale:"已售量",saleRate:"售卖率",use:"实际使用量",usage:"实际使用率"};t.map((function(t,n){var s=[],r=[];for(var c in t.data)"xTime"!==c&&(r.push(i[c]),s.push({code:t.code,yValues:[t.data[c]],xTime:t.data.xTime}));s.map((function(e){return e.metricInfo=r})),e.FnHandleDubleData(a[n],s)}))}))}}},{key:"FnHandleDubleData",value:function(e,t){var a=this;console.log("resData",t);var i=0;this[e].yValue=[],t.forEach((function(t){var n;"Success"===t.code&&(t.metricInfo=t.metricInfo,0===i&&(a[e].xTime=t.xTime,a[e].legend=t.metricInfo),t.yValues&&(n=a[e].yValue).push.apply(n,Object(m["a"])(t.yValues)));i++})),this[e].resize++,console.log("this.type",this[e])}}]),a}(_["e"]);Object(u["a"])([Object(_["f"])("$store.state.pod_id")],T.prototype,"watch_pod",null),T=Object(u["a"])([Object(_["a"])({components:{TimeGroup:g["a"],LineEchart:y["a"]}})],T);var w=T,k=w,x=(a("baab"),a("2877")),C=Object(x["a"])(k,h,b,!1,null,"345f7cd0",null),I=C.exports,P=function(e){Object(o["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.header_info={CPU:{name:"CPU",total_label:"逻辑总核数:",total:2700,remain_label:"可用",remain:"80%",use:"20%",count:"100%",alloted:"2600核",allot_percent:"96%"},memory:{name:"内存",total_label:"总容量:",total:"1.25TB",remain_label:"可用",remain:"8.44TB",use:"1.25TB",count:"9.69TB",alloted:"4.56TB",allot_percent:"60%"},GPU:{name:"GPU",total_label:"总块数:",total:800,remain_label:"可分配",remain:"22块",use:"",count:"",alloted:"22块",allot_percent:"16%"},storage:{name:"GPU",total_label:"总容量:",total:"4.22TB",remain_label:"可用",remain:"2.22TB",use:"2TB",count:"4.22TB",alloted:"2.6TB",allot_percent:"96%"}},e.overview_info=[{name:"宿主机",all:233,info:{init:{label:"初始化待验证",value:50},init_error:{label:"验证失败",value:50},offline:{label:"离线",value:50},exception:{label:"异常",value:50},online_maintenance:{label:"在线维护中",value:50},offline_maintenance:{label:"离线维护中",value:50},online:{label:"在线",value:50}}},{name:"云主机",all:233,info:{failed:{label:"创建失败",value:50},error:{label:"错误",value:50},shutdown:{label:"已关机",value:50},running:{label:"运行中",value:50}}}],e}return Object(c["a"])(a,[{key:"created",value:function(){this.get_overview(0),this.get_overview(1)}},{key:"watch_pod",value:function(e){e&&(this.get_overview(0),this.get_overview(1))}},{key:"get_overview",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$store.state.pod_id){e.next=2;break}return e.abrupt("return");case 2:return a=0===t?"get_host_overview":"get_ecs_overview",e.next=5,f[a]({pod_id:this.$store.state.pod_id});case 5:if(i=e.sent,"Success"===i.code)for(n in this.overview_info[t].all=i.data.all,i.data)this.overview_info[t].info[n]&&(this.overview_info[t].info[n].value=i.data[n]);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),a}(_["e"]);Object(u["a"])([Object(_["f"])("$store.state.pod_id")],P.prototype,"watch_pod",null),P=Object(u["a"])([Object(_["a"])({components:{Monitor:I}})],P);var B=P,G=B,D=(a("39b5"),Object(x["a"])(G,i,n,!1,null,"0bac8a98",null));t["default"]=D.exports},"39b5":function(e,t,a){"use strict";a("3bf6")},"3bf6":function(e,t,a){},"6f53":function(e,t,a){var i=a("83ab"),n=a("e330"),s=a("df75"),r=a("fc6a"),c=a("d1e7").f,o=n(c),l=n([].push),u=function(e){return function(t){var a,n=r(t),c=s(n),u=c.length,_=0,p=[];while(u>_)a=c[_++],i&&!o(n,a)||l(p,e?[a,n[a]]:n[a]);return p}};e.exports={entries:u(!0),values:u(!1)}},"77ea":function(e,t,a){},a15b:function(e,t,a){"use strict";var i=a("23e7"),n=a("e330"),s=a("44ad"),r=a("fc6a"),c=a("a640"),o=n([].join),l=s!=Object,u=c("join",",");i({target:"Array",proto:!0,forced:l||!u},{join:function(e){return o(r(this),void 0===e?",":e)}})},baab:function(e,t,a){"use strict";a("77ea")}}]);
//# sourceMappingURL=chunk-38a8822c.1740993042054.js.map