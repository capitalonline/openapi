(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-0aadb89b"],{"109c":function(e,t,a){"use strict";a("e7ba")},"26f3":function(e,t,a){"use strict";a("4f3f")},4774:function(e,t,a){"use strict";a("835c")},"4f3f":function(e,t,a){},"835c":function(e,t,a){},"8ce4":function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return n}));a("14d9"),a("e9f5"),a("ab43");function i(e,t,a,i,s){let r=[];return e.map(e=>{r.push({[i]:e[t],[s]:e[a]})}),r}function s(e,t,a,i={}){let s=[];return e.map(e=>{let r={};t.map((t,i)=>{r[t]=e[a[i]]}),s.push({...r,...i})}),s}function r(e,t=!1){let a={};for(let i in e){const{billing_scheme_id:s,billing_cycle_id:r,billing_items:o,gic_goods_id:n}=e[i];let l={};for(let e in o){let a={attr_id:o[e].attr_id,name:o[e].name},i={id:o[e].id,key:e};l[e]=t?{...a,...i}:i}a[i]={billing_scheme_id:s,billing_cycle_id:r,billing_items:l,gic_goods_id:t?n:void 0}}return a}function o(e,t){return e.map(e=>e[t])}function n(e){let t="";for(let a in e)e[a]&&(t+=`${a}=${e[a]}&`);return""===t?"":"?"+t.slice(0,t.length-1)}},"9a8d":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-date-picker",{attrs:{type:e.time_option.type,editable:!1,"range-separator":"至","picker-options":{disabledDate:e.dis_date,onPick:e.onPicker},clearable:e.time_option.clearable,"start-placeholder":e.time_option.placeholder[0],"end-placeholder":e.time_option.placeholder[1]},on:{change:e.FnEmit},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})},s=[],r=a("9ab4"),o=a("1b40");let n=class extends o["e"]{constructor(){super(...arguments),this.time=[],this.min_date="",this.day=0}dis_date(e){const{day:t}=this;if(0===t)return;let a=864e5,i=(new Date).getTime(),s=(new Date).getTime(),r=(new Date).getTime();return this.time_option.min_date?(s=new Date(this.time_option.min_date).getTime(),e.getTime()>r||e.getTime()<s-a):e.getTime()>r||e.getTime()>(this.min_date||i)+a*t||this.min_date&&e.getTime()<this.min_date-a*t}onPicker({maxDate:e,minDate:t}){this.min_date=t.getTime()}created(){this.day=this.time_option.dis_day-1||0,this.FnChangeDefaultTime(this.time_option.defaultTime)}FnClear(){this.FnChangeDefaultTime(this.time_option.defaultTime)}FnChangeDefaultTime(e){e.length,this.time=e,this.FnEmit()}FnEmit(){return this.min_date="",this.time}};Object(r["a"])([Object(o["c"])({default:()=>({placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!1,dis_day:31,min_date:"",defaultTime:[new Date,new Date]})})],n.prototype,"time_option",void 0),Object(r["a"])([Object(o["c"])({default:!1})],n.prototype,"clear",void 0),Object(r["a"])([Object(o["f"])("time_option.defaultTime")],n.prototype,"FnChangeDefaultTime",null),Object(r["a"])([Object(o["b"])("fn-emit")],n.prototype,"FnEmit",null),n=Object(r["a"])([o["a"]],n);var l=n,c=l,p=a("2877"),d=Object(p["a"])(c,i,s,!1,null,null,null);t["a"]=d.exports},a03d:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("el-dialog",{attrs:{title:`修改${e.title}限制`,visible:e.visibleSync,width:"50%","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visibleSync=t},close:e.cancel}},[t("div",{staticClass:"tip"},[t("div",[e._v(" 产品定义："+e._s(e.prod_def))]),t("div",{staticStyle:{"font-weight":"bold"}},[e._v("不建议单独为某客户或实例手动调整限速，因IOPS超出会带来"),t("span",{staticClass:"error"},[e._v("平台瘫痪")]),e._v("的风险，请操作前进行充分的风险评估。")])]),t("el-table",{attrs:{data:e.mount_id,border:"","max-height":"230"}},[t("el-table-column",{attrs:{label:"云盘ID",prop:"disk_id"}}),t("el-table-column",{attrs:{label:"云盘名称",prop:"disk_name"}}),"iops"===e.oper_type?t("el-table-column",{attrs:{label:"IOPS",prop:"disk_iops"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.disk_iops?`${a.row.disk_iops}${a.row.iops_unit}`:""))])]}}],null,!1,3592302792)}):t("el-table-column",{attrs:{label:"吞吐量",prop:"mbps"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[e._v(e._s(a.row.band_mbps?`${a.row.band_mbps}${a.row.mbps_unit}`:""))])]}}])},[e._v("’ ")])],1),t("el-form",{ref:"resetForm",staticStyle:{"margin-top":"20px"},attrs:{model:e.data,"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{label:"变更为：",prop:"update_data",rules:{required:!0,message:"请输入变更值",trigger:"blur"}}},[t("el-input-number",{staticStyle:{width:"200px"},attrs:{controls:!1,min:"iops"===e.oper_type?e.min_iops:e.min_mbps,max:"iops"===e.oper_type?e.max_iops:e.max_mbps},model:{value:e.data.update_data,callback:function(t){e.$set(e.data,"update_data",t)},expression:"data.update_data"}}),t("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(`${e.title}最高${"iops"===e.oper_type?e.max_iops:e.max_mbps+"MB/s"}`))])],1),t("el-radio-group",{model:{value:e.data.set,callback:function(t){e.$set(e.data,"set",t)},expression:"data.set"}},[t("el-radio",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"1"}},[e._v("云盘变更（容量变更/重装系统）时，按默认规则更新限速值。")]),t("el-radio",{attrs:{label:"0"}},[e._v("云盘变更（容量变更/重装系统）时，限速保持此设置值不变。")])],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.FnEmit}},[e._v("确定")]),t("el-button",{attrs:{type:"default"},on:{click:e.cancel}},[e._v("取消")])],1)],1),t("el-dialog",{attrs:{title:e.second_confirm,visible:e.second_visible},on:{close:function(t){e.second_visible=!1}}},[t("el-form",{ref:"confirmForm",attrs:{model:e.data,"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{label:"修改原因：",prop:"reason",rules:{required:!0,message:"请输入修改原因",trigger:"blur"}}},[t("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.data.reason,callback:function(t){e.$set(e.data,"reason",t)},expression:"data.reason"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")]),t("el-button",{attrs:{type:"default"},on:{click:function(t){e.second_visible=!1}}},[e._v("取消")])],1)],1)],1)},s=[],r=(a("e9f5"),a("ab43"),a("9ab4")),o=a("1b40"),n=a("f33c");let l=class extends o["e"]{constructor(){super(...arguments),this.second_visible=!1,this.min_iops=0,this.max_iops=0,this.min_mbps=0,this.max_mbps=0,this.second_confirm="iops"===this.oper_type?"是否确认修改IOPS?":"是否确认修改吞吐量?",this.data={update_data:0,set:"1",reason:""}}created(){this.GetLimit()}get prod_def(){return"iops"===this.oper_type?`单盘IOPS=min{${this.min_iops}+30*容量，${this.max_iops}}`:`单块云盘吞吐量=min{${this.min_mbps},0.2*容量，${this.max_mbps}}`}async GetLimit(){let e=await n["a"].get_iops_mbps_limit();"Success"===e.code&&(this.min_iops=e.data.CLOUD_DISK_MIN_IPOS,this.max_iops=e.data.CLOUD_DISK_MAX_IPOS,this.min_mbps=e.data.CLOUD_DISK_MIN_THROUGE_PUT,this.max_mbps=e.data.CLOUD_DISK_MAX_THROUGE_PUT,this.$nextTick(()=>{this.data.update_data="iops"===this.oper_type?this.min_iops:this.min_mbps}))}FnEmit(){const e=this.$refs.resetForm;e.validate(e=>{e&&(this.second_visible=!0)})}async confirm(){const e=this.$refs.confirmForm;e.validate(async e=>{if(e){let e={disk_ids:this.mount_id.map(e=>e.disk_id),customer_id:this.mount_id[0].customer_id,change_reason:this.data.reason};"iops"===this.oper_type?(e["disk_iops"]=this.data.update_data,e["iops_is_default"]=this.data.set):(e["band_mbps"]=this.data.update_data,e["mbps_is_default"]=this.data.set);let t=await n["a"].change_iops_mbps(e);"Success"===t.code?(this.$message.success(t.message),this.back("1")):this.back("0")}})}cancel(){this.back("0")}back(e){}};Object(r["a"])([Object(o["d"])("visible")],l.prototype,"visibleSync",void 0),Object(r["a"])([Object(o["c"])(String)],l.prototype,"title",void 0),Object(r["a"])([Object(o["c"])({default:()=>[]})],l.prototype,"mount_id",void 0),Object(r["a"])([Object(o["c"])(String)],l.prototype,"oper_type",void 0),Object(r["a"])([Object(o["b"])("close")],l.prototype,"back",null),l=Object(r["a"])([Object(o["a"])({})],l);var c=l,p=c,d=(a("109c"),a("2877")),u=Object(d["a"])(p,i,s,!1,null,"535f8baa",null);t["a"]=u.exports},c811:function(e,t,a){"use strict";a("e9f5"),a("910d");var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"action-box",style:e.isShowBg?{}:{background:"#fff",padding:0,margin:0,border:"none"}},[t("div",{ref:"search",staticClass:"search-box",class:{fold:!e.isOpen}},[e._l(e.search_option,(function(a,i){return t("div",{key:i,staticClass:"search-input",style:a.width?{width:a.width+"px"}:{}},[a.list&&!a.type?t("el-select",{attrs:{placeholder:a.placeholder,multiple:a.multiple,filterable:a.filter,clearable:""},model:{value:e.search_value[i],callback:function(t){e.$set(e.search_value,i,t)},expression:"search_value[key]"}},e._l(a.list,(function(e,i){return t("el-option",{key:Array.isArray(a.list)?e.type:i,attrs:{label:Array.isArray(a.list)?e.label:e,value:Array.isArray(a.list)?e.type:i}})})),1):e._e(),(a.list||a.type||a.multi)&&"composite"!==a.type?e._e():t("el-input",{staticClass:"composite",style:a.width?{width:a.width+"px"}:{},attrs:{placeholder:a.placeholder,clearable:""},model:{value:e.search_value[i],callback:function(t){e.$set(e.search_value,i,t)},expression:"search_value[key]"}},["composite"===a.type?t("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.search_value[i+"sub"],callback:function(t){e.$set(e.search_value,i+"sub",t)},expression:"search_value[key + 'sub']"}},e._l(a.list,(function(e){return t("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})})),1):e._e()],1),a.multi?t("el-popover",{attrs:{placement:"bottom",width:"250",trigger:"click"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:a.placeholder+"（使用回车或英文逗号隔开）"},model:{value:e.search_value[i],callback:function(t){e.$set(e.search_value,i,t)},expression:"search_value[key]"}}),!a.list&&!a.type||a.multi?t("el-input",{staticClass:"multi_input",style:a.width?{width:a.width+"px"}:{},attrs:{slot:"reference",placeholder:a.placeholder,clearable:""},slot:"reference",model:{value:e.search_value[i],callback:function(t){e.$set(e.search_value,i,t)},expression:"search_value[key]"}}):e._e()],1):e._e(),"datetimerange"===a.type||"daterange"===a.type?[t("date-picker",{ref:"datepicker",refInFor:!0,attrs:{time_option:e.search_option[i]},on:{"fn-emit":function(t){return e.FnGetTime(t,i)}}})]:e._e()],2)})),e.type?e._e():t("div",{staticClass:"m-bottom20"},[t("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("查 询")]),t("el-button",{attrs:{type:"default"},on:{click:e.FnClear}},[e._v("清 空")])],1)],2),e.type?t("div",{staticClass:"m-bottom5"},[t("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("查 询")]),"physical"===e.type?t("el-button",{attrs:{type:"primary"},on:{click:e.FnMultiSearch}},[e._v("批量查询")]):e._e(),t("el-button",{attrs:{type:"default"},on:{click:e.FnClear}},[e._v("清 空")]),t("el-button",{staticClass:"m-bottom10",attrs:{type:"text"},on:{click:e.operate}},[e._v(e._s(e.isOpen?"折叠":"展开"))])],1):e._e(),e._t("default",(function(){return[e.create_btn?t("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.FnShowCreate}},[e._v(e._s(e.create_btn))]):e._e()]})),t("el-dialog",{attrs:{title:"批量查询",visible:e.syncVisible,width:"400px","destroy-on-close":!0,"close-on-click-modal":!1}},[t("el-input",{attrs:{type:"textarea",rows:13,placeholder:"请输入主机ID/名称,格式如下：\nPOD01-CLU01-H001\nPOD01-CLU01-H002\nPOD01-CLU01-H003\n..."},model:{value:e.search_value["host_info"],callback:function(t){e.$set(e.search_value,"host_info",t)},expression:"search_value['host_info']"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("确认")]),t("el-button",{on:{click:function(t){e.syncVisible=!1}}},[e._v("取消")])],1)],1)],2)},s=[],r=a("9ab4"),o=a("1b40"),n=a("9a8d");let l=class extends o["e"]{constructor(){super(...arguments),this.search_value={},this.time=null,this.date_key="",this.syncVisible=!1,this.isOpen=!0}FnGetTime(e,t){this.time=e,this.date_key=t}FnSearch(){return this.syncVisible=!1,this.search_value[this.date_key]=this.time,this.search_value}watch_search_option(){this.type&&this.$nextTick(()=>{let e=this.$refs.search,t=window.getComputedStyle(e).height.replace("px","");parseInt(t)>52&&this.isOpen&&(this.isOpen=!1),this.FnOperate()})}FnMultiSearch(){this.syncVisible=!0}operate(){this.isOpen=!this.isOpen,this.FnOperate()}FnOperate(){}FnShowCreate(){}watch_search_value(e,t){}FnClear(){for(let e in this.search_option)["datetimerange","daterange"].includes(this.search_option[e].type)?this.$refs.datepicker[0].FnClear():this.search_value={};this.FnSearch()}mounted(){let e=0;for(let t in this.search_option)this.search_option[t].default_value&&(this.$set(this.search_value,t,this.search_option[t].default_value),e++),"composite"===this.search_option[t].type&&this.$set(this.search_value,t+"sub",this.search_option[t].list[0].type);(e>0||"physical"===this.type)&&setTimeout(()=>{this.FnSearch()},500)}};Object(r["a"])([Object(o["c"])({default:{}})],l.prototype,"search_option",void 0),Object(r["a"])([Object(o["c"])({default:""})],l.prototype,"create_btn",void 0),Object(r["a"])([Object(o["c"])({default:!0})],l.prototype,"disabled",void 0),Object(r["a"])([Object(o["c"])({default:!1})],l.prototype,"type",void 0),Object(r["a"])([Object(o["c"])({default:!0})],l.prototype,"isShowBg",void 0),Object(r["a"])([Object(o["b"])("fn-search")],l.prototype,"FnSearch",null),Object(r["a"])([Object(o["f"])("search_option",{immediate:!0,deep:!0})],l.prototype,"watch_search_option",null),Object(r["a"])([Object(o["b"])("fn-operate")],l.prototype,"FnOperate",null),Object(r["a"])([Object(o["b"])("fn-create")],l.prototype,"FnShowCreate",null),Object(r["a"])([Object(o["f"])("search_value",{immediate:!0,deep:!0})],l.prototype,"watch_search_value",null),l=Object(r["a"])([Object(o["a"])({components:{DatePicker:n["a"]}})],l);var c=l,p=c,d=(a("4774"),a("26f3"),a("2877")),u=Object(d["a"])(p,i,s,!1,null,"20a86f62",null);t["a"]=u.exports},d866:function(e,t,a){"use strict";var i=a("23e7"),s=a("c65b"),r=a("2266"),o=a("59ed"),n=a("825a"),l=a("46c4"),c=a("2a62"),p=a("f99f"),d=p("every",TypeError);i({target:"Iterator",proto:!0,real:!0,forced:d},{every:function(e){n(this);try{o(e)}catch(i){c(this,"throw",i)}if(d)return s(d,this,e);var t=l(this),a=0;return!r(t,(function(t,i){if(!e(t,a++))return i()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},e7ba:function(e,t,a){},f33c:function(e,t,a){"use strict";var i=a("81a9"),s=a("bff7");t["a"]={get_disk_list(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/get_disk_list/",e))},get_disk_state(e){return Object(i["a"])(Object(s["b"])("GET","/ebs/disk_status/",e))},edit_disk_name(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/disk_name_update/",e))},edit_disk_attr(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/disk_property_update/ ",e))},mount(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/mount/",e))},unmount(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/unmount/",e))},del_disk(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/delete/",e))},recover(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/recover/",e))},destroy(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/destroy_disk/",e))},expansion(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/expansion/",e))},get_fee(e){return Object(i["a"])(Object(s["b"])("POST","/ecs/each_resource_price/",e))},open_bill(e){return Object(i["a"])(Object(s["b"])("POST","/resource/start_charge/",e))},get_product_source(e){return Object(i["a"])(Object(s["b"])("GET","/ebs/disk_product_source/",e))},change_iops_mbps(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/change_iops_mbps/",e))},iops_mbps_record(e){return Object(i["a"])(Object(s["b"])("POST","/ebs/iops_mbps_record/",e))},get_iops_mbps_limit(){return Object(i["a"])(Object(s["b"])("GET","/ebs/get_iops_mbps_limit/"))}}}}]);