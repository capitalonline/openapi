(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-2d0ae557"],{"0a2b":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"app-container"},[t("action-block",{attrs:{search_option:e.search_con},on:{"fn-search":e.FnSearch},scopedSlots:e._u([{key:"default",fn:function(){return[t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]),t("el-button",{attrs:{type:"primary"},on:{click:e.specSync}},[e._v("规格同步")])]},proxy:!0}])}),t("el-table",{ref:"table",attrs:{data:e.list,border:"",height:"100%","row-class-name":e.rowStyle},on:{"row-click":e.FnOperRow,"row-contextmenu":e.FnRightClick,"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{label:"编号",prop:"cpu_type_id","min-width":"100px"}}),t("el-table-column",{attrs:{label:"CPU显示名称",prop:"cpu_name","min-width":"120px"}}),t("el-table-column",{attrs:{label:"底层名称",prop:"cpu_real_name","min-width":"110px"}}),t("el-table-column",{attrs:{label:"代数",prop:"cpu_generation"}}),t("el-table-column",{attrs:{label:"类型",prop:"cpu_type"}}),t("el-table-column",{attrs:{label:"品牌",prop:"cpu_brand"}}),t("el-table-column",{attrs:{label:"型号",prop:"cpu_model"}})],1),t("el-pagination",{attrs:{"current-page":e.page_info.current,"page-sizes":[20,50,100],"page-size":e.page_info.size,layout:"total, sizes, prev, pager, next, jumper",total:e.page_info.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("add",{attrs:{visible:e.visible,type:"CPU",info:e.info},on:{"update:visible":function(t){e.visible=t},close:e.close}}),t("right-click",{attrs:{multi_rows:e.multiple_selection,menus:e.menus,name:e.multiple_selection.length>0?e.multiple_selection[0].cpu_name:""},on:{"fn-click":e.infoClick}}),t("Sync",{attrs:{row:e.multiple_selection,visible:e.sync_visible},on:{"update:visible":function(t){e.sync_visible=t},close:e.close}})],1)},s=[],a=(l("e9f5"),l("ab43"),l("a732"),l("9ab4")),c=l("1b40"),n=l("c811"),o=l("3673"),p=l("e8c0"),r=l("dab3"),_=l("bd4d"),u=l("9abd"),h=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("el-dialog",{attrs:{title:"底层同步",visible:e.visible_sync,width:"760px","destroy-on-close":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible_sync=t},close:e.back}},[t("div",[t("el-alert",{attrs:{title:`是否确认对以下${e.row.length}个CPU信息执行底层同步操作`,type:"warning",center:"",closable:!1}})],1),t("el-table",{attrs:{data:e.row,"max-height":350}},[t("el-table-column",{attrs:{prop:"cpu_type_id",label:"编号"}}),t("el-table-column",{attrs:{prop:"cpu_name",label:"CPU显示名称"}}),t("el-table-column",{attrs:{prop:"cpu_real_name",label:"底层名称"}}),t("el-table-column",{attrs:{prop:"cpu_generation",label:"代数"}}),t("el-table-column",{attrs:{prop:"cpu_type",label:"类型"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),t("el-button",{on:{click:function(t){return e.back("0")}}},[e._v("取消")])],1)],1)],1)},b=[];let d=class extends c["e"]{async confirm(){let e=this.row.map(e=>e.cpu_type_id),t=await u["a"].sync_cpu_info({cpu_type_id_list:e});"Success"==t.code?(this.$message.success(t.message),this.$emit("close",1)):this.$emit("close",0)}back(e){this.visible_sync=!1}};Object(a["a"])([Object(c["d"])("visible")],d.prototype,"visible_sync",void 0),Object(a["a"])([Object(c["c"])({default:()=>[]})],d.prototype,"row",void 0),Object(a["a"])([Object(c["b"])("close")],d.prototype,"back",null),d=Object(a["a"])([Object(c["a"])({})],d);var m=d,g=m,f=l("2877"),y=Object(f["a"])(g,h,b,!1,null,"bb384994",null),v=y.exports,w=l("cf88");let S=class extends c["e"]{constructor(){super(...arguments),this.search_con={cpu_info:{placeholder:"请输入CPU信息"},cpu_brand:{placeholder:"请选择CPU品牌",list:[]}},this.search_value={cpu_info:"",cpu_brand:""},this.menus=[{label:"编辑",value:"edit",single:!0},{label:"删除",value:"del"},{label:"底层同步",value:"sync"}],this.page_info={current:1,size:20,total:0},this.list=[],this.multiple_selection=[],this.visible=!1,this.sync_visible=!1,this.info={}}created(){this.refresh(),this.get_brand_list()}refresh(){this.get_cpu_list()}FnSearch(e={}){this.search_value.cpu_info=e.cpu_info,this.search_value.cpu_brand=e.cpu_brand,this.refresh()}async get_brand_list(){let e=await u["a"].get_model_brand_list({model_type:"cpu"});"Success"==e.code&&(this.search_con.cpu_brand.list=e.data.model_brand_list.map(e=>({type:e,label:e})))}async get_cpu_list(){let e=await u["a"].model_info_list({model_type:"cpu",cpu_search_info:this.search_value.cpu_info,cpu_brand:this.search_value.cpu_brand,page_index:this.page_info.current,page_size:this.page_info.size});"Success"==e.code&&(this.list=e.data.model_info_list,this.page_info.total=e.data.page_info.count)}infoClick(e){const{label:t,value:l}=e;"edit"===l?this.edit(this.multiple_selection[0]):"del"===l?this.del():this.sync(),Object(w["a"])()}add(){this.visible=!0}specSync(){this.$confirm("是否确认进行规格同步操作？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{let e=await u["a"].spec_family_sync();"Success"==e.code&&this.$message.success(e.message)})}close(e){e&&this.get_cpu_list()&&this.get_brand_list(),this.visible=!1,this.sync_visible=!1,this.info={}}async sync(){this.multiple_selection.length<1?this.$message.warning("请选择要同步的CPU"):this.sync_visible=!0}del(){let e=this.multiple_selection.map(e=>e.cpu_type_id),t=this.multiple_selection.map(e=>e.cpu_name);this.$confirm(`是否确认删除${t}?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{let t=await u["a"].delete_model_info({model_type:"cpu",model_type_id_list:e});"Success"==t.code&&(this.$message.success(t.message),this.get_cpu_list(),this.get_brand_list())})}edit(e){this.visible=!0,this.info=e}FnRightClick(e,t,l){const i=this.multiple_selection.some(t=>t.cpu_type_id===e.cpu_type_id);i||this.$refs.table.toggleRowSelection(e),Object(p["a"])(e,t,l)}FnOperRow(e){this.$refs.table.toggleRowSelection(e)}rowStyle({row:e}){const t=this.multiple_selection.some(t=>t.cpu_type_id===e.cpu_type_id);if(t)return"rowStyle"}handleSelectionChange(e){this.multiple_selection=e}handleSizeChange(e){this.page_info.size=e,this.get_cpu_list()}handleCurrentChange(e){this.page_info.current=e,this.get_cpu_list()}};S=Object(a["a"])([Object(c["a"])({components:{Sync:v,RightClick:_["a"],Add:r["a"],SvgIcon:o["a"],actionBlock:n["a"]}})],S);var k=S,C=k,x=Object(f["a"])(C,i,s,!1,null,"fb1229e2",null);t["default"]=x.exports}}]);
//# sourceMappingURL=chunk-2d0ae557.1764156034953.js.map