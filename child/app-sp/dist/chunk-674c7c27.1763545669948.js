(window["webpackJsonp_AppSp"]=window["webpackJsonp_AppSp"]||[]).push([["chunk-674c7c27"],{"26f3":function(e,t,a){"use strict";a("4f3f")},4774:function(e,t,a){"use strict";a("835c")},"4f3f":function(e,t,a){},"835c":function(e,t,a){},"9a8d":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("el-date-picker",{attrs:{type:e.time_option.type,editable:!1,"range-separator":"至","picker-options":{disabledDate:e.dis_date,onPick:e.onPicker},clearable:e.time_option.clearable,"start-placeholder":e.time_option.placeholder[0],"end-placeholder":e.time_option.placeholder[1]},on:{change:e.FnEmit},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})},i=[],r=a("9ab4"),l=a("1b40");let o=class extends l["e"]{constructor(){super(...arguments),this.time=[],this.min_date="",this.day=0}dis_date(e){const{day:t}=this;if(0===t)return;let a=864e5,s=(new Date).getTime(),i=(new Date).getTime(),r=(new Date).getTime();return this.time_option.min_date?(i=new Date(this.time_option.min_date).getTime(),e.getTime()>r||e.getTime()<i-a):e.getTime()>r||e.getTime()>(this.min_date||s)+a*t||this.min_date&&e.getTime()<this.min_date-a*t}onPicker({maxDate:e,minDate:t}){this.min_date=t.getTime()}created(){this.day=this.time_option.dis_day-1||0,this.FnChangeDefaultTime(this.time_option.defaultTime)}FnClear(){this.FnChangeDefaultTime(this.time_option.defaultTime)}FnChangeDefaultTime(e){console.log("clear",e),e.length,this.time=e,this.FnEmit()}FnEmit(){return this.min_date="",this.time}};Object(r["a"])([Object(l["c"])({default:()=>({placeholder:["开始时间","结束时间"],type:"daterange",width:"360",clearable:!1,dis_day:31,min_date:"",defaultTime:[new Date,new Date]})})],o.prototype,"time_option",void 0),Object(r["a"])([Object(l["c"])({default:!1})],o.prototype,"clear",void 0),Object(r["a"])([Object(l["f"])("time_option.defaultTime")],o.prototype,"FnChangeDefaultTime",null),Object(r["a"])([Object(l["b"])("fn-emit")],o.prototype,"FnEmit",null),o=Object(r["a"])([l["a"]],o);var n=o,c=n,p=a("2877"),u=Object(p["a"])(c,s,i,!1,null,null,null);t["a"]=u.exports},c811:function(e,t,a){"use strict";a("e9f5"),a("910d");var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"action-box",style:e.isShowBg?{}:{background:"#fff",padding:0,margin:0,border:"none"}},[t("div",{ref:"search",staticClass:"search-box",class:{fold:!e.isOpen}},[e._l(e.search_option,(function(a,s){return t("div",{key:s,staticClass:"search-input",style:a.width?{width:a.width+"px"}:{}},[a.list&&!a.type?t("el-select",{attrs:{placeholder:a.placeholder,multiple:a.multiple,filterable:a.filter,clearable:""},model:{value:e.search_value[s],callback:function(t){e.$set(e.search_value,s,t)},expression:"search_value[key]"}},e._l(a.list,(function(e,s){return t("el-option",{key:Array.isArray(a.list)?e.type:s,attrs:{label:Array.isArray(a.list)?e.label:e,value:Array.isArray(a.list)?e.type:s}})})),1):e._e(),(a.list||a.type||a.multi)&&"composite"!==a.type?e._e():t("el-input",{staticClass:"composite",style:a.width?{width:a.width+"px"}:{},attrs:{placeholder:a.placeholder,clearable:""},model:{value:e.search_value[s],callback:function(t){e.$set(e.search_value,s,t)},expression:"search_value[key]"}},["composite"===a.type?t("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.search_value[s+"sub"],callback:function(t){e.$set(e.search_value,s+"sub",t)},expression:"search_value[key + 'sub']"}},e._l(a.list,(function(e){return t("el-option",{key:e.type,attrs:{label:e.label,value:e.type}})})),1):e._e()],1),a.multi?t("el-popover",{attrs:{placement:"bottom",width:"250",trigger:"click"}},[t("el-input",{attrs:{type:"textarea",rows:4,placeholder:a.placeholder+"（使用回车或英文逗号隔开）"},model:{value:e.search_value[s],callback:function(t){e.$set(e.search_value,s,t)},expression:"search_value[key]"}}),!a.list&&!a.type||a.multi?t("el-input",{staticClass:"multi_input",style:a.width?{width:a.width+"px"}:{},attrs:{slot:"reference",placeholder:a.placeholder,clearable:""},slot:"reference",model:{value:e.search_value[s],callback:function(t){e.$set(e.search_value,s,t)},expression:"search_value[key]"}}):e._e()],1):e._e(),"datetimerange"===a.type||"daterange"===a.type?[t("date-picker",{ref:"datepicker",refInFor:!0,attrs:{time_option:e.search_option[s]},on:{"fn-emit":function(t){return e.FnGetTime(t,s)}}})]:e._e()],2)})),e.type?e._e():t("div",{staticClass:"m-bottom20"},[t("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("查 询")]),t("el-button",{attrs:{type:"default"},on:{click:e.FnClear}},[e._v("清 空")])],1)],2),e.type?t("div",{staticClass:"m-bottom5"},[t("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("查 询")]),"physical"===e.type?t("el-button",{attrs:{type:"primary"},on:{click:e.FnMultiSearch}},[e._v("批量查询")]):e._e(),t("el-button",{attrs:{type:"default"},on:{click:e.FnClear}},[e._v("清 空")]),t("el-button",{staticClass:"m-bottom10",attrs:{type:"text"},on:{click:e.operate}},[e._v(e._s(e.isOpen?"折叠":"展开"))])],1):e._e(),e._t("default",(function(){return[e.create_btn?t("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.FnShowCreate}},[e._v(e._s(e.create_btn))]):e._e()]})),t("el-dialog",{attrs:{title:"批量查询",visible:e.syncVisible,width:"400px","destroy-on-close":!0,"close-on-click-modal":!1}},[t("el-input",{attrs:{type:"textarea",rows:13,placeholder:"请输入主机ID/名称,格式如下：\nPOD01-CLU01-H001\nPOD01-CLU01-H002\nPOD01-CLU01-H003\n..."},model:{value:e.search_value["host_info"],callback:function(t){e.$set(e.search_value,"host_info",t)},expression:"search_value['host_info']"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.FnSearch}},[e._v("确认")]),t("el-button",{on:{click:function(t){e.syncVisible=!1}}},[e._v("取消")])],1)],1)],2)},i=[],r=a("9ab4"),l=a("1b40"),o=a("9a8d");let n=class extends l["e"]{constructor(){super(...arguments),this.search_value={},this.time=null,this.date_key="",this.syncVisible=!1,this.isOpen=!0}FnGetTime(e,t){this.time=e,this.date_key=t}FnSearch(){return this.syncVisible=!1,this.search_value[this.date_key]=this.time,this.search_value}watch_search_option(){this.type&&this.$nextTick(()=>{let e=this.$refs.search,t=window.getComputedStyle(e).height.replace("px","");parseInt(t)>52&&this.isOpen&&(this.isOpen=!1),this.FnOperate()})}FnMultiSearch(){this.syncVisible=!0}operate(){this.isOpen=!this.isOpen,this.FnOperate()}FnOperate(){}FnShowCreate(){}watch_search_value(e,t){}FnClear(){for(let e in this.search_option)["datetimerange","daterange"].includes(this.search_option[e].type)?this.$refs.datepicker[0].FnClear():this.search_value={};this.FnSearch()}mounted(){let e=0;for(let t in this.search_option)this.search_option[t].default_value&&(this.$set(this.search_value,t,this.search_option[t].default_value),e++),"composite"===this.search_option[t].type&&this.$set(this.search_value,t+"sub",this.search_option[t].list[0].type);(e>0||"physical"===this.type)&&setTimeout(()=>{this.FnSearch()},500)}};Object(r["a"])([Object(l["c"])({default:{}})],n.prototype,"search_option",void 0),Object(r["a"])([Object(l["c"])({default:""})],n.prototype,"create_btn",void 0),Object(r["a"])([Object(l["c"])({default:!0})],n.prototype,"disabled",void 0),Object(r["a"])([Object(l["c"])({default:!1})],n.prototype,"type",void 0),Object(r["a"])([Object(l["c"])({default:!0})],n.prototype,"isShowBg",void 0),Object(r["a"])([Object(l["b"])("fn-search")],n.prototype,"FnSearch",null),Object(r["a"])([Object(l["f"])("search_option",{immediate:!0,deep:!0})],n.prototype,"watch_search_option",null),Object(r["a"])([Object(l["b"])("fn-operate")],n.prototype,"FnOperate",null),Object(r["a"])([Object(l["b"])("fn-create")],n.prototype,"FnShowCreate",null),Object(r["a"])([Object(l["f"])("search_value",{immediate:!0,deep:!0})],n.prototype,"watch_search_value",null),n=Object(r["a"])([Object(l["a"])({components:{DatePicker:o["a"]}})],n);var c=n,p=c,u=(a("4774"),a("26f3"),a("2877")),_=Object(u["a"])(p,s,i,!1,null,"20a86f62",null);t["a"]=_.exports},f33c:function(e,t,a){"use strict";var s=a("81a9"),i=a("bff7");t["a"]={get_disk_list(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/get_disk_list/",e))},get_disk_state(e){return Object(s["a"])(Object(i["b"])("GET","/ebs/disk_status/",e))},edit_disk_name(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/disk_name_update/",e))},edit_disk_attr(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/disk_property_update/ ",e))},mount(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/mount/",e))},unmount(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/unmount/",e))},del_disk(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/delete/",e))},recover(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/recover/",e))},destroy(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/destroy_disk/",e))},expansion(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/expansion/",e))},get_fee(e){return Object(s["a"])(Object(i["b"])("POST","/ecs/each_resource_price/",e))},open_bill(e){return Object(s["a"])(Object(i["b"])("POST","/resource/start_charge/",e))},get_product_source(e){return Object(s["a"])(Object(i["b"])("GET","/ebs/disk_product_source/",e))},change_iops_mbps(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/change_iops_mbps/",e))},iops_mbps_record(e){return Object(s["a"])(Object(i["b"])("POST","/ebs/iops_mbps_record/",e))},get_iops_mbps_limit(){return Object(s["a"])(Object(i["b"])("GET","/ebs/get_iops_mbps_limit/"))}}},f751:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("action-block",{attrs:{search_option:e.search_dom},on:{"fn-search":e.search}}),t("el-table",{attrs:{data:e.disk_record,border:""}},[t("el-table-column",{attrs:{prop:"create_time",label:"操作时间"}}),t("el-table-column",{attrs:{prop:"op_user",label:"操作人"}}),t("el-table-column",{attrs:{prop:"operation_type",label:"操作类型","min-width":"110px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s("change_iops"===a.row.operation_type?"修改云盘IOPS":"修改云盘吞吐量"))])]}}])}),t("el-table-column",{attrs:{prop:"customer_id",label:"客户ID"}}),t("el-table-column",{attrs:{prop:"customer_name",label:"客户名称"}}),t("el-table-column",{attrs:{prop:"disk_id",label:"云盘ID"}}),t("el-table-column",{attrs:{prop:"disk_name",label:"云盘名称"}}),t("el-table-column",{attrs:{prop:"status_name",label:"云盘状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{class:a.row.status},[e._v(e._s(a.row.status_name))])]}}])}),t("el-table-column",{attrs:{prop:"disk_iops",label:"修改前IOPS","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.disk_iops?`${a.row.disk_iops}${a.row.iops_unit}`:""))])]}}])}),t("el-table-column",{attrs:{prop:"disk_iops_after",label:"修改后IOPS","min-width":"90px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.disk_iops_after?`${a.row.disk_iops_after}${a.row.iops_unit}`:""))])]}}])}),t("el-table-column",{attrs:{prop:"band_mbps",label:"修改前吞吐量","min-width":"95px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.band_mbps?`${a.row.band_mbps}${a.row.mbps_unit}`:""))])]}}])}),t("el-table-column",{attrs:{prop:"band_mbps_after",label:"修改后吞吐量","min-width":"95px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.band_mbps_after?`${a.row.band_mbps_after}${a.row.mbps_unit}`:""))])]}}])}),t("el-table-column",{attrs:{prop:"change_reason",label:"修改原因"}}),t("el-table-column",{attrs:{prop:"az_name",label:"地域-可用区","min-width":"95px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.region_name)+"  "+e._s(a.row.az_name))])]}}])}),t("el-table-column",{attrs:{prop:"disk_type",label:"属性"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s("data"===a.row.disk_type?"数据盘":"系统盘"))])]}}])}),t("el-table-column",{attrs:{prop:"ecs_id",label:"实例ID"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("pre",[e._v(e._s(a.row.ecs_id?a.row.ecs_id:""))])]}}])}),t("el-table-column",{attrs:{prop:"dev_id",label:"dev_id"}}),t("el-table-column",{attrs:{prop:"dev_name",label:"dev_name"}}),t("el-table-column",{attrs:{prop:"cluster_name",label:"集群名称"}}),t("el-table-column",{attrs:{prop:"pool_name",label:"存储池名称","min-width":"100px"}})],1),t("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[20,50,100],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},i=[],r=a("9ab4"),l=a("1b40"),o=a("c811"),n=a("f33c");let c=class extends l["e"]{constructor(){super(...arguments),this.disk_record=[],this.current=1,this.size=20,this.total=0,this.req_data={},this.search_dom={disk_id:{placeholder:"请输入云盘ID"},ecs_id:{placeholder:"请输入实例ID"},customer_info:{placeholder:"请输入客户ID/名称"}}}created(){this.search()}search(e={}){this.current=1,this.req_data={...e},this.getRecordList()}handleSizeChange(e){this.size=e,this.getRecordList()}handleCurrentChange(e){this.current=e,this.getRecordList()}async getRecordList(){const{req_data:e}=this;let t=await n["a"].iops_mbps_record({az_id:this.$store.state.az_id,customer_info:e.customer_info||"",disk_id:e.disk_id||"",ecs_id:e.ecs_id||"",page_index:this.current,page_size:this.size});"Success"===t.code&&(this.disk_record=t.data.result||[],this.total=t.data.page_info.count||0)}};c=Object(r["a"])([Object(l["a"])({components:{ActionBlock:o["a"]}})],c);var p=c,u=p,_=a("2877"),d=Object(_["a"])(u,s,i,!1,null,"dcb9eae0",null);t["default"]=d.exports}}]);